I will provide you with a code snippet to reuse. You should adapt the snippet into a target code base according to the task requirement. Some related code context from the target code base is provided for reference.

### Reused Snippet:
{reused_snippet}

### Adaptation Task Requirement:
{task_requirement}

Please write out function after adaptation in the following section:

### Adapted Function:
