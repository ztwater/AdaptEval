{
    "items": [
        {
            "tags": [
                "python",
                "python-2.7",
                "mox"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 49419,
                        "reputation": 7610,
                        "user_id": 147129,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "GaretJax"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1327792608,
                    "post_id": 9008451,
                    "comment_id": 11354066,
                    "link": "https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module#comment11354066_9008451",
                    "body": "Could you add an example output of the magic calls (data structures)?"
                },
                {
                    "owner": {
                        "account_id": 93951,
                        "reputation": 57816,
                        "user_id": 256793,
                        "user_type": "registered",
                        "accept_rate": 85,
                        "display_name": "Nix"
                    },
                    "reply_to_user": {
                        "account_id": 49419,
                        "reputation": 7610,
                        "user_id": 147129,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "GaretJax"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1327794288,
                    "post_id": 9008451,
                    "comment_id": 11354345,
                    "link": "https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module#comment11354345_9008451",
                    "body": "sorry i missed this but i was just expecting the string  fully qualified module so something like a.b.c.module_name .  I was going to tokenize it.."
                },
                {
                    "owner": {
                        "account_id": 49419,
                        "reputation": 7610,
                        "user_id": 147129,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "GaretJax"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1327794380,
                    "post_id": 9008451,
                    "comment_id": 11354352,
                    "link": "https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module#comment11354352_9008451",
                    "body": "I hope my solution will work as well. You can always strip out the unnecessary pieces."
                },
                {
                    "owner": {
                        "account_id": 93951,
                        "reputation": 57816,
                        "user_id": 256793,
                        "user_type": "registered",
                        "accept_rate": 85,
                        "display_name": "Nix"
                    },
                    "reply_to_user": {
                        "account_id": 49419,
                        "reputation": 7610,
                        "user_id": 147129,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "GaretJax"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1327794515,
                    "post_id": 9008451,
                    "comment_id": 11354366,
                    "link": "https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module#comment11354366_9008451",
                    "body": "Yea, I can defiantly work with what you gave me."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 226344,
                                "reputation": 348761,
                                "user_id": 487339,
                                "user_type": "registered",
                                "display_name": "DSM"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1327793719,
                            "post_id": 9049549,
                            "comment_id": 11354253,
                            "link": "https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module/9049549#comment11354253_9049549",
                            "body": "Hmmph.  I beat you by 81 seconds but yours is prettier.  +1."
                        },
                        {
                            "owner": {
                                "account_id": 49419,
                                "reputation": 7610,
                                "user_id": 147129,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "GaretJax"
                            },
                            "reply_to_user": {
                                "account_id": 226344,
                                "reputation": 348761,
                                "user_id": 487339,
                                "user_type": "registered",
                                "display_name": "DSM"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1327793847,
                            "post_id": 9049549,
                            "comment_id": 11354277,
                            "link": "https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module/9049549#comment11354277_9049549",
                            "body": "Thanks! ;-) I was waiting for a reply from the OP and eventually gave up when I saw that you&#39;ve already replied\u2026 :-P"
                        },
                        {
                            "owner": {
                                "account_id": 1215172,
                                "reputation": 9274,
                                "user_id": 1182921,
                                "user_type": "registered",
                                "accept_rate": 69,
                                "display_name": "Tom Tanner"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1453202349,
                            "post_id": 9049549,
                            "comment_id": 57488675,
                            "link": "https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module/9049549#comment57488675_9049549",
                            "body": "You should use <code>ast.walk</code> if you have code that does this sort of thing:      if something:         import xxxx"
                        },
                        {
                            "owner": {
                                "account_id": 3890706,
                                "reputation": 10687,
                                "user_id": 3220983,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "BuvinJ"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1587325636,
                            "post_id": 9049549,
                            "comment_id": 108461905,
                            "link": "https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module/9049549#comment108461905_9049549",
                            "body": "Thankfully, <code>ast.walk</code> is a straight swap for <code>ast.iter_child_nodes</code> in this code.  Walk is recursive, iter_child_nodes is not, and will not drop down a single block level (never mind infinitely).  So, along with conditional imports, this is also an issue for code e.g. <code>try: import xxxx</code>.  Walk will report that import, iter_child_nodes will not."
                        },
                        {
                            "owner": {
                                "account_id": 18584487,
                                "reputation": 606,
                                "user_id": 13543225,
                                "user_type": "registered",
                                "display_name": "j7skov"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1686761591,
                            "post_id": 9049549,
                            "comment_id": 134844811,
                            "link": "https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module/9049549#comment134844811_9049549",
                            "body": "Any way to exclude the python standard library?"
                        }
                    ],
                    "owner": {
                        "account_id": 49419,
                        "reputation": 7610,
                        "user_id": 147129,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "GaretJax"
                    },
                    "comment_count": 5,
                    "is_accepted": true,
                    "score": 33,
                    "last_activity_date": 1327793903,
                    "last_edit_date": 1327793903,
                    "creation_date": 1327793447,
                    "answer_id": 9049549,
                    "question_id": 9008451,
                    "link": "https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module/9049549#9049549",
                    "body": "<p>Using the <a href=\"http://docs.python.org/library/ast.html\" rel=\"noreferrer\">AST</a> module, it is pretty easy:</p>\n\n<pre><code>import ast\nfrom collections import namedtuple\n\nImport = namedtuple(\"Import\", [\"module\", \"name\", \"alias\"])\n\ndef get_imports(path):\n    with open(path) as fh:        \n       root = ast.parse(fh.read(), path)\n\n    for node in ast.iter_child_nodes(root):\n        if isinstance(node, ast.Import):\n            module = []\n        elif isinstance(node, ast.ImportFrom):  \n            module = node.module.split('.')\n        else:\n            continue\n\n        for n in node.names:\n            yield Import(module, n.name.split('.'), n.asname)\n</code></pre>\n\n<p>For a module like this:</p>\n\n<pre><code>from coco import bunny\nfrom coco.bungy import carrot\nfrom meta import teta\nfrom rocket import spaceship as sp\nimport bingo\nimport com.stackoverflow\nimport motorbike as car\nimport module1, module2\n\ns=\"a random variable\"\n\ndef func():\n    \"\"\"And a function\"\"\"\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>&gt;&gt;&gt; for imp in get_imports(\"/path/to/file.py\"): print imp\nImport(module=['coco'], name=['bunny'], alias=None)\nImport(module=['coco', 'bungy'], name=['carrot'], alias=None)\nImport(module=['meta'], name=['teta'], alias=None)\nImport(module=['rocket'], name=['spaceship'], alias='sp')\nImport(module=[], name=['bingo'], alias=None)\nImport(module=[], name=['com', 'stackoverflow'], alias=None)\nImport(module=[], name=['motorbike'], alias='car')\nImport(module=[], name=['module1'], alias=None)\nImport(module=[], name=['module2'], alias=None)\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 93951,
                "reputation": 57816,
                "user_id": 256793,
                "user_type": "registered",
                "accept_rate": 85,
                "display_name": "Nix"
            },
            "comment_count": 4,
            "is_answered": true,
            "accepted_answer_id": 9049549,
            "answer_count": 1,
            "score": 12,
            "last_activity_date": 1327793903,
            "creation_date": 1327517516,
            "last_edit_date": 1327790505,
            "question_id": 9008451,
            "link": "https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module",
            "title": "Python easy way to read all import statements from py module",
            "body": "<p>I am trying to create a helper function to read a file and mock out all imports for a unit test.  I have to read the file vs import since i dont have those things on python path.</p>\n\n<p>Example code:</p>\n\n<hr>\n\n<pre><code>#module.py\nimport com.stackoverflow.question\nfrom com.stackoverflow.util import test_func\nfrom com.stackoverflow.util import TestClass\n</code></pre>\n\n<hr>\n\n<pre><code>#magic helper: what i want\nmagic = process('&lt;path_to&gt;/module.py')\nfor module in magic.modules_as_strings():\n    #todo  would have to recuirsively add each path\n    # so i would first create com, then com.stackoverflow, etc\n    setattr(self, module, StubModules(module)\nfor obj in magic.sink:\n    #these would be \"from\"  from x import Y\n    #its basically just creating self.Y = object\n    setattr(self, object)\n</code></pre>\n\n<p>Above is the mock code, I am really looking for the best way to just tokenize the file for \"from/import statements\"</p>\n\n<p>That make sense?  I know I could read the file line by line, but I was hoping for a cleaner/concise way.</p>\n\n<p>Let me know if you have any questions.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 8900
}