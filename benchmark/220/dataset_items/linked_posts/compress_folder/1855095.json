{
    "items": [
        {
            "tags": [
                "python",
                "zip",
                "archive",
                "python-zipfile"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 145453,
                        "reputation": 5183,
                        "user_id": 355274,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "malana"
                    },
                    "edited": false,
                    "score": 80,
                    "creation_date": 1539034799,
                    "post_id": 1855095,
                    "comment_id": 92347113,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory#comment92347113_1855095",
                    "body": "Don&#39;t use the solution suggested in the accepted answer but the one further down using <code>make_archive</code> from <code>shutil</code> (if you want to zip a single directory recursively)."
                },
                {
                    "owner": {
                        "account_id": 4497446,
                        "reputation": 3419,
                        "user_id": 3656912,
                        "user_type": "registered",
                        "accept_rate": 76,
                        "display_name": "Romeo Kienzler"
                    },
                    "reply_to_user": {
                        "account_id": 145453,
                        "reputation": 5183,
                        "user_id": 355274,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "malana"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1632147744,
                    "post_id": 1855095,
                    "comment_id": 122408220,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory#comment122408220_1855095",
                    "body": "yes, agree with @malana - Martha Yi seems to be unregistered - so is there now way to change the accepted answer through a community process?"
                },
                {
                    "owner": {
                        "account_id": 49072,
                        "reputation": 956,
                        "user_id": 145978,
                        "user_type": "registered",
                        "display_name": "LRE"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1638462119,
                    "post_id": 1855095,
                    "comment_id": 124100216,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory#comment124100216_1855095",
                    "body": "one caveat with <code>shutil.make_archive</code> - it doesn&#39;t seem to follow symlinks"
                },
                {
                    "owner": {
                        "account_id": 18874483,
                        "reputation": 325,
                        "user_id": 13768310,
                        "user_type": "registered",
                        "display_name": "Beefcake"
                    },
                    "edited": false,
                    "score": 2,
                    "creation_date": 1655398990,
                    "post_id": 1855095,
                    "comment_id": 128328713,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory#comment128328713_1855095",
                    "body": "The accepted answer is the only one that is actually thread safe in regards to read/write access while creating the zipfile from a directory since each file is opened individually, locking read access to it until the file is closed."
                },
                {
                    "owner": {
                        "account_id": 351545,
                        "reputation": 4410,
                        "user_id": 688080,
                        "user_type": "registered",
                        "accept_rate": 74,
                        "display_name": "Ziyuan"
                    },
                    "reply_to_user": {
                        "account_id": 18874483,
                        "reputation": 325,
                        "user_id": 13768310,
                        "user_type": "registered",
                        "display_name": "Beefcake"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1711754205,
                    "post_id": 1855095,
                    "comment_id": 137946527,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory#comment137946527_1855095",
                    "body": "@Beefcake It says in <code>make_archive</code>&#39;s documentation that &quot;<i>Changed in version 3.10.6</i>: This function is now made thread-safe during creation of standard <code>.zip</code> and tar archives.&quot;"
                }
            ],
            "answers": [
                {
                    "owner": {
                        "account_id": 77039,
                        "reputation": 15425,
                        "user_id": 220155,
                        "user_type": "registered",
                        "accept_rate": 79,
                        "display_name": "me_and"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1270657931,
                    "last_edit_date": 1270657931,
                    "creation_date": 1260098270,
                    "answer_id": 1855108,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855108#1855108",
                    "body": "<p>You probably want to look at the <code>zipfile</code> module; there's documentation at <a href=\"http://docs.python.org/library/zipfile.html\" rel=\"nofollow noreferrer\">http://docs.python.org/library/zipfile.html</a>.</p>\n\n<p>You may also want <code>os.walk()</code> to index the directory structure.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 111606,
                                "reputation": 2366,
                                "user_id": 294743,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "Reimund"
                            },
                            "edited": false,
                            "score": 150,
                            "creation_date": 1372516502,
                            "post_id": 1855118,
                            "comment_id": 25230787,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment25230787_1855118",
                            "body": "I would add a second argument to the write call, passing <code>os.path.relpath(os.path.join(root, file), os.path.join(path, &#39;..&#39;))</code>. That would let you zip a directory from any working directory, without getting the full absolute paths in the archive."
                        },
                        {
                            "owner": {
                                "account_id": 2411855,
                                "reputation": 19885,
                                "user_id": 2106753,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "Sibbs Gambling"
                            },
                            "edited": false,
                            "score": 13,
                            "creation_date": 1490242950,
                            "post_id": 1855118,
                            "comment_id": 73027965,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment73027965_1855118",
                            "body": "There&#39;s a funny recursion going on when I try to zip a folder and output the resultant zip to the same folder. :-)"
                        },
                        {
                            "owner": {
                                "account_id": 1657102,
                                "reputation": 597,
                                "user_id": 1526342,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "droidlabour"
                            },
                            "edited": false,
                            "score": 39,
                            "creation_date": 1496168643,
                            "post_id": 1855118,
                            "comment_id": 75546671,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment75546671_1855118",
                            "body": "<code>shutil</code> makes it really easy in just a single line. Please check the answer below.."
                        },
                        {
                            "owner": {
                                "account_id": 1681410,
                                "reputation": 1810,
                                "user_id": 1545567,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "Christophe Blin"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1497426154,
                            "post_id": 1855118,
                            "comment_id": 76067701,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment76067701_1855118",
                            "body": "you may be more interested by doing ziph.write(os.path.join(path,file), arcname=file) so that the filenames inside the archive are not relative to the hard drive"
                        },
                        {
                            "owner": {
                                "account_id": 8532809,
                                "reputation": 2858,
                                "user_id": 6395770,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "information_interchange"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1516653489,
                            "post_id": 1855118,
                            "comment_id": 83767475,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment83767475_1855118",
                            "body": "I am getting &quot;The compressed (zipped) folder is empty&quot; on Windows 7"
                        },
                        {
                            "owner": {
                                "account_id": 8532809,
                                "reputation": 2858,
                                "user_id": 6395770,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "information_interchange"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1516655063,
                            "post_id": 1855118,
                            "comment_id": 83768261,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment83768261_1855118",
                            "body": "Ah, I was missing the <code>.close()</code> call!"
                        },
                        {
                            "owner": {
                                "account_id": 36018,
                                "reputation": 96689,
                                "user_id": 102441,
                                "user_type": "registered",
                                "accept_rate": 76,
                                "display_name": "Eric"
                            },
                            "reply_to_user": {
                                "account_id": 2086309,
                                "reputation": 1023,
                                "user_id": 2358818,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "RoachLord"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1541179074,
                            "post_id": 1855118,
                            "comment_id": 93140932,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment93140932_1855118",
                            "body": "@RoachLord: <code>file</code> is not a keyword, even if your editor highlights it as one."
                        },
                        {
                            "owner": {
                                "account_id": 9010244,
                                "reputation": 181,
                                "user_id": 6715182,
                                "user_type": "registered",
                                "display_name": "AndB"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1605093071,
                            "post_id": 1855118,
                            "comment_id": 114544764,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment114544764_1855118",
                            "body": "May also be used with a context manager:  <code>with zipfile.ZipFile(&#39;Python.zip&#39;, &#39;w&#39;, zipfile.ZIP_DEFLATED) as zipf:     zipdir(&#39;tmp&#47;&#39;, zipfh)</code>"
                        },
                        {
                            "owner": {
                                "account_id": 6009424,
                                "reputation": 1174,
                                "user_id": 4720292,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "Pierre"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1616073647,
                            "post_id": 1855118,
                            "comment_id": 117892850,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment117892850_1855118",
                            "body": "The next answer if more straightforward, and should have been accepted"
                        },
                        {
                            "owner": {
                                "account_id": 19611672,
                                "reputation": 101,
                                "user_id": 14354061,
                                "user_type": "registered",
                                "display_name": "icatalan"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1618571570,
                            "post_id": 1855118,
                            "comment_id": 118647710,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment118647710_1855118",
                            "body": "What is <code>ziph</code> in this function? <code>path</code> is the directory. What if I have a directory containing other sub-directories? I added a question related to this. <a href=\"https://stackoverflow.com/questions/67119676/zip-file-with-different-directories-and-files-python?noredirect=1#comment118642041_67119676\" title=\"zip file with different directories and files python\">stackoverflow.com/questions/67119676/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 243120,
                                "reputation": 3750,
                                "user_id": 515093,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Jos&#233; L. Pati&#241;o"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1626019981,
                            "post_id": 1855118,
                            "comment_id": 120776204,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment120776204_1855118",
                            "body": "The next answer does not handle anything related to compression, it just stores the results in a ZIP archive. If you are looking for actual compression, the correct answer is this one and not the next with <code>shutil</code>."
                        },
                        {
                            "owner": {
                                "account_id": 12866441,
                                "reputation": 114,
                                "user_id": 9306567,
                                "user_type": "registered",
                                "display_name": "Tanner Davis"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1626210517,
                            "post_id": 1855118,
                            "comment_id": 120831502,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment120831502_1855118",
                            "body": "I want to add that this option lets you make a zip archive with any file extension. i.e. <code>zipfile.ZipFile(&#39;Python.meta_zip&#39;, &#39;w&#39;)</code> At my work we have to group a metadata dir with files in it and the file they are associated with together. We don&#39;t need compression, we just want to easily have them all in one location when we upload them to the cloud."
                        },
                        {
                            "owner": {
                                "account_id": 10243605,
                                "reputation": 298,
                                "user_id": 7560156,
                                "user_type": "registered",
                                "display_name": "Allen Ellis"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1628645998,
                            "post_id": 1855118,
                            "comment_id": 121474503,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment121474503_1855118",
                            "body": "This answer creates a zip containing the directory. How would you change it so that the <i>contents</i> of the directory are added, rather than the directory itself?"
                        },
                        {
                            "owner": {
                                "account_id": 1811407,
                                "reputation": 712,
                                "user_id": 1647394,
                                "user_type": "registered",
                                "display_name": "Illegal Operator"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1635519353,
                            "post_id": 1855118,
                            "comment_id": 123328290,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment123328290_1855118",
                            "body": "Explaining with examples is the only way to explain properly, thanks :)"
                        },
                        {
                            "owner": {
                                "account_id": 8885001,
                                "reputation": 186,
                                "user_id": 6633526,
                                "user_type": "registered",
                                "display_name": "Prince"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1650554512,
                            "post_id": 1855118,
                            "comment_id": 127150699,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment127150699_1855118",
                            "body": "Using the <code>arcname</code> parameter of the write function will solve the issue where the entire directory branch is getting zipped rather than just the contents."
                        },
                        {
                            "owner": {
                                "account_id": 2047069,
                                "reputation": 495,
                                "user_id": 1826930,
                                "user_type": "registered",
                                "display_name": "Shaked"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1685611580,
                            "post_id": 1855118,
                            "comment_id": 134685445,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment134685445_1855118",
                            "body": "This will not write empty directories to the zip file. To fix this you can also write the <code>root</code> in every <code>os.walk</code> iteration."
                        },
                        {
                            "owner": {
                                "account_id": 20867421,
                                "reputation": 103,
                                "user_id": 15328137,
                                "user_type": "registered",
                                "display_name": "Sajjad Ali"
                            },
                            "reply_to_user": {
                                "account_id": 8885001,
                                "reputation": 186,
                                "user_id": 6633526,
                                "user_type": "registered",
                                "display_name": "Prince"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1686168593,
                            "post_id": 1855118,
                            "comment_id": 134763928,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment134763928_1855118",
                            "body": "@Prince and @Shaked do u have an example which accomplish these tasks i.e. writing empty directories and contents of the directory. because i am confused what should we assign to <code>arcname</code>"
                        },
                        {
                            "owner": {
                                "account_id": 20867421,
                                "reputation": 103,
                                "user_id": 15328137,
                                "user_type": "registered",
                                "display_name": "Sajjad Ali"
                            },
                            "reply_to_user": {
                                "account_id": 2047069,
                                "reputation": 495,
                                "user_id": 1826930,
                                "user_type": "registered",
                                "display_name": "Shaked"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1686172552,
                            "post_id": 1855118,
                            "comment_id": 134764615,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment134764615_1855118",
                            "body": "ok the second argument in <code>ziph.write</code> should be modified to <code>os.path.relpath(os.path.join(root, file), path)</code> to add the contents of the directory not the entire directory. the only thing remaining is how to write empty directories. @Shaked do u have an example which shows to add empy directories"
                        },
                        {
                            "owner": {
                                "account_id": 2047069,
                                "reputation": 495,
                                "user_id": 1826930,
                                "user_type": "registered",
                                "display_name": "Shaked"
                            },
                            "reply_to_user": {
                                "account_id": 20867421,
                                "reputation": 103,
                                "user_id": 15328137,
                                "user_type": "registered",
                                "display_name": "Sajjad Ali"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1687875131,
                            "post_id": 1855118,
                            "comment_id": 134996059,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#comment134996059_1855118",
                            "body": "@SajjadAli os.mkdir()"
                        }
                    ],
                    "owner": {
                        "account_id": 24377,
                        "reputation": 826115,
                        "user_id": 61974,
                        "user_type": "registered",
                        "display_name": "Mark Byers"
                    },
                    "comment_count": 19,
                    "is_accepted": true,
                    "score": 720,
                    "last_activity_date": 1647602152,
                    "last_edit_date": 1647602152,
                    "creation_date": 1260098635,
                    "answer_id": 1855118,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855118#1855118",
                    "body": "<p>As others have pointed out, you should use <a href=\"http://docs.python.org/library/zipfile.html\" rel=\"noreferrer\">zipfile</a>. The documentation tells you what functions are available, but doesn't really explain how you can use them to zip an entire directory. I think it's easiest to explain with some example code:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import os\nimport zipfile\n    \ndef zipdir(path, ziph):\n    # ziph is zipfile handle\n    for root, dirs, files in os.walk(path):\n        for file in files:\n            ziph.write(os.path.join(root, file), \n                       os.path.relpath(os.path.join(root, file), \n                                       os.path.join(path, '..')))\n\nwith zipfile.ZipFile('Python.zip', 'w', zipfile.ZIP_DEFLATED) as zipf:\n    zipdir('tmp/', zipf)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 5931654,
                                "reputation": 3515,
                                "user_id": 4705929,
                                "user_type": "registered",
                                "display_name": "Nishad Up"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1503492100,
                            "post_id": 1855122,
                            "comment_id": 78637317,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855122#comment78637317_1855122",
                            "body": "For me this code throwing below error    TypeError: invalid file: &lt;zipfile.ZipFile [closed]&gt;"
                        },
                        {
                            "owner": {
                                "account_id": 485360,
                                "reputation": 21051,
                                "user_id": 901641,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "ArtOfWarfare"
                            },
                            "edited": false,
                            "score": 23,
                            "creation_date": 1515775035,
                            "post_id": 1855122,
                            "comment_id": 83443005,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855122#comment83443005_1855122",
                            "body": "Can&#39;t you use a <code>with</code> instead of having to call <code>close()</code> yourself at the end?"
                        },
                        {
                            "owner": {
                                "account_id": 2810335,
                                "reputation": 170,
                                "user_id": 2416688,
                                "user_type": "registered",
                                "display_name": "Subramanya Rao"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1612265411,
                            "post_id": 1855122,
                            "comment_id": 116706991,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855122#comment116706991_1855122",
                            "body": "example:  ` with zipfile.ZipFile(&quot;myzipfile.zip&quot;, &quot;w&quot;) as zf: pass `"
                        },
                        {
                            "owner": {
                                "account_id": 12842463,
                                "reputation": 716,
                                "user_id": 9290070,
                                "user_type": "registered",
                                "display_name": "Maile Cupo"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1635913459,
                            "post_id": 1855122,
                            "comment_id": 123416464,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855122#comment123416464_1855122",
                            "body": "This rebuilds the full path to &quot;mydirectory&quot; within the resulting zipfile. i.e. only works as desired if &quot;mydirectory&quot; is in root of your filesystem"
                        },
                        {
                            "owner": {
                                "account_id": 8885001,
                                "reputation": 186,
                                "user_id": 6633526,
                                "user_type": "registered",
                                "display_name": "Prince"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1650554528,
                            "post_id": 1855122,
                            "comment_id": 127150703,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855122#comment127150703_1855122",
                            "body": "Using the <code>arcname</code> parameter of the write function will solve the issue where the entire directory branch is getting zipped rather than just the contents."
                        }
                    ],
                    "owner": {
                        "account_id": 64005,
                        "reputation": 123339,
                        "user_id": 189179,
                        "user_type": "registered",
                        "display_name": "Ben James"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 90,
                    "last_activity_date": 1260099392,
                    "last_edit_date": 1260099392,
                    "creation_date": 1260098904,
                    "answer_id": 1855122,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/1855122#1855122",
                    "body": "<p>To add the contents of <code>mydirectory</code> to a new zip file, including all files and subdirectories:</p>\n\n<pre><code>import os\nimport zipfile\n\nzf = zipfile.ZipFile(\"myzipfile.zip\", \"w\")\nfor dirname, subdirs, files in os.walk(\"mydirectory\"):\n    zf.write(dirname)\n    for filename in files:\n        zf.write(os.path.join(dirname, filename))\nzf.close()\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1755760,
                        "reputation": 147,
                        "user_id": 1603862,
                        "user_type": "registered",
                        "display_name": "E Smith"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 13,
                    "last_activity_date": 1413795421,
                    "last_edit_date": 1413795421,
                    "creation_date": 1367082842,
                    "answer_id": 16254846,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/16254846#16254846",
                    "body": "<p>For adding compression to the resulting zip file, check out <a href=\"http://neopatel.blogspot.ca/2010/07/creating-zip-file-in-python-and.html\" rel=\"noreferrer\">this link</a>.</p>\n\n<p>You need to change:</p>\n\n<pre><code>zip = zipfile.ZipFile('Python.zip', 'w')\n</code></pre>\n\n<p>to </p>\n\n<pre><code>zip = zipfile.ZipFile('Python.zip', 'w', zipfile.ZIP_DEFLATED)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 4275,
                                "reputation": 16133,
                                "user_id": 6364,
                                "user_type": "registered",
                                "accept_rate": 25,
                                "display_name": "George V. Reilly"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1371146942,
                            "post_id": 17020687,
                            "comment_id": 24727028,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/17020687#comment24727028_17020687",
                            "body": "The path handling could be greatly simplified by using <a href=\"http://doughellmann.com/2008/01/pymotw-os-path.html\" rel=\"nofollow noreferrer\">os.path</a>. See my answer."
                        },
                        {
                            "owner": {
                                "account_id": 40137,
                                "reputation": 38014,
                                "user_id": 116186,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "Petter"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1409390207,
                            "post_id": 17020687,
                            "comment_id": 39953753,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/17020687#comment39953753_17020687",
                            "body": "Bug: zipHandle.write(os.path.join(root, &quot;.&quot;)) does not take basePath into consideration."
                        },
                        {
                            "owner": {
                                "account_id": 132543,
                                "reputation": 9685,
                                "user_id": 333296,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "Nux"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1409421623,
                            "post_id": 17020687,
                            "comment_id": 39961694,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/17020687#comment39961694_17020687",
                            "body": "Yes, you&#39;re probably right. I&#39;ve later enhnaced this a bit ;-) <a href=\"https://gist.github.com/Eccenux/17526123107ca0ac28e6\" rel=\"nofollow noreferrer\">gist.github.com/Eccenux/17526123107ca0ac28e6</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 132543,
                        "reputation": 9685,
                        "user_id": 333296,
                        "user_type": "registered",
                        "accept_rate": 68,
                        "display_name": "Nux"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1410186765,
                    "last_edit_date": 1495541443,
                    "creation_date": 1370856506,
                    "answer_id": 17020687,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/17020687#17020687",
                    "body": "<p>I've made some changes to <a href=\"https://stackoverflow.com/a/1855118\">code given by Mark Byers</a>. Below function will also adds empty directories if you have them. Examples should make it more clear what is the path added to the zip.</p>\n\n<pre><code>#!/usr/bin/env python\nimport os\nimport zipfile\n\ndef addDirToZip(zipHandle, path, basePath=\"\"):\n    \"\"\"\n    Adding directory given by \\a path to opened zip file \\a zipHandle\n\n    @param basePath path that will be removed from \\a path when adding to archive\n\n    Examples:\n        # add whole \"dir\" to \"test.zip\" (when you open \"test.zip\" you will see only \"dir\")\n        zipHandle = zipfile.ZipFile('test.zip', 'w')\n        addDirToZip(zipHandle, 'dir')\n        zipHandle.close()\n\n        # add contents of \"dir\" to \"test.zip\" (when you open \"test.zip\" you will see only it's contents)\n        zipHandle = zipfile.ZipFile('test.zip', 'w')\n        addDirToZip(zipHandle, 'dir', 'dir')\n        zipHandle.close()\n\n        # add contents of \"dir/subdir\" to \"test.zip\" (when you open \"test.zip\" you will see only contents of \"subdir\")\n        zipHandle = zipfile.ZipFile('test.zip', 'w')\n        addDirToZip(zipHandle, 'dir/subdir', 'dir/subdir')\n        zipHandle.close()\n\n        # add whole \"dir/subdir\" to \"test.zip\" (when you open \"test.zip\" you will see only \"subdir\")\n        zipHandle = zipfile.ZipFile('test.zip', 'w')\n        addDirToZip(zipHandle, 'dir/subdir', 'dir')\n        zipHandle.close()\n\n        # add whole \"dir/subdir\" with full path to \"test.zip\" (when you open \"test.zip\" you will see only \"dir\" and inside it only \"subdir\")\n        zipHandle = zipfile.ZipFile('test.zip', 'w')\n        addDirToZip(zipHandle, 'dir/subdir')\n        zipHandle.close()\n\n        # add whole \"dir\" and \"otherDir\" (with full path) to \"test.zip\" (when you open \"test.zip\" you will see only \"dir\" and \"otherDir\")\n        zipHandle = zipfile.ZipFile('test.zip', 'w')\n        addDirToZip(zipHandle, 'dir')\n        addDirToZip(zipHandle, 'otherDir')\n        zipHandle.close()\n    \"\"\"\n    basePath = basePath.rstrip(\"\\\\/\") + \"\"\n    basePath = basePath.rstrip(\"\\\\/\")\n    for root, dirs, files in os.walk(path):\n        # add dir itself (needed for empty dirs\n        zipHandle.write(os.path.join(root, \".\"))\n        # add files\n        for file in files:\n            filePath = os.path.join(root, file)\n            inZipPath = filePath.replace(basePath, \"\", 1).lstrip(\"\\\\/\")\n            #print filePath + \" , \" + inZipPath\n            zipHandle.write(filePath, inZipPath)\n</code></pre>\n\n<p>Above is a simple function that should work for simple cases. You can find more elegant class in my Gist:\n<a href=\"https://gist.github.com/Eccenux/17526123107ca0ac28e6\" rel=\"noreferrer\">https://gist.github.com/Eccenux/17526123107ca0ac28e6</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 8253722,
                                "reputation": 601,
                                "user_id": 6677806,
                                "user_type": "registered",
                                "display_name": "Mitms"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1637049774,
                            "post_id": 17080988,
                            "comment_id": 123714688,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/17080988#comment123714688_17080988",
                            "body": "Sweet, I was wondering if <code>zipfile</code> could be used in a <code>with</code> statement. Thanks for pointing out it can."
                        }
                    ],
                    "owner": {
                        "account_id": 4275,
                        "reputation": 16133,
                        "user_id": 6364,
                        "user_type": "registered",
                        "accept_rate": 25,
                        "display_name": "George V. Reilly"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 45,
                    "last_activity_date": 1524065898,
                    "last_edit_date": 1524065898,
                    "creation_date": 1371106623,
                    "answer_id": 17080988,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/17080988#17080988",
                    "body": "<p>This function will recursively zip up a directory tree, <em>compressing</em> the files, and recording the correct relative filenames in the archive. The archive entries are the same as those generated by <code>zip -r output.zip source_dir</code>.</p>\n\n<pre><code>import os\nimport zipfile\ndef make_zipfile(output_filename, source_dir):\n    relroot = os.path.abspath(os.path.join(source_dir, os.pardir))\n    with zipfile.ZipFile(output_filename, \"w\", zipfile.ZIP_DEFLATED) as zip:\n        for root, dirs, files in os.walk(source_dir):\n            # add directory (needed for empty dirs)\n            zip.write(root, os.path.relpath(root, relroot))\n            for file in files:\n                filename = os.path.join(root, file)\n                if os.path.isfile(filename): # regular files only\n                    arcname = os.path.join(os.path.relpath(root, relroot), file)\n                    zip.write(filename, arcname)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 162898,
                        "reputation": 5286,
                        "user_id": 384670,
                        "user_type": "registered",
                        "accept_rate": 48,
                        "display_name": "M Katz"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1406762000,
                    "creation_date": 1406762000,
                    "answer_id": 25048491,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25048491#25048491",
                    "body": "<p>Here is a variation on the answer given by Nux that works for me:</p>\n\n<pre><code>def WriteDirectoryToZipFile( zipHandle, srcPath, zipLocalPath = \"\", zipOperation = zipfile.ZIP_DEFLATED ):\n    basePath = os.path.split( srcPath )[ 0 ]\n    for root, dirs, files in os.walk( srcPath ):\n        p = os.path.join( zipLocalPath, root [ ( len( basePath ) + 1 ) : ] )\n        # add dir\n        zipHandle.write( root, p, zipOperation )\n        # add files\n        for f in files:\n            filePath = os.path.join( root, f )\n            fileInZipPath = os.path.join( p, f )\n            zipHandle.write( filePath, fileInZipPath, zipOperation )\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 4297033,
                                "reputation": 12585,
                                "user_id": 3511819,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "Alex"
                            },
                            "edited": false,
                            "score": 290,
                            "creation_date": 1493407199,
                            "post_id": 25650295,
                            "comment_id": 74420978,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment74420978_25650295",
                            "body": "<code>shutil</code> is part of the standard python library. This should be the top answer"
                        },
                        {
                            "owner": {
                                "account_id": 7039982,
                                "reputation": 303,
                                "user_id": 5392756,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "aitch-hat"
                            },
                            "edited": false,
                            "score": 12,
                            "creation_date": 1498118735,
                            "post_id": 25650295,
                            "comment_id": 76370348,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment76370348_25650295",
                            "body": "This is the most concise answer here and also has the advantage of adding all subdirectories and files to the archive directly, rather than having everything included in a top-level folder (which results in a redundant level in the folder structure when unzipping)."
                        },
                        {
                            "owner": {
                                "account_id": 1122707,
                                "reputation": 3942,
                                "user_id": 1110687,
                                "user_type": "registered",
                                "accept_rate": 54,
                                "display_name": "std&#39;&#39;OrgnlDave"
                            },
                            "reply_to_user": {
                                "account_id": 25114,
                                "reputation": 115357,
                                "user_id": 64313,
                                "user_type": "registered",
                                "accept_rate": 64,
                                "display_name": "cmcginty"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1509835779,
                            "post_id": 25650295,
                            "comment_id": 81182744,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment81182744_25650295",
                            "body": "@cmcginty could you please be a bit more specific as to what aspect of it is not thread-safe? Will running multiple threads while one calls this cause the interpreter to crash?"
                        },
                        {
                            "owner": {
                                "account_id": 25114,
                                "reputation": 115357,
                                "user_id": 64313,
                                "user_type": "registered",
                                "accept_rate": 64,
                                "display_name": "cmcginty"
                            },
                            "reply_to_user": {
                                "account_id": 1122707,
                                "reputation": 3942,
                                "user_id": 1110687,
                                "user_type": "registered",
                                "accept_rate": 54,
                                "display_name": "std&#39;&#39;OrgnlDave"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1509955026,
                            "post_id": 25650295,
                            "comment_id": 81213811,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment81213811_25650295",
                            "body": "@std&#39;&#39;OrgnlDave No, it will not crash. The issue I&#39;ve seen is that files from different threads will be copied into the same zip file. See <a href=\"https://bugs.python.org/issue30511\" rel=\"nofollow noreferrer\">bugs.python.org/issue30511</a>"
                        },
                        {
                            "owner": {
                                "account_id": 66339,
                                "reputation": 12362,
                                "user_id": 194674,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "dvs"
                            },
                            "edited": false,
                            "score": 25,
                            "creation_date": 1516318959,
                            "post_id": 25650295,
                            "comment_id": 83649868,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment83649868_25650295",
                            "body": "Be warned that prior to Python 3.4, shutil.make_archive does not support ZIP64 and will fail on creating ZIP files larger than 2GB."
                        },
                        {
                            "owner": {
                                "account_id": 82649,
                                "reputation": 12889,
                                "user_id": 232220,
                                "user_type": "registered",
                                "accept_rate": 74,
                                "display_name": "Teekin"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1527283833,
                            "post_id": 25650295,
                            "comment_id": 88086225,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment88086225_25650295",
                            "body": "Even though it&#39;s not thread-safe, it should still be safe if being used by different threads in different directories, right?"
                        },
                        {
                            "owner": {
                                "account_id": 5322137,
                                "reputation": 3675,
                                "user_id": 4245294,
                                "user_type": "registered",
                                "accept_rate": 89,
                                "display_name": "Sam Malayek"
                            },
                            "reply_to_user": {
                                "account_id": 82649,
                                "reputation": 12889,
                                "user_id": 232220,
                                "user_type": "registered",
                                "accept_rate": 74,
                                "display_name": "Teekin"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1532478979,
                            "post_id": 25650295,
                            "comment_id": 89987659,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment89987659_25650295",
                            "body": "@Teekin No. If you look at the bugs report (bugs.python.org/issue30511), you&#39;ll see that <code>shutil.make_archive</code> uses <code>os.chdir()</code>. From what I&#39;m reading about <code>os.chdir()</code>, it operates globally."
                        },
                        {
                            "owner": {
                                "account_id": 10116534,
                                "reputation": 269,
                                "user_id": 8129993,
                                "user_type": "registered",
                                "display_name": "Jane"
                            },
                            "reply_to_user": {
                                "account_id": 66339,
                                "reputation": 12362,
                                "user_id": 194674,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "dvs"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1535965723,
                            "post_id": 25650295,
                            "comment_id": 91242751,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment91242751_25650295",
                            "body": "@azdev, what is the solution for shutil.make_archive for files more than 2GB? I had this error("
                        },
                        {
                            "owner": {
                                "account_id": 66339,
                                "reputation": 12362,
                                "user_id": 194674,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "dvs"
                            },
                            "reply_to_user": {
                                "account_id": 10116534,
                                "reputation": 269,
                                "user_id": 8129993,
                                "user_type": "registered",
                                "display_name": "Jane"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1536065800,
                            "post_id": 25650295,
                            "comment_id": 91283384,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment91283384_25650295",
                            "body": "@Jane See the accepted answer or one of the other answers on this page that uses the zipfile library instead of shutil."
                        },
                        {
                            "owner": {
                                "account_id": 11160839,
                                "reputation": 538,
                                "user_id": 8191028,
                                "user_type": "registered",
                                "display_name": "Tedo Vrbanec"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1539557658,
                            "post_id": 25650295,
                            "comment_id": 92533681,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment92533681_25650295",
                            "body": "shutil is very, very slow. So, for it is not good option for dirs with large files."
                        },
                        {
                            "owner": {
                                "account_id": 9696763,
                                "reputation": 736,
                                "user_id": 7192927,
                                "user_type": "registered",
                                "display_name": "Sukanya Pai"
                            },
                            "reply_to_user": {
                                "account_id": 66339,
                                "reputation": 12362,
                                "user_id": 194674,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "dvs"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1579249686,
                            "post_id": 25650295,
                            "comment_id": 105710574,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment105710574_25650295",
                            "body": "@azdev For python version 3.6 to 3.7 does shutil work safely for files larger than 2GB?"
                        },
                        {
                            "owner": {
                                "account_id": 2105962,
                                "reputation": 649,
                                "user_id": 1872286,
                                "user_type": "registered",
                                "accept_rate": 0,
                                "display_name": "SwissNavy"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1586949395,
                            "post_id": 25650295,
                            "comment_id": 108315213,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment108315213_25650295",
                            "body": "If I want to zip a directory instead of the content of directory - is there an option for that? Aslo: can&#39;t find what&#39;s the equivalent of --remove-files?"
                        },
                        {
                            "owner": {
                                "account_id": 12793519,
                                "reputation": 989,
                                "user_id": 9257294,
                                "user_type": "registered",
                                "display_name": "mckbrd"
                            },
                            "reply_to_user": {
                                "account_id": 2105962,
                                "reputation": 649,
                                "user_id": 1872286,
                                "user_type": "registered",
                                "accept_rate": 0,
                                "display_name": "SwissNavy"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1593165931,
                            "post_id": 25650295,
                            "comment_id": 110690689,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment110690689_25650295",
                            "body": "@SwissNavy see <code>base_dir</code> option"
                        },
                        {
                            "owner": {
                                "account_id": 2852304,
                                "reputation": 276,
                                "user_id": 2449241,
                                "user_type": "registered",
                                "display_name": "KiDo"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1604746635,
                            "post_id": 25650295,
                            "comment_id": 114444874,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment114444874_25650295",
                            "body": "I&#39;m trying to automate zipping my work directory which is ~200MB as daily backup, this code kept working and made +84GB and threw an error because my work PC ran out of storage!"
                        },
                        {
                            "owner": {
                                "account_id": 2402196,
                                "reputation": 14153,
                                "user_id": 2111778,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "xjcl"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1614614242,
                            "post_id": 25650295,
                            "comment_id": 117432015,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment117432015_25650295",
                            "body": "Note this is NOT threadsafe! This does an explicit <code>os.chdir</code> which can lead to the wrong directory getting zipped. This led to my zips being gigantic and my disk running out of space."
                        },
                        {
                            "owner": {
                                "account_id": 464946,
                                "reputation": 1809,
                                "user_id": 868736,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "pangyuteng"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1614860065,
                            "post_id": 25650295,
                            "comment_id": 117517134,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment117517134_25650295",
                            "body": "for an actual example using both root_dir and base_dir, see: <a href=\"https://docs.python.org/3/library/shutil.html#shutil-archiving-example-with-basedir\" rel=\"nofollow noreferrer\">docs.python.org/3/library/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 9187863,
                                "reputation": 378,
                                "user_id": 6829370,
                                "user_type": "registered",
                                "accept_rate": 29,
                                "display_name": "Shubham_geo"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1615383440,
                            "post_id": 25650295,
                            "comment_id": 117673169,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment117673169_25650295",
                            "body": "This is not safe,this fails for directories with huge files."
                        },
                        {
                            "owner": {
                                "account_id": 243120,
                                "reputation": 3750,
                                "user_id": 515093,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Jos&#233; L. Pati&#241;o"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1626020092,
                            "post_id": 25650295,
                            "comment_id": 120776239,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment120776239_25650295",
                            "body": "This answer is not correct. It doesn&#39;t compress anything, plus is slower. the accepted answer is correct and should be the reference."
                        },
                        {
                            "owner": {
                                "account_id": 6404724,
                                "reputation": 1327,
                                "user_id": 4966342,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "Drew"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1633459576,
                            "post_id": 25650295,
                            "comment_id": 122764184,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment122764184_25650295",
                            "body": "Does anyone know how to get files referenced by a symlink to copy into the zip archive? When I unzip the created archive a directory for the symlink files is there but the directory is empty."
                        },
                        {
                            "owner": {
                                "user_type": "does_not_exist",
                                "display_name": "user19773037"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1678374958,
                            "post_id": 25650295,
                            "comment_id": 133523529,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment133523529_25650295",
                            "body": "can we get to 2023?"
                        },
                        {
                            "owner": {
                                "account_id": 7185720,
                                "reputation": 450,
                                "user_id": 5735084,
                                "user_type": "registered",
                                "display_name": "Joshua Jurgensmeier"
                            },
                            "reply_to_user": {
                                "account_id": 2402196,
                                "reputation": 14153,
                                "user_id": 2111778,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "xjcl"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1700510903,
                            "post_id": 25650295,
                            "comment_id": 136661264,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#comment136661264_25650295",
                            "body": "@xjcl Looks like this is thread-safe now for normal use. From the docs: <code>Changed in version 3.10.6: This function is now made thread-safe during creation of standard .zip and tar archives.</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 4745305,
                        "reputation": 21775,
                        "user_id": 3836815,
                        "user_type": "registered",
                        "display_name": "crdavis"
                    },
                    "comment_count": 21,
                    "is_accepted": false,
                    "score": 2164,
                    "last_activity_date": 1552316482,
                    "last_edit_date": 1552316482,
                    "creation_date": 1409765201,
                    "answer_id": 25650295,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/25650295#25650295",
                    "body": "<p>The easiest way is to use <a href=\"https://docs.python.org/3/library/shutil.html#shutil.make_archive\" rel=\"noreferrer\"><code>shutil.make_archive</code></a>. It supports both zip and tar formats.</p>\n\n<pre><code>import shutil\nshutil.make_archive(output_filename, 'zip', dir_name)\n</code></pre>\n\n<p>If you need to do something more complicated than zipping the whole directory (such as skipping certain files), then you'll need to dig into the <a href=\"https://docs.python.org/3/library/zipfile.html\" rel=\"noreferrer\"><code>zipfile</code></a> module as others have suggested.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 5818454,
                        "reputation": 111,
                        "user_id": 4587251,
                        "user_type": "registered",
                        "accept_rate": 38,
                        "display_name": "Chandra"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1429787896,
                    "creation_date": 1429787896,
                    "answer_id": 29821859,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/29821859#29821859",
                    "body": "<p><strong>Try the below one .it worked for me</strong>.  </p>\n\n<pre><code>import zipfile, os\nzipf = \"compress.zip\"  \ndef main():\n    directory = r\"Filepath\"\n    toZip(directory)\ndef toZip(directory):\n    zippedHelp = zipfile.ZipFile(zipf, \"w\", compression=zipfile.ZIP_DEFLATED )\n\n    list = os.listdir(directory)\n    for file_list in list:\n        file_name = os.path.join(directory,file_list)\n\n        if os.path.isfile(file_name):\n            print file_name\n            zippedHelp.write(file_name)\n        else:\n            addFolderToZip(zippedHelp,file_list,directory)\n            print \"---------------Directory Found-----------------------\"\n    zippedHelp.close()\n\ndef addFolderToZip(zippedHelp,folder,directory):\n    path=os.path.join(directory,folder)\n    print path\n    file_list=os.listdir(path)\n    for file_name in file_list:\n        file_path=os.path.join(path,file_name)\n        if os.path.isfile(file_path):\n            zippedHelp.write(file_path)\n        elif os.path.isdir(file_name):\n            print \"------------------sub directory found--------------------\"\n            addFolderToZip(zippedHelp,file_name,path)\n\n\nif __name__==\"__main__\":\n    main()\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 5975824,
                        "reputation": 41,
                        "user_id": 4696707,
                        "user_type": "registered",
                        "display_name": "duncanmonty"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1443780194,
                    "creation_date": 1443780194,
                    "answer_id": 32904890,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/32904890#32904890",
                    "body": "<p>I have another code example that may help, using python3, pathlib and zipfile.\nIt should work in any OS.</p>\n\n<pre><code>from pathlib import Path\nimport zipfile\nfrom datetime import datetime\n\nDATE_FORMAT = '%y%m%d'\n\n\ndef date_str():\n    \"\"\"returns the today string year, month, day\"\"\"\n    return '{}'.format(datetime.now().strftime(DATE_FORMAT))\n\n\ndef zip_name(path):\n    \"\"\"returns the zip filename as string\"\"\"\n    cur_dir = Path(path).resolve()\n    parent_dir = cur_dir.parents[0]\n    zip_filename = '{}/{}_{}.zip'.format(parent_dir, cur_dir.name, date_str())\n    p_zip = Path(zip_filename)\n    n = 1\n    while p_zip.exists():\n        zip_filename = ('{}/{}_{}_{}.zip'.format(parent_dir, cur_dir.name,\n                                             date_str(), n))\n        p_zip = Path(zip_filename)\n        n += 1\n    return zip_filename\n\n\ndef all_files(path):\n    \"\"\"iterator returns all files and folders from path as absolute path string\n    \"\"\"\n    for child in Path(path).iterdir():\n        yield str(child)\n        if child.is_dir():\n            for grand_child in all_files(str(child)):\n                yield str(Path(grand_child))\n\n\ndef zip_dir(path):\n    \"\"\"generate a zip\"\"\"\n    zip_filename = zip_name(path)\n    zip_file = zipfile.ZipFile(zip_filename, 'w')\n    print('create:', zip_filename)\n    for file in all_files(path):\n        print('adding... ', file)\n        zip_file.write(file)\n    zip_file.close()\n\n\nif __name__ == '__main__':\n    zip_dir('.')\n    print('end!')\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 111411,
                        "reputation": 1060,
                        "user_id": 294320,
                        "user_type": "registered",
                        "accept_rate": 38,
                        "display_name": "VGe0rge"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1458645339,
                    "last_edit_date": 1458645339,
                    "creation_date": 1458567610,
                    "answer_id": 36132604,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/36132604#36132604",
                    "body": "<p>If you want a functionality like the compress folder of any common graphical file manager you can use the following code, it uses the <a href=\"https://docs.python.org/2/library/zipfile.html\" rel=\"nofollow\">zipfile</a> module. Using this code you will have the zip file with the path as its root folder. </p>\n\n<pre><code>import os\nimport zipfile\n\ndef zipdir(path, ziph):\n    # Iterate all the directories and files\n    for root, dirs, files in os.walk(path):\n        # Create a prefix variable with the folder structure inside the path folder. \n        # So if a file is at the path directory will be at the root directory of the zip file\n        # so the prefix will be empty. If the file belongs to a containing folder of path folder \n        # then the prefix will be that folder.\n        if root.replace(path,'') == '':\n                prefix = ''\n        else:\n                # Keep the folder structure after the path folder, append a '/' at the end \n                # and remome the first character, if it is a '/' in order to have a path like \n                # folder1/folder2/file.txt\n                prefix = root.replace(path, '') + '/'\n                if (prefix[0] == '/'):\n                        prefix = prefix[1:]\n        for filename in files:\n                actual_file_path = root + '/' + filename\n                zipped_file_path = prefix + filename\n                zipf.write( actual_file_path, zipped_file_path)\n\n\nzipf = zipfile.ZipFile('Python.zip', 'w', zipfile.ZIP_DEFLATED)\nzipdir('/tmp/justtest/', zipf)\nzipf.close()\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 258754,
                        "reputation": 385523,
                        "user_id": 541136,
                        "user_type": "moderator",
                        "accept_rate": 96,
                        "display_name": "Russia Must Remove Putin"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 65,
                    "last_activity_date": 1483723772,
                    "last_edit_date": 1483723772,
                    "creation_date": 1459450640,
                    "answer_id": 36341469,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/36341469#36341469",
                    "body": "<blockquote>\n  <h1>How can I create a zip archive of a directory structure in Python?</h1>\n</blockquote>\n\n<h2>In a Python script</h2>\n\n<p>In Python 2.7+, <code>shutil</code> has a <code>make_archive</code> function.</p>\n\n<pre><code>from shutil import make_archive\nmake_archive(\n  'zipfile_name', \n  'zip',           # the archive format - or tar, bztar, gztar \n  root_dir=None,   # root for archive - current working dir if None\n  base_dir=None)   # start archiving from here - cwd if None too\n</code></pre>\n\n<p>Here the zipped archive will be named <code>zipfile_name.zip</code>. If <code>base_dir</code> is farther down from <code>root_dir</code> it will exclude files not in the <code>base_dir</code>, but still archive the files in the parent dirs up to the <code>root_dir</code>.</p>\n\n<p>I did have an issue testing this on Cygwin with 2.7 - it wants a root_dir argument, for cwd:</p>\n\n<pre><code>make_archive('zipfile_name', 'zip', root_dir='.')\n</code></pre>\n\n\n\n<h2>Using Python from the shell</h2>\n\n<p>You can do this with Python from the shell also using the <code>zipfile</code> module:</p>\n\n<pre><code>$ python -m zipfile -c zipname sourcedir\n</code></pre>\n\n<p>Where <code>zipname</code> is the name of the destination file you want (add <code>.zip</code> if you want it, it won't do it automatically) and sourcedir is the path to the directory.</p>\n\n<h2>Zipping up Python (or just don't want parent dir):</h2>\n\n<p>If you're trying to zip up a python package with a <code>__init__.py</code> and <code>__main__.py</code>, and you don't want the parent dir, it's </p>\n\n<pre><code>$ python -m zipfile -c zipname sourcedir/*\n</code></pre>\n\n<p>And</p>\n\n<pre><code>$ python zipname\n</code></pre>\n\n<p>would run the package. (Note that you can't run subpackages as the entry point from a zipped archive.)</p>\n\n<h2>Zipping a Python app:</h2>\n\n<p>If you have python3.5+, and specifically want to zip up a Python package, use <a href=\"https://docs.python.org/3/library/zipapp.html\" rel=\"noreferrer\">zipapp</a>:</p>\n\n<pre><code>$ python -m zipapp myapp\n$ python myapp.pyz\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2565158,
                        "reputation": 3306,
                        "user_id": 2225444,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Turtles Are Cute"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1481752212,
                    "creation_date": 1481752212,
                    "answer_id": 41152831,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/41152831#41152831",
                    "body": "<p>Here's a modern approach, using pathlib, and a context manager. Puts the files directly in the zip, rather than in a subfolder.</p>\n\n<pre><code>def zip_dir(filename: str, dir_to_zip: pathlib.Path):\n    with zipfile.ZipFile(filename, 'w', zipfile.ZIP_DEFLATED) as zipf:\n        # Use glob instead of iterdir(), to cover all subdirectories.\n        for directory in dir_to_zip.glob('**'):\n            for file in directory.iterdir():\n                if not file.is_file():\n                    continue\n                # Strip the first component, so we don't create an uneeded subdirectory\n                # containing everything.\n                zip_path = pathlib.Path(*file.parts[1:])\n                # Use a string, since zipfile doesn't support pathlib  directly.\n                zipf.write(str(file), str(zip_path))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2405184,
                        "reputation": 1136,
                        "user_id": 2101864,
                        "user_type": "registered",
                        "display_name": "G&#252;rol Canbek"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1482765337,
                    "last_edit_date": 1482765337,
                    "creation_date": 1482611576,
                    "answer_id": 41316661,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/41316661#41316661",
                    "body": "<p>I prepared a function by consolidating Mark Byers' solution with Reimund and Morten Zilmer's comments (relative path and including empty directories). As a best practice, <code>with</code> is used in ZipFile's file construction.  </p>\n\n<p>The function also prepares a default zip file name with the zipped directory name and '.zip' extension. Therefore, it works with only one argument: the source directory to be zipped.</p>\n\n<pre><code>import os\nimport zipfile\n\ndef zip_dir(path_dir, path_file_zip=''):\nif not path_file_zip:\n    path_file_zip = os.path.join(\n        os.path.dirname(path_dir), os.path.basename(path_dir)+'.zip')\nwith zipfile.ZipFile(path_file_zip, 'wb', zipfile.ZIP_DEFLATED) as zip_file:\n    for root, dirs, files in os.walk(path_dir):\n        for file_or_dir in files + dirs:\n            zip_file.write(\n                os.path.join(root, file_or_dir),\n                os.path.relpath(os.path.join(root, file_or_dir),\n                                os.path.join(path_dir, os.path.pardir)))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 8347384,
                        "reputation": 2203,
                        "user_id": 6270692,
                        "user_type": "registered",
                        "display_name": "monk-time"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 29,
                    "last_activity_date": 1490965311,
                    "creation_date": 1490965311,
                    "answer_id": 43141399,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/43141399#43141399",
                    "body": "<p>Modern Python (3.6+) using the <a href=\"https://docs.python.org/3.6/library/pathlib.html\" rel=\"noreferrer\"><code>pathlib</code></a> module for concise OOP-like handling of paths, and <a href=\"https://docs.python.org/3.6/library/pathlib.html#pathlib.Path.rglob\" rel=\"noreferrer\"><code>pathlib.Path.rglob()</code></a> for recursive globbing. As far as I can tell, this is equivalent to George V. Reilly's answer: zips with compression, the topmost element is a directory, keeps empty dirs, uses relative paths. </p>\n\n<pre><code>from pathlib import Path\nfrom zipfile import ZIP_DEFLATED, ZipFile\n\nfrom os import PathLike\nfrom typing import Union\n\n\ndef zip_dir(zip_name: str, source_dir: Union[str, PathLike]):\n    src_path = Path(source_dir).expanduser().resolve(strict=True)\n    with ZipFile(zip_name, 'w', ZIP_DEFLATED) as zf:\n        for file in src_path.rglob('*'):\n            zf.write(file, file.relative_to(src_path.parent))\n</code></pre>\n\n<p>Note: as optional type hints indicate, <code>zip_name</code> can't be a Path object (<a href=\"https://bugs.python.org/issue28231\" rel=\"noreferrer\">would be fixed in 3.6.2+</a>).</p>\n"
                },
                {
                    "owner": {
                        "account_id": 11121683,
                        "reputation": 1,
                        "user_id": 8164350,
                        "user_type": "registered",
                        "display_name": "Praveen"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1497507848,
                    "creation_date": 1497507848,
                    "answer_id": 44560075,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/44560075#44560075",
                    "body": "<pre><code># import required python modules\n# You have to install zipfile package using pip install\n\nimport os,zipfile\n\n# Change the directory where you want your new zip file to be\n\nos.chdir('Type your destination')\n\n# Create a new zipfile ( I called it myfile )\n\nzf = zipfile.ZipFile('myfile.zip','w')\n\n# os.walk gives a directory tree. Access the files using a for loop\n\nfor dirnames,folders,files in os.walk('Type your directory'):\n    zf.write('Type your Directory')\n    for file in files:\n        zf.write(os.path.join('Type your directory',file))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2645441,
                        "reputation": 1871,
                        "user_id": 2288252,
                        "user_type": "registered",
                        "display_name": "Xedret"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1534368468,
                    "creation_date": 1534368468,
                    "answer_id": 51866695,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/51866695#51866695",
                    "body": "<p>Well, after reading the suggestions I came up with a very similar way that works with 2.7.x without creating \"funny\" directory names (absolute-like names), and will only create the specified folder inside the zip.</p>\n\n<p>Or just in case you needed your zip to contain a folder inside with the contents of the selected directory.</p>\n\n<pre><code>def zipDir( path, ziph ) :\n \"\"\"\n Inserts directory (path) into zipfile instance (ziph)\n \"\"\"\n for root, dirs, files in os.walk( path ) :\n  for file in files :\n   ziph.write( os.path.join( root, file ) , os.path.basename( os.path.normpath( path ) ) + \"\\\\\" + file )\n\ndef makeZip( pathToFolder ) :\n \"\"\"\n Creates a zip file with the specified folder\n \"\"\"\n zipf = zipfile.ZipFile( pathToFolder + 'file.zip', 'w', zipfile.ZIP_DEFLATED )\n zipDir( pathToFolder, zipf )\n zipf.close()\n print( \"Zip file saved to: \" + pathToFolder)\n\nmakeZip( \"c:\\\\path\\\\to\\\\folder\\\\to\\\\insert\\\\into\\\\zipfile\" )\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 11803106,
                                "reputation": 741,
                                "user_id": 8636278,
                                "user_type": "registered",
                                "display_name": "Alex"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1544633422,
                            "post_id": 52499504,
                            "comment_id": 94347913,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/52499504#comment94347913_52499504",
                            "body": "This zips, but doesn&#39;t compress."
                        }
                    ],
                    "owner": {
                        "account_id": 2826858,
                        "reputation": 2596,
                        "user_id": 2429333,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "pbn"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1537882352,
                    "creation_date": 1537882352,
                    "answer_id": 52499504,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/52499504#52499504",
                    "body": "<p>To give more flexibility, e.g. select directory/file by name use:</p>\n\n<pre><code>import os\nimport zipfile\n\ndef zipall(ob, path, rel=\"\"):\n    basename = os.path.basename(path)\n    if os.path.isdir(path):\n        if rel == \"\":\n            rel = basename\n        ob.write(path, os.path.join(rel))\n        for root, dirs, files in os.walk(path):\n            for d in dirs:\n                zipall(ob, os.path.join(root, d), os.path.join(rel, d))\n            for f in files:\n                ob.write(os.path.join(root, f), os.path.join(rel, f))\n            break\n    elif os.path.isfile(path):\n        ob.write(path, os.path.join(rel, basename))\n    else:\n        pass\n</code></pre>\n\n<p>For a file tree:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 dir\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dir2\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 file2.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dir3\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 file3.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 file.txt\n\u251c\u2500\u2500 dir4\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dir5\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 file4.txt\n\u251c\u2500\u2500 listdir.zip\n\u251c\u2500\u2500 main.py\n\u251c\u2500\u2500 root.txt\n\u2514\u2500\u2500 selective.zip\n</code></pre>\n\n<p>You can e.g. select only <code>dir4</code> and <code>root.txt</code>:</p>\n\n<pre><code>cwd = os.getcwd()\nfiles = [os.path.join(cwd, f) for f in ['dir4', 'root.txt']]\n\nwith zipfile.ZipFile(\"selective.zip\", \"w\" ) as myzip:\n    for f in files:\n        zipall(myzip, f)\n</code></pre>\n\n<p>Or just <code>listdir</code> in script invocation directory and add everything from there:</p>\n\n<pre><code>with zipfile.ZipFile(\"listdir.zip\", \"w\" ) as myzip:\n    for f in os.listdir():\n        if f == \"listdir.zip\":\n            # Creating a listdir.zip in the same directory\n            # will include listdir.zip inside itself, beware of this\n            continue\n        zipall(myzip, f)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 14087127,
                                "reputation": 508,
                                "user_id": 12400088,
                                "user_type": "registered",
                                "display_name": "kravb"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1613171676,
                            "post_id": 52776822,
                            "comment_id": 117003531,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/52776822#comment117003531_52776822",
                            "body": "With all the shutil.make_archvie examples here, they all create empty root folders leading up to the folder that you actually want to archive. I do not want my archive file unarchive with &quot;/home/user/Desktop&quot; so everyone can see where folder of interest was originally. How do i just zip &quot;/Directory&quot; and leave out all traces of parent folders?"
                        },
                        {
                            "owner": {
                                "account_id": 243120,
                                "reputation": 3750,
                                "user_id": 515093,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Jos&#233; L. Pati&#241;o"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1626020242,
                            "post_id": 52776822,
                            "comment_id": 120776273,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/52776822#comment120776273_52776822",
                            "body": "This has been said 3 times already. And it&#39;s definitely not the best answer."
                        }
                    ],
                    "owner": {
                        "account_id": 4584252,
                        "reputation": 679,
                        "user_id": 3719492,
                        "user_type": "registered",
                        "display_name": "Vadiraj S J"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 28,
                    "last_activity_date": 1539340025,
                    "last_edit_date": 1539340025,
                    "creation_date": 1539337606,
                    "answer_id": 52776822,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/52776822#52776822",
                    "body": "<p>Use shutil, which is part of python standard library set. \nUsing shutil is so simple(see code below): </p>\n\n<ul>\n<li>1st arg: Filename of resultant zip/tar file, </li>\n<li>2nd arg: zip/tar, </li>\n<li>3rd arg: dir_name</li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>import shutil\nshutil.make_archive('/home/user/Desktop/Filename','zip','/home/username/Desktop/Directory')\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7726572,
                                "reputation": 115,
                                "user_id": 5851016,
                                "user_type": "registered",
                                "display_name": "sushh"
                            },
                            "reply_to_user": {
                                "account_id": 6648197,
                                "reputation": 1063,
                                "user_id": 5131441,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Trieu Nguyen"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1548751540,
                            "post_id": 53368107,
                            "comment_id": 95643735,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/53368107#comment95643735_53368107",
                            "body": "please explain with an example so that i can correct my answer"
                        },
                        {
                            "owner": {
                                "account_id": 2054569,
                                "reputation": 1088,
                                "user_id": 1832712,
                                "user_type": "registered",
                                "accept_rate": 91,
                                "display_name": "Georg"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1589465147,
                            "post_id": 53368107,
                            "comment_id": 109310027,
                            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/53368107#comment109310027_53368107",
                            "body": "However, zipfile &quot;currently cannot create an encrypted file&quot; (from <a href=\"https://docs.python.org/3.9/library/zipfile.html\" rel=\"nofollow noreferrer\">docs.python.org/3.9/library/zipfile.html</a>)"
                        }
                    ],
                    "owner": {
                        "account_id": 7726572,
                        "reputation": 115,
                        "user_id": 5851016,
                        "user_type": "registered",
                        "display_name": "sushh"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1542599737,
                    "creation_date": 1542599737,
                    "answer_id": 53368107,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/53368107#53368107",
                    "body": "<p>Function to create zip file. </p>\n\n<pre><code>def CREATEZIPFILE(zipname, path):\n    #function to create a zip file\n    #Parameters: zipname - name of the zip file; path - name of folder/file to be put in zip file\n\n    zipf = zipfile.ZipFile(zipname, 'w', zipfile.ZIP_DEFLATED)\n    zipf.setpassword(b\"password\") #if you want to set password to zipfile\n\n    #checks if the path is file or directory\n    if os.path.isdir(path):\n        for files in os.listdir(path):\n            zipf.write(os.path.join(path, files), files)\n\n    elif os.path.isfile(path):\n        zipf.write(os.path.join(path), path)\n    zipf.close()\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 11979243,
                        "reputation": 837,
                        "user_id": 9956279,
                        "user_type": "registered",
                        "display_name": "snowpeak"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1560796158,
                    "last_edit_date": 1560796158,
                    "creation_date": 1554798330,
                    "answer_id": 55588224,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/55588224#55588224",
                    "body": "<p>Say you want to Zip all the folders(sub directories) in the current directory.</p>\n\n<pre><code>for root, dirs, files in os.walk(\".\"):\n    for sub_dir in dirs:\n        zip_you_want = sub_dir+\".zip\"\n        zip_process = zipfile.ZipFile(zip_you_want, \"w\", zipfile.ZIP_DEFLATED)\n        zip_process.write(file_you_want_to_include)\n        zip_process.close()\n\n        print(\"Successfully zipped directory: {sub_dir}\".format(sub_dir=sub_dir))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 909645,
                        "reputation": 18418,
                        "user_id": 943773,
                        "user_type": "registered",
                        "accept_rate": 93,
                        "display_name": "ryanjdillon"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1683896500,
                    "last_edit_date": 1683896500,
                    "creation_date": 1562662110,
                    "answer_id": 56948692,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/56948692#56948692",
                    "body": "<p>To retain the folder hierarchy under the parent directory to be archived:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from pathlib import Path\nimport zipfile\n\nfp_zip = Path(&quot;output.zip&quot;)\npath_to_archive = Path(&quot;./path-to-archive&quot;)\n\nwith zipfile.ZipFile(fp_zip, &quot;w&quot;, zipfile.ZIP_DEFLATED) as zipf:\n    for fp in path_to_archive.glob(&quot;**/*&quot;):\n        zipf.write(fp, arcname=fp.relative_to(path_to_archive))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 7622441,
                        "reputation": 9596,
                        "user_id": 5780109,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "ivanleoncz"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1567689001,
                    "creation_date": 1567689001,
                    "answer_id": 57806255,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/57806255#57806255",
                    "body": "<p>So many answers here, and I hope I might contribute with my own version, which is based on the original answer (by the way), but with a more graphical perspective, also using context for each <code>zipfile</code> setup and sorting <code>os.walk()</code>, in order to have a ordered output.</p>\n\n<p>Having these folders and them files (among other folders), I wanted to create a <code>.zip</code> for each <code>cap_</code> folder:</p>\n\n<pre><code>$ tree -d\n.\n\u251c\u2500\u2500 cap_01\n| \u00a0\u00a0 \u251c\u2500\u2500 0101000001.json\n|\u00a0\u00a0  \u251c\u2500\u2500 0101000002.json\n|    \u251c\u2500\u2500 0101000003.json\n|\n\u251c\u2500\u2500 cap_02\n|    \u251c\u2500\u2500 0201000001.json\n|    \u251c\u2500\u2500 0201000002.json\n|    \u251c\u2500\u2500 0201001003.json\n|\n\u251c\u2500\u2500 cap_03\n|    \u251c\u2500\u2500 0301000001.json\n|    \u251c\u2500\u2500 0301000002.json\n|    \u251c\u2500\u2500 0301000003.json\n| \n\u251c\u2500\u2500 docs\n|    \u251c\u2500\u2500 map.txt\n|    \u251c\u2500\u2500 main_data.xml\n|\n\u251c\u2500\u2500 core_files\n     \u251c\u2500\u2500 core_master\n     \u251c\u2500\u2500 core_slave\n</code></pre>\n\n<p>Here's what I applied, with comments for better understanding of the process.</p>\n\n<pre><code>$ cat zip_cap_dirs.py \n\"\"\" Zip 'cap_*' directories. \"\"\"           \nimport os                                                                       \nimport zipfile as zf                                                            \n\n\nfor root, dirs, files in sorted(os.walk('.')):                                                                                               \n    if 'cap_' in root:                                                          \n        print(f\"Compressing: {root}\")                                           \n        # Defining .zip name, according to Cap\u00edtulo.                            \n        cap_dir_zip = '{}.zip'.format(root)                                     \n        # Opening zipfile context for current root dir.                         \n        with zf.ZipFile(cap_dir_zip, 'w', zf.ZIP_DEFLATED) as new_zip:          \n            # Iterating over os.walk list of files for the current root dir.    \n            for f in files:                                                     \n                # Defining relative path to files from current root dir.        \n                f_path = os.path.join(root, f)                                  \n                # Writing the file on the .zip file of the context              \n                new_zip.write(f_path) \n</code></pre>\n\n<p>Basically, for each iteration over <code>os.walk(path)</code>, I'm opening a context for <code>zipfile</code> setup and afterwards, iterating iterating over <code>files</code>, which is a <code>list</code> of files from <code>root</code> directory, forming the relative path for each file based on the current <code>root</code> directory, appending to the <code>zipfile</code> context which is running.</p>\n\n<p>And the output is presented like this:</p>\n\n<pre><code>$ python3 zip_cap_dirs.py\nCompressing: ./cap_01\nCompressing: ./cap_02\nCompressing: ./cap_03\n</code></pre>\n\n<p>To see the contents of each <code>.zip</code> directory, you can use <code>less</code> command:</p>\n\n<pre><code>$ less cap_01.zip\n\nArchive:  cap_01.zip\n Length   Method    Size  Cmpr    Date    Time   CRC-32   Name\n--------  ------  ------- ---- ---------- ----- --------  ----\n  22017  Defl:N     2471  89% 2019-09-05 08:05 7a3b5ec6  cap_01/0101000001.json\n  21998  Defl:N     2471  89% 2019-09-05 08:05 155bece7  cap_01/0101000002.json\n  23236  Defl:N     2573  89% 2019-09-05 08:05 55fced20  cap_01/0101000003.json\n--------          ------- ---                           -------\n  67251             7515  89%                            3 files\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 22906,
                        "reputation": 19638,
                        "user_id": 56974,
                        "user_type": "registered",
                        "accept_rate": 93,
                        "display_name": "Michael Ekoka"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1600642761,
                    "last_edit_date": 1600642761,
                    "creation_date": 1600321827,
                    "answer_id": 63931979,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/63931979#63931979",
                    "body": "<p>Zip a file or a tree (a directory and its sub-directories).</p>\n<pre><code>from pathlib import Path\nfrom zipfile import ZipFile, ZIP_DEFLATED\n\ndef make_zip(tree_path, zip_path, mode='w', skip_empty_dir=False):\n    with ZipFile(zip_path, mode=mode, compression=ZIP_DEFLATED) as zf:\n        paths = [Path(tree_path)]\n        while paths:\n            p = paths.pop()\n            if p.is_dir():\n                paths.extend(p.iterdir())\n                if skip_empty_dir:\n                    continue\n            zf.write(p)\n</code></pre>\n<p>To append to an existing archive, pass <code>mode='a'</code>, to create a fresh archive <code>mode='w'</code> (the default in the above). So let's say you want to bundle 3 different directory trees under the same archive.</p>\n<pre><code>make_zip(path_to_tree1, path_to_arch, mode='w')\nmake_zip(path_to_tree2, path_to_arch, mode='a')\nmake_zip(path_to_file3, path_to_arch, mode='a')\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2488399,
                        "reputation": 3091,
                        "user_id": 4556479,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Alex"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1678378242,
                    "last_edit_date": 1678378242,
                    "creation_date": 1609837757,
                    "answer_id": 65575937,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/65575937#65575937",
                    "body": "<p>A solution using <code>pathlib.Path</code>, which is independent of the OS used:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import zipfile\nfrom pathlib import Path\n\ndef zip_dir(path: Path, zip_file_path: Path):\n    &quot;&quot;&quot;Zip all contents of path to zip_file&quot;&quot;&quot;\n    files_to_zip = [\n        file for file in path.glob('*') if file.is_file()]\n    with zipfile.ZipFile(\n        zip_file_path, 'w', zipfile.ZIP_DEFLATED) as zip_f:\n        for file in files_to_zip:\n            print(file.name)\n            zip_f.write(file, file.name)\n\ncurrent_dir = Path.cwd()  \ntozip_dir = current_dir / &quot;test&quot;\nzip_dir(\n    tozip_dir, current_dir / 'dir.zip')\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 18619793,
                        "reputation": 23,
                        "user_id": 14046401,
                        "user_type": "registered",
                        "display_name": "GuruPrasaathM"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1615352951,
                    "creation_date": 1615352951,
                    "answer_id": 66558717,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/66558717#66558717",
                    "body": "<p>The obvious way to go would be to go with shutil, Like the second top answer says so, But if you still wish to go with ZipFile for some reason, And if you are getting some trouble doing that (Like ERR 13 in Windows etc), You can use this fix:</p>\n<pre><code>import os\nimport zipfile\n\ndef retrieve_file_paths(dirName):\n  filePaths = []\n  for root, directories, files in os.walk(dirName):\n    for filename in files:\n        filePath = os.path.join(root, filename)\n        filePaths.append(filePath)\n  return filePaths\n \ndef main(dir_name, output_filename):\n  filePaths = retrieve_file_paths(dir_name)\n   \n  zip_file = zipfile.ZipFile(output_filename+'.zip', 'w')\n  with zip_file:\n    for file in filePaths:\n      zip_file.write(file)\n\nmain(&quot;my_dir&quot;, &quot;my_dir_archived&quot;)\n</code></pre>\n<p>This one recursively iterates through every sub-folder/file in your given folder, And writes them to a zip file instead of attempting to directly zip a folder.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 14955104,
                        "reputation": 948,
                        "user_id": 10796681,
                        "user_type": "registered",
                        "display_name": "JD Solanki"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 31,
                    "last_activity_date": 1629202271,
                    "last_edit_date": 1629202271,
                    "creation_date": 1629201941,
                    "answer_id": 68817065,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/68817065#68817065",
                    "body": "<p>With python 3.9, <code>pathlib</code> &amp; <code>zipfile</code> module you can create a zip files from anywhere in the system.</p>\n<pre class=\"lang-py prettyprint-override\"><code>def zip_dir(dir: Union[Path, str], filename: Union[Path, str]):\n    &quot;&quot;&quot;Zip the provided directory without navigating to that directory using `pathlib` module&quot;&quot;&quot;\n\n    # Convert to Path object\n    dir = Path(dir)\n\n    with zipfile.ZipFile(filename, &quot;w&quot;, zipfile.ZIP_DEFLATED) as zip_file:\n        for entry in dir.rglob(&quot;*&quot;):\n            zip_file.write(entry, entry.relative_to(dir))\n</code></pre>\n<p>It is neat, typed, and has less code.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 291162,
                        "reputation": 3033,
                        "user_id": 593146,
                        "user_type": "registered",
                        "accept_rate": 83,
                        "display_name": "Zyl"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1673103278,
                    "creation_date": 1673103278,
                    "answer_id": 75041282,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/75041282#75041282",
                    "body": "<p>One thing completely missed by previous answers is the fact that using <code>os.path.join()</code> can easily return POSIX-incompatible paths when you run the code on Windows. The resulting archive will contain files with literal backslashes in their names when processing it with any common archive software on Linux, which is not what you want. Use <code>path.as_posix()</code> for the <code>arcname</code> parameter instead!</p>\n<pre class=\"lang-py prettyprint-override\"><code>import zipfile\nfrom pathlib import Path\nwith zipfile.ZipFile(&quot;archive.zip&quot;, &quot;w&quot;, zipfile.ZIP_DEFLATED) as zf:\n    for path in Path(&quot;include_all_of_this_folder&quot;).rglob(&quot;*&quot;):\n        zf.write(path, path.as_posix())\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 5247759,
                        "reputation": 5477,
                        "user_id": 4192897,
                        "user_type": "registered",
                        "accept_rate": 70,
                        "display_name": "AmiNadimi"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1691411340,
                    "creation_date": 1691411340,
                    "answer_id": 76851717,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/76851717#76851717",
                    "body": "<p>While using <code>shutil</code> note that you should include output directory path in <code>base_name</code> arg:</p>\n<pre><code>import shutil\n\n\nshutil.make_archive(\n  base_name=output_dir_path + output_filename_without_extension, \n  format=&quot;zip&quot;, \n  root_dir=input_root_dir)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1771599,
                        "reputation": 13826,
                        "user_id": 1616263,
                        "user_type": "registered",
                        "display_name": "crifan"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1701185046,
                    "creation_date": 1701185046,
                    "answer_id": 77565085,
                    "question_id": 1855095,
                    "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory/77565085#77565085",
                    "body": "<p>summary others, make a function:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import zipfile\n\ndef zipFolder(toZipFolder, outputZipFile):\n  &quot;&quot;&quot;\n    zip/compress a whole folder/directory to zip file\n  &quot;&quot;&quot;\n  print(&quot;Zip for foler %s&quot; % toZipFolder)\n  with zipfile.ZipFile(outputZipFile, 'w', zipfile.ZIP_DEFLATED) as zipFp:\n    for dirpath, dirnames, filenames in os.walk(toZipFolder):\n      # print(&quot;%s&quot; % (&quot;-&quot;*80))\n      # print(&quot;dirpath=%s, dirnames=%s, filenames=%s&quot; % (dirpath, dirnames, filenames))\n      # print(&quot;Folder: %s, Files: %s&quot; % (dirpath, filenames))\n      for curFileName in filenames:\n        # print(&quot;curFileName=%s&quot; % curFileName)\n        curFilePath = os.path.join(dirpath, curFileName)\n        # print(&quot;curFilePath=%s&quot; % curFilePath)\n        fileRelativePath = os.path.relpath(curFilePath, toZipFolder)\n        # print(&quot;fileRelativePath=%s&quot; % fileRelativePath)\n        # print(&quot;  %s&quot; % fileRelativePath)\n        zipFp.write(curFilePath, arcname=fileRelativePath)\n  print(&quot;Completed zip file %s&quot; % outputZipFile)\n</code></pre>\n<p>call:</p>\n<pre class=\"lang-py prettyprint-override\"><code>  toZipFullPath = &quot;/Users/crifan/dev/dev_root/iosReverse/WhatsApp/ipa/forRepackIpa_20231128&quot;\n  outputZipFile = &quot;/Users/crifan/dev/dev_root/iosReverse/WhatsApp/ipa/WhatsApp_v23.24.0_20231128.ipa&quot;\n  zipFolder(toZipFullPath, outputZipFile)\n</code></pre>\n<p>output:</p>\n<pre><code>Zip for foler /Users/crifan/dev/dev_root/iosReverse/WhatsApp/ipa/forRepackIpa_20231128\nCompleted zip file /Users/crifan/dev/dev_root/iosReverse/WhatsApp/ipa/WhatsApp_v23.20.79_idaAllSymbols_20231128.ipa\n</code></pre>\n<p>latest code: <a href=\"https://github.com/crifan/crifanLibPython/blob/master/python3/crifanLib/crifanFile.py\" rel=\"nofollow noreferrer\">crifanLib/crifanFile.py</a></p>\n"
                }
            ],
            "owner": {
                "account_id": 574377,
                "reputation": 9023,
                "user_id": 225736,
                "user_type": "unregistered",
                "display_name": "Martha Yi"
            },
            "comment_count": 5,
            "is_answered": true,
            "accepted_answer_id": 1855118,
            "answer_count": 30,
            "score": 888,
            "last_activity_date": 1701185046,
            "creation_date": 1260097973,
            "last_edit_date": 1640556566,
            "question_id": 1855095,
            "link": "https://stackoverflow.com/questions/1855095/how-to-create-a-zip-archive-of-a-directory",
            "title": "How to create a zip archive of a directory?",
            "body": "<p>How can I create a zip archive of a directory structure in Python?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 9658
}