{
    "items": [
        {
            "tags": [
                "python",
                "opencv",
                "video",
                "video-streaming",
                "video-capture"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 13450800,
                        "reputation": 5512,
                        "user_id": 9705687,
                        "user_type": "registered",
                        "display_name": "bfris"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1570569793,
                    "post_id": 58293187,
                    "comment_id": 102952367,
                    "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync#comment102952367_58293187",
                    "body": "On my machine, I get speeded up video for ~2sec with your code. Then a stop for ~2 sec. repeat. I tried to force the video stream to show the newest frame with cap.set(cv2.CAP_PROP_POS_AVI_RATIO, 1). It seems to work, but I get one frame every &lt;random&gt; seconds. The FPS from print(cap.get(cv2.CAP_PROP_FPS)) is 180,000.0, which is way too high. But if you could get an accurate FPS, maybe you could do some jiggery pokery with multiple cap.grab() to advance to where you should be in the stream and then a single cap.retrieve to get the frame."
                },
                {
                    "owner": {
                        "account_id": 5068985,
                        "reputation": 368,
                        "user_id": 4068296,
                        "user_type": "registered",
                        "display_name": "Roger Figueroa Quintero"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1570602831,
                    "post_id": 58293187,
                    "comment_id": 102959275,
                    "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync#comment102959275_58293187",
                    "body": "I see that you have the minimum code to video acquisition in python. So, is impossible improve runtime. Maybe the problem is due to video resolution, if W and H size is long, then buffer reading and showing video frames will be more delayed. A simple solution is decrease the resolution of videos before of reading. Another solution is create an second thread to only video acquisition. Another solution is to read video using C++. I have compared the performance and it is about 3 times faster."
                },
                {
                    "owner": {
                        "account_id": 5068985,
                        "reputation": 368,
                        "user_id": 4068296,
                        "user_type": "registered",
                        "display_name": "Roger Figueroa Quintero"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1570603287,
                    "post_id": 58293187,
                    "comment_id": 102959480,
                    "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync#comment102959480_58293187",
                    "body": "Also note that your problem could be hardware: memory and data-bus bandwidth, and processor speed."
                },
                {
                    "owner": {
                        "account_id": 2780567,
                        "reputation": 19845,
                        "user_id": 2393191,
                        "user_type": "registered",
                        "accept_rate": 83,
                        "display_name": "Micka"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1571125230,
                    "post_id": 58293187,
                    "comment_id": 103125825,
                    "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync#comment103125825_58293187",
                    "body": "use a faster device (more processing power) or use hardware acceleration or optimized code to receive, decode and display the stream. OpenCV might not be the fastest library for receiving, decoding and rendering (but it&#39;s very easy to use)"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 9919758,
                                "reputation": 351,
                                "user_id": 7343328,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Arunava"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1627632154,
                            "post_id": 58311331,
                            "comment_id": 121212640,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58311331#comment121212640_58311331",
                            "body": "Did you find a solution to this?"
                        },
                        {
                            "owner": {
                                "account_id": 7459507,
                                "reputation": 1098,
                                "user_id": 5671548,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "Conic"
                            },
                            "reply_to_user": {
                                "account_id": 9919758,
                                "reputation": 351,
                                "user_id": 7343328,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Arunava"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1627654095,
                            "post_id": 58311331,
                            "comment_id": 121221280,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58311331#comment121221280_58311331",
                            "body": "Yes I did.  It&#39;s the answer with the green checkmark next to it from nathancy."
                        },
                        {
                            "owner": {
                                "account_id": 9919758,
                                "reputation": 351,
                                "user_id": 7343328,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Arunava"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1627654348,
                            "post_id": 58311331,
                            "comment_id": 121221407,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58311331#comment121221407_58311331",
                            "body": "Oops sorry. Since you said nathancy&#39;s answer was a minor success. I thought you meant the answer to this question (didnt check the link). Anyway. Thanks."
                        },
                        {
                            "owner": {
                                "account_id": 7459507,
                                "reputation": 1098,
                                "user_id": 5671548,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "Conic"
                            },
                            "reply_to_user": {
                                "account_id": 9919758,
                                "reputation": 351,
                                "user_id": 7343328,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Arunava"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1627654459,
                            "post_id": 58311331,
                            "comment_id": 121221444,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58311331#comment121221444_58311331",
                            "body": "I can see how that might be misleading. I was referring to a different solution of his from another stack overflow post.  He then responded with an updated answer that did FPS syncing. That ended up being the solution that worked for me."
                        },
                        {
                            "owner": {
                                "account_id": 9919758,
                                "reputation": 351,
                                "user_id": 7343328,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Arunava"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1627654595,
                            "post_id": 58311331,
                            "comment_id": 121221514,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58311331#comment121221514_58311331",
                            "body": "Yeah. Thanks :)"
                        }
                    ],
                    "owner": {
                        "account_id": 7459507,
                        "reputation": 1098,
                        "user_id": 5671548,
                        "user_type": "registered",
                        "accept_rate": 92,
                        "display_name": "Conic"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1570650661,
                    "last_edit_date": 1592644375,
                    "creation_date": 1570650661,
                    "answer_id": 58311331,
                    "question_id": 58293187,
                    "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58311331#58311331",
                    "body": "<h1>Attempt at threading</h1>\n<p>I've attempted <a href=\"https://stackoverflow.com/questions/55828451/video-streaming-from-ip-camera-in-python-using-opencv-cv2-videocapture\">this</a> solution from <a href=\"https://stackoverflow.com/users/11162165/nathancy\">nathancy</a> with minor success.</p>\n<p>It involves:</p>\n<ul>\n<li>creating a separate thread for image capture from the source</li>\n<li>using the main thread exclusively for display.</li>\n</ul>\n<h2>Code:</h2>\n<pre class=\"lang-py prettyprint-override\"><code>import cv2\nfrom threading import Thread\n\nclass ThreadedCamera(object):\n    def __init__(self, source = 0):\n\n        self.capture = cv2.VideoCapture(source)\n\n        self.thread = Thread(target = self.update, args = ())\n        self.thread.daemon = True\n        self.thread.start()\n\n        self.status = False\n        self.frame  = None\n\n    def update(self):\n        while True:\n            if self.capture.isOpened():\n                (self.status, self.frame) = self.capture.read()\n\n    def grab_frame(self):\n        if self.status:\n            return self.frame\n        return None  \n</code></pre>\n<pre><code>if __name__ == '__main__':\n    stream_link = &quot;https://videos3.earthcam.com/fecnetwork/9974.flv/chunklist_w1421640637.m3u8&quot;\n    streamer = ThreadedCamera(stream_link)\n\n    while True:\n        frame = streamer.grab_frame()\n        if frame is not None:\n            cv2.imshow(&quot;Context&quot;, frame)\n        cv2.waitKey(1) \n</code></pre>\n<h2>Jittery, but real-time results</h2>\n<p><img src=\"https://media.giphy.com/media/TFCbK339j9Iqs89z3K/giphy.gif\" alt=\"\" /> .</p>\n<p>The streaming works. It maintains real-time. However, it is as if all the frames pool up and suddenly burst into the video. I would like somebody to explain that.</p>\n<h2>Room for improvement</h2>\n<p>The real-time stream can be found here.</p>\n<p><a href=\"https://www.earthcam.com/usa/newyork/timessquare/?cam=tsstreet\" rel=\"noreferrer\">https://www.earthcam.com/usa/newyork/timessquare/?cam=tsstreet</a></p>\n<p>This site is scraped for the <code>m3u8</code> using python's <code>streamlink</code> stream scraper.</p>\n<pre class=\"lang-py prettyprint-override\"><code>\nimport streamlink\n\nstreams = streamlink.streams(&quot;https://www.earthcam.com/usa/newyork/timessquare/?cam=tsstreet&quot;)\nprint(streams)\n</code></pre>\n<p>which yeilds:</p>\n<pre><code>OrderedDict([\n\n('720p',&lt;HLSStream('https://videos3.earthcam.com/fecnetwork/9974.flv/chunklist_w202109066.m3u8')&gt;),\n\n('live', &lt;RTMPStream({'rtmp': 'rtmp://videos3.earthcam.com/fecnetwork/', 'playpath': '9974.flv', 'pageUrl': 'https://www.earthcam.com/usa/newyork/timessquare/?cam=tsstreet','swfUrl': 'http://static.earthcam.com/swf/streaming/stream_viewer_v3.swf', 'live': 'true'}, redirect=False&gt;),\n\n('worst', &lt;HLSStream('https://videos3.earthcam.com/fecnetwork/9974.flv/chunklist_w202109066.m3u8')&gt;),\n\n('best', &lt;RTMPStream({'rtmp': 'rtmp://videos3.earthcam.com/fecnetwork/', 'playpath': '9974.flv', 'pageUrl': 'https://www.earthcam.com/usa/newyork/timessquare/?cam=tsstreet', 'swfUrl': 'http://static.earthcam.com/swf/streaming/stream_viewer_v3.swf', 'live': 'true'}, redirect=False&gt;)\n\n])\n\n\n</code></pre>\n<p>The possibility that the streams are being read wrong.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7459507,
                                "reputation": 1098,
                                "user_id": 5671548,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "Conic"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1571163505,
                            "post_id": 58386085,
                            "comment_id": 103146273,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58386085#comment103146273_58386085",
                            "body": "Can you tell me why the waiting (FPS syncing) is needed? Isn&#39;t the point of the buffer to capture frames as they come?  It feels like it wouldn&#39;t matter what is grabbed from the top of the buffer. Building an artificial delay feels counterintuitive for me. Would that be about resource sharing in threads or something? Or is it that the images don&#39;t come in real-time exactly, but as they&#39;re able to be reconstructed or re-delivered. Either way, thank you for the detailed response. This works very well."
                        },
                        {
                            "owner": {
                                "account_id": 15472581,
                                "reputation": 45230,
                                "user_id": 11162165,
                                "user_type": "registered",
                                "display_name": "nathancy"
                            },
                            "reply_to_user": {
                                "account_id": 7459507,
                                "reputation": 1098,
                                "user_id": 5671548,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "Conic"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1571170401,
                            "post_id": 58386085,
                            "comment_id": 103148989,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58386085#comment103148989_58386085",
                            "body": "@Conic The FPS syncing is needed because generally you want to sync with the source. If you are polling too slow, you will have periods where you don&#39;t have a new frame so you will be displaying the old frame. If you poll too fast (like before), you will display all the frames instantly. In both cases, this may cause the jitter/freeze so by inserting a delay, you can even out the frame distribution as it is displayed. Since there are two separate threads, once a frame is received, it is immediately displayed so that&#39;s another reason why we need a delay."
                        },
                        {
                            "owner": {
                                "account_id": 15472581,
                                "reputation": 45230,
                                "user_id": 11162165,
                                "user_type": "registered",
                                "display_name": "nathancy"
                            },
                            "reply_to_user": {
                                "account_id": 7459507,
                                "reputation": 1098,
                                "user_id": 5671548,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "Conic"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1571170503,
                            "post_id": 58386085,
                            "comment_id": 103149030,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58386085#comment103149030_58386085",
                            "body": "Here&#39;s an analogy, say you&#39;re watching a Youtube video on 2x speed but you are using dial-up internet. The buffer rate will load slower than the video actually playing so eventually, the frames will catch up to the buffer and the video will freeze. This is what happens when the FPS is not synced. If we revert back to 1x speed, then the frames will be evened out and match the speed of the buffer rate so we don&#39;t get any freezing/jitter. The video then looks smooth"
                        },
                        {
                            "owner": {
                                "account_id": 3072614,
                                "reputation": 13784,
                                "user_id": 2602877,
                                "user_type": "registered",
                                "display_name": "Christoph Rackwitz"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1607711106,
                            "post_id": 58386085,
                            "comment_id": 115367606,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58386085#comment115367606_58386085",
                            "body": "OpenCV VideoCapture isn&#39;t polling at all. could you explain what you mean?"
                        },
                        {
                            "owner": {
                                "account_id": 10185756,
                                "reputation": 349,
                                "user_id": 7520778,
                                "user_type": "registered",
                                "display_name": "sur0k"
                            },
                            "reply_to_user": {
                                "account_id": 3072614,
                                "reputation": 13784,
                                "user_id": 2602877,
                                "user_type": "registered",
                                "display_name": "Christoph Rackwitz"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1617990547,
                            "post_id": 58386085,
                            "comment_id": 118475701,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58386085#comment118475701_58386085",
                            "body": "@ChristophRackwitz actually it&#39;s polling in the <code>update()</code> which is called inside started thread: <code>Thread(target=self.update, args=())</code>"
                        },
                        {
                            "owner": {
                                "account_id": 309588,
                                "reputation": 1763,
                                "user_id": 622121,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Kenji Noguchi"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1624128534,
                            "post_id": 58386085,
                            "comment_id": 120275886,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58386085#comment120275886_58386085",
                            "body": "yah <code>capture.read()</code> inside of infinite loop is polling."
                        },
                        {
                            "owner": {
                                "account_id": 15472581,
                                "reputation": 45230,
                                "user_id": 11162165,
                                "user_type": "registered",
                                "display_name": "nathancy"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1628583254,
                            "post_id": 58386085,
                            "comment_id": 121452878,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58386085#comment121452878_58386085",
                            "body": "It&#39;s constantly polling. The entire operation of capturing frames is put inside the thread so that if the program is exited, the capture operation will not hang as a zombie process. If we don&#39;t set <code>daemon</code> to <code>True</code>, it will be a zombie process when your main program dies. We set daemon <code>True</code> so that when our parent process dies, this will also kill all child processes. See <a href=\"https://docs.python.org/3/library/threading.html#thread-objects\" rel=\"nofollow noreferrer\">threading documentation</a> for more information"
                        },
                        {
                            "owner": {
                                "account_id": 22059522,
                                "reputation": 608,
                                "user_id": 16322451,
                                "user_type": "registered",
                                "display_name": "Ben Zayed"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1636990672,
                            "post_id": 58386085,
                            "comment_id": 123698825,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58386085#comment123698825_58386085",
                            "body": "Could you please explain to me why you used a threaded camera. I set a maximum buffer size and a frame retrieval delay as you suggested and that was enough to get a smooth streaming."
                        },
                        {
                            "owner": {
                                "account_id": 15472581,
                                "reputation": 45230,
                                "user_id": 11162165,
                                "user_type": "registered",
                                "display_name": "nathancy"
                            },
                            "reply_to_user": {
                                "account_id": 22059522,
                                "reputation": 608,
                                "user_id": 16322451,
                                "user_type": "registered",
                                "display_name": "Ben Zayed"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1637112592,
                            "post_id": 58386085,
                            "comment_id": 123737411,
                            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58386085#comment123737411_58386085",
                            "body": "@BenZayed For a single camera just setting buffer size and delay should work but if you have multiple cameras running simultaneously you may need to use threading (I use this technique with 8 simultaneous camera streams)"
                        }
                    ],
                    "owner": {
                        "account_id": 15472581,
                        "reputation": 45230,
                        "user_id": 11162165,
                        "user_type": "registered",
                        "display_name": "nathancy"
                    },
                    "comment_count": 9,
                    "is_accepted": true,
                    "score": 42,
                    "last_activity_date": 1651808111,
                    "last_edit_date": 1651808111,
                    "creation_date": 1571103463,
                    "answer_id": 58386085,
                    "question_id": 58293187,
                    "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/58386085#58386085",
                    "body": "<img src=\"https://i.stack.imgur.com/4c0ca.gif\" width=\"425\">\n<p>My hypothesis is that the jitter is most likely due to network limitations and occurs when a frame packet is dropped. When a frame is dropped, this causes the program to display the last &quot;good&quot; frame which results in the display freezing. This is probably a hardware or bandwidth issue but we can alleviate some of this with software. Here are some possible changes:</p>\n<p><strong>1. Set maximum buffer size</strong></p>\n<p>We set the <code>cv2.videoCapture()</code> object to have a limited buffer size with the <code>cv2.CAP_PROP_BUFFERSIZE</code> parameter. The idea is that by limiting the buffer, we will always have the latest frame. This can also help to alleviate the problem of frames randomly jumping ahead.</p>\n<p><strong>2. Set frame retrieval delay</strong></p>\n<p>Currently, I believe the <code>read()</code> is reading too fast even though it is in its own dedicated thread. This may be one reason why all the frames appear to pool up and suddenly burst in the next frame. For instance, say in a one second time interval, it may produce 15 new frames but in the next one second interval, only 3 frames are returned. This may be due to the network packet frame loss so to ensure that we obtain constant frame rates, we simply add a delay in the frame retrieval thread. A delay to obtain roughly <code>~30</code> FPS does a good job to &quot;normalize&quot; the frame rate and smooth the transition between frames incase there is packet loss.</p>\n<p><strong>Note:</strong> We should try to match the frame rate of the stream but I'm not sure what the FPS of the webcam is so I just guessed <code>30</code> FPS. Also, there is usually a &quot;direct&quot; stream link instead of going through a intermediate webserver which can greatly improve performance.</p>\n<hr />\n<p>If you try using a saved <code>.mp4</code> video file, you will notice that there is no jitter. This confirms my suspicion that the problem is most likely due to network latency.</p>\n<pre><code>from threading import Thread\nimport cv2, time\n\nclass ThreadedCamera(object):\n    def __init__(self, src=0):\n        self.capture = cv2.VideoCapture(src)\n        self.capture.set(cv2.CAP_PROP_BUFFERSIZE, 2)\n       \n        # FPS = 1/X\n        # X = desired FPS\n        self.FPS = 1/30\n        self.FPS_MS = int(self.FPS * 1000)\n        \n        # Start frame retrieval thread\n        self.thread = Thread(target=self.update, args=())\n        self.thread.daemon = True\n        self.thread.start()\n        \n    def update(self):\n        while True:\n            if self.capture.isOpened():\n                (self.status, self.frame) = self.capture.read()\n            time.sleep(self.FPS)\n            \n    def show_frame(self):\n        cv2.imshow('frame', self.frame)\n        cv2.waitKey(self.FPS_MS)\n\nif __name__ == '__main__':\n    src = 'https://videos3.earthcam.com/fecnetwork/9974.flv/chunklist_w1421640637.m3u8'\n    threaded_camera = ThreadedCamera(src)\n    while True:\n        try:\n            threaded_camera.show_frame()\n        except AttributeError:\n            pass\n</code></pre>\n<hr />\n<p>Related camera/IP/RTSP/streaming, FPS, video, threading, and multiprocessing posts</p>\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/55099413/python-opencv-streaming-from-camera-multithreading-timestamps\">Python OpenCV streaming from camera - multithreading, timestamps</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/55828451/video-streaming-from-ip-camera-in-python-using-opencv-cv2-videocapture\">Video Streaming from IP Camera in Python Using OpenCV cv2.VideoCapture</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/58592291/how-to-capture-multiple-camera-streams-with-opencv\">How to capture multiple camera streams with OpenCV?</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync\">OpenCV real time streaming video capture is slow. How to drop frames or get synced with real time?</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/55141315/storing-rtsp-stream-as-video-file-with-opencv-videowriter\">Storing RTSP stream as video file with OpenCV VideoWriter</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/29317262/opencv-video-saving-in-python/71624807#71624807\">OpenCV video saving</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/72120491/python-opencv-multiprocessing-cv2-videocapture-mp4\">Python OpenCV multiprocessing cv2.VideoCapture mp4</a></p>\n</li>\n</ol>\n"
                },
                {
                    "owner": {
                        "account_id": 27456465,
                        "reputation": 11,
                        "user_id": 20947815,
                        "user_type": "unregistered",
                        "display_name": "user20947815"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1673033310,
                    "creation_date": 1673033310,
                    "answer_id": 75035336,
                    "question_id": 58293187,
                    "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/75035336#75035336",
                    "body": "<p>I would suggest double checking the compatible video stream codecs with the hardware. I ran into the same issue, frame rate dropped to 5 fps only during streaming, because it was defaulting to a format that is not being streamed so it would convert it then display very lagged (~1s) with lower fps as well.</p>\n<p>use <code>Self.capture.set(cv2.CAP_PROP_FOURCC ,cv2.VideoWriter_fourcc('M', 'J', 'P', 'G') )</code> with the proper codec in place of MJPG and with your cv2.VideoCapture and see if that helps.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 13695668,
                        "reputation": 101,
                        "user_id": 9882420,
                        "user_type": "registered",
                        "display_name": "Dgomn D"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1695924958,
                    "creation_date": 1695924958,
                    "answer_id": 77197336,
                    "question_id": 58293187,
                    "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync/77197336#77197336",
                    "body": "<p>This made a huge difference for me (on Windows 11, using an ELP USB2 camera):</p>\n<p>Instead of using <code>self.capture = cv2.VideoCapture(1)</code></p>\n<p>I used <code>self.capture = cv2.VideoCapture(1, cv2.CAP_DSHOW)</code></p>\n<p>This enabled me to use all of the cv2.CAP_PROP_ attributes.</p>\n"
                }
            ],
            "owner": {
                "account_id": 7459507,
                "reputation": 1098,
                "user_id": 5671548,
                "user_type": "registered",
                "accept_rate": 92,
                "display_name": "Conic"
            },
            "comment_count": 4,
            "is_answered": true,
            "accepted_answer_id": 58386085,
            "answer_count": 4,
            "score": 41,
            "last_activity_date": 1707239996,
            "creation_date": 1570564359,
            "last_edit_date": 1571103668,
            "question_id": 58293187,
            "link": "https://stackoverflow.com/questions/58293187/opencv-real-time-streaming-video-capture-is-slow-how-to-drop-frames-or-get-sync",
            "title": "OpenCV real time streaming video capture is slow. How to drop frames or get synced with real time?",
            "body": "<h1>Goal and problem</h1>\n\n<p>I'd like to set up an opencv system to process either HLS streams or RMTP streams, however, I am running into a strange issue regarding a reduced frame-rate and an accumulating lag. It's as if the video gets further and further behind from where it is supposed to be in the stream.    </p>\n\n<p>I'm looking for a way to keep up to date with a live source even if it means dropping frames.  </p>\n\n<h1>Current approach</h1>\n\n<pre class=\"lang-py prettyprint-override\"><code>import cv2\n\ncap = cv2.VideoCapture()\ncap.open('https://videos3.earthcam.com/fecnetwork/9974.flv/chunklist_w1421640637.m3u8')\n\nwhile (True):\n    _, frame = cap.read()\n    cv2.imshow(\"camCapture\", frame)\n    cv2.waitKey(1)\n</code></pre>\n\n<p>I've validated the quality of the stream on VLC and it seems to work fine there.  </p>\n\n<h2>cv2 speed</h2>\n\n<p><img src=\"https://media.giphy.com/media/LmrlaW11Oc2pLYB8EL/giphy.gif\" alt=\"\"> . </p>\n\n<h2>realistic/expected speed</h2>\n\n<p><img src=\"https://media.giphy.com/media/Y2zrQ0fUQ9jv08ioHi/giphy.gif\" alt=\"\"> </p>\n\n<h2>Questions:</h2>\n\n<ul>\n<li>What am I doing wrong here?  </li>\n<li>Why is it so slow?  </li>\n<li>How do I sync it to real-time speeds?</li>\n</ul>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 6181
}