{
    "items": [
        {
            "tags": [
                "python",
                "file",
                "permissions",
                "directory",
                "operating-system"
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 83845,
                                "reputation": 33940,
                                "user_id": 234815,
                                "user_type": "registered",
                                "display_name": "John Knoeller"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1264113152,
                            "post_id": 2113457,
                            "comment_id": 2049260,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113457#comment2049260_2113457",
                            "body": "+1 Python or not, this is really the most reliable way to test for access."
                        },
                        {
                            "owner": {
                                "account_id": 33994,
                                "reputation": 106328,
                                "user_id": 95612,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Jochen Ritzel"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1264117077,
                            "post_id": 2113457,
                            "comment_id": 2049774,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113457#comment2049774_2113457",
                            "body": "This also takes care of other errors that can happen when writing to the disk - no diskspace left for example. That&#39;s the power of trying .. you dont need to remember everything that can go wrong ;-)"
                        },
                        {
                            "owner": {
                                "account_id": 579039,
                                "reputation": 1571,
                                "user_id": 233593,
                                "user_type": "unregistered",
                                "accept_rate": 0,
                                "display_name": "illuminatedtiger"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1264122266,
                            "post_id": 2113457,
                            "comment_id": 2050242,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113457#comment2050242_2113457",
                            "body": "Thanks guys. Decided to go with os.access as speed is an important factor in what I&#39;m doing here although I can certainly understand the merits in &quot;it&#39;s easier to ask for forgiveness than for permission.&quot; ;)"
                        },
                        {
                            "owner": {
                                "account_id": 29910,
                                "reputation": 114373,
                                "user_id": 81179,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "ChristopheD"
                            },
                            "reply_to_user": {
                                "account_id": 579039,
                                "reputation": 1571,
                                "user_id": 233593,
                                "user_type": "unregistered",
                                "accept_rate": 0,
                                "display_name": "illuminatedtiger"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1264143645,
                            "post_id": 2113457,
                            "comment_id": 2051640,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113457#comment2051640_2113457",
                            "body": "@illuminatedtiger: that&#39;s perfectfly fine, just be aware of the notes in the documentation (<a href=\"http://docs.python.org/library/os.html#os.access\" rel=\"nofollow noreferrer\">docs.python.org/library/os.html#os.access</a>)"
                        },
                        {
                            "owner": {
                                "account_id": 1412466,
                                "reputation": 8603,
                                "user_id": 1338797,
                                "user_type": "registered",
                                "display_name": "Tomasz Gandor"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1459844457,
                            "post_id": 2113457,
                            "comment_id": 60456170,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113457#comment60456170_2113457",
                            "body": "It&#39;s a great IDIO...m - especially when coupled with another idiom <code>except: pass</code> - this way you can always be optimistic and think highly of yourself. /sarcasm off. Now why would I want to, e.g. try to write something into every directory in my filesystem, to produce a list of writable locations?"
                        },
                        {
                            "owner": {
                                "account_id": 29910,
                                "reputation": 114373,
                                "user_id": 81179,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "ChristopheD"
                            },
                            "reply_to_user": {
                                "account_id": 1412466,
                                "reputation": 8603,
                                "user_id": 1338797,
                                "user_type": "registered",
                                "display_name": "Tomasz Gandor"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1459901265,
                            "post_id": 2113457,
                            "comment_id": 60493061,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113457#comment60493061_2113457",
                            "body": "@Tomasz Gandor: I don&#39;t think <code>except: pass</code> is a generally accepted idiom :-) (in any language). That being said, compiling a list of writable locations on your filesystem is doomed to be out of date from the moment you create it. What use case does this have? Even checking if you <i>can</i> write to a directory just one line before you try to write (in code) is not a guarantee of any sorts (since it is not an atomic operation). Just &quot;trying&quot; is still what you&#39;ll need to do anyway."
                        },
                        {
                            "owner": {
                                "account_id": 1412466,
                                "reputation": 8603,
                                "user_id": 1338797,
                                "user_type": "registered",
                                "display_name": "Tomasz Gandor"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1459928473,
                            "post_id": 2113457,
                            "comment_id": 60502595,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113457#comment60502595_2113457",
                            "body": "I agree. The right approach depends on a situation - if you want to write to the directory anyway - just go for it, and catch errors (EAFP). But, if you need to write to directories A, B, and C - and you only find out that C fails down the road - you may have wasted (computation) time and... money (think - cloud computing). Or you need to be able to clean up after such failed &quot;transaction&quot;. Well, the last one you may need anyway; you may still loose permissions in TOCTOU."
                        },
                        {
                            "owner": {
                                "account_id": 1896144,
                                "reputation": 1287,
                                "user_id": 1713078,
                                "user_type": "registered",
                                "display_name": "Bachsau"
                            },
                            "edited": false,
                            "score": 10,
                            "creation_date": 1524246259,
                            "post_id": 2113457,
                            "comment_id": 86910776,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113457#comment86910776_2113457",
                            "body": "Maybe a program just wants to know without having the need to actually write. It might just want to change the look and/or behaviour of a GUI according to the property. In that case I would not consider it pythonic to write and delete a file just as a test."
                        },
                        {
                            "owner": {
                                "account_id": 452230,
                                "reputation": 2111,
                                "user_id": 848547,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "sivann"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1573816765,
                            "post_id": 2113457,
                            "comment_id": 104019391,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113457#comment104019391_2113457",
                            "body": "That was not the question though."
                        },
                        {
                            "owner": {
                                "account_id": 3547111,
                                "reputation": 4587,
                                "user_id": 2962794,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "Br\u014dtsyorfuzthr\u0101x"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1630580374,
                            "post_id": 2113457,
                            "comment_id": 121998379,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113457#comment121998379_2113457",
                            "body": "An issue with this is you don&#39;t always get a &#39;Python&#39; error that you can easily catch, per se. I mean, if you&#39;re doing such as <code>subprocess.run(...)</code> then Python won&#39;t throw permission errors for those subprocess calls."
                        }
                    ],
                    "owner": {
                        "account_id": 29910,
                        "reputation": 114373,
                        "user_id": 81179,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "ChristopheD"
                    },
                    "comment_count": 10,
                    "is_accepted": false,
                    "score": 85,
                    "last_activity_date": 1437407214,
                    "last_edit_date": 1437407214,
                    "creation_date": 1264113040,
                    "answer_id": 2113457,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113457#2113457",
                    "body": "<p>It may seem strange to suggest this, but a common Python idiom is </p>\n\n<blockquote>\n  <p>It's easier to ask for forgiveness\n  than for permission</p>\n</blockquote>\n\n<p>Following that idiom, one might say:</p>\n\n<p>Try writing to the directory in question, and catch the error if you don't have the permission to do so.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 64038,
                                "reputation": 19754,
                                "user_id": 189247,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "Gaslight Deceive Subvert"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1380207607,
                            "post_id": 2113471,
                            "comment_id": 28122498,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113471#comment28122498_2113471",
                            "body": "This solution is Unix only."
                        },
                        {
                            "owner": {
                                "account_id": 2048387,
                                "reputation": 329,
                                "user_id": 1827955,
                                "user_type": "registered",
                                "accept_rate": 33,
                                "display_name": "Fido"
                            },
                            "reply_to_user": {
                                "account_id": 64038,
                                "reputation": 19754,
                                "user_id": 189247,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "Gaslight Deceive Subvert"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1691605931,
                            "post_id": 2113471,
                            "comment_id": 135515686,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113471#comment135515686_2113471",
                            "body": "@Bj&#246;rnLindqvist: Just like the solutions above :)"
                        }
                    ],
                    "owner": {
                        "account_id": 28533,
                        "reputation": 26125,
                        "user_id": 76310,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Joe Koberg"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 11,
                    "last_activity_date": 1622771885,
                    "last_edit_date": 1622771885,
                    "creation_date": 1264113169,
                    "answer_id": 2113471,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113471#2113471",
                    "body": "<p>Check the mode bits:</p>\n<pre><code>import os, stat\n\ndef isWritable(dirname):\n  uid = os.geteuid()\n  gid = os.getegid()\n  s = os.stat(dirname)\n  mode = s[stat.ST_MODE]\n  return (\n     ((s[stat.ST_UID] == uid) and (mode &amp; stat.S_IWUSR)) or\n     ((s[stat.ST_GID] == gid) and (mode &amp; stat.S_IWGRP)) or\n     (mode &amp; stat.S_IWOTH)\n     )\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 55645,
                                "reputation": 74137,
                                "user_id": 166686,
                                "user_type": "registered",
                                "display_name": "mjv"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1265484777,
                            "post_id": 2113511,
                            "comment_id": 2167030,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113511#comment2167030_2113511",
                            "body": "Depending on the situation, the &quot;easier to ask for forgiveness&quot; is not the best way, even in Python. It is sometimes advisable to &quot;ask permission&quot; as with the os.access() method mentioned, for example when the probability of having to catch an error is high."
                        },
                        {
                            "owner": {
                                "account_id": 224990,
                                "reputation": 646,
                                "user_id": 485209,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "fthinker"
                            },
                            "edited": false,
                            "score": 67,
                            "creation_date": 1332522794,
                            "post_id": 2113511,
                            "comment_id": 12544743,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113511#comment12544743_2113511",
                            "body": "Testing a directory for just the write bit isn&#39;t enough if you want to write files to the directory. You will need to test for the execute bit as well if you want to write into the directory. os.access(&#39;/path/to/folder&#39;, os.W_OK | os.X_OK) With os.W_OK by itself you can only delete the directory (and only if that directory is empty)"
                        },
                        {
                            "owner": {
                                "account_id": 459818,
                                "reputation": 163,
                                "user_id": 860520,
                                "user_type": "registered",
                                "display_name": "Alexios"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1463128648,
                            "post_id": 2113511,
                            "comment_id": 61941830,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113511#comment61941830_2113511",
                            "body": "Another gotcha of <code>os.access()</code> is it checks using the <i>real</i> UID and GID, not the <i>effective</i> ones. This could cause weirdness in SUID/SGID environments. (\u2018but the script runs setuid root, why can&#39;t it write to the file?\u2019)"
                        },
                        {
                            "owner": {
                                "account_id": 5486002,
                                "reputation": 5703,
                                "user_id": 4360746,
                                "user_type": "registered",
                                "accept_rate": 53,
                                "display_name": "Ray Salemi"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1476196282,
                            "post_id": 2113511,
                            "comment_id": 67238123,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113511#comment67238123_2113511",
                            "body": "I will look it up, but it would be useful to see what os.access() returns here in the solution.  I presume it&#39;s a boolean."
                        },
                        {
                            "owner": {
                                "account_id": 1896144,
                                "reputation": 1287,
                                "user_id": 1713078,
                                "user_type": "registered",
                                "display_name": "Bachsau"
                            },
                            "edited": false,
                            "score": 10,
                            "creation_date": 1524246231,
                            "post_id": 2113511,
                            "comment_id": 86910764,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113511#comment86910764_2113511",
                            "body": "Maybe a program just wants to know without having the need to actually write. It might just want to change the look and/or behaviour of a GUI according to the property. In that case I would not consider it pythonic to write and delete a file just as a test."
                        },
                        {
                            "owner": {
                                "account_id": 6846284,
                                "reputation": 794,
                                "user_id": 10092563,
                                "user_type": "registered",
                                "display_name": "iamanigeeit"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1539075016,
                            "post_id": 2113511,
                            "comment_id": 92359285,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113511#comment92359285_2113511",
                            "body": "Just tested on a Windows network share. <code>os.access(dirpath, os.W_OK | os.X_OK)</code> returns True even if i have no write access."
                        },
                        {
                            "owner": {
                                "account_id": 454275,
                                "reputation": 9441,
                                "user_id": 851737,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "schlamar"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1547130509,
                            "post_id": 2113511,
                            "comment_id": 95092740,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113511#comment95092740_2113511",
                            "body": "As already said, this give wrong results on Windows... Please add a comment in your answer, then I will remove the downvote."
                        },
                        {
                            "owner": {
                                "account_id": 3472738,
                                "reputation": 91,
                                "user_id": 13128780,
                                "user_type": "registered",
                                "display_name": "nphaibk"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1691100454,
                            "post_id": 2113511,
                            "comment_id": 135450127,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113511#comment135450127_2113511",
                            "body": "This solution does not work in case of network mapped drive!"
                        },
                        {
                            "owner": {
                                "account_id": 13795134,
                                "reputation": 3020,
                                "user_id": 10440128,
                                "user_type": "registered",
                                "display_name": "milahu"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1706965098,
                            "post_id": 2113511,
                            "comment_id": 137390426,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113511#comment137390426_2113511",
                            "body": "a bit more code please. <code>if os.access(&quot;myfile&quot;, os.R_OK): ...</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 60899,
                        "reputation": 38233,
                        "user_id": 181765,
                        "user_type": "registered",
                        "display_name": "Max Shawabkeh"
                    },
                    "comment_count": 9,
                    "is_accepted": false,
                    "score": 237,
                    "last_activity_date": 1554834803,
                    "last_edit_date": 1554834803,
                    "creation_date": 1264113562,
                    "answer_id": 2113511,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113511#2113511",
                    "body": "<p>Although what Christophe suggested is a more Pythonic solution, the os module does have <a href=\"https://docs.python.org/3/library/os.html#os.access\" rel=\"noreferrer\">the os.access function</a> to check access:</p>\n\n<p><code>os.access('/path/to/folder', os.W_OK)</code> # W_OK is for writing, R_OK for reading, etc.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 93669,
                        "reputation": 491,
                        "user_id": 256148,
                        "user_type": "registered",
                        "display_name": "sverkerw"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 10,
                    "last_activity_date": 1264115860,
                    "creation_date": 1264115860,
                    "answer_id": 2113750,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/2113750#2113750",
                    "body": "<p>If you only care about the file perms, <code>os.access(path, os.W_OK)</code> should do what you ask for. If you instead want to know whether you <strong>can</strong> write to the directory, <code>open()</code> a test file for writing (it shouldn't exist beforehand), catch and examine any <code>IOError</code>, and clean up the test file afterwards.</p>\n\n<p>More generally, to avoid <a href=\"http://en.wikipedia.org/wiki/TOCTOU\" rel=\"noreferrer\">TOCTOU</a> attacks (only a problem if your script runs with elevated privileges -- suid or cgi or so), you shouldn't really trust these ahead-of-time tests, but drop privs, do the <code>open()</code>, and expect the <code>IOError</code>.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 13795134,
                                "reputation": 3020,
                                "user_id": 10440128,
                                "user_type": "registered",
                                "display_name": "milahu"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1656498782,
                            "post_id": 8620444,
                            "comment_id": 128585964,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/8620444#comment128585964_8620444",
                            "body": "except PermissionError"
                        },
                        {
                            "owner": {
                                "account_id": 970619,
                                "reputation": 496,
                                "user_id": 993251,
                                "user_type": "registered",
                                "display_name": "nwsmith"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1692956885,
                            "post_id": 8620444,
                            "comment_id": 135698374,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/8620444#comment135698374_8620444",
                            "body": "What is the point of the while loop and the count variable?"
                        }
                    ],
                    "owner": {
                        "account_id": 415731,
                        "reputation": 1174,
                        "user_id": 790708,
                        "user_type": "registered",
                        "display_name": "khattam"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1324672986,
                    "creation_date": 1324672986,
                    "answer_id": 8620444,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/8620444#8620444",
                    "body": "<p>Here is something I created based on ChristopheD's answer:</p>\n\n<pre><code>import os\n\ndef isWritable(directory):\n    try:\n        tmp_prefix = \"write_tester\";\n        count = 0\n        filename = os.path.join(directory, tmp_prefix)\n        while(os.path.exists(filename)):\n            filename = \"{}.{}\".format(os.path.join(directory, tmp_prefix),count)\n            count = count + 1\n        f = open(filename,\"w\")\n        f.close()\n        os.remove(filename)\n        return True\n    except Exception as e:\n        #print \"{}\".format(e)\n        return False\n\ndirectory = \"c:\\\\\"\nif (isWritable(directory)):\n    print \"directory is writable\"\nelse:\n    print \"directory is not writable\"\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 490430,
                                "reputation": 1277,
                                "user_id": 3768749,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Mike S"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1491936101,
                            "post_id": 11170037,
                            "comment_id": 73770818,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/11170037#comment73770818_11170037",
                            "body": "This applies to a file, not directory which is what the OP asked. You can have a file in a directory and have the directory not be writable but the file itself is, should the file already exist. This may be important in systems administration where you&#39;re eg creating log files that you want to already exist but don&#39;t want people using a log directory for temp space."
                        },
                        {
                            "owner": {
                                "account_id": 490430,
                                "reputation": 1277,
                                "user_id": 3768749,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Mike S"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1492010941,
                            "post_id": 11170037,
                            "comment_id": 73809816,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/11170037#comment73809816_11170037",
                            "body": "...and actually I voted it down, which I now think was a mistake. There are issues, as Rohaq mentioned, with race conditions. There are other issues on various platforms where you may test the directory, and it looks writable, but it actually isn&#39;t. Performing cross-platform directory writable checks is harder than it looks. So as long as you&#39;re aware of the issues, this may be a fine technique. I was looking at it from a too UNIX-y perspective, which is my mistake. Someone edit this answer so I can remove my -1."
                        },
                        {
                            "owner": {
                                "account_id": 379796,
                                "reputation": 1986,
                                "user_id": 733402,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Rohaq"
                            },
                            "reply_to_user": {
                                "account_id": 490430,
                                "reputation": 1277,
                                "user_id": 3768749,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Mike S"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1492834424,
                            "post_id": 11170037,
                            "comment_id": 74162180,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/11170037#comment74162180_11170037",
                            "body": "I&#39;ve edited it, in case you want to remove the -1 :)  And yes, cross-platform directory checks can get more complicated, but generally you&#39;re looking to create/write to a file in that directory - in which case the example I&#39;ve given should still apply. If some directory permission related issue comes up, it should still throw an IOError when attempting to open the filehandle."
                        },
                        {
                            "owner": {
                                "account_id": 490430,
                                "reputation": 1277,
                                "user_id": 3768749,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Mike S"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1493049701,
                            "post_id": 11170037,
                            "comment_id": 74235229,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/11170037#comment74235229_11170037",
                            "body": "I removed my downvote. Sorry about that, and thanks for your contribution."
                        },
                        {
                            "owner": {
                                "account_id": 379796,
                                "reputation": 1986,
                                "user_id": 733402,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Rohaq"
                            },
                            "reply_to_user": {
                                "account_id": 490430,
                                "reputation": 1277,
                                "user_id": 3768749,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Mike S"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1493137965,
                            "post_id": 11170037,
                            "comment_id": 74281533,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/11170037#comment74281533_11170037",
                            "body": "No worries, people questioning answers is always welcomed!"
                        }
                    ],
                    "owner": {
                        "account_id": 379796,
                        "reputation": 1986,
                        "user_id": 733402,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Rohaq"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 10,
                    "last_activity_date": 1492834410,
                    "last_edit_date": 1492834410,
                    "creation_date": 1340459541,
                    "answer_id": 11170037,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/11170037#11170037",
                    "body": "<p>Stumbled across this thread searching for examples for someone. First result on Google, congrats!</p>\n\n<p>People talk about the Pythonic way of doing it in this thread, but no simple code examples? Here you go, for anyone else who stumbles in:</p>\n\n<pre><code>import sys\n\nfilepath = 'C:\\\\path\\\\to\\\\your\\\\file.txt'\n\ntry:\n    filehandle = open( filepath, 'w' )\nexcept IOError:\n    sys.exit( 'Unable to write to file ' + filepath )\n\nfilehandle.write(\"I am writing this text to the file\\n\")\n</code></pre>\n\n<p>This attempts to open a filehandle for writing, and exits with an error if the file specified cannot be written to: This is far easier to read, and is a much better way of doing it rather than doing prechecks on the file path or the directory, as it avoids race conditions; cases where the file becomes unwriteable between the time you run the precheck, and when you actually attempt to write to the file. </p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 331941,
                                "reputation": 4038,
                                "user_id": 656936,
                                "user_type": "registered",
                                "accept_rate": 76,
                                "display_name": "grasshopper"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1419987546,
                            "post_id": 25868839,
                            "comment_id": 43841687,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/25868839#comment43841687_25868839",
                            "body": "I think the one using tempfile is the cleaner because it for sure doesnt leave residuals."
                        },
                        {
                            "owner": {
                                "user_type": "does_not_exist",
                                "display_name": "user2171842"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1462559067,
                            "post_id": 25868839,
                            "comment_id": 61702936,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/25868839#comment61702936_25868839",
                            "body": "this method is not working using <code>tempfile</code>. it only works when there is no <code>OSError</code> meaning it has permission to write/delete. otherwise it will not <code>return False</code> because no error is returned, and the script won&#39;t continue to execute or exit. nothing is returned. it&#39;s just stuck at that line. however, creating a non-temporary file such as khattam&#39;s answer does work both when permission is allowed or denied. help?"
                        },
                        {
                            "owner": {
                                "account_id": 1795261,
                                "reputation": 380,
                                "user_id": 1634837,
                                "user_type": "registered",
                                "display_name": "BubuIIC"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1601114981,
                            "post_id": 25868839,
                            "comment_id": 113308474,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/25868839#comment113308474_25868839",
                            "body": "This can also throw <code>OSError: [Errno 30] Read-only file system</code>"
                        },
                        {
                            "owner": {
                                "account_id": 970619,
                                "reputation": 496,
                                "user_id": 993251,
                                "user_type": "registered",
                                "display_name": "nwsmith"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1692959706,
                            "post_id": 25868839,
                            "comment_id": 135698933,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/25868839#comment135698933_25868839",
                            "body": "On Windows, with a non-writable directory the delays is NOT several seconds. I waited 30 minutes for this to return, before giving up and interrupting the code. Tested on Windows 11 with Python 3.10 and it still appears, after all these years, to be an <a href=\"https://github.com/python/cpython/issues/66305\" rel=\"nofollow noreferrer\">open bug</a>. The workaround is to use a fixed filename like say &#39;write_text.txt&#39; in place of a system generated temp filename, then when you execute &#39;open(filename,&quot;w&quot;)&#39; it throws error &#39;[Errno 13] Permission denied:&#39;"
                        }
                    ],
                    "owner": {
                        "account_id": 5038110,
                        "reputation": 397,
                        "user_id": 4046346,
                        "user_type": "registered",
                        "display_name": "zak"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 28,
                    "last_activity_date": 1606737184,
                    "last_edit_date": 1606737184,
                    "creation_date": 1410870639,
                    "answer_id": 25868839,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/25868839#25868839",
                    "body": "<p>My solution using the <code>tempfile</code> module:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import tempfile\nimport errno\n\ndef isWritable(path):\n    try:\n        testfile = tempfile.TemporaryFile(dir = path)\n        testfile.close()\n    except OSError as e:\n        if e.errno == errno.EACCES:  # 13\n            return False\n        e.filename = path\n        raise\n    return True\n</code></pre>\n<p>Update:\nAfter testing the code again on Windows I see that there is indeed an issue when using tempfile there, see <a href=\"https://bugs.python.org/issue22107\" rel=\"noreferrer\">issue22107: tempfile module misinterprets access denied error on Windows</a>.\nIn the case of a non-writable directory, the code hangs for several seconds and finally throws an <code>IOError: [Errno 17] No usable temporary file name found</code>. Maybe this is what user2171842 was observing?\nUnfortunately the issue is not resolved for now so to handle this, the error needs to be caught as well:</p>\n<pre class=\"lang-py prettyprint-override\"><code>    except (OSError, IOError) as e:\n        if e.errno == errno.EACCES or e.errno == errno.EEXIST:  # 13, 17\n</code></pre>\n<p>The delay is of course still present in these cases then.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2602356,
                                "reputation": 1087,
                                "user_id": 2277445,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Jorrick Sleijster"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1503253312,
                            "post_id": 44005687,
                            "comment_id": 78528450,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/44005687#comment78528450_44005687",
                            "body": "This is basically a copy of Max Shawabkeh&#39;s answer with a little wrapper around it. Makes it a quick copy paste but a better idea would be to have added it to the original post of Max."
                        },
                        {
                            "owner": {
                                "account_id": 970619,
                                "reputation": 496,
                                "user_id": 993251,
                                "user_type": "registered",
                                "display_name": "nwsmith"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1692956617,
                            "post_id": 44005687,
                            "comment_id": 135698318,
                            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/44005687#comment135698318_44005687",
                            "body": "This does not work on Windows. I set &#39;Deny Write&#39; on the folder, but the above code still says it&#39;s writable!"
                        }
                    ],
                    "owner": {
                        "account_id": 1746355,
                        "reputation": 1736,
                        "user_id": 1596471,
                        "user_type": "registered",
                        "display_name": "Softmixt"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1494948650,
                    "creation_date": 1494948650,
                    "answer_id": 44005687,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/44005687#44005687",
                    "body": "<pre><code> if os.access(path_to_folder, os.W_OK) is not True:\n            print(\"Folder not writable\")\n else :\n            print(\"Folder writable\")\n</code></pre>\n\n<p>more info about access can be find it <a href=\"https://www.tutorialspoint.com/python/os_access.htm\" rel=\"nofollow noreferrer\">here</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 4207563,
                        "reputation": 19675,
                        "user_id": 3446126,
                        "user_type": "registered",
                        "display_name": "Todor Minakov"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1507988129,
                    "creation_date": 1507988129,
                    "answer_id": 46745175,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/46745175#46745175",
                    "body": "<p>If you need to check the permission of <strong>another user</strong> (yes, I realize this contradicts the question, but may come in handy for someone), you can do it through the <code>pwd</code> module, and the directory's mode bits.</p>\n\n<p><strong>Disclaimer</strong> - does not work on Windows, as it doesn't use the POSIX permissions model (and the <code>pwd</code> module is not available there), e.g. - solution only for *nix systems.</p>\n\n<p>Note that a directory has to have all the 3 bits set - Read, Write and eXecute.<br>\nOk, R is not an absolute must, but w/o it you cannot list the entries in the directory (so you have to know their names). Execute on the other hand is absolutely needed - w/o it the user cannot read the file's inodes; so even having W, without X files cannot be created or modified. <a href=\"https://wpollock.com/AUnix1/FilePermissions.htm\" rel=\"nofollow noreferrer\">More detailed explanation at this link.</a></p>\n\n<p>Finally, the modes are available in the <code>stat</code> module, their <a href=\"http://man7.org/linux/man-pages/man7/inode.7.html\" rel=\"nofollow noreferrer\">descriptions are in inode(7) man</a>.</p>\n\n<p>Sample code how to check:</p>\n\n<pre><code>import pwd\nimport stat\nimport os\n\ndef check_user_dir(user, directory):\n    dir_stat = os.stat(directory)\n\n    user_id, group_id = pwd.getpwnam(user).pw_uid, pwd.getpwnam(user).pw_gid\n    directory_mode = dir_stat[stat.ST_MODE]\n\n    # use directory_mode as mask \n    if user_id == dir_stat[stat.ST_UID] and stat.S_IRWXU &amp; directory_mode == stat.S_IRWXU:     # owner and has RWX\n        return True\n    elif group_id == dir_stat[stat.ST_GID] and stat.S_IRWXG &amp; directory_mode == stat.S_IRWXG:  # in group &amp; it has RWX\n        return True\n    elif stat.S_IRWXO &amp; directory_mode == stat.S_IRWXO:                                        # everyone has RWX\n        return True\n\n    # no permissions\n    return False\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 13384297,
                        "reputation": 31,
                        "user_id": 10112725,
                        "user_type": "registered",
                        "display_name": "Panduar"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1655571873,
                    "last_edit_date": 1655571873,
                    "creation_date": 1538798852,
                    "answer_id": 52675609,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/52675609#52675609",
                    "body": "<p>I ran into this same need while adding an argument via argparse. The built in <code>type=FileType('w')</code> wouldn't work for me as I was looking for a directory. I ended up writing my own method to solve my problem. Here is the result with argparse snippet.</p>\n<pre><code>#! /usr/bin/env python\nimport os\nimport argparse\n\ndef writable_dir(dir):\n    if os.access(dir, os.W_OK) and os.path.isdir(dir):\n        return os.path.abspath(dir)\n    else:\n        raise argparse.ArgumentTypeError(dir + &quot; is not writable or does not exist.&quot;)\n\nparser = argparse.ArgumentParser()\nparser.add_argument(&quot;-d&quot;,&quot;--dir&quot;, type=writable_dir, default='/tmp/',\n    help=&quot;Directory to use. Default: /tmp&quot;)\nopts = parser.parse_args()\n</code></pre>\n<p>That results in the following:</p>\n<pre><code>$ python dir-test.py -h\nusage: dir-test.py [-h] [-d DIR]\n\noptional arguments:\n  -h, --help         show this help message and exit\n  -d DIR, --dir DIR  Directory to use. Default: /tmp\n\n$ python dir-test.py -d /not/real\nusage: dir-test.py [-h] [-d DIR]\ndir-test.py: error: argument -d/--dir: /not/real is not writable or does not exist.\n\n$ python dir-test.py -d ~\n</code></pre>\n<p>I went back and added <strong>print opts.dir</strong> to the end, and everything appears to be functioning as desired.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 13795134,
                        "reputation": 3020,
                        "user_id": 10440128,
                        "user_type": "registered",
                        "display_name": "milahu"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1656517406,
                    "last_edit_date": 1656517406,
                    "creation_date": 1656515767,
                    "answer_id": 72803873,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/72803873#72803873",
                    "body": "<p>check if a stat object is readable or writable</p>\n<p>useful to check if a pipe is readable or writable</p>\n<pre class=\"lang-py prettyprint-override\"><code>import os, stat\n\ndef check_access(s, check=&quot;r&quot;):\n  &quot;check if s=os.stat(path) is readable or writable&quot;\n  u = os.geteuid(); g = os.getegid(); m = s.st_mode\n  if check == &quot;r&quot;:\n    return (\n      ((s[stat.ST_UID] == u) and (m &amp; stat.S_IRUSR)) or\n      ((s[stat.ST_GID] == g) and (m &amp; stat.S_IRGRP)) or\n      (m &amp; stat.S_IROTH)\n    ) != 0\n  if check == &quot;w&quot;:\n    return (\n      ((s[stat.ST_UID] == u) and (m &amp; stat.S_IWUSR)) or\n      ((s[stat.ST_GID] == g) and (m &amp; stat.S_IWGRP)) or\n      (m &amp; stat.S_IWOTH)\n    ) != 0\n\ns = os.stat(0) # fd 0 == stdin\nprint(f&quot;fd 0 is readable?&quot;, check_access(s, &quot;r&quot;))\n\ns = os.stat(1) # fd 1 == stdout\nprint(f&quot;fd 1 is writable?&quot;, check_access(s, &quot;w&quot;))\n\nos.write(1, b&quot;hello\\n&quot;)\n</code></pre>\n<p>based on the answer by Joe Koberg</p>\n<p>see also: same thing in <a href=\"https://stackoverflow.com/a/72804251/10440128\">javascript</a></p>\n<p>probably breaks on windows</p>\n"
                },
                {
                    "owner": {
                        "account_id": 970619,
                        "reputation": 496,
                        "user_id": 993251,
                        "user_type": "registered",
                        "display_name": "nwsmith"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1692960366,
                    "creation_date": 1692960366,
                    "answer_id": 76976464,
                    "question_id": 2113427,
                    "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable/76976464#76976464",
                    "body": "<p>On Windows, the 'tempfile' solution does not work, because of this <a href=\"https://github.com/python/cpython/issues/66305\" rel=\"nofollow noreferrer\">bug</a>. So I simply used the following:</p>\n<pre><code>def isWritable(path: str) -&gt; bool:\n    try:\n        filename  = os.path.join(path, 'write_test.txt')\n        f = open(filename,&quot;w&quot;)\n        f.close()\n        os.remove(filename)\n        return True\n    except:\n        return False\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 579039,
                "reputation": 1571,
                "user_id": 233593,
                "user_type": "unregistered",
                "accept_rate": 0,
                "display_name": "illuminatedtiger"
            },
            "comment_count": 0,
            "is_answered": true,
            "answer_count": 12,
            "score": 134,
            "last_activity_date": 1692960366,
            "creation_date": 1264112679,
            "question_id": 2113427,
            "link": "https://stackoverflow.com/questions/2113427/determining-whether-a-directory-is-writeable",
            "title": "Determining Whether a Directory is Writeable",
            "body": "<p>What would be the best way in Python to determine whether a directory is writeable for the user executing the script? Since this will likely involve using the os module I should mention I'm running it under a *nix environment. </p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 8070
}