{
    "items": [
        {
            "tags": [
                "python",
                "datetime",
                "date",
                "time",
                "formatting"
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 24717,
                                "reputation": 267822,
                                "user_id": 63051,
                                "user_type": "registered",
                                "accept_rate": 95,
                                "display_name": "flybywire"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1255286683,
                            "post_id": 1551394,
                            "comment_id": 1409147,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#comment1409147_1551394",
                            "body": "that is tailored to my exact needs. Thanks!"
                        },
                        {
                            "owner": {
                                "account_id": 3519,
                                "reputation": 25811,
                                "user_id": 5077,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Chris Dail"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1259591062,
                            "post_id": 1551394,
                            "comment_id": 1710213,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#comment1710213_1551394",
                            "body": "The link no longer exists and is giving a Forbidden. Need a permlink here or the content to be moved into this post."
                        },
                        {
                            "owner": {
                                "account_id": 56348,
                                "reputation": 15772,
                                "user_id": 168771,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Jed Smith"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1259596754,
                            "post_id": 1551394,
                            "comment_id": 1710858,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#comment1710858_1551394",
                            "body": "@Chris: Thanks for the heads up, and it was still in Google Cache so I snagged it."
                        },
                        {
                            "owner": {
                                "account_id": 25850,
                                "reputation": 5283,
                                "user_id": 66767,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "wenbert"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1289337088,
                            "post_id": 1551394,
                            "comment_id": 4462804,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#comment4462804_1551394",
                            "body": "This does not work for me. I get this error: local variable &#39;diff&#39; referenced before assignment why?"
                        },
                        {
                            "owner": {
                                "account_id": 65538,
                                "reputation": 16233,
                                "user_id": 192791,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "Jonathan"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1371479746,
                            "post_id": 1551394,
                            "comment_id": 24824309,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#comment24824309_1551394",
                            "body": "I threw this up to the cheeseshop: (<a href=\"https://pypi.python.org/pypi/human_dates/0.1.0\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/human_dates/0.1.0</a>) and <a href=\"https://github.com/jtushman/human_dates\" rel=\"nofollow noreferrer\">github.com/jtushman/human_dates</a>"
                        },
                        {
                            "owner": {
                                "account_id": 109946,
                                "reputation": 4456,
                                "user_id": 291106,
                                "user_type": "registered",
                                "display_name": "jrz"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1377813579,
                            "post_id": 1551394,
                            "comment_id": 27237518,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#comment27237518_1551394",
                            "body": "It would be nice if the time units were not pluralized for single counts, for example &#39;1 week ago&#39; rather than &#39;1 weeks ago&#39;"
                        },
                        {
                            "owner": {
                                "account_id": 2413023,
                                "reputation": 450,
                                "user_id": 2107703,
                                "user_type": "registered",
                                "accept_rate": 57,
                                "display_name": "Zeeshan Anjum"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1453279715,
                            "post_id": 1551394,
                            "comment_id": 57527448,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#comment57527448_1551394",
                            "body": "UnboundLocalError: local variable &#39;diff&#39; referenced before assignment"
                        },
                        {
                            "owner": {
                                "account_id": 37145,
                                "reputation": 15633,
                                "user_id": 106140,
                                "user_type": "registered",
                                "accept_rate": 99,
                                "display_name": "Olivier Pons"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1461171505,
                            "post_id": 1551394,
                            "comment_id": 61081477,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#comment61081477_1551394",
                            "body": "What is the point of the code <code>diff = now - now</code>. Cant we do instead <code>diff = 0</code>"
                        },
                        {
                            "owner": {
                                "account_id": 1010326,
                                "reputation": 1135,
                                "user_id": 1023033,
                                "user_type": "registered",
                                "accept_rate": 73,
                                "display_name": "TaiwanGrapefruitTea"
                            },
                            "reply_to_user": {
                                "account_id": 65538,
                                "reputation": 16233,
                                "user_id": 192791,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "Jonathan"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1472837505,
                            "post_id": 1551394,
                            "comment_id": 65929636,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#comment65929636_1551394",
                            "body": "@Jonathan I tried human_dates 0.2.0 and got: 2.76986301369863 years ago .   I found a version in django at <a href=\"https://github.com/django/django/blob/master/django/utils/timesince.py\" rel=\"nofollow noreferrer\">github.com/django/django/blob/master/django/utils/timesince.&zwnj;&#8203;py</a>  which gives me:  2 years, 9 months"
                        },
                        {
                            "owner": {
                                "account_id": 422432,
                                "reputation": 1251,
                                "user_id": 801203,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Ayrat"
                            },
                            "reply_to_user": {
                                "account_id": 25850,
                                "reputation": 5283,
                                "user_id": 66767,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "wenbert"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1521740509,
                            "post_id": 1551394,
                            "comment_id": 85872181,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#comment85872181_1551394",
                            "body": "@wenbert because in python 3 mtime is of type <code>float</code>, not of type <code>int</code>. In the first if, change <code>int</code> to <code>float</code>."
                        },
                        {
                            "owner": {
                                "account_id": 4775729,
                                "reputation": 1836,
                                "user_id": 6929343,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "WinEunuuchs2Unix"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1596991110,
                            "post_id": 1551394,
                            "comment_id": 111982738,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#comment111982738_1551394",
                            "body": "The link appears broken again, not 404 but rather a sales page in foreign language."
                        }
                    ],
                    "owner": {
                        "account_id": 56348,
                        "reputation": 15772,
                        "user_id": 168771,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Jed Smith"
                    },
                    "comment_count": 11,
                    "is_accepted": true,
                    "score": 143,
                    "last_activity_date": 1643277920,
                    "last_edit_date": 1643277920,
                    "creation_date": 1255285926,
                    "answer_id": 1551394,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/1551394#1551394",
                    "body": "<p>The code was originally published on a blog post &quot;Python Pretty Date function&quot; (<a href=\"http://evaisse.com/post/93417709/python-pretty-date-function\" rel=\"noreferrer\">http://evaisse.com/post/93417709/python-pretty-date-function</a>)</p>\n<p>It is reproduced here as the blog account has been suspended and the page is no longer available.</p>\n<pre><code>def pretty_date(time=False):\n    &quot;&quot;&quot;\n    Get a datetime object or a int() Epoch timestamp and return a\n    pretty string like 'an hour ago', 'Yesterday', '3 months ago',\n    'just now', etc\n    &quot;&quot;&quot;\n    from datetime import datetime\n    now = datetime.now()\n    if type(time) is int:\n        diff = now - datetime.fromtimestamp(time)\n    elif isinstance(time, datetime):\n        diff = now - time\n    elif not time:\n        diff = 0\n    second_diff = diff.seconds\n    day_diff = diff.days\n\n    if day_diff &lt; 0:\n        return ''\n\n    if day_diff == 0:\n        if second_diff &lt; 10:\n            return &quot;just now&quot;\n        if second_diff &lt; 60:\n            return str(second_diff) + &quot; seconds ago&quot;\n        if second_diff &lt; 120:\n            return &quot;a minute ago&quot;\n        if second_diff &lt; 3600:\n            return str(second_diff // 60) + &quot; minutes ago&quot;\n        if second_diff &lt; 7200:\n            return &quot;an hour ago&quot;\n        if second_diff &lt; 86400:\n            return str(second_diff // 3600) + &quot; hours ago&quot;\n    if day_diff == 1:\n        return &quot;Yesterday&quot;\n    if day_diff &lt; 7:\n        return str(day_diff) + &quot; days ago&quot;\n    if day_diff &lt; 31:\n        return str(day_diff // 7) + &quot; weeks ago&quot;\n    if day_diff &lt; 365:\n        return str(day_diff // 30) + &quot; months ago&quot;\n    return str(day_diff // 365) + &quot; years ago&quot;\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 39785,
                                "reputation": 3354,
                                "user_id": 114926,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Karl Bartel"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1327421090,
                            "post_id": 2611952,
                            "comment_id": 11265429,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/2611952#comment11265429_2611952",
                            "body": "Unfortunately py-pretty does not seem to allow i18n."
                        }
                    ],
                    "owner": {
                        "account_id": 1816,
                        "reputation": 18447,
                        "user_id": 2494,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "Karim"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 16,
                    "last_activity_date": 1270865016,
                    "creation_date": 1270865016,
                    "answer_id": 2611952,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/2611952#2611952",
                    "body": "<p>In looking for the same thing with the additional requirement that it handle future dates, I found this: \n<a href=\"http://pypi.python.org/pypi/py-pretty/1\" rel=\"noreferrer\">http://pypi.python.org/pypi/py-pretty/1</a></p>\n\n<p>Example code (from site):</p>\n\n<pre><code>from datetime import datetime, timedelta\nnow = datetime.now()\nhrago = now - timedelta(hours=1)\nyesterday = now - timedelta(days=1)\ntomorrow = now + timedelta(days=1)\ndayafter = now + timedelta(days=2)\n\nimport pretty\nprint pretty.date(now)                      # 'now'\nprint pretty.date(hrago)                    # 'an hour ago'\nprint pretty.date(hrago, short=True)        # '1h ago'\nprint pretty.date(hrago, asdays=True)       # 'today'\nprint pretty.date(yesterday, short=True)    # 'yest'\nprint pretty.date(tomorrow)                 # 'tomorrow'\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 104185,
                        "reputation": 404,
                        "user_id": 278681,
                        "user_type": "registered",
                        "display_name": "sunil"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1272334781,
                    "creation_date": 1272334781,
                    "answer_id": 2718322,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/2718322#2718322",
                    "body": "<p>I have written a detailed blog post for the solution on <a href=\"http://sunilarora.org/17329071\" rel=\"nofollow noreferrer\">http://sunilarora.org/17329071</a>\nI am posting a quick snippet here as well.</p>\n\n<pre><code>from datetime import datetime\nfrom dateutil.relativedelta import relativedelta\n\ndef get_fancy_time(d, display_full_version = False):\n    \"\"\"Returns a user friendly date format\n    d: some datetime instace in the past\n    display_second_unit: True/False\n    \"\"\"\n    #some helpers lambda's\n    plural = lambda x: 's' if x &gt; 1 else ''\n    singular = lambda x: x[:-1]\n    #convert pluran (years) --&gt; to singular (year)\n    display_unit = lambda unit, name: '%s %s%s'%(unit, name, plural(unit)) if unit &gt; 0 else ''\n\n    #time units we are interested in descending order of significance\n    tm_units = ['years', 'months', 'days', 'hours', 'minutes', 'seconds']\n\n    rdelta = relativedelta(datetime.utcnow(), d) #capture the date difference\n    for idx, tm_unit in enumerate(tm_units):\n        first_unit_val = getattr(rdelta, tm_unit)\n        if first_unit_val &gt; 0:\n            primary_unit = display_unit(first_unit_val, singular(tm_unit))\n            if display_full_version and idx &lt; len(tm_units)-1:\n                next_unit = tm_units[idx + 1]\n                second_unit_val = getattr(rdelta, next_unit)\n                if second_unit_val &gt; 0:\n                    secondary_unit = display_unit(second_unit_val, singular(next_unit))\n                    return primary_unit + ', '  + secondary_unit\n            return primary_unit\n    return None\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 256645,
                                "reputation": 5682,
                                "user_id": 537512,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "aqs"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1414739553,
                            "post_id": 9969729,
                            "comment_id": 41939260,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/9969729#comment41939260_9969729",
                            "body": "Is adding it to INSTALLED_APPS really necessary? It worked without that for me, although I used the filter inside python, not the template"
                        },
                        {
                            "owner": {
                                "account_id": 6489497,
                                "reputation": 2837,
                                "user_id": 9789097,
                                "user_type": "registered",
                                "display_name": "Trect"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1583434835,
                            "post_id": 9969729,
                            "comment_id": 107125320,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/9969729#comment107125320_9969729",
                            "body": "Can I use this inside view"
                        }
                    ],
                    "owner": {
                        "account_id": 188197,
                        "reputation": 13465,
                        "user_id": 426794,
                        "user_type": "registered",
                        "accept_rate": 70,
                        "display_name": "plowman"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 33,
                    "last_activity_date": 1342581648,
                    "last_edit_date": 1342581648,
                    "creation_date": 1333327786,
                    "answer_id": 9969729,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/9969729#9969729",
                    "body": "<p>If you happen to be using <a href=\"https://www.djangoproject.com/\" rel=\"noreferrer\">Django</a>, then new in version 1.4 is the <code>naturaltime</code> template filter.</p>\n\n<p>To use it, first add <code>'django.contrib.humanize'</code> to your <code>INSTALLED_APPS</code> setting in settings.py, and <code>{% load humanize %}</code> into the template you're using the filter in.</p>\n\n<p>Then, in your template, if you have a datetime variable <code>my_date</code>, you can print its distance from the present by using <code>{{ my_date|naturaltime }}</code>, which will be rendered as something like <code>4 minutes ago</code>.</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/dev/releases/1.4/\" rel=\"noreferrer\">Other new things in Django 1.4.</a></p>\n\n<p><a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/humanize/\" rel=\"noreferrer\">Documentation for <code>naturaltime</code> and other filters in the <code>django.contrib.humanize</code> set.</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 1700990,
                        "reputation": 49,
                        "user_id": 1561069,
                        "user_type": "unregistered",
                        "display_name": "russellballestrini"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1475071264,
                    "last_edit_date": 1475071264,
                    "creation_date": 1343571517,
                    "answer_id": 11709931,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/11709931#11709931",
                    "body": "<p>The <a href=\"https://pypi.python.org/pypi/ago\" rel=\"nofollow\">ago</a> package provides this.  Call <code>human</code> on a <code>datetime</code> object to get a human readable description of the difference. </p>\n\n<pre><code>from ago import human\nfrom datetime import datetime\nfrom datetime import timedelta\n\nts = datetime.now() - timedelta(days=1, hours=5)\n\nprint(human(ts))\n# 1 day, 5 hours ago\n\nprint(human(ts, precision=1))\n# 1 day ago\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1289084,
                                "reputation": 3001,
                                "user_id": 1241540,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "swdev"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1493187372,
                            "post_id": 18421524,
                            "comment_id": 74301317,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/18421524#comment74301317_18421524",
                            "body": "Nice solution. Keeping it simple allows more reuse. E.g can use suffix for relative time <code>value + &quot; ago&quot;</code> or duration <code>value + &quot; left&quot;</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 1653468,
                        "reputation": 1580,
                        "user_id": 1523582,
                        "user_type": "registered",
                        "display_name": "Chip Hogg"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1377367128,
                    "creation_date": 1377367128,
                    "answer_id": 18421524,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/18421524#18421524",
                    "body": "<p>The answer Jed Smith linked to is good, and I used it for a year or so, but I think it could be improved in a few ways:</p>\n\n<ul>\n<li>It's nice to be able to define each time unit in terms of the preceding unit, instead of having \"magic\" constants like 3600, 86400, etc. sprinkled throughout the code.</li>\n<li>After much use, I find I don't want to go to the next unit quite so eagerly.  Example: both 7 days and 13 days will show as \"1 week\"; I'd rather see \"7 days\" or \"13 days\" instead.</li>\n</ul>\n\n<p>Here's what I came up with:</p>\n\n<pre><code>def PrettyRelativeTime(time_diff_secs):\n    # Each tuple in the sequence gives the name of a unit, and the number of\n    # previous units which go into it.\n    weeks_per_month = 365.242 / 12 / 7\n    intervals = [('minute', 60), ('hour', 60), ('day', 24), ('week', 7),\n                 ('month', weeks_per_month), ('year', 12)]\n\n    unit, number = 'second', abs(time_diff_secs)\n    for new_unit, ratio in intervals:\n        new_number = float(number) / ratio\n        # If the new number is too small, don't go to the next unit.\n        if new_number &lt; 2:\n            break\n        unit, number = new_unit, new_number\n    shown_num = int(number)\n    return '{} {}'.format(shown_num, unit + ('' if shown_num == 1 else 's'))\n</code></pre>\n\n<p>Notice how every tuple in <code>intervals</code> is easy to interpret and check: a <code>'minute'</code> is <code>60</code> seconds; an <code>'hour'</code> is <code>60</code> minutes; etc.  The only fudge is setting <code>weeks_per_month</code> to its average value; given the application, that should be fine.  (And note that it's clear at a glance that the last three constants multiply out to 365.242, the number of days per year.)</p>\n\n<p>One downside to my function is that it doesn't do anything outside the \"## units\" pattern: \"Yesterday\", \"just now\", etc. are right out.  Then again, the original poster didn't ask for these fancy terms, so I prefer my function for its succinctness and the readability of its numerical constants. :)</p>\n"
                },
                {
                    "owner": {
                        "account_id": 169573,
                        "reputation": 8006,
                        "user_id": 395737,
                        "user_type": "registered",
                        "display_name": "Steven Almeroth"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1419714804,
                    "creation_date": 1419714804,
                    "answer_id": 27671515,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/27671515#27671515",
                    "body": "<p>This is the gist of @sunil 's post</p>\n\n<pre><code>&gt;&gt;&gt; from datetime import datetime\n&gt;&gt;&gt; from dateutil.relativedelta import relativedelta\n&gt;&gt;&gt; then = datetime(2003, 9, 17, 20, 54, 47, 282310)\n&gt;&gt;&gt; relativedelta(then, datetime.now())\nrelativedelta(years=-11, months=-3, days=-9, hours=-18, minutes=-17, seconds=-8, microseconds=+912664)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1520428,
                                "reputation": 2644,
                                "user_id": 1420237,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Lucas Werkmeister"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1552835527,
                            "post_id": 27674340,
                            "comment_id": 97153062,
                            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/27674340#comment97153062_27674340",
                            "body": "Note that <code>humanize</code> does not support timezone-aware datetimes; you\u2019ll have to convert those via into naive ones (in the local timezone) with <code>dt.astimezone().replace(tzinfo=None)</code>."
                        }
                    ],
                    "owner": {
                        "account_id": 3021,
                        "reputation": 408304,
                        "user_id": 4279,
                        "user_type": "registered",
                        "accept_rate": 94,
                        "display_name": "jfs"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1419750052,
                    "creation_date": 1419750052,
                    "answer_id": 27674340,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/27674340#27674340",
                    "body": "<p>There is <a href=\"https://pypi.python.org/pypi/humanize\" rel=\"noreferrer\"><code>humanize</code> package</a>:</p>\n\n<pre><code>&gt;&gt;&gt; from datetime import datetime, timedelta\n&gt;&gt;&gt; import humanize # $ pip install humanize\n&gt;&gt;&gt; humanize.naturaltime(datetime.now() - timedelta(days=1))\n'a day ago'\n&gt;&gt;&gt; humanize.naturaltime(datetime.now() - timedelta(hours=2))\n'2 hours ago'\n</code></pre>\n\n<p>It supports localization <a href=\"/questions/tagged/l10n\" class=\"post-tag\" title=\"show questions tagged 'l10n'\" rel=\"tag\">l10n</a>, internationalization <a href=\"/questions/tagged/i18n\" class=\"post-tag\" title=\"show questions tagged 'i18n'\" rel=\"tag\">i18n</a>:</p>\n\n<pre><code>&gt;&gt;&gt; _ = humanize.i18n.activate('ru_RU')\n&gt;&gt;&gt; print humanize.naturaltime(datetime.now() - timedelta(days=1))\n\u0434\u0435\u043d\u044c \u043d\u0430\u0437\u0430\u0434\n&gt;&gt;&gt; print humanize.naturaltime(datetime.now() - timedelta(hours=2))\n2 \u0447\u0430\u0441\u0430 \u043d\u0430\u0437\u0430\u0434\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2495621,
                        "reputation": 61,
                        "user_id": 2172126,
                        "user_type": "registered",
                        "display_name": "Charles Doutriaux"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1579199265,
                    "last_edit_date": 1579199265,
                    "creation_date": 1448480316,
                    "answer_id": 33925074,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/33925074#33925074",
                    "body": "<p>Using datetime objects with tzinfo:</p>\n\n<pre><code>def time_elapsed(etime):\n    # need to add tzinfo to datetime.utcnow\n    now = datetime.utcnow().replace(tzinfo=etime.tzinfo)\n    opened_for = (now - etime).total_seconds()\n    names = [\"seconds\",\"minutes\",\"hours\",\"days\",\"weeks\",\"months\"]\n    modulos = [ 1,60,3600,3600*24,3600*24*7,3660*24*30]\n    values = []\n    for m in modulos[::-1]:\n        values.append(int(opened_for / m))\n        opened_for -= values[-1]*m\n    pretty = [] \n    for i,nm in enumerate(names[::-1]):\n        if values[i]!=0:\n            pretty.append(\"%i %s\" % (values[i],nm))\n    return \" \".join(pretty)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 5071964,
                        "reputation": 725,
                        "user_id": 4070498,
                        "user_type": "registered",
                        "display_name": "Naresh Chaudhary"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1468320984,
                    "last_edit_date": 1468320984,
                    "creation_date": 1467801206,
                    "answer_id": 38221895,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/38221895#38221895",
                    "body": "<p>You can download and install from below link. It should be more helpful for you. It has been providing user friendly message from second to year.</p>\n\n<p>It's well tested.</p>\n\n<p><a href=\"https://github.com/nareshchaudhary37/timestamp_content\" rel=\"nofollow\">https://github.com/nareshchaudhary37/timestamp_content</a></p>\n\n<p>Below steps to install into your virtual env.</p>\n\n<pre><code>git clone https://github.com/nareshchaudhary37/timestamp_content\ncd timestamp-content\npython setup.py\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 3759231,
                        "reputation": 23070,
                        "user_id": 3124746,
                        "user_type": "registered",
                        "accept_rate": 85,
                        "display_name": "vishes_shell"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 12,
                    "last_activity_date": 1590429828,
                    "last_edit_date": 1590429828,
                    "creation_date": 1475070072,
                    "answer_id": 39749283,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/39749283#39749283",
                    "body": "<p>You can also do that with <a href=\"https://arrow.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">arrow</a> package</p>\n\n<p>From <a href=\"https://github.com/crsmithdev/arrow\" rel=\"nofollow noreferrer\">github page</a>:</p>\n\n<blockquote>\n<pre><code>&gt;&gt;&gt; import arrow\n&gt;&gt;&gt; utc = arrow.utcnow()\n&gt;&gt;&gt; utc = utc.shift(hours=-1)\n&gt;&gt;&gt; utc.humanize()\n'an hour ago'\n</code></pre>\n</blockquote>\n"
                },
                {
                    "owner": {
                        "account_id": 121808,
                        "reputation": 82432,
                        "user_id": 315168,
                        "user_type": "registered",
                        "accept_rate": 71,
                        "display_name": "Mikko Ohtamaa"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1548321178,
                    "creation_date": 1548321178,
                    "answer_id": 54342980,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/54342980#54342980",
                    "body": "<p>Here is an updated answer based on Jed Smith's implementation that properly hands both offset-naive and offset-aware datetimes. You can also give a default timezones. Python 3.5+.</p>\n\n<pre><code>import datetime\n\ndef pretty_date(time=None, default_timezone=datetime.timezone.utc):\n    \"\"\"\n    Get a datetime object or a int() Epoch timestamp and return a\n    pretty string like 'an hour ago', 'Yesterday', '3 months ago',\n    'just now', etc\n    \"\"\"\n\n    # Assumes all timezone naive dates are UTC\n    if time.tzinfo is None or time.tzinfo.utcoffset(time) is None:\n        if default_timezone:\n            time = time.replace(tzinfo=default_timezone)\n\n    now = datetime.datetime.utcnow().replace(tzinfo=datetime.timezone.utc)\n\n    if type(time) is int:\n        diff = now - datetime.fromtimestamp(time)\n    elif isinstance(time, datetime.datetime):\n        diff = now - time\n    elif not time:\n        diff = now - now\n    second_diff = diff.seconds\n    day_diff = diff.days\n\n    if day_diff &lt; 0:\n        return ''\n\n    if day_diff == 0:\n        if second_diff &lt; 10:\n            return \"just now\"\n        if second_diff &lt; 60:\n            return str(second_diff) + \" seconds ago\"\n        if second_diff &lt; 120:\n            return \"a minute ago\"\n        if second_diff &lt; 3600:\n            return str(second_diff / 60) + \" minutes ago\"\n        if second_diff &lt; 7200:\n            return \"an hour ago\"\n        if second_diff &lt; 86400:\n            return str(second_diff / 3600) + \" hours ago\"\n    if day_diff == 1:\n        return \"Yesterday\"\n    if day_diff &lt; 7:\n        return str(day_diff) + \" days ago\"\n    if day_diff &lt; 31:\n        return str(day_diff / 7) + \" weeks ago\"\n    if day_diff &lt; 365:\n        return str(day_diff / 30) + \" months ago\"\n    return str(day_diff / 365) + \" years ago\"\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 135031,
                        "reputation": 1793,
                        "user_id": 337554,
                        "user_type": "registered",
                        "accept_rate": 50,
                        "display_name": "Andrei"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1596035299,
                    "last_edit_date": 1596035299,
                    "creation_date": 1595967850,
                    "answer_id": 63142226,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/63142226#63142226",
                    "body": "<p>I've been dragging and tweaking this code from programming language to programming language for so long, I don't remember where I originally got it from. It served me well in PHP, Java, and TypeScript, and now it's time for Python.</p>\n<p>It handles past and future dates, as well as edge cases.</p>\n<pre><code>def unix_time() -&gt; int:\n    return int(time.time())\n\n\ndef pretty_time(t: int, absolute=False) -&gt; str:\n    if not type(t) is int:\n        return &quot;N/A&quot;\n    if t == 0:\n        return &quot;Never&quot;\n\n    now = unix_time()\n    if t == now:\n        return &quot;Now&quot;\n\n    periods = [&quot;second&quot;, &quot;minute&quot;, &quot;hour&quot;, &quot;day&quot;, &quot;week&quot;, &quot;month&quot;, &quot;year&quot;, &quot;decade&quot;]\n    lengths = [60, 60, 24, 7, 4.35, 12, 10]\n\n    diff = now - t\n\n    if absolute:\n        suffix = &quot;&quot;\n    else:\n        if diff &gt;= 0:\n            suffix = &quot;ago&quot;\n        else:\n            diff *= -1\n            suffix = &quot;remaining&quot;\n\n    i = 0\n    while diff &gt;= lengths[i] and i &lt; len(lengths) - 1:\n        diff /= lengths[i]\n        i += 1\n\n    diff = round(diff)\n    if diff &gt; 1:\n        periods[i] += &quot;s&quot;\n\n    return &quot;{0} {1} {2}&quot;.format(diff, periods[i], suffix)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 3332209,
                        "reputation": 39321,
                        "user_id": 2800876,
                        "user_type": "registered",
                        "accept_rate": 88,
                        "display_name": "Zags"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1604872744,
                    "creation_date": 1604872744,
                    "answer_id": 64743457,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/64743457#64743457",
                    "body": "<pre><code>DAY_INCREMENTS = [\n    [365, &quot;year&quot;],\n    [30, &quot;month&quot;],\n    [7, &quot;week&quot;],\n    [1, &quot;day&quot;],\n]\n\nSECOND_INCREMENTS = [\n    [3600, &quot;hour&quot;],\n    [60, &quot;minute&quot;],\n    [1, &quot;second&quot;],\n]\n\n\ndef time_ago(dt):\n    diff = datetime.now() - dt  # use timezone.now() or equivalent if `dt` is timezone aware\n    if diff.days &lt; 0:\n        return &quot;in the future?!?&quot;\n    for increment, label in DAY_INCREMENTS:\n        if diff.days &gt;= increment:\n            increment_diff = int(diff.days / increment)\n            return str(increment_diff) + &quot; &quot; + label + plural(increment_diff) + &quot; ago&quot;\n    for increment, label in SECOND_INCREMENTS:\n        if diff.seconds &gt;= increment:\n            increment_diff = int(diff.seconds / increment)\n            return str(increment_diff) + &quot; &quot; + label + plural(increment_diff) + &quot; ago&quot;\n    return &quot;just now&quot;\n\n\ndef plural(num):\n    if num != 1:\n        return &quot;s&quot;\n    return &quot;&quot;\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 22050022,
                        "reputation": 1,
                        "user_id": 16314466,
                        "user_type": "registered",
                        "display_name": "I.K"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1653943159,
                    "creation_date": 1653943159,
                    "answer_id": 72439816,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/72439816#72439816",
                    "body": "<pre><code>def time_ago(self):\n        start_time = self.date # The start date\n        now_time = datetime.now()\n\n        difference = int((now_time - start_time).total_seconds())\n\n        second = [1, 'seconds']\n        minute = [60, 'minutes']\n        hour = [60 * minute[0], 'hours']\n        day = [24 * hour[0], 'days']\n        week = [7 * day[0], 'weeks']\n        month = [4 * week[0], 'months']\n        year = [12 * month[0], 'years']\n\n        times = [year, month, week, day, hour, minute, second]\n        for time in times:\n            if difference &gt;= time[0]:\n                time_ago = int(difference / time[0])\n                if time_ago &lt;= 1:\n                    timeframe = time[1].rstrip('s')\n                else:\n                    timeframe = time[1]\n\n                time_item = str(time_ago) + ' ' + timeframe\n                return time_item\n        return 'Date Error'\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2402196,
                        "reputation": 14153,
                        "user_id": 2111778,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "xjcl"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1688731375,
                    "creation_date": 1688731375,
                    "answer_id": 76636817,
                    "question_id": 1551382,
                    "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python/76636817#76636817",
                    "body": "<p>My attempt at writing a clear and short function. Alternatively, you can do <code>diff = dt.datetime.now() - past</code></p>\n<pre class=\"lang-py prettyprint-override\"><code>import datetime as dt\n\ndef human_time_ago(now: dt.datetime, past: dt.datetime) -&gt; str:\n    &quot;&quot;&quot;Return time difference as human-readable string&quot;&quot;&quot;\n    periods = (\n        (&quot;year&quot;, 60 * 60 * 24 * 365),\n        (&quot;month&quot;, 60 * 60 * 24 * 30),\n        (&quot;week&quot;, 60 * 60 * 24 * 7),\n        (&quot;day&quot;, 60 * 60 * 24),\n        (&quot;hour&quot;, 60 * 60),\n        (&quot;minute&quot;, 60),\n    )\n    diff = now - past\n\n    for period, seconds_each in periods:\n        if diff.total_seconds() &gt;= seconds_each:\n            how_many = int(diff.total_seconds() / seconds_each)\n            return f&quot;{how_many} {period}{'s' if how_many &gt;= 2 else ''} ago&quot;\n\n    return &quot;just now&quot;  # less than a minute ago\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 24717,
                "reputation": 267822,
                "user_id": 63051,
                "user_type": "registered",
                "accept_rate": 95,
                "display_name": "flybywire"
            },
            "comment_count": 0,
            "is_answered": true,
            "accepted_answer_id": 1551394,
            "answer_count": 16,
            "score": 84,
            "last_activity_date": 1688731375,
            "creation_date": 1255285725,
            "last_edit_date": 1461182717,
            "question_id": 1551382,
            "link": "https://stackoverflow.com/questions/1551382/user-friendly-time-format-in-python",
            "title": "User-friendly time format in Python?",
            "body": "<p>Python: I need to show file modification times in the \"1 day ago\", \"two hours ago\", format.</p>\n\n<p>Is there something ready to do that? It should be in English.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 8798
}