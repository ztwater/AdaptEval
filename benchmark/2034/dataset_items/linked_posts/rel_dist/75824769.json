{
    "items": [
        {
            "tags": [
                "python",
                "dataframe",
                "distance",
                "pyproj",
                "geographic-distance"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 10777591,
                        "reputation": 1136,
                        "user_id": 7929036,
                        "user_type": "registered",
                        "accept_rate": 40,
                        "display_name": "Dimitar"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1679584723,
                    "post_id": 75824769,
                    "comment_id": 133751061,
                    "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data#comment133751061_75824769",
                    "body": "I missunderstood your question thats why I deleted my answer. I will come up with a proper solution."
                },
                {
                    "owner": {
                        "account_id": 11144335,
                        "reputation": 709,
                        "user_id": 8179672,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Roberto"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1679584763,
                    "post_id": 75824769,
                    "comment_id": 133751080,
                    "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data#comment133751080_75824769",
                    "body": "Could you specify if you want to know ether Dx1 = ABS(X2-X1) and Dy1 = ABS(Y2-Y1) or a distance between the points P1(X1,Y1) and P2(X2,Y2) ?"
                },
                {
                    "owner": {
                        "account_id": 16827040,
                        "reputation": 49,
                        "user_id": 19359890,
                        "user_type": "registered",
                        "display_name": "Connor Garrett"
                    },
                    "reply_to_user": {
                        "account_id": 11144335,
                        "reputation": 709,
                        "user_id": 8179672,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Roberto"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1679585615,
                    "post_id": 75824769,
                    "comment_id": 133751339,
                    "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data#comment133751339_75824769",
                    "body": "@Roberto the geographic distance between the points P1(X1,Y1) and P2(X2,Y2). So, If I have a polyline with nodes, calculating the distances between each of those nodes. These are coordinates in real locations on earth, so not a cartesian coordinate system, if you will."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 16827040,
                                "reputation": 49,
                                "user_id": 19359890,
                                "user_type": "registered",
                                "display_name": "Connor Garrett"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1679587651,
                            "post_id": 75824992,
                            "comment_id": 133751899,
                            "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data/75824992#comment133751899_75824992",
                            "body": "is this following a cartesian coordinate system or by geographic distances? I&#39;m looking for distances in meters."
                        },
                        {
                            "owner": {
                                "account_id": 11144335,
                                "reputation": 709,
                                "user_id": 8179672,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Roberto"
                            },
                            "reply_to_user": {
                                "account_id": 16827040,
                                "reputation": 49,
                                "user_id": 19359890,
                                "user_type": "registered",
                                "display_name": "Connor Garrett"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1679588022,
                            "post_id": 75824992,
                            "comment_id": 133752014,
                            "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data/75824992#comment133752014_75824992",
                            "body": "@ConnorGarrett this one is cartesian CS. So, do you want to calculate the orthodromic distance (on a sphere)?"
                        },
                        {
                            "owner": {
                                "account_id": 16827040,
                                "reputation": 49,
                                "user_id": 19359890,
                                "user_type": "registered",
                                "display_name": "Connor Garrett"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1679588116,
                            "post_id": 75824992,
                            "comment_id": 133752035,
                            "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data/75824992#comment133752035_75824992",
                            "body": "Yup, I&#39;m looking for the orthodromic distance."
                        },
                        {
                            "owner": {
                                "account_id": 16827040,
                                "reputation": 49,
                                "user_id": 19359890,
                                "user_type": "registered",
                                "display_name": "Connor Garrett"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1679589377,
                            "post_id": 75824992,
                            "comment_id": 133752416,
                            "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data/75824992#comment133752416_75824992",
                            "body": "Thank you, where are you defining &quot;XY&quot; and &quot;XY_lag&quot; as your rows?"
                        },
                        {
                            "owner": {
                                "account_id": 11144335,
                                "reputation": 709,
                                "user_id": 8179672,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Roberto"
                            },
                            "reply_to_user": {
                                "account_id": 16827040,
                                "reputation": 49,
                                "user_id": 19359890,
                                "user_type": "registered",
                                "display_name": "Connor Garrett"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1679590138,
                            "post_id": 75824992,
                            "comment_id": 133752627,
                            "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data/75824992#comment133752627_75824992",
                            "body": "@ConnorGarrett I forgot to paste these lines. See now."
                        },
                        {
                            "owner": {
                                "account_id": 16827040,
                                "reputation": 49,
                                "user_id": 19359890,
                                "user_type": "registered",
                                "display_name": "Connor Garrett"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1679593778,
                            "post_id": 75824992,
                            "comment_id": 133753625,
                            "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data/75824992#comment133753625_75824992",
                            "body": "This is actually a perfect solution, however the row distance calculations are in reverse than what I was hoping for. The first row should have a distance value (from the 1st XY to the XY in the 2nd row). The last row should be the value that doesn&#39;t have a distance value."
                        },
                        {
                            "owner": {
                                "account_id": 16827040,
                                "reputation": 49,
                                "user_id": 19359890,
                                "user_type": "registered",
                                "display_name": "Connor Garrett"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1679597539,
                            "post_id": 75824992,
                            "comment_id": 133754488,
                            "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data/75824992#comment133754488_75824992",
                            "body": "Nevermind! I fixed the shift to a -1 and this fixed my problem!"
                        }
                    ],
                    "owner": {
                        "account_id": 11144335,
                        "reputation": 709,
                        "user_id": 8179672,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Roberto"
                    },
                    "comment_count": 7,
                    "is_accepted": true,
                    "score": 2,
                    "last_activity_date": 1679590091,
                    "last_edit_date": 1679590091,
                    "creation_date": 1679585389,
                    "answer_id": 75824992,
                    "question_id": 75824769,
                    "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data/75824992#75824992",
                    "body": "<p>In order to calculate distances between following points you can use an approach below. For the testing purposes I defined corners of a rectangle.</p>\n<pre><code>X = [0, 1, 1, 0, 0]\nY = [0, 0, 1, 1, 0]\n\ndf = pd.DataFrame({&quot;X&quot;: X, &quot;Y&quot;: Y})\n\ndf[&quot;X_lag&quot;] = df[&quot;X&quot;].shift(1)\ndf[&quot;Y_lag&quot;] = df[&quot;Y&quot;].shift(1)\n\n\ndistances = np.sqrt((df['X']-df[&quot;X_lag&quot;])**2+(df['Y']-df[&quot;Y_lag&quot;])**2)\nprint(distances)\n</code></pre>\n<p>this gives a pandas Series with the following values: <code>[nan, 1.0, 1.0, 1.0, 1.0]</code></p>\n<p>So now you can drop lag columns with <code>df.drop([&quot;X_lag&quot;, &quot;Y_lag&quot;], axis=1, inplace=True)</code> and you get:</p>\n<pre><code>X  Y    distance\n0  0       NaN\n1  0       1.0\n1  1       1.0\n0  1       1.0\n0  0       1.0\n</code></pre>\n<p>For a geographic distance you can <code>import geopy.distance</code> and apply the following code. It will interpret previous numbers as degrees.</p>\n<pre><code>def calc_orthodromic(row):\n    try:\n        return geopy.distance.geodesic(row[&quot;XY&quot;], row[&quot;XY_lag&quot;]).m\n    except:\n        return np.NaN\n\ndf['XY'] = list(zip(df[&quot;X&quot;], df[&quot;Y&quot;]))\ndf['XY_lag'] = list(zip(df[&quot;X_lag&quot;], df[&quot;Y_lag&quot;]))\n\ndf['distance'] = df.apply(calc_orthodromic, axis=1)\n</code></pre>\n<p>Which give distance in meters: <code>[nan, 110574.3885578,  111302.64933943, 110574.3885578, 111319.49079327, 156899.56829134]</code></p>\n"
                }
            ],
            "owner": {
                "account_id": 16827040,
                "reputation": 49,
                "user_id": 19359890,
                "user_type": "registered",
                "display_name": "Connor Garrett"
            },
            "comment_count": 3,
            "is_answered": true,
            "accepted_answer_id": 75824992,
            "answer_count": 1,
            "score": 1,
            "last_activity_date": 1679590091,
            "creation_date": 1679584343,
            "last_edit_date": 1679588729,
            "question_id": 75824769,
            "link": "https://stackoverflow.com/questions/75824769/calculating-geographic-distances-between-each-row-of-x-y-points-in-a-python-data",
            "title": "Calculating Geographic distances between each row of X,Y points in a python dataframe",
            "body": "<p>Python Beginner here. I have a python dataframe consisting of X,Y points that looks similar to this:</p>\n<p><a href=\"https://i.stack.imgur.com/pzbgZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pzbgZ.png\" alt=\"XY TABLE\" /></a></p>\n<p>What I want to do is look at row 1 and find the distance between row 1 and row 2 and output the new distance between those 2 X,Y locations to a new column called &quot;dist&quot;. Then do the same for row 2 and 3 and so on. My X,Y data is much larger than this, but this is the basis for my problem. Ultimately the data stops, each point is making up a larger polyline so the end point will have a zero distance.</p>\n<p>I'm aware I can use geopy, numpy, and pyproj as few. I initially tried haversine distance but was having issues importing the python module. I'm not sure how to approach this problem using those modules, do I need a search cursor and apply that to each row? So, If I have a polyline with nodes, calculating the distances between each of those nodes. These are coordinates in real locations on earth, so not a cartesian coordinate system, if you will</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 6159
}