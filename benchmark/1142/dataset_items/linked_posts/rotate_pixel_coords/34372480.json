{
    "items": [
        {
            "tags": [
                "python",
                "math",
                "degrees"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 2655697,
                        "reputation": 115974,
                        "user_id": 2296458,
                        "user_type": "registered",
                        "accept_rate": 90,
                        "display_name": "Cory Kramer"
                    },
                    "edited": false,
                    "score": 5,
                    "creation_date": 1450539884,
                    "post_id": 34372480,
                    "comment_id": 56486687,
                    "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python#comment56486687_34372480",
                    "body": "This is in C++ but is the exact same question <a href=\"https://stackoverflow.com/questions/2259476/rotating-a-point-about-another-point-2d\" title=\"rotating a point about another point 2d\">stackoverflow.com/questions/2259476/&hellip;</a>"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 518507,
                                "reputation": 389,
                                "user_id": 1044619,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "sosukeinu"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1489974349,
                            "post_id": 34374437,
                            "comment_id": 72890174,
                            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/34374437#comment72890174_34374437",
                            "body": "this is a great solution. What would change with this if you wanted to transpose the direction of the Y axis (y increasing vertically downwards)? Thank you."
                        },
                        {
                            "owner": {
                                "account_id": 4732025,
                                "reputation": 1817,
                                "user_id": 3827381,
                                "user_type": "registered",
                                "accept_rate": 29,
                                "display_name": "Simon Hessner"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1571063377,
                            "post_id": 34374437,
                            "comment_id": 103106275,
                            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/34374437#comment103106275_34374437",
                            "body": "Using this function I sometimes get negative coordinates when my original coordinates are within [0,127] and I set the rotation center as (63.5,63.5). Is this due to rounding errors? How to prevent it?"
                        },
                        {
                            "owner": {
                                "account_id": 100551,
                                "reputation": 29857,
                                "user_id": 270986,
                                "user_type": "registered",
                                "display_name": "Mark Dickinson"
                            },
                            "reply_to_user": {
                                "account_id": 4732025,
                                "reputation": 1817,
                                "user_id": 3827381,
                                "user_type": "registered",
                                "accept_rate": 29,
                                "display_name": "Simon Hessner"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1571065706,
                            "post_id": 34374437,
                            "comment_id": 103107564,
                            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/34374437#comment103107564_34374437",
                            "body": "@SimonH: Possibly rounding errors; possibly just geometry. If you take the square [0, 127] x [0, 127] and rotate it by 10 degrees (say) about (63.5, 63.5), then bits of the rotated square <i>will</i> be outside the 1st quadrant. If your points are within the <i>disk</i> radius 63.5 centered at (63.5, 63.5), then yes, mathematically you shouldn&#39;t see results with negative coordinates. If you&#39;re seeing negative values that are very close to zero, then yes, rounding error is likely to blame."
                        },
                        {
                            "owner": {
                                "account_id": 4732025,
                                "reputation": 1817,
                                "user_id": 3827381,
                                "user_type": "registered",
                                "accept_rate": 29,
                                "display_name": "Simon Hessner"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1571081686,
                            "post_id": 34374437,
                            "comment_id": 103114174,
                            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/34374437#comment103114174_34374437",
                            "body": "Thanks! I figured it out. The problem was not directly related to the rotation but to a scaling that I performe before the rotation"
                        },
                        {
                            "owner": {
                                "account_id": 15298663,
                                "reputation": 117,
                                "user_id": 11037887,
                                "user_type": "registered",
                                "display_name": "L. van Agtmaal"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1646382705,
                            "post_id": 34374437,
                            "comment_id": 126113905,
                            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/34374437#comment126113905_34374437",
                            "body": "I tried this with rotating multiple rectangular and triangular planes around the origin. It works, but the shapes are distorted (i.e. a rectangle becomes a parallelogram)"
                        },
                        {
                            "owner": {
                                "account_id": 100551,
                                "reputation": 29857,
                                "user_id": 270986,
                                "user_type": "registered",
                                "display_name": "Mark Dickinson"
                            },
                            "reply_to_user": {
                                "account_id": 15298663,
                                "reputation": 117,
                                "user_id": 11037887,
                                "user_type": "registered",
                                "display_name": "L. van Agtmaal"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1646383787,
                            "post_id": 34374437,
                            "comment_id": 126114240,
                            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/34374437#comment126114240_34374437",
                            "body": "@L.vanAgtmaal: I suggest you ask a new question and provide the details there. There are all sorts of things that could possibly have gone wrong in implementation (or even in the way that you&#39;re plotting - e.g., if the aspect ratio of the plot is off, that would cause a rectangle to appear as a parallelogram)."
                        },
                        {
                            "owner": {
                                "account_id": 15298663,
                                "reputation": 117,
                                "user_id": 11037887,
                                "user_type": "registered",
                                "display_name": "L. van Agtmaal"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1653484989,
                            "post_id": 34374437,
                            "comment_id": 127863715,
                            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/34374437#comment127863715_34374437",
                            "body": "It was indeed the aspect ratio, I realised that a few hours after commenting this. Sorry for the trouble!"
                        },
                        {
                            "owner": {
                                "account_id": 2034887,
                                "reputation": 249,
                                "user_id": 1817470,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "nooshinha"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1712044544,
                            "post_id": 34374437,
                            "comment_id": 137969262,
                            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/34374437#comment137969262_34374437",
                            "body": "can you extend your answer for an n-dimensional point and a rotation matrix? For example, having a grid of 3D points and a 3x3 rotation matrix, how can I rotate them?"
                        },
                        {
                            "owner": {
                                "account_id": 100551,
                                "reputation": 29857,
                                "user_id": 270986,
                                "user_type": "registered",
                                "display_name": "Mark Dickinson"
                            },
                            "reply_to_user": {
                                "account_id": 2034887,
                                "reputation": 249,
                                "user_id": 1817470,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "nooshinha"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1712593978,
                            "post_id": 34374437,
                            "comment_id": 138029517,
                            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/34374437#comment138029517_34374437",
                            "body": "@nooshinha I&#39;d suggest asking a new question - I don&#39;t think there would be much overlap with this one."
                        }
                    ],
                    "owner": {
                        "account_id": 100551,
                        "reputation": 29857,
                        "user_id": 270986,
                        "user_type": "registered",
                        "display_name": "Mark Dickinson"
                    },
                    "comment_count": 9,
                    "is_accepted": false,
                    "score": 129,
                    "last_activity_date": 1450553141,
                    "last_edit_date": 1450553141,
                    "creation_date": 1450552690,
                    "answer_id": 34374437,
                    "question_id": 34372480,
                    "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/34374437#34374437",
                    "body": "<p>The following <code>rotate</code> function performs a rotation of the point <code>point</code> by the angle <code>angle</code> (counterclockwise, in radians) around <code>origin</code>, in the Cartesian plane, with the usual axis conventions: x increasing from left to right, y increasing vertically upwards. All points are represented as length-2 tuples of the form <code>(x_coord, y_coord)</code>.</p>\n\n<pre><code>import math\n\ndef rotate(origin, point, angle):\n    \"\"\"\n    Rotate a point counterclockwise by a given angle around a given origin.\n\n    The angle should be given in radians.\n    \"\"\"\n    ox, oy = origin\n    px, py = point\n\n    qx = ox + math.cos(angle) * (px - ox) - math.sin(angle) * (py - oy)\n    qy = oy + math.sin(angle) * (px - ox) + math.cos(angle) * (py - oy)\n    return qx, qy\n</code></pre>\n\n<p>If your angle is specified in degrees, you can convert it to radians first using <code>math.radians</code>. For a clockwise rotation, negate the angle.</p>\n\n<p>Example: rotating the point <code>(3, 4)</code> around an origin of <code>(2, 2)</code> counterclockwise by an angle of 10 degrees:</p>\n\n<pre><code>&gt;&gt;&gt; point = (3, 4)\n&gt;&gt;&gt; origin = (2, 2)\n&gt;&gt;&gt; rotate(origin, point, math.radians(10))\n(2.6375113976783475, 4.143263683691346)\n</code></pre>\n\n<p>Note that there's some obvious repeated calculation in the <code>rotate</code> function: <code>math.cos(angle)</code> and <code>math.sin(angle)</code> are each computed twice, as are <code>px - ox</code> and <code>py - oy</code>. I leave it to you to factor that out if necessary.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 13877842,
                        "reputation": 301,
                        "user_id": 10018990,
                        "user_type": "registered",
                        "display_name": "Gabriel Eng"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1530488025,
                    "creation_date": 1530488025,
                    "answer_id": 51127723,
                    "question_id": 34372480,
                    "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/51127723#51127723",
                    "body": "<pre><code>import math\n\ndef rotate(x,y,xo,yo,theta): #rotate x,y around xo,yo by theta (rad)\n    xr=math.cos(theta)*(x-xo)-math.sin(theta)*(y-yo)   + xo\n    yr=math.sin(theta)*(x-xo)+math.cos(theta)*(y-yo)  + yo\n    return [xr,yr]\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1162200,
                                "reputation": 41880,
                                "user_id": 1391441,
                                "user_type": "registered",
                                "accept_rate": 96,
                                "display_name": "Gabriel"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1626787055,
                            "post_id": 58781388,
                            "comment_id": 120982181,
                            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/58781388#comment120982181_58781388",
                            "body": "This is such an elegant and sophisticated solution."
                        }
                    ],
                    "owner": {
                        "account_id": 5149286,
                        "reputation": 331575,
                        "user_id": 4124317,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "ImportanceOfBeingErnest"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 46,
                    "last_activity_date": 1573317840,
                    "creation_date": 1573317840,
                    "answer_id": 58781388,
                    "question_id": 34372480,
                    "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/58781388#58781388",
                    "body": "<p>An option to rotate a point by some degrees about another point is to use <code>numpy</code> instead of <code>math</code>. This allows to easily generalize the function to take any number of points as input, which might e.g. be useful when rotating a polygon.</p>\n\n<pre><code>import numpy as np\n\ndef rotate(p, origin=(0, 0), degrees=0):\n    angle = np.deg2rad(degrees)\n    R = np.array([[np.cos(angle), -np.sin(angle)],\n                  [np.sin(angle),  np.cos(angle)]])\n    o = np.atleast_2d(origin)\n    p = np.atleast_2d(p)\n    return np.squeeze((R @ (p.T-o.T) + o.T).T)\n\n\npoints=[(200, 300), (100, 300)]\norigin=(100,100)\n\nnew_points = rotate(points, origin=origin, degrees=10)\nprint(new_points)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2246657,
                                "reputation": 146,
                                "user_id": 1979851,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "BluePrintRandom"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1602110672,
                            "post_id": 62004641,
                            "comment_id": 113620408,
                            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/62004641#comment113620408_62004641",
                            "body": "How do I extend this to 3d?"
                        }
                    ],
                    "owner": {
                        "account_id": 6088315,
                        "reputation": 341,
                        "user_id": 4751508,
                        "user_type": "registered",
                        "display_name": "an0nym0use"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1590417307,
                    "creation_date": 1590417307,
                    "answer_id": 62004641,
                    "question_id": 34372480,
                    "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/62004641#62004641",
                    "body": "<p>After going through a lot of code and repositories. This function worked best for me. Also it is efficient as it calculates sine and cosine values only once.</p>\n\n<pre><code>import numpy as np\ndef rotate(point, origin, degrees):\n    radians = np.deg2rad(degrees)\n    x,y = point\n    offset_x, offset_y = origin\n    adjusted_x = (x - offset_x)\n    adjusted_y = (y - offset_y)\n    cos_rad = np.cos(radians)\n    sin_rad = np.sin(radians)\n    qx = offset_x + cos_rad * adjusted_x + sin_rad * adjusted_y\n    qy = offset_y + -sin_rad * adjusted_x + cos_rad * adjusted_y\n    return qx, qy\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 10595665,
                        "reputation": 664,
                        "user_id": 7804479,
                        "user_type": "registered",
                        "display_name": "Ovaflo"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1622404266,
                    "last_edit_date": 1622404266,
                    "creation_date": 1622399237,
                    "answer_id": 67764548,
                    "question_id": 34372480,
                    "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/67764548#67764548",
                    "body": "<p>This is easy if you represent your points as complex numbers and use the exp function with an imaginary argument (which is equivalent to the cos/sin operations shown in the other answers, but is easier to write and remember). Here's a function that rotates any number of points about the chosen origin:</p>\n<pre><code>import numpy as np\n\ndef rotate(points, origin, angle):\n    return (points - origin) * np.exp(complex(0, angle)) + origin\n</code></pre>\n<p>To rotate a single point (x1,y1) about the origin (x0,y0) with an angle in degrees, you could call the function with these arguments:</p>\n<pre><code>points = complex(x1,y1)\norigin = complex(x0,y0)\nangle = np.deg2rad(degrees)\n</code></pre>\n<p>To rotate multiple points (x1,y1), (x2,y2), ..., use:</p>\n<pre><code>points = np.array([complex(x1,y1), complex(x2,y2), ...])\n</code></pre>\n<p>An example with a single point (200,300) rotated 10 degrees about (100,100):</p>\n<pre><code>&gt;&gt;&gt; new_point = rotate(complex(200,300), complex(100,100), np.deg2rad(10))\n&gt;&gt;&gt; new_point\n(163.75113976783473+314.3263683691346j)\n&gt;&gt;&gt; (new_point.real, new_point.imag)\n(163.75113976783473, 314.3263683691346)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 17800771,
                        "reputation": 113,
                        "user_id": 12927603,
                        "user_type": "registered",
                        "display_name": "Leon"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1668645331,
                    "last_edit_date": 1668645331,
                    "creation_date": 1668644940,
                    "answer_id": 74468803,
                    "question_id": 34372480,
                    "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/74468803#74468803",
                    "body": "<p>The below script was best for me.</p>\n<pre><code>from math import radians, sin, cos\n\ndef rotate_point_wrt_center(point_to_be_rotated, angle, center_point = (0,0)):\n        \n    angle = radians(angle)\n        \n    xnew = cos(angle)*(point_to_be_rotated[0] - center_point[0]) - sin(angle)*(point_to_be_rotated[1] - center_point[1]) + center_point[0]\n    ynew = sin(angle)*(point_to_be_rotated[0] - center_point[0]) + cos(angle)*(point_to_be_rotated[1] - center_point[1]) + center_point[1]\n    \n    return (round(xnew,2),round(ynew,2))\n</code></pre>\n<p>For example: if you want to rotate the point (1,1) (blue dot) by 45\u00b0 about the point (-1,-1) (red cross), the function gives (1.83, -1.0) (red circle).</p>\n<pre><code>&gt;&gt;&gt; rotate_point_wrt_center(point_to_be_rotated = (1,1), angle = -45, center_point = (-1,-1)) # angle is negative to indicate clock-wise rotation.\n&gt;&gt;&gt; (1.83, -1.0)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/i5ocy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i5ocy.png\" alt=\"image_rotation_example\" /></a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 355417,
                        "reputation": 5642,
                        "user_id": 694360,
                        "user_type": "registered",
                        "accept_rate": 71,
                        "display_name": "mmj"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1682959316,
                    "last_edit_date": 1682959316,
                    "creation_date": 1682927814,
                    "answer_id": 76145478,
                    "question_id": 34372480,
                    "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python/76145478#76145478",
                    "body": "<p>This is just a more performant recap of <a href=\"https://stackoverflow.com/a/34374437/694360\">Mark Dickinson's answer</a>:</p>\n<ul>\n<li>allows rotation of many points at once without external libraries</li>\n<li>efficient, because all values are computed at most once and no temporary list is created</li>\n<li>rotation angle is given in degrees, which in many cases is more practical</li>\n<li>rotation about exact angles 90, 180, 270 is computed without numerical approximation (i.e. <code>(1,0)</code> rotated by 90\u00b0 becomes <code>(0,1)</code> not <code>(6.123233995736766e-17,1)</code>)</li>\n<li>the function returns what it gets, that is a single point is returned as such and a sequence of points as a tuple (if you want to always return a tuple, which might be desirable in some cases, just use <code>return ret</code>)</li>\n</ul>\n\n<pre><code>import math\ndef rotate_points(*points,angle=0,center=(0,0)):\n    '''\n    Rotate one or more 2D points counterclockwise by a given angle (in degrees) around a given center.\n    '''\n    cx,cy = center\n    angle = angle % 360\n    ang_rad = math.radians(angle)\n    cos_ang,sin_ang = (0,1) if angle==90 else (-1,0) if angle==180 else (0,-1) if angle==270 else (math.cos(ang_rad),math.sin(ang_rad))\n    ret = tuple((cx+cos_ang*dx-sin_ang*dy,cy+sin_ang*dx+cos_ang*dy) for dx,dy in ((x-cx,y-cy) for x,y in points))\n    return ret if len(ret)&gt;1 else ret[0] # a single point is returned as such and a sequence of points as a tuple\n</code></pre>\n<p>Usage:</p>\n<pre><code>&gt;&gt;&gt; rotate_points((0,0),(1,0),(-1,1),angle=45,center=(1,1))\n((1.0, -0.41421356237309515), (1.7071067811865475, 0.2928932188134524), (-0.41421356237309515, -0.41421356237309515))\n</code></pre>\n<p>You can make the function even more efficient by returning a generator (delete keyword <code>tuple</code> from last but one line), if that is enough for you.</p>\n"
                }
            ],
            "owner": {
                "account_id": 3059947,
                "reputation": 1587,
                "user_id": 2592835,
                "user_type": "registered",
                "accept_rate": 59,
                "display_name": "willmac"
            },
            "comment_count": 1,
            "is_answered": true,
            "answer_count": 7,
            "score": 70,
            "last_activity_date": 1682959316,
            "creation_date": 1450539748,
            "last_edit_date": 1450543572,
            "question_id": 34372480,
            "link": "https://stackoverflow.com/questions/34372480/rotate-point-about-another-point-in-degrees-python",
            "title": "Rotate point about another point in degrees python",
            "body": "<p>If you had a point (in 2d), how could you rotate that point by degrees around the other point (the origin) in python?</p>\n\n<p>You might, for example, tilt the first point around the origin by 10 degrees.</p>\n\n<p>Basically you have one point PointA and origin that it rotates around.\nThe code could look something like this:</p>\n\n<pre><code>PointA=(200,300)\norigin=(100,100)\n\nNewPointA=rotate(origin,PointA,10) #The rotate function rotates it by 10 degrees\n</code></pre>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 7859
}