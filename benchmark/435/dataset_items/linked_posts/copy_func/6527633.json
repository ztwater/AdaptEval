{
    "items": [
        {
            "tags": [
                "python",
                "function",
                "copy",
                "deep-copy"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 53576,
                        "reputation": 76098,
                        "user_id": 160206,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Bj&#246;rn Pollex"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1309384158,
                    "post_id": 6527633,
                    "comment_id": 7685383,
                    "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python#comment7685383_6527633",
                    "body": "Do you want them to have the same <code>__name__</code>?"
                },
                {
                    "owner": {
                        "account_id": 774486,
                        "reputation": 413,
                        "user_id": 821996,
                        "user_type": "unregistered",
                        "display_name": "Tom"
                    },
                    "reply_to_user": {
                        "account_id": 53576,
                        "reputation": 76098,
                        "user_id": 160206,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Bj&#246;rn Pollex"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1309384394,
                    "post_id": 6527633,
                    "comment_id": 7685440,
                    "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python#comment7685440_6527633",
                    "body": "Eh, I&#39;m not too concerned about that, as I could easily change it once I have a copy."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 774486,
                                "reputation": 413,
                                "user_id": 821996,
                                "user_type": "unregistered",
                                "display_name": "Tom"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1309384290,
                            "post_id": 6527679,
                            "comment_id": 7685415,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527679#comment7685415_6527679",
                            "body": "It works, but is there something nicer...which doesn&#39;t increase the function call overhead? I literally just want a copy."
                        },
                        {
                            "owner": {
                                "account_id": 273771,
                                "reputation": 6400,
                                "user_id": 565595,
                                "user_type": "registered",
                                "accept_rate": 65,
                                "display_name": "Pushpak Dagade"
                            },
                            "reply_to_user": {
                                "account_id": 774486,
                                "reputation": 413,
                                "user_id": 821996,
                                "user_type": "unregistered",
                                "display_name": "Tom"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1309384431,
                            "post_id": 6527679,
                            "comment_id": 7685447,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527679#comment7685447_6527679",
                            "body": "I guess, even if there would be a way, it won&#39;t be &#39;nicer&#39;"
                        },
                        {
                            "owner": {
                                "account_id": 774486,
                                "reputation": 413,
                                "user_id": 821996,
                                "user_type": "unregistered",
                                "display_name": "Tom"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1309384815,
                            "post_id": 6527679,
                            "comment_id": 7685529,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527679#comment7685529_6527679",
                            "body": "I agree it won&#39;t be nicer, but since I am calling this function in for loops nested a few levels down, I went with the factory method."
                        }
                    ],
                    "owner": {
                        "account_id": 273771,
                        "reputation": 6400,
                        "user_id": 565595,
                        "user_type": "registered",
                        "accept_rate": 65,
                        "display_name": "Pushpak Dagade"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1309384108,
                    "creation_date": 1309384108,
                    "answer_id": 6527679,
                    "question_id": 6527633,
                    "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527679#6527679",
                    "body": "<pre><code>def A():\n    \"\"\"A\"\"\"\n    pass\n\ndef B():\n    \"\"\"B\"\"\"\n    return A()\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 774486,
                                "reputation": 413,
                                "user_id": 821996,
                                "user_type": "unregistered",
                                "display_name": "Tom"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1309384572,
                            "post_id": 6527707,
                            "comment_id": 7685476,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527707#comment7685476_6527707",
                            "body": "Alright, I guess I am going to cave in and accept this. I was hoping there was something which didn&#39;t rely or wrapping or a construction, but I suppose it ultimately comes down to that at some level."
                        },
                        {
                            "owner": {
                                "account_id": 210792,
                                "reputation": 34318,
                                "user_id": 462604,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "Jakob Bowyer"
                            },
                            "reply_to_user": {
                                "account_id": 774486,
                                "reputation": 413,
                                "user_id": 821996,
                                "user_type": "unregistered",
                                "display_name": "Tom"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1309385086,
                            "post_id": 6527707,
                            "comment_id": 7685586,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527707#comment7685586_6527707",
                            "body": "@Tom did you not look at my example? It shows basically the syntax you want."
                        }
                    ],
                    "owner": {
                        "account_id": 33994,
                        "reputation": 106328,
                        "user_id": 95612,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Jochen Ritzel"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1309384283,
                    "creation_date": 1309384283,
                    "answer_id": 6527707,
                    "question_id": 6527633,
                    "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527707#6527707",
                    "body": "<p>put it in a function:</p>\n\n<pre><code>def makefunc( docstring ):\n    def f():\n        pass\n    f.__doc__ = docstring\n    return f\n\nf = makefunc('I am f')\ng = makefunc(\"I am f too\")\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 774486,
                                "reputation": 413,
                                "user_id": 821996,
                                "user_type": "unregistered",
                                "display_name": "Tom"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1309387045,
                            "post_id": 6527746,
                            "comment_id": 7685956,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527746#comment7685956_6527746",
                            "body": "So the only reason I think this is not as &quot;nice&quot; is that from an IPython terminal, one cannot look at the source of b, via &quot;b??&quot;.  Strictly a personal preference."
                        },
                        {
                            "owner": {
                                "account_id": 210792,
                                "reputation": 34318,
                                "user_id": 462604,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "Jakob Bowyer"
                            },
                            "reply_to_user": {
                                "account_id": 774486,
                                "reputation": 413,
                                "user_id": 821996,
                                "user_type": "unregistered",
                                "display_name": "Tom"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1309387159,
                            "post_id": 6527746,
                            "comment_id": 7685976,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527746#comment7685976_6527746",
                            "body": "God damn it! try the bpython console"
                        },
                        {
                            "owner": {
                                "account_id": 2640892,
                                "reputation": 2991,
                                "user_id": 2284570,
                                "user_type": "registered",
                                "accept_rate": 44,
                                "display_name": "user2284570"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1473180279,
                            "post_id": 6527746,
                            "comment_id": 66037821,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527746#comment66037821_6527746",
                            "body": "@JakobBowyer : using this solution you don\u2019t get a copy of <code>a</code>, but you wrap <code>a</code> in a <code>functools.partial object</code>."
                        },
                        {
                            "owner": {
                                "account_id": 3842358,
                                "reputation": 2468,
                                "user_id": 3185053,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Sebastian Wagner"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1581519270,
                            "post_id": 6527746,
                            "comment_id": 106462465,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527746#comment106462465_6527746",
                            "body": "<code>b = lambda *args, **kwargs: a(*args, **kwargs)</code> works as well, but a bit more verbose"
                        }
                    ],
                    "owner": {
                        "account_id": 210792,
                        "reputation": 34318,
                        "user_id": 462604,
                        "user_type": "registered",
                        "accept_rate": 68,
                        "display_name": "Jakob Bowyer"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1309384519,
                    "creation_date": 1309384519,
                    "answer_id": 6527746,
                    "question_id": 6527633,
                    "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6527746#6527746",
                    "body": "<pre><code>from functools import partial\n\ndef a():\n    \"\"\"Returns 1\"\"\"\n    return 1\n\nb = partial(a)\nb.__doc__ = \"\"\"Returns 1, OR DOES IT!\"\"\"\n\nprint help(a)\nprint help(b)\n</code></pre>\n\n<p>Wrap it as a partial?</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2640892,
                                "reputation": 2991,
                                "user_id": 2284570,
                                "user_type": "registered",
                                "accept_rate": 44,
                                "display_name": "user2284570"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1473178881,
                            "post_id": 6528148,
                            "comment_id": 66037110,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6528148#comment66037110_6528148",
                            "body": "@GlennMaynard : this can\u2019t work for built\u2011in functions <a href=\"http://stackoverflow.com/q/39353158/2284570\">stackoverflow.com/q/39353158/2284570</a>"
                        },
                        {
                            "owner": {
                                "account_id": 187417,
                                "reputation": 13789,
                                "user_id": 425458,
                                "user_type": "registered",
                                "accept_rate": 61,
                                "display_name": "tel"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1518320240,
                            "post_id": 6528148,
                            "comment_id": 84455029,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6528148#comment84455029_6528148",
                            "body": "Only works in python 2. See <a href=\"https://stackoverflow.com/a/30714299/425458\">Aaron Hall&#39;s</a> post below for an answer that&#39;s py 2/3 compatible."
                        }
                    ],
                    "owner": {
                        "account_id": 46333,
                        "reputation": 56666,
                        "user_id": 136829,
                        "user_type": "registered",
                        "display_name": "Glenn Maynard"
                    },
                    "comment_count": 2,
                    "is_accepted": true,
                    "score": 33,
                    "last_activity_date": 1309387564,
                    "creation_date": 1309387564,
                    "answer_id": 6528148,
                    "question_id": 6527633,
                    "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/6528148#6528148",
                    "body": "<p>The FunctionType constructor is used to make a deep copy of a function.</p>\n\n<pre><code>import types\ndef copy_func(f, name=None):\n    return types.FunctionType(f.func_code, f.func_globals, name or f.func_name,\n        f.func_defaults, f.func_closure)\n\ndef A():\n    \"\"\"A\"\"\"\n    pass\nB = copy_func(A, \"B\")\nB.__doc__ = \"\"\"B\"\"\"\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2640892,
                                "reputation": 2991,
                                "user_id": 2284570,
                                "user_type": "registered",
                                "accept_rate": 44,
                                "display_name": "user2284570"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1473178942,
                            "post_id": 30714299,
                            "comment_id": 66037147,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/30714299#comment66037147_30714299",
                            "body": "This can\u2019t work for built\u2011in functions <a href=\"http://stackoverflow.com/q/39353158/2284570\">stackoverflow.com/q/39353158/2284570</a>"
                        },
                        {
                            "owner": {
                                "account_id": 187417,
                                "reputation": 13789,
                                "user_id": 425458,
                                "user_type": "registered",
                                "accept_rate": 61,
                                "display_name": "tel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1518320108,
                            "post_id": 30714299,
                            "comment_id": 84455000,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/30714299#comment84455000_30714299",
                            "body": "py 2/3 compatibility for the win!"
                        },
                        {
                            "owner": {
                                "account_id": 14059264,
                                "reputation": 2029,
                                "user_id": 10155767,
                                "user_type": "registered",
                                "display_name": "Ben Mares"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1550582754,
                            "post_id": 30714299,
                            "comment_id": 96314793,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/30714299#comment96314793_30714299",
                            "body": "<a href=\"https://stackoverflow.com/a/13503277/10155767\">This solution</a> of a duplicate problem is very similar, but also takes into account a few further subtleties such as <code>__kwdefaults__</code>."
                        },
                        {
                            "owner": {
                                "account_id": 1264833,
                                "reputation": 5786,
                                "user_id": 1623645,
                                "user_type": "registered",
                                "accept_rate": 73,
                                "display_name": "Jim Pivarski"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1616107007,
                            "post_id": 30714299,
                            "comment_id": 117907254,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/30714299#comment117907254_30714299",
                            "body": "Maybe this technique isn&#39;t well motivated for docstrings, but I&#39;m glad you wrote the tutorial because I really needed it! I needed a copy of a suite of functions, which call each other, to be copied to a new (dynamic) module and call each others&#39; copies, rather than the originals. This meant replacing their <code>__globals__</code> to point to the new module. The reason for all of this was to Numba-compile all of the copied functions without affecting the original functions, since they still need to be accessed in pure object mode. So thanks!"
                        }
                    ],
                    "owner": {
                        "account_id": 258754,
                        "reputation": 385523,
                        "user_id": 541136,
                        "user_type": "moderator",
                        "accept_rate": 96,
                        "display_name": "Russia Must Remove Putin"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 30,
                    "last_activity_date": 1518369182,
                    "last_edit_date": 1592644375,
                    "creation_date": 1433780305,
                    "answer_id": 30714299,
                    "question_id": 6527633,
                    "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/30714299#30714299",
                    "body": "<blockquote>\n<h2>My goal is to have two functions with the same implementation but with different docstrings.</h2>\n</blockquote>\n<p>Most users will do this, say the original function is in <code>old_module.py</code>:</p>\n<pre><code>def implementation(arg1, arg2): \n    &quot;&quot;&quot;this is a killer function&quot;&quot;&quot;\n</code></pre>\n<p>and in <code>new_module.py</code></p>\n<pre><code>from old_module import implementation as _implementation\n\ndef implementation(arg1, arg2):\n    &quot;&quot;&quot;a different docstring&quot;&quot;&quot;\n    return _implementation(arg1, arg2)\n</code></pre>\n<p>This is the most straightforward way to reuse functionality. It is easy to read and understand the intent.</p>\n<p>Nevertheless, perhaps you have a good reason for your main question:</p>\n<blockquote>\n<h2>How can I make a deepcopy of a function in Python?</h2>\n</blockquote>\n<p>To keep this compatible with Python 2 <em>and</em> 3, I recommend using the function's special <code>__dunder__</code> attributes. For example:</p>\n<pre><code>import types\n\ndef copy_func(f, name=None):\n    '''\n    return a function with same code, globals, defaults, closure, and \n    name (or provide a new name)\n    '''\n    fn = types.FunctionType(f.__code__, f.__globals__, name or f.__name__,\n        f.__defaults__, f.__closure__)\n    # in case f was given attrs (note this dict is a shallow copy):\n    fn.__dict__.update(f.__dict__) \n    return fn\n</code></pre>\n<p>And here's an example usage:</p>\n<pre><code>def main():\n    from logging import getLogger as _getLogger # pyflakes:ignore, must copy\n    getLogger = copy_func(_getLogger)\n    getLogger.__doc__ += '\\n    This function is from the Std Lib logging module.\\n    '\n    assert getLogger.__doc__ is not _getLogger.__doc__\n    assert getLogger.__doc__ != _getLogger.__doc__\n</code></pre>\n<p>A commenter says:</p>\n<blockquote>\n<p>This can\u2019t work for built\u2011in functions</p>\n</blockquote>\n<p>Well I wouldn't <em>do</em> this for a built-in function. I have very little reason to do this for functions written in pure Python, and my suspicion is that if you are doing this, you're probably doing something very wrong (though I could be wrong here).</p>\n<p>If you want a function that does what a builtin function does, and reuses the implementation, like a copy would, then you should wrap the function with another function, e.g.:</p>\n<pre><code>_sum = sum\ndef sum(iterable, start=0):\n    &quot;&quot;&quot;sum function that works like the regular sum function, but noisy&quot;&quot;&quot;\n    print('calling the sum function')\n    return _sum(iterable, start)\n    \n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6643392,
                                "reputation": 825,
                                "user_id": 5128398,
                                "user_type": "registered",
                                "display_name": "oldpride"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1597015157,
                            "post_id": 56901529,
                            "comment_id": 111988768,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/56901529#comment111988768_56901529",
                            "body": "somehow people overlooked this piece"
                        },
                        {
                            "owner": {
                                "account_id": 3343278,
                                "reputation": 10053,
                                "user_id": 2809027,
                                "user_type": "registered",
                                "display_name": "Cecil Curry"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1613366377,
                            "post_id": 56901529,
                            "comment_id": 117043444,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/56901529#comment117043444_56901529",
                            "body": "<b>Brilliant.</b> This is undeniably the optimally efficient solution to function copying both here <a href=\"https://stackoverflow.com/questions/13503079/how-to-create-a-copy-of-a-python-function\">and elsewhere</a>. Sadly, it lacks upvotes. Sadly, it&#39;s also incomplete. Why? Because it fails to copy the <code>__kwdefaults__</code>, <code>__module__</code>, <code>__qualname__</code>, <code>__doc__</code>, and <code>__annotations__</code> attributes from the old to new function. Fortunately, <i>all</i> of those attributes can be trivially copied by just calling <code>functools.update_wrapper(IAmFooCopied, foo, functools.WRAPPER_ASSIGNMENTS + (&#39;__kwdefaults__&#39;,))</code>. <b>Yup.</b>"
                        },
                        {
                            "owner": {
                                "account_id": 3343278,
                                "reputation": 10053,
                                "user_id": 2809027,
                                "user_type": "registered",
                                "display_name": "Cecil Curry"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1617917528,
                            "post_id": 56901529,
                            "comment_id": 118451976,
                            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/56901529#comment118451976_56901529",
                            "body": "<b>Addendum:</b> <a href=\"https://docs.python.org/3/library/types.html#types.CodeType.replace\" rel=\"nofollow noreferrer\">the new <code>CodeType.replace()</code> method introduced in Python 3.8</a> is strongly preferable to reconstructing a new <code>CodeType</code> object from scratch. Why? Because future-proofing. The <code>CodeType</code> constructor frequently changes between Python versions, which then breaks everything."
                        }
                    ],
                    "owner": {
                        "account_id": 11009723,
                        "reputation": 506,
                        "user_id": 8087549,
                        "user_type": "registered",
                        "display_name": "ninjaconcombre"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1562323447,
                    "creation_date": 1562323447,
                    "answer_id": 56901529,
                    "question_id": 6527633,
                    "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/56901529#56901529",
                    "body": "<p>The others answers do not allow for serialization with pickle. Here a code that I am using to clone a function and allow for serialization for python3:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pickle\nimport dill\nimport types\n\ndef foo():\n    print ('a')\n\n\noldCode=foo.__code__\n\nname='IAmFooCopied'\n\nnewCode= types.CodeType(\n        oldCode.co_argcount,             #   integer\n        oldCode.co_kwonlyargcount,       #   integer\n        oldCode.co_nlocals,              #   integer\n        oldCode.co_stacksize,            #   integer\n        oldCode.co_flags,                #   integer\n        oldCode.co_code,                 #   bytes\n        oldCode.co_consts,               #   tuple\n        oldCode.co_names,                #   tuple\n        oldCode.co_varnames,             #   tuple\n        oldCode.co_filename,             #   string\n        name,                  #   string\n        oldCode.co_firstlineno,          #   integer\n        oldCode.co_lnotab,               #   bytes\n        oldCode.co_freevars,             #   tuple\n        oldCode.co_cellvars              #   tuple\n        )\n\nIAmFooCopied=types.FunctionType(newCode, foo.__globals__, name,foo.__defaults__ , foo.__closure__)\nIAmFooCopied.__qualname__= name\nprint ( 'printing foo and the copy', IAmFooCopied, foo )\nprint ( 'dill output: ', dill.dumps(IAmFooCopied ))\nprint ( 'pickle Output: ', pickle.dumps (IAmFooCopied) )\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>printing foo and the copy &lt;function IAmFooCopied at 0x7f8a6a8159d8&gt; &lt;function foo at 0x7f8a6b5f5268&gt;\ndill output:  b'\\x80\\x03cdill._dill\\n_create_function\\nq\\x00(cdill._dill\\n_load_type\\nq\\x01X\\x08\\x00\\x00\\x00CodeTypeq\\x02\\x85q\\x03Rq\\x04(K\\x00K\\x00K\\x00K\\x02KCC\\x0ct\\x00d\\x01\\x83\\x01\\x01\\x00d\\x00S\\x00q\\x05NX\\x01\\x00\\x00\\x00aq\\x06\\x86q\\x07X\\x05\\x00\\x00\\x00printq\\x08\\x85q\\t)X\\x10\\x00\\x00\\x00testCloneFunc.pyq\\nX\\x0c\\x00\\x00\\x00IAmFooCopiedq\\x0bK\\x05C\\x02\\x00\\x01q\\x0c))tq\\rRq\\x0ec__builtin__\\n__main__\\nh\\x0bNN}q\\x0ftq\\x10Rq\\x11.'\npickle Output:  b'\\x80\\x03c__main__\\nIAmFooCopied\\nq\\x00.'\n</code></pre>\n\n<p>You may encounter problem with the <strong>qualname</strong> attribute if you try this snippet with class methods (I think pickle should fail to find your function). I never tried it, however it should be easily fixable. Just check the doc about <strong>qualname</strong> </p>\n"
                },
                {
                    "owner": {
                        "account_id": 15102521,
                        "reputation": 473,
                        "user_id": 11064188,
                        "user_type": "registered",
                        "display_name": "Nirvana"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1618353983,
                    "creation_date": 1618353983,
                    "answer_id": 67083317,
                    "question_id": 6527633,
                    "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/67083317#67083317",
                    "body": "<p>It's quite easy to do using <code>lambda</code> and rest parameters:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def my_copy(f): \n        # Create a lambda that mimics f\n        g = lambda *args: f(*args)\n        # Add any properties of f\n        t = list(filter(lambda prop: not (&quot;__&quot; in prop),dir(f)))\n        i = 0\n        while i &lt; len(t):\n            setattr(g,t[i],getattr(f,t[i]))\n            i += 1\n        return g\n        \n# Test\ndef sqr(x): return x*x\nsqr.foo = 500\n\nsqr_copy = my_copy(sqr)\nprint(sqr_copy(5)) # -&gt; 25\nprint(sqr_copy(6)) # -&gt; 36\nprint(sqr_copy.foo) # -&gt; 500\nprint(sqr_copy == sqr) # -&gt; False\n</code></pre>\n<p><a href=\"https://tio.run/##XZBBT4QwEIXv/RWT3Uu7iwbdsAciJsbEX@DNGFKXFppAi@0Y4ddjiwVxe@p73@TN5PUjNkafpqkSErqxvJh@pJLlQCC@PTxbwVEAh5Z3HxUHbDhCpzp1cSDXuRqKZeDAbe1ykHT@sE3UU1UB1yP01vTCohIOjNyEYAhRDqlULQpLY2AYz0EbBLoryx0oPVssqZT117K/FcoHpKv6blQrvPcArdAUWb6S8JxAjmhpneCbek/qKOUsN5m/uccC7lbLCvyyGurVIHt4FQ5JqNF9Wjr4CuPQcBiIt26lMf64LE1JkHPTXi@de4uR3iqNdKE0Y8x3dvMI99k1Oi/odL5CYU9kYdd/CEURzov8hbdOTNMP\" rel=\"nofollow noreferrer\">Try it online!</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 1726996,
                        "reputation": 1422,
                        "user_id": 1581441,
                        "user_type": "registered",
                        "accept_rate": 61,
                        "display_name": "hmghaly"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1649794304,
                    "creation_date": 1649794304,
                    "answer_id": 71848622,
                    "question_id": 6527633,
                    "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/71848622#71848622",
                    "body": "<p>Adjusted for python3</p>\n<pre><code>import types\ndef copy_func(f, name=None):\n    return types.FunctionType(f.__code__, f.__globals__, name or f.__name__,\n        f.__defaults__, f.__closure__)\ndef func1(x):\n  return 2*x\nfunc2=copy_func(func1)\nprint(func2(7))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 3580374,
                        "reputation": 111083,
                        "user_id": 2988730,
                        "user_type": "registered",
                        "accept_rate": 96,
                        "display_name": "Mad Physicist"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1666724215,
                    "creation_date": 1666724215,
                    "answer_id": 74198920,
                    "question_id": 6527633,
                    "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python/74198920#74198920",
                    "body": "<p>I've implemented a general-purpose function copy in <a href=\"https://haggis.readthedocs.io/en/stable/index.html\" rel=\"nofollow noreferrer\">haggis</a>, a library which I wrote and maintain (available with <code>pip</code> but probably not <code>conda</code>). <a href=\"https://haggis.readthedocs.io/en/stable/api.html#haggis.objects.copy_func\" rel=\"nofollow noreferrer\"><code>haggis.objects.copy_func</code></a> makes a copy on which you can not only reassign the <code>__doc__</code> attribute, but also modify the module and <code>__globals__</code> attributes effectively.</p>\n<pre><code>from haggis.objects import copy_func\n\ndef a(*args, **kwargs):\n    &quot;&quot;&quot;A docstring&quot;&quot;&quot;\n\na2 = copy_func(a)\na2.__doc__ = &quot;&quot;&quot;Another docstring&quot;&quot;&quot;\n</code></pre>\n<pre><code>&gt;&gt;&gt; a == a2\nFalse\n&gt;&gt;&gt; a.__code__ == a2.__code__\nTrue\n&gt;&gt;&gt; a.__doc__\n'A docstring'\n&gt;&gt;&gt; a2.__doc__\n'Another docstring'\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 774486,
                "reputation": 413,
                "user_id": 821996,
                "user_type": "unregistered",
                "display_name": "Tom"
            },
            "comment_count": 2,
            "is_answered": true,
            "accepted_answer_id": 6528148,
            "answer_count": 9,
            "score": 38,
            "last_activity_date": 1666724215,
            "creation_date": 1309383860,
            "question_id": 6527633,
            "link": "https://stackoverflow.com/questions/6527633/how-can-i-make-a-deepcopy-of-a-function-in-python",
            "title": "How can I make a deepcopy of a function in Python?",
            "body": "<p>I would like to make a deepcopy of a function in Python.  The <em>copy</em> module is not helpful, according to the <a href=\"http://docs.python.org/library/copy.html\" rel=\"noreferrer\">documentation</a>, which says:</p>\n\n<blockquote>\n  <p>This module does not copy types like module, method, stack trace, stack frame, file, \n  socket, window, array, or any similar types. It does \u201ccopy\u201d functions and classes (shallow \n  and deeply), by returning the original object unchanged; this is compatible with the way\n  these are treated by the pickle module.</p>\n</blockquote>\n\n<p>My goal is to have two functions with the same implementation but with different docstrings.  </p>\n\n<pre><code>def A():\n    \"\"\"A\"\"\"\n    pass\n\nB = make_a_deepcopy_of(A)\nB.__doc__ = \"\"\"B\"\"\"\n</code></pre>\n\n<p>So how can this be done?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 9298
}