{
    "items": [
        {
            "tags": [
                "python",
                "namespaces",
                "find",
                "elementtree",
                "findall"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 973353,
                        "reputation": 12723,
                        "user_id": 995394,
                        "user_type": "registered",
                        "accept_rate": 93,
                        "display_name": "iMom0"
                    },
                    "edited": false,
                    "score": 24,
                    "creation_date": 1353056223,
                    "post_id": 13412496,
                    "comment_id": 18328039,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma#comment18328039_13412496",
                    "body": "Is <code>tree.findall(&quot;xmlns:DEAL_LEVEL&#47;xmlns:PAID_OFF&quot;, namespaces={&#39;xmlns&#39;: &#39;http:&#47;&#47;www.test.com&#39;})</code> convenient enough?"
                },
                {
                    "owner": {
                        "account_id": 2049597,
                        "reputation": 1873,
                        "user_id": 1828869,
                        "user_type": "registered",
                        "accept_rate": 25,
                        "display_name": "KevinLeng"
                    },
                    "reply_to_user": {
                        "account_id": 973353,
                        "reputation": 12723,
                        "user_id": 995394,
                        "user_type": "registered",
                        "accept_rate": 93,
                        "display_name": "iMom0"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1353057452,
                    "post_id": 13412496,
                    "comment_id": 18328510,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma#comment18328510_13412496",
                    "body": "Thanks very much. I try your method and it can work. It&#39;s more convenient than mine but it&#39;s still a little awkward. Do you know if there is no other proper method in ElementTree module to solve this issue or there is no such method at all?"
                },
                {
                    "owner": {
                        "account_id": 4538744,
                        "reputation": 301,
                        "user_id": 3687217,
                        "user_type": "registered",
                        "display_name": "Warf"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1587980784,
                    "post_id": 13412496,
                    "comment_id": 108712918,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma#comment108712918_13412496",
                    "body": "Or try <code>tree.findall(&quot;{0}DEAL_LEVEL&#47;{0}PAID_OFF&quot;.format(&#39;{http:&#47;&#47;www&zwnj;&#8203;.test.com}&#39;))</code>"
                },
                {
                    "owner": {
                        "account_id": 176760,
                        "reputation": 50082,
                        "user_id": 407651,
                        "user_type": "registered",
                        "display_name": "mzjn"
                    },
                    "edited": false,
                    "score": 3,
                    "creation_date": 1593142052,
                    "post_id": 13412496,
                    "comment_id": 110682401,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma#comment110682401_13412496",
                    "body": "In Python 3.8, a wildcard can be used for the namespace. <a href=\"https://stackoverflow.com/a/62117710/407651\">stackoverflow.com/a/62117710/407651</a>"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3060632,
                                "reputation": 3391,
                                "user_id": 2593383,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "nonagon"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1411069106,
                            "post_id": 15641319,
                            "comment_id": 40576285,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/15641319#comment40576285_15641319",
                            "body": "This worked in many cases for me, but then I ran into multiple namespaces and namespace aliases. See my answer for another approach that handles these cases."
                        },
                        {
                            "owner": {
                                "account_id": 146530,
                                "reputation": 59980,
                                "user_id": 357024,
                                "user_type": "registered",
                                "accept_rate": 90,
                                "display_name": "Mike"
                            },
                            "edited": false,
                            "score": 61,
                            "creation_date": 1424029705,
                            "post_id": 15641319,
                            "comment_id": 45375681,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/15641319#comment45375681_15641319",
                            "body": "-1 manipulating the xml via a regular expression before parsing is just wrong. though it might work in some cases, this should not be the top voted answer and should not be used in a professional application."
                        },
                        {
                            "owner": {
                                "account_id": 35417,
                                "reputation": 1089172,
                                "user_id": 100297,
                                "user_type": "moderator",
                                "display_name": "Martijn Pieters"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1569943893,
                            "post_id": 15641319,
                            "comment_id": 102755934,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/15641319#comment102755934_15641319",
                            "body": "Apart from the fact that using a regex for a XML parsing job is inherently unsound, this is <b>not going to work for many XML documents</b>, because it ignores namespace prefixes, and the fact that XML syntax allows for arbitrary whitespace before attribute names (not just spaces) and around the <code>=</code> equals sign."
                        },
                        {
                            "owner": {
                                "account_id": 3060230,
                                "reputation": 988,
                                "user_id": 2593063,
                                "user_type": "registered",
                                "display_name": "rimkashox"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1592043298,
                            "post_id": 15641319,
                            "comment_id": 110286247,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/15641319#comment110286247_15641319",
                            "body": "Yes, it&#39;s quick and dirty, but it&#39;s definitely the most elegant solution for simple use cases, thanks!"
                        }
                    ],
                    "owner": {
                        "account_id": 2547864,
                        "reputation": 637,
                        "user_id": 2212280,
                        "user_type": "unregistered",
                        "display_name": "user2212280"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 46,
                    "last_activity_date": 1411579310,
                    "last_edit_date": 1411579310,
                    "creation_date": 1364312664,
                    "answer_id": 15641319,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/15641319#15641319",
                    "body": "<p>If you remove the xmlns attribute from the xml before parsing it then there won't be a namespace prepended to each tag in the tree.</p>\n\n<pre><code>import re\n\nxmlstring = re.sub(' xmlns=\"[^\"]+\"', '', xmlstring, count=1)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1335952,
                        "reputation": 552,
                        "user_id": 1278711,
                        "user_type": "registered",
                        "display_name": "tzp"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1381227497,
                    "creation_date": 1381227497,
                    "answer_id": 19244976,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/19244976#19244976",
                    "body": "<p>You can use the elegant string formatting construct as well:</p>\n\n<pre><code>ns='http://www.test.com'\nel2 = tree.findall(\"{%s}DEAL_LEVEL/{%s}PAID_OFF\" %(ns,ns))\n</code></pre>\n\n<p>or, if you're sure that <strong>PAID_OFF</strong> only appears in one level in tree:</p>\n\n<pre><code>el2 = tree.findall(\".//{%s}PAID_OFF\" % ns)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 231844,
                                "reputation": 16178,
                                "user_id": 496289,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "Kashyap"
                            },
                            "edited": false,
                            "score": 20,
                            "creation_date": 1395170988,
                            "post_id": 20104763,
                            "comment_id": 34213239,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/20104763#comment34213239_20104763",
                            "body": "Too much to assume that there is only one <code>namespace</code>"
                        },
                        {
                            "owner": {
                                "account_id": 35417,
                                "reputation": 1089172,
                                "user_id": 100297,
                                "user_type": "moderator",
                                "display_name": "Martijn Pieters"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1569944025,
                            "post_id": 20104763,
                            "comment_id": 102756004,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/20104763#comment102756004_20104763",
                            "body": "This does not take into account that nested tags can use different namespaces."
                        }
                    ],
                    "owner": {
                        "account_id": 3442008,
                        "reputation": 243,
                        "user_id": 2883734,
                        "user_type": "registered",
                        "display_name": "wimous"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 19,
                    "last_activity_date": 1517330544,
                    "last_edit_date": 1517330544,
                    "creation_date": 1384974472,
                    "answer_id": 20104763,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/20104763#20104763",
                    "body": "<p>The answers so far explicitely put the namespace value in the script. For a more generic solution, I would rather extract the namespace from the xml:</p>\n\n<pre><code>import re\ndef get_namespace(element):\n  m = re.match('\\{.*\\}', element.tag)\n  return m.group(0) if m else ''\n</code></pre>\n\n<p>And use it in find method:</p>\n\n<pre><code>namespace = get_namespace(tree.getroot())\nprint tree.find('./{0}parent/{0}version'.format(namespace)).text\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 4292069,
                                "reputation": 3117,
                                "user_id": 3622606,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Jess"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1412996886,
                            "post_id": 25920989,
                            "comment_id": 41288585,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/25920989#comment41288585_25920989",
                            "body": "This. This this this. Multiple name spaces were going to be the death of me."
                        },
                        {
                            "owner": {
                                "account_id": 1412466,
                                "reputation": 8603,
                                "user_id": 1338797,
                                "user_type": "registered",
                                "display_name": "Tomasz Gandor"
                            },
                            "edited": false,
                            "score": 19,
                            "creation_date": 1415977954,
                            "post_id": 25920989,
                            "comment_id": 42410810,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/25920989#comment42410810_25920989",
                            "body": "OK, this is nice and more advanced, but still it&#39;s not <code>et.findall(&#39;{*}sometag&#39;)</code>. And it also is mangling the element tree itself, not just &quot;perform the search ignoring namespaces just this time, without re-parsing the document etc, retaining the namespace information&quot;. Well, for that case you observably need to iterate through the tree, and see for yourself, if the node matches your wishes after removing the namespace."
                        },
                        {
                            "owner": {
                                "account_id": 3211089,
                                "reputation": 281,
                                "user_id": 2711095,
                                "user_type": "registered",
                                "accept_rate": 23,
                                "display_name": "TraceKira"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1472498883,
                            "post_id": 25920989,
                            "comment_id": 65766149,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/25920989#comment65766149_25920989",
                            "body": "This works by stripping the string but when i save the XML file using write(...) the namespace dissapears from the begging of the XML xmlns=&quot;<a href=\"http://bla\" rel=\"nofollow noreferrer\">bla</a>&quot; dissapears. Please advice"
                        },
                        {
                            "owner": {
                                "account_id": 35417,
                                "reputation": 1089172,
                                "user_id": 100297,
                                "user_type": "moderator",
                                "display_name": "Martijn Pieters"
                            },
                            "reply_to_user": {
                                "account_id": 1412466,
                                "reputation": 8603,
                                "user_id": 1338797,
                                "user_type": "registered",
                                "display_name": "Tomasz Gandor"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1569944279,
                            "post_id": 25920989,
                            "comment_id": 102756131,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/25920989#comment102756131_25920989",
                            "body": "@TomaszGandor: you could add the namespace to a separate attribute, perhaps. For simple tag containment tests (<i>does this document contain this tag name?</i>) this solution is great and can be short-circuited."
                        },
                        {
                            "owner": {
                                "account_id": 35417,
                                "reputation": 1089172,
                                "user_id": 100297,
                                "user_type": "moderator",
                                "display_name": "Martijn Pieters"
                            },
                            "reply_to_user": {
                                "account_id": 3211089,
                                "reputation": 281,
                                "user_id": 2711095,
                                "user_type": "registered",
                                "accept_rate": 23,
                                "display_name": "TraceKira"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1569944427,
                            "post_id": 25920989,
                            "comment_id": 102756205,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/25920989#comment102756205_25920989",
                            "body": "@TraceKira: this technique removes namespaces from the parsed document, and you can&#39;t use that to create a new XML string with namespaces. Either store the namespace values in an extra attribute (and put the namespace back in before turning the XML tree back into a string) or re-parse from the original source to apply changes to that based on the stripped tree."
                        },
                        {
                            "owner": {
                                "account_id": 8149493,
                                "reputation": 9583,
                                "user_id": 6137027,
                                "user_type": "registered",
                                "display_name": "DryLabRebel"
                            },
                            "reply_to_user": {
                                "account_id": 1412466,
                                "reputation": 8603,
                                "user_id": 1338797,
                                "user_type": "registered",
                                "display_name": "Tomasz Gandor"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1690525814,
                            "post_id": 25920989,
                            "comment_id": 135368725,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/25920989#comment135368725_25920989",
                            "body": "@TomaszGandor Important to point out that wildcards in elementtree are only available from python 3.8 onwards."
                        }
                    ],
                    "owner": {
                        "account_id": 3060632,
                        "reputation": 3391,
                        "user_id": 2593383,
                        "user_type": "registered",
                        "accept_rate": 68,
                        "display_name": "nonagon"
                    },
                    "comment_count": 6,
                    "is_accepted": false,
                    "score": 74,
                    "last_activity_date": 1666012426,
                    "last_edit_date": 1666012426,
                    "creation_date": 1411069056,
                    "answer_id": 25920989,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/25920989#25920989",
                    "body": "<p>Instead of modifying the XML document itself, it's best to parse it and then modify the tags in the result. This way you can handle multiple namespaces and namespace aliases:</p>\n<pre><code>from io import StringIO  # for Python 2 import from StringIO instead\nimport xml.etree.ElementTree as ET\n\n# instead of ET.fromstring(xml)\nit = ET.iterparse(StringIO(xml))\nfor _, el in it:\n    _, _, el.tag = el.tag.rpartition('}') # strip ns\nroot = it.root\n</code></pre>\n<p>This is based on the discussion <a href=\"http://bugs.python.org/issue18304\" rel=\"nofollow noreferrer\">here</a>.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 2683891,
                        "reputation": 6766,
                        "user_id": 2318649,
                        "user_type": "registered",
                        "display_name": "DisappointedByUnaccountableMod"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 14,
                    "last_activity_date": 1638292126,
                    "last_edit_date": 1638292126,
                    "creation_date": 1448882466,
                    "answer_id": 33997423,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/33997423#33997423",
                    "body": "<p>Here's an extension to @nonagon answer (which removes namespace from tags) to also remove namespace from attributes:</p>\n<pre><code>import io\nimport xml.etree.ElementTree as ET\n\n# instead of ET.fromstring(xml)\nit = ET.iterparse(io.StringIO(xml))\nfor _, el in it:\n    if '}' in el.tag:\n        el.tag = el.tag.split('}', 1)[1]  # strip all namespaces\n    for at in list(el.attrib.keys()): # strip namespaces of attributes too\n        if '}' in at:\n            newat = at.split('}', 1)[1]\n            el.attrib[newat] = el.attrib[at]\n            del el.attrib[at]\nroot = it.root\n</code></pre>\n<p>Obviously this is a permanent defacing of the XML but if that's acceptable because there are no non-unique tag names and because you won't be writing the file needing the original namespaces then this can make accessing it a lot easier</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1836324,
                                "reputation": 660,
                                "user_id": 1666637,
                                "user_type": "registered",
                                "display_name": "lijat"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1544532159,
                            "post_id": 48344935,
                            "comment_id": 94302240,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/48344935#comment94302240_48344935",
                            "body": "This is a better way than other current answers as it does not depend on string processing"
                        },
                        {
                            "owner": {
                                "account_id": 2683891,
                                "reputation": 6766,
                                "user_id": 2318649,
                                "user_type": "registered",
                                "display_name": "DisappointedByUnaccountableMod"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1550069535,
                            "post_id": 48344935,
                            "comment_id": 96135721,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/48344935#comment96135721_48344935",
                            "body": "In python 3.7.2 (and possibly eariler) AFAICT it&#39;s no longer possible to avoid using cElementTree, so this workaround may not be possible :-("
                        },
                        {
                            "owner": {
                                "account_id": 3316143,
                                "reputation": 113,
                                "user_id": 2788477,
                                "user_type": "registered",
                                "display_name": "ericspod"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1550586682,
                            "post_id": 48344935,
                            "comment_id": 96317306,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/48344935#comment96317306_48344935",
                            "body": "cElemTree is deprecated but there is <a href=\"https://github.com/python/cpython/blob/master/Lib/xml/etree/ElementTree.py#L1630\" rel=\"nofollow noreferrer\">shadowing of types being done with C accelerators</a>. The C code isn&#39;t calling into expat so yes this solution is broken."
                        },
                        {
                            "owner": {
                                "account_id": 18337,
                                "reputation": 11585,
                                "user_id": 41948,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "est"
                            },
                            "reply_to_user": {
                                "account_id": 2683891,
                                "reputation": 6766,
                                "user_id": 2318649,
                                "user_type": "registered",
                                "display_name": "DisappointedByUnaccountableMod"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1553084652,
                            "post_id": 48344935,
                            "comment_id": 97252700,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/48344935#comment97252700_48344935",
                            "body": "@barny it&#39;s still possible, <code>ElementTree.fromstring(s, parser=None)</code> I am trying to pass parser to it."
                        },
                        {
                            "owner": {
                                "account_id": 14715937,
                                "reputation": 141,
                                "user_id": 10627905,
                                "user_type": "registered",
                                "display_name": "dkoder"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1639479831,
                            "post_id": 48344935,
                            "comment_id": 124353586,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/48344935#comment124353586_48344935",
                            "body": "This worked for me. I was struggling to ignore the namespaces and did&#39;t want to use lxml. Tried many options finally this made my day. Thank you @ericspod"
                        }
                    ],
                    "owner": {
                        "account_id": 3316143,
                        "reputation": 113,
                        "user_id": 2788477,
                        "user_type": "registered",
                        "display_name": "ericspod"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1516377407,
                    "creation_date": 1516377407,
                    "answer_id": 48344935,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/48344935#48344935",
                    "body": "<p>If you're using <code>ElementTree</code> and not <code>cElementTree</code> you can force Expat to ignore namespace processing by replacing <code>ParserCreate()</code>:</p>\n\n<pre><code>from xml.parsers import expat\noldcreate = expat.ParserCreate\nexpat.ParserCreate = lambda encoding, sep: oldcreate(encoding, None)\n</code></pre>\n\n<p><code>ElementTree</code> tries to use Expat by calling <code>ParserCreate()</code> but provides no option to not provide a namespace separator string, the above code will cause it to be ignore but be warned this could break other things.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 30334,
                                "reputation": 9635,
                                "user_id": 82673,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "AndreasT"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1545784940,
                            "post_id": 53738357,
                            "comment_id": 94694590,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/53738357#comment94694590_53738357",
                            "body": "This is sweet AND healthy! Saved my day! +1"
                        },
                        {
                            "owner": {
                                "account_id": 121000,
                                "reputation": 13703,
                                "user_id": 313768,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Reinderien"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1590113833,
                            "post_id": 53738357,
                            "comment_id": 109564178,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/53738357#comment109564178_53738357",
                            "body": "In Python 3.8 (have not tested with other versions) this does not appear to work for me. Looking at the source it <i>should</i> work, but it seems the source code for <code>xml.etree.ElementTree.XMLParser</code> is somehow optimized and monkey-patching <code>expat</code> has absolutely no effect."
                        },
                        {
                            "owner": {
                                "account_id": 121000,
                                "reputation": 13703,
                                "user_id": 313768,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Reinderien"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1590114344,
                            "post_id": 53738357,
                            "comment_id": 109564284,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/53738357#comment109564284_53738357",
                            "body": "Ah, yeah. See @barny&#39;s comment: <a href=\"https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma#comment96135721_48344935\" title=\"python elementtree module how to ignore the namespace of xml files to locate ma%23comment96135721_48344935\">stackoverflow.com/questions/13412496/&hellip;</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 1836324,
                        "reputation": 660,
                        "user_id": 1666637,
                        "user_type": "registered",
                        "display_name": "lijat"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 14,
                    "last_activity_date": 1666012513,
                    "last_edit_date": 1666012513,
                    "creation_date": 1544601141,
                    "answer_id": 53738357,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/53738357#53738357",
                    "body": "<p>Improving on the <a href=\"https://stackoverflow.com/a/48344935/4298200\">answer by ericspod</a>:</p>\n<p>Instead of changing the parse mode globally we can wrap this in an object supporting the with construct.</p>\n<pre><code>from xml.parsers import expat\n\nclass DisableXmlNamespaces:\n    def __enter__(self):\n        self.old_parser_create = expat.ParserCreate\n        expat.ParserCreate = lambda encoding, sep: self.old_parser_create(encoding, None)\n\n    def __exit__(self, type, value, traceback):\n        expat.ParserCreate = self.oldcreate\n</code></pre>\n<p>This can then be used as follows</p>\n<pre><code>import xml.etree.ElementTree as ET\nwith DisableXmlNamespaces():\n     tree = ET.parse(&quot;test.xml&quot;)\n</code></pre>\n<p>The beauty of this way is that it does not change any behaviour for unrelated code outside the with block. I ended up creating this after getting errors in unrelated libraries after using the version by ericspod which also happened to use expat.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2864491,
                                "reputation": 506,
                                "user_id": 2459069,
                                "user_type": "registered",
                                "display_name": "Dorian"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1692285822,
                            "post_id": 55261552,
                            "comment_id": 135605426,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/55261552#comment135605426_55261552",
                            "body": "Seems to work on python 3.8 also."
                        }
                    ],
                    "owner": {
                        "account_id": 18337,
                        "reputation": 11585,
                        "user_id": 41948,
                        "user_type": "registered",
                        "accept_rate": 85,
                        "display_name": "est"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1553087983,
                    "last_edit_date": 1553087983,
                    "creation_date": 1553087491,
                    "answer_id": 55261552,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/55261552#55261552",
                    "body": "<p>I might be late for this but I dont think <code>re.sub</code> is a good solution.</p>\n\n<p>However the rewrite <code>xml.parsers.expat</code> does not work for Python 3.x versions,</p>\n\n<p>The main culprit is the <code>xml/etree/ElementTree.py</code> see bottom of the source code</p>\n\n<pre><code># Import the C accelerators\ntry:\n    # Element is going to be shadowed by the C implementation. We need to keep\n    # the Python version of it accessible for some \"creative\" by external code\n    # (see tests)\n    _Element_Py = Element\n\n    # Element, SubElement, ParseError, TreeBuilder, XMLParser\n    from _elementtree import *\nexcept ImportError:\n    pass\n</code></pre>\n\n<p>Which is kinda sad.</p>\n\n<p>The solution is to get rid of it first.</p>\n\n<pre><code>import _elementtree\ntry:\n    del _elementtree.XMLParser\nexcept AttributeError:\n    # in case deleted twice\n    pass\nelse:\n    from xml.parsers import expat  # NOQA: F811\n    oldcreate = expat.ParserCreate\n    expat.ParserCreate = lambda encoding, sep: oldcreate(encoding, None)\n</code></pre>\n\n<p>Tested on Python 3.6.</p>\n\n<p>Try <code>try</code> statement is useful in case somewhere in your code you reload or import a module twice you get some strange errors like </p>\n\n<ul>\n<li>maximum recursion depth exceeded</li>\n<li>AttributeError: XMLParser</li>\n</ul>\n\n<p>btw damn the etree source code looks really messy.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 981047,
                                "reputation": 448,
                                "user_id": 1000756,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "taiko"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1581706004,
                            "post_id": 57474364,
                            "comment_id": 106538944,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/57474364#comment106538944_57474364",
                            "body": "found out how to use it, but it doesn&#39;t work for me, I still see the namespaces in the output"
                        },
                        {
                            "owner": {
                                "account_id": 3368581,
                                "reputation": 3476,
                                "user_id": 4465708,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "z33k"
                            },
                            "reply_to_user": {
                                "account_id": 981047,
                                "reputation": 448,
                                "user_id": 1000756,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "taiko"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1581929619,
                            "post_id": 57474364,
                            "comment_id": 106587350,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/57474364#comment106587350_57474364",
                            "body": "Look at <a href=\"https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/57474364?noredirect=1#comment18328039_13412496\">iMom0&#39;s comment to OP&#39;s question</a>. Using this function you get both the parsed object and the means to query it with <code>find()</code> and <code>findall()</code>. You just feed those methods with the namespaces&#39;s dict from <code>parse_xml()</code> and use <b>namespace&#39;s prefix</b> in your queries. Eg: <code>et_element.findall(&quot;.&#47;&#47;some_ns_prefix:some_xml_tag&quot;, namespaces=xml_namespaces)</code>"
                        },
                        {
                            "owner": {
                                "account_id": 2683891,
                                "reputation": 6766,
                                "user_id": 2318649,
                                "user_type": "registered",
                                "display_name": "DisappointedByUnaccountableMod"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1620838924,
                            "post_id": 57474364,
                            "comment_id": 119322052,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/57474364#comment119322052_57474364",
                            "body": "Does this really answer the OP &quot;it&#39;s very inconvenient to add a namespace in front of each tag&quot;?"
                        }
                    ],
                    "owner": {
                        "account_id": 3368581,
                        "reputation": 3476,
                        "user_id": 4465708,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "z33k"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1637695879,
                    "last_edit_date": 1637695879,
                    "creation_date": 1565686810,
                    "answer_id": 57474364,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/57474364#57474364",
                    "body": "<p>Let's combine <a href=\"https://stackoverflow.com/a/25920989/4465708\">nonagon's answer</a> with <a href=\"https://stackoverflow.com/a/42372404/4465708\">mzjn's answer to a related question</a>:</p>\n<pre><code>def parse_xml(xml_path: Path) -&gt; Tuple[ET.Element, Dict[str, str]]:\n    xml_iter = ET.iterparse(xml_path, events=[&quot;start-ns&quot;])\n    xml_namespaces = dict(prefix_namespace_pair for _, prefix_namespace_pair in xml_iter)\n    return xml_iter.root, xml_namespaces\n</code></pre>\n<p>Using this function we:</p>\n<ol>\n<li><p>Create an iterator to get <strong>both namespaces and a parsed tree object</strong>.</p>\n</li>\n<li><p>Iterate over the created iterator to get the namespaces dict that we can\nlater pass in each <code>find()</code> or <code>findall()</code> call <a href=\"https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma#comment18328039_13412496\">as sugested by\niMom0</a>.</p>\n</li>\n<li><p>Return the parsed tree's root element object and namespaces.</p>\n</li>\n</ol>\n<p>I think this is the best approach all around as there's no manipulation either of a source XML or resulting parsed <code>xml.etree.ElementTree</code> output whatsoever involved.</p>\n<p>I'd like also to credit <a href=\"https://stackoverflow.com/a/33997423/4465708\">balmy's answer</a> with providing an essential piece of this puzzle (that you can get the parsed root from the iterator). Until that I actually traversed XML tree twice in my application (once to get namespaces, second for a root).</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1715953,
                                "reputation": 957,
                                "user_id": 5374919,
                                "user_type": "registered",
                                "display_name": "Josh Hansen"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1602656026,
                            "post_id": 63745271,
                            "comment_id": 113785795,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/63745271#comment113785795_63745271",
                            "body": "This seems to be supported in 3.4 as well: <a href=\"https://docs.python.org/3.4/library/xml.etree.elementtree.html#parsing-xml-with-namespaces\" rel=\"nofollow noreferrer\">docs.python.org/3.4/library/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 1715953,
                                "reputation": 957,
                                "user_id": 5374919,
                                "user_type": "registered",
                                "display_name": "Josh Hansen"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1602656400,
                            "post_id": 63745271,
                            "comment_id": 113785917,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/63745271#comment113785917_63745271",
                            "body": "For anybody using a sufficiently high Python version, this is now the right answer."
                        },
                        {
                            "owner": {
                                "account_id": 2683891,
                                "reputation": 6766,
                                "user_id": 2318649,
                                "user_type": "registered",
                                "display_name": "DisappointedByUnaccountableMod"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1620838912,
                            "post_id": 63745271,
                            "comment_id": 119322045,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/63745271#comment119322045_63745271",
                            "body": "Does this really answer the OP &quot;it&#39;s very inconvenient to add a namespace in front of each tag&quot;?"
                        },
                        {
                            "owner": {
                                "account_id": 2294965,
                                "reputation": 431,
                                "user_id": 2016632,
                                "user_type": "registered",
                                "accept_rate": 0,
                                "display_name": "Tunneller"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1667786578,
                            "post_id": 63745271,
                            "comment_id": 131243144,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/63745271#comment131243144_63745271",
                            "body": "I&#39;m looking at &quot;{<a href=\"http://www.w3.org/2005/Atom\" rel=\"nofollow noreferrer\">w3.org/2005/Atom</a>}&quot; getting prepended to every string. I can look for the first &quot;}&quot; and go after that. But seems like there should be a better solution"
                        }
                    ],
                    "owner": {
                        "account_id": 9296312,
                        "reputation": 376,
                        "user_id": 6903108,
                        "user_type": "registered",
                        "display_name": "karthik prasanna"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1599238759,
                    "creation_date": 1599238759,
                    "answer_id": 63745271,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/63745271#63745271",
                    "body": "<p>In python 3.5 , you can pass the namespace as an argument in <code>find()</code>.\nFor example ,</p>\n<pre><code>ns= {'xml_test':'http://www.test.com'}\ntree = ET.parse(r&quot;test.xml&quot;)\nel1 = tree.findall(&quot;xml_test:DEAL_LEVEL/xml_test:PAID_OFF&quot;,ns)\n</code></pre>\n<p>Documentation link :- <a href=\"https://docs.python.org/3.5/library/xml.etree.elementtree.html#parsing-xml-with-namespaces\" rel=\"noreferrer\">https://docs.python.org/3.5/library/xml.etree.elementtree.html#parsing-xml-with-namespaces</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 176760,
                                "reputation": 50082,
                                "user_id": 407651,
                                "user_type": "registered",
                                "display_name": "mzjn"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1612797295,
                            "post_id": 64359512,
                            "comment_id": 116871795,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/64359512#comment116871795_64359512",
                            "body": "This does not solve the problem. It looks like an answer to a different question."
                        },
                        {
                            "owner": {
                                "account_id": 4788690,
                                "reputation": 949,
                                "user_id": 3868454,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Nick Legend"
                            },
                            "reply_to_user": {
                                "account_id": 176760,
                                "reputation": 50082,
                                "user_id": 407651,
                                "user_type": "registered",
                                "display_name": "mzjn"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1613146960,
                            "post_id": 64359512,
                            "comment_id": 116994773,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/64359512#comment116994773_64359512",
                            "body": "@mzjn Double checked. Please tell if it&#39;s not what you would expect."
                        },
                        {
                            "owner": {
                                "account_id": 176760,
                                "reputation": 50082,
                                "user_id": 407651,
                                "user_type": "registered",
                                "display_name": "mzjn"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1613147897,
                            "post_id": 64359512,
                            "comment_id": 116995227,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/64359512#comment116995227_64359512",
                            "body": "What does your XML or code have to do with the question? The elements in your XML are not bound to any namespace. The XML in the question has no <code>firstname</code> or <code>lastname</code> elements."
                        },
                        {
                            "owner": {
                                "account_id": 4788690,
                                "reputation": 949,
                                "user_id": 3868454,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Nick Legend"
                            },
                            "reply_to_user": {
                                "account_id": 176760,
                                "reputation": 50082,
                                "user_id": 407651,
                                "user_type": "registered",
                                "display_name": "mzjn"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1613148785,
                            "post_id": 64359512,
                            "comment_id": 116995629,
                            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/64359512#comment116995629_64359512",
                            "body": "Agree, thanks for the clarification :) Anyway think the answer is useful for those (including me) who don&#39;t mind unbinding the namespace in order to resolve the issue."
                        }
                    ],
                    "owner": {
                        "account_id": 4788690,
                        "reputation": 949,
                        "user_id": 3868454,
                        "user_type": "registered",
                        "accept_rate": 60,
                        "display_name": "Nick Legend"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": -2,
                    "last_activity_date": 1613148541,
                    "last_edit_date": 1613148541,
                    "creation_date": 1602700475,
                    "answer_id": 64359512,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/64359512#64359512",
                    "body": "<p>Just by chance dropped into the answer here: <a href=\"https://stackoverflow.com/q/47866026\">XSD conditional type assignment default type confusion?</a>. This is not the exact answer for the topic question but may be applicable if the namespace is not critical.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persons xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:noNamespaceSchemaLocation=&quot;test.xsd&quot;&gt;\n    &lt;person version=&quot;1&quot;&gt;\n        &lt;firstname&gt;toto&lt;/firstname&gt;\n        &lt;lastname&gt;tutu&lt;/lastname&gt;\n    &lt;/person&gt;\n&lt;/persons&gt;\n</code></pre>\n<p>Also see: <a href=\"https://www.w3.org/TR/xmlschema-1/#xsi_schemaLocation\" rel=\"nofollow noreferrer\">https://www.w3.org/TR/xmlschema-1/#xsi_schemaLocation</a></p>\n<p>Works for me. I call an XML validation procedure in my application. But also I want to quickly see the validation highliting and autocompletion in PyCharm when editing the XML. This <code>noNamespaceSchemaLocation</code> attribute does what I need.</p>\n<p><strong>RECHECKED</strong></p>\n<pre><code>from xml.etree import ElementTree as ET\ntree = ET.parse(&quot;test.xml&quot;)\nel1 = tree.findall(&quot;person/firstname&quot;)\nprint(el1[0].text)\nel2 = tree.find(&quot;person/lastname&quot;)\nprint(el2.text)\n</code></pre>\n<p>Returnrs</p>\n<pre><code>&gt;python test.py\ntoto\ntutu\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 13795134,
                        "reputation": 3020,
                        "user_id": 10440128,
                        "user_type": "registered",
                        "display_name": "milahu"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1688367994,
                    "last_edit_date": 1688367994,
                    "creation_date": 1688340696,
                    "answer_id": 76601149,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/76601149#76601149",
                    "body": "<p>to ignore the default namespace in the root node, feed a patched root-node-start to the parser, and then continue parsing the original XML stream.</p>\n<p>for example, instead of <code>&lt;XML_HEADER xmlns=&quot;http://www.test.com&quot;&gt;</code>, feed <code>&lt;XML_HEADER&gt;</code> to the parser.</p>\n<p>limitation: only the default namespace can be ignored. when the document contains namespace-prefixed nodes like <code>&lt;some-ns:some-name&gt;</code>, then lxml will throw <code>lxml.etree.XMLSyntaxError: Namespace prefix some-ns on some-name is not defined</code>.</p>\n<p>limitation: currently, this ignores the original encoding from <code>&lt;?xml encoding=&quot;...&quot;?&gt;</code>.</p>\n<pre class=\"lang-py prettyprint-override\"><code>#! /usr/bin/env python3\n\nimport lxml.etree\nimport io\n\n\n\ndef parse_xml_stream(xml_stream, ignore_default_ns=True):\n    &quot;&quot;&quot;\n    ignore_default_ns:\n    ignore the default namespace of the root node.\n\n    by default, lxml.etree.iterparse\n    returns the namespace in every element.tag.\n\n    with ignore_default_ns=True,\n    element.tag returns only the element's localname,\n    without the namespace.\n\n    example:\n    xml_string:\n        &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;\n            &lt;div&gt;hello&lt;/div&gt;\n        &lt;/html&gt;\n    with ignore_default_ns=False:\n        element.tag = &quot;{http://www.w3.org/1999/xhtml}div&quot;\n    with ignore_default_ns=True:\n        element.tag = &quot;div&quot;\n\n    see also:\n    Python ElementTree module: How to ignore the namespace of XML files\n    https://stackoverflow.com/a/76601149/10440128\n    &quot;&quot;&quot;\n\n    # save the original read method\n    xml_stream_read = xml_stream.read\n\n    if ignore_default_ns:\n        def xml_stream_read_track(_size):\n            # ignore size, always return 1 byte\n            # so we can track node positions\n            return xml_stream_read(1)\n        xml_stream.read = xml_stream_read_track\n\n    def get_parser(stream):\n        return lxml.etree.iterparse(\n            stream,\n            events=('start', 'end'),\n            remove_blank_text=True,\n            huge_tree=True,\n        )\n\n    if ignore_default_ns:\n        # parser 1\n        parser = get_parser(xml_stream)\n\n        # parse start of root node\n        event, element = next(parser)\n        #print(xml_stream.tell(), event, element)\n        # get name of root node\n        root_name = element.tag.split(&quot;}&quot;)[-1]\n        #print(&quot;root name&quot;, root_name)\n        #print(&quot;root pos&quot;, xml_stream.tell()) # end of start-tag\n        # attributes with namespaces\n        #print(&quot;root attrib&quot;, element.attrib)\n\n        # patched document header without namespaces\n        xml_stream_nons = io.BytesIO(b&quot;\\n&quot;.join([\n            #b&quot;&quot;&quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&quot;&quot;&quot;,\n            b&quot;&lt;&quot; + root_name.encode(&quot;utf8&quot;) + b&quot;&gt;&lt;dummy/&gt;&quot;,\n        ]))\n        xml_stream.read = xml_stream_nons.read\n\n    # parser 2\n    parser = get_parser(xml_stream)\n\n    # parse start of root node\n    # note: if you only need &quot;end&quot; events,\n    # then wait for end of dummy node\n    event, element = next(parser)\n    print(event, element.tag)\n    assert event == &quot;start&quot;\n\n    if ignore_default_ns:\n        assert element.tag == root_name\n\n        # parse start of dummy node\n        event, element = next(parser)\n        #print(event, element.tag)\n        assert event == &quot;start&quot;\n        assert element.tag == &quot;dummy&quot;\n\n        # parse end of dummy node\n        event, element = next(parser)\n        #print(event, element.tag)\n        assert event == &quot;end&quot;\n        assert element.tag == &quot;dummy&quot;\n\n        # restore the original read method\n        xml_stream.read = xml_stream_read\n\n        # now all elements come without namespace\n        # so element.tag is the element's localname\n        #print(&quot;---&quot;)\n\n    # TODO handle events\n\n    #for i in range(5):\n    #    event, element = next(parser)\n    #    print(event, element)\n\n    for event, element in parser:\n        print(event, element.tag)\n\n\n\n# xml with namespace in root node\nxml_bytes = b&quot;&quot;&quot;\\\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;doc version=&quot;1&quot; xmlns=&quot;http://www.test.com&quot;&gt;\n    &lt;node/&gt;\n    &lt;!--\n        limitation: this breaks the parser.\n        lxml.etree.XMLSyntaxError:\n        Namespace prefix some-ns on some-name is not defined\n        &lt;some-ns:some-name/&gt;\n    --&gt;\n&lt;/doc&gt;\n&quot;&quot;&quot;\n\nprint(&quot;# keep default namespace&quot;)\nparse_xml_stream(io.BytesIO(xml_bytes), False)\n\nprint()\n\nprint(&quot;# ignore default namespace&quot;)\nparse_xml_stream(io.BytesIO(xml_bytes))\n</code></pre>\n<p>outputs of <code>print(event, element.tag)</code>:</p>\n<pre><code># keep default namespace\nstart {http://www.test.com}doc\nstart {http://www.test.com}node\nend {http://www.test.com}node\nend {http://www.test.com}doc\n\n# ignore default namespace\nstart doc\nstart node\nend node\nend doc\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 7529418,
                        "reputation": 393,
                        "user_id": 6725709,
                        "user_type": "registered",
                        "accept_rate": 83,
                        "display_name": "Jeffrey C"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1689306743,
                    "creation_date": 1689306743,
                    "answer_id": 76684618,
                    "question_id": 13412496,
                    "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma/76684618#76684618",
                    "body": "<p>Since <a href=\"https://docs.python.org/3/library/xml.etree.elementtree.html#supported-xpath-syntax\" rel=\"nofollow noreferrer\">xml.etree.ElementTree 3.8</a> version, you can query node with wildcard namespace.</p>\n<blockquote>\n<p>{namespace}* selects all tags in the given namespace, {<em>}spam selects\ntags named spam in any (or no) namespace, and {}</em> only selects tags\nthat are not in a namespace.</p>\n</blockquote>\n<p>So it would be:</p>\n<pre><code>tree.findall('.//{*} DEAL_LEVEL')\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 2049597,
                "reputation": 1873,
                "user_id": 1828869,
                "user_type": "registered",
                "accept_rate": 25,
                "display_name": "KevinLeng"
            },
            "comment_count": 4,
            "is_answered": true,
            "answer_count": 13,
            "score": 181,
            "last_activity_date": 1689306743,
            "creation_date": 1353052397,
            "last_edit_date": 1683056598,
            "question_id": 13412496,
            "link": "https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma",
            "title": "Python ElementTree module: How to ignore the namespace of XML files to locate matching element when using the method &quot;find&quot;, &quot;findall&quot;",
            "body": "<p>I want to use the method of <code>findall</code> to locate some elements of the source xml file in the <code>ElementTree</code> module.</p>\n<p>However, the source xml file (test.xml) has namespaces. I truncate part of xml file as sample:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;\n&lt;XML_HEADER xmlns=&quot;http://www.test.com&quot;&gt;\n    &lt;TYPE&gt;Updates&lt;/TYPE&gt;\n    &lt;DATE&gt;9/26/2012 10:30:34 AM&lt;/DATE&gt;\n    &lt;COPYRIGHT_NOTICE&gt;All Rights Reserved.&lt;/COPYRIGHT_NOTICE&gt;\n    &lt;LICENSE&gt;newlicense.htm&lt;/LICENSE&gt;\n    &lt;DEAL_LEVEL&gt;\n        &lt;PAID_OFF&gt;N&lt;/PAID_OFF&gt;\n        &lt;/DEAL_LEVEL&gt;\n&lt;/XML_HEADER&gt;\n</code></pre>\n<p>The sample python code is below:</p>\n<pre><code>from xml.etree import ElementTree as ET\ntree = ET.parse(r&quot;test.xml&quot;)\nel1 = tree.findall(&quot;DEAL_LEVEL/PAID_OFF&quot;) # Return None\nel2 = tree.findall(&quot;{http://www.test.com}DEAL_LEVEL/{http://www.test.com}PAID_OFF&quot;) # Return &lt;Element '{http://www.test.com}DEAL_LEVEL/PAID_OFF' at 0xb78b90&gt;\n</code></pre>\n<p>Though using <code>&quot;{http://www.test.com}&quot;</code> works, it's very inconvenient to add a namespace in front of each tag.</p>\n<p>How can I ignore the namespace when using functions like <code>find</code>, <code>findall</code>, ...?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 9786
}