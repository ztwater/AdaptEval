{
    "items": [
        {
            "tags": [
                "python",
                "yaml",
                "pyyaml"
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 19061,
                                "reputation": 187329,
                                "user_id": 44330,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "Jason S"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1507926326,
                            "post_id": 8641732,
                            "comment_id": 80421943,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/8641732#comment80421943_8641732",
                            "body": "any way to do this so that it does not affect the global yaml state but it does affect one individual call to <code>dump()</code>?"
                        },
                        {
                            "owner": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "reply_to_user": {
                                "account_id": 19061,
                                "reputation": 187329,
                                "user_id": 44330,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "Jason S"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1507959422,
                            "post_id": 8641732,
                            "comment_id": 80428885,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/8641732#comment80428885_8641732",
                            "body": "@JasonS: it is a good separate question. You could try passing you own Dumper class to <code>yaml.dump</code> with overriden represent_scalar, represent_dict methods."
                        },
                        {
                            "owner": {
                                "account_id": 2511513,
                                "reputation": 1536,
                                "user_id": 2541040,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "retorquere"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1557419404,
                            "post_id": 8641732,
                            "comment_id": 98767710,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/8641732#comment98767710_8641732",
                            "body": "For some reason this doesn&#39;t work in this instance: <a href=\"https://gist.github.com/retorquere/c43b5394c5e45b4c5b54b46479725e3c\" rel=\"nofollow noreferrer\">gist.github.com/retorquere/c43b5394c5e45b4c5b54b46479725e3c</a> . Any ideas?"
                        },
                        {
                            "owner": {
                                "account_id": 2612173,
                                "reputation": 330,
                                "user_id": 2262092,
                                "user_type": "registered",
                                "display_name": "cbautista"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1576781760,
                            "post_id": 8641732,
                            "comment_id": 105018253,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/8641732#comment105018253_8641732",
                            "body": "This is a great answer and it works for me so thanks! ... but I would like to add that this works with <code>yaml.dump()</code> but doesn&#39;t work with <code>yaml.safe_dump()</code>. Unless if there&#39;s a way to get this to work with <code>yaml.safe_dump()</code> that I missed."
                        },
                        {
                            "owner": {
                                "account_id": 13861505,
                                "reputation": 150,
                                "user_id": 10007048,
                                "user_type": "registered",
                                "display_name": "jwatson0"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1630002452,
                            "post_id": 8641732,
                            "comment_id": 121843636,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/8641732#comment121843636_8641732",
                            "body": "To use with safe_dump(): <code>yaml.representer.SafeRepresenter.add_representer(OrderedDict&zwnj;&#8203;, ordered_dict_presenter)</code>"
                        },
                        {
                            "owner": {
                                "account_id": 12902766,
                                "reputation": 173,
                                "user_id": 9331018,
                                "user_type": "registered",
                                "display_name": "M Virts"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1665523486,
                            "post_id": 8641732,
                            "comment_id": 130719991,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/8641732#comment130719991_8641732",
                            "body": "PyYAML will silently fall back to quoted style if your string has whitespace before any newlines or contains tab characters. This makes sense because the YAML spec can&#39;t represent these situations in block literals. To get this working I had to use something like <code>re.sub(&quot;\\s+$&quot;,&quot;&quot;,my_string,flags=re.MULTILINE).replace(&quot;\\t&quot;,&zwnj;&#8203;&quot;    &quot;)</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 3021,
                        "reputation": 408304,
                        "user_id": 4279,
                        "user_type": "registered",
                        "accept_rate": 94,
                        "display_name": "jfs"
                    },
                    "comment_count": 6,
                    "is_accepted": true,
                    "score": 38,
                    "last_activity_date": 1496904205,
                    "last_edit_date": 1496904205,
                    "creation_date": 1324966603,
                    "answer_id": 8641732,
                    "question_id": 8640959,
                    "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/8641732#8641732",
                    "body": "<p>Based on <a href=\"https://stackoverflow.com/questions/6432605/any-yaml-libraries-in-python-that-support-dumping-of-long-strings-as-block-liter\">Any yaml libraries in Python that support dumping of long strings as block literals or folded blocks?</a></p>\n\n<pre><code>import yaml\nfrom collections import OrderedDict\n\nclass quoted(str):\n    pass\n\ndef quoted_presenter(dumper, data):\n    return dumper.represent_scalar('tag:yaml.org,2002:str', data, style='\"')\nyaml.add_representer(quoted, quoted_presenter)\n\nclass literal(str):\n    pass\n\ndef literal_presenter(dumper, data):\n    return dumper.represent_scalar('tag:yaml.org,2002:str', data, style='|')\nyaml.add_representer(literal, literal_presenter)\n\ndef ordered_dict_presenter(dumper, data):\n    return dumper.represent_dict(data.items())\nyaml.add_representer(OrderedDict, ordered_dict_presenter)\n\nd = OrderedDict(short=quoted(\"Hello\"), long=literal(\"Line1\\nLine2\\nLine3\\n\"))\n\nprint(yaml.dump(d))\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>short: \"Hello\"\nlong: |\n  Line1\n  Line2\n  Line3\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 135076,
                        "reputation": 786,
                        "user_id": 337649,
                        "user_type": "registered",
                        "display_name": "lbt"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 15,
                    "last_activity_date": 1363309675,
                    "creation_date": 1363309675,
                    "answer_id": 15423007,
                    "question_id": 8640959,
                    "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/15423007#15423007",
                    "body": "<p>I wanted any input with a <code>\\n</code> in it to be a block literal. Using the code in <code>yaml/representer.py</code> as a base I got:</p>\n\n<pre><code># -*- coding: utf-8 -*-\nimport yaml\n\ndef should_use_block(value):\n    for c in u\"\\u000a\\u000d\\u001c\\u001d\\u001e\\u0085\\u2028\\u2029\":\n        if c in value:\n            return True\n    return False\n\ndef my_represent_scalar(self, tag, value, style=None):\n    if style is None:\n        if should_use_block(value):\n             style='|'\n        else:\n            style = self.default_style\n\n    node = yaml.representer.ScalarNode(tag, value, style=style)\n    if self.alias_key is not None:\n        self.represented_objects[self.alias_key] = node\n    return node\n\n\na={'short': \"Hello\", 'multiline': \"\"\"Line1\nLine2\nLine3\n\"\"\", 'multiline-unicode': u\"\"\"L\u00eane1\nL\u00eane2\nL\u00eane3\n\"\"\"}\n\nprint(yaml.dump(a))\nprint(yaml.dump(a, allow_unicode=True))\nyaml.representer.BaseRepresenter.represent_scalar = my_represent_scalar\nprint(yaml.dump(a))\nprint(yaml.dump(a, allow_unicode=True))\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>{multiline: 'Line1\n\n    Line2\n\n    Line3\n\n    ', multiline-unicode: \"L\\xEAne1\\nL\\xEAne2\\nL\\xEAne3\\n\", short: Hello}\n\n{multiline: 'Line1\n\n    Line2\n\n    Line3\n\n    ', multiline-unicode: 'L\u00eane1\n\n    L\u00eane2\n\n    L\u00eane3\n\n    ', short: Hello}\n\nAfter override\n\nmultiline: |\n  Line1\n  Line2\n  Line3\nmultiline-unicode: \"L\\xEAne1\\nL\\xEAne2\\nL\\xEAne3\\n\"\nshort: Hello\n\nmultiline: |\n  Line1\n  Line2\n  Line3\nmultiline-unicode: |\n  L\u00eane1\n  L\u00eane2\n  L\u00eane3\nshort: Hello\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1448560174,
                            "post_id": 33300001,
                            "comment_id": 55648144,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/33300001#comment55648144_33300001",
                            "body": "nice approach that allows to avoid tagging input strings explicitly. You could use <code>is_multiline = lambda s: len(s.splitlines()) &gt; 1</code> that recognizes Unicode newlines automatically and it doesn&#39;t  return true for a single line."
                        },
                        {
                            "owner": {
                                "account_id": 2170745,
                                "reputation": 984,
                                "user_id": 1922816,
                                "user_type": "registered",
                                "display_name": "xenosoz"
                            },
                            "reply_to_user": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1448925747,
                            "post_id": 33300001,
                            "comment_id": 55775800,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/33300001#comment55775800_33300001",
                            "body": "@J.F.Sebastian It&#39;s nice to see that nice trick. Now the code looks much better. Many thanks!"
                        },
                        {
                            "owner": {
                                "account_id": 19061,
                                "reputation": 187329,
                                "user_id": 44330,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "Jason S"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1507927301,
                            "post_id": 33300001,
                            "comment_id": 80422317,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/33300001#comment80422317_33300001",
                            "body": "hmm, the <code>style=&#39;|&#39;</code> doesn&#39;t seem to affect pyyaml"
                        },
                        {
                            "owner": {
                                "account_id": 5225622,
                                "reputation": 1235,
                                "user_id": 5214931,
                                "user_type": "registered",
                                "accept_rate": 59,
                                "display_name": "oulenz"
                            },
                            "reply_to_user": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1516098399,
                            "post_id": 33300001,
                            "comment_id": 83541506,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/33300001#comment83541506_33300001",
                            "body": "@jfs Note that <code>splitlines</code> ignores final newline characters, so if you want single-line strings with a final newline to be processed with <code>|</code> style, you have to check for that separately. Or if <code>\\n</code> is the only type of linebreak in your dataset, simply use <code>len(data.split(&#39;\\n&#39;)) &gt; 1</code>"
                        },
                        {
                            "owner": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "reply_to_user": {
                                "account_id": 5225622,
                                "reputation": 1235,
                                "user_id": 5214931,
                                "user_type": "registered",
                                "accept_rate": 59,
                                "display_name": "oulenz"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1516099893,
                            "post_id": 33300001,
                            "comment_id": 83542494,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/33300001#comment83542494_33300001",
                            "body": "@oulenz: &quot;multiline&quot; means &quot;more than one&quot; string. <code>.split(&#39;\\n&#39;)</code> is wrong here. <code>&#39;\\n&#39;</code> is <i>one</i> line, not two."
                        },
                        {
                            "owner": {
                                "account_id": 5225622,
                                "reputation": 1235,
                                "user_id": 5214931,
                                "user_type": "registered",
                                "accept_rate": 59,
                                "display_name": "oulenz"
                            },
                            "reply_to_user": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1516100521,
                            "post_id": 33300001,
                            "comment_id": 83542857,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/33300001#comment83542857_33300001",
                            "body": "@jfs Yes but the pyyaml emitter will print <code>test\\n</code> on two lines surrounded by single quotes, so if the goal of this exercise is to use block style rather than quotes if a string contains newlines, then we have to handle this case as if it were multiline (whether that&#39;s technically correct or not)."
                        },
                        {
                            "owner": {
                                "account_id": 937526,
                                "reputation": 2463,
                                "user_id": 966179,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "Matthias Urlichs"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1565520215,
                            "post_id": 33300001,
                            "comment_id": 101373820,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/33300001#comment101373820_33300001",
                            "body": "Instead of <code>splitlines</code>, simply testing for <code>if &#39;\\n&#39; in data</code> is cheaper and does the same thing."
                        },
                        {
                            "owner": {
                                "account_id": 10036142,
                                "reputation": 297,
                                "user_id": 7420676,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "pyansharp"
                            },
                            "reply_to_user": {
                                "account_id": 937526,
                                "reputation": 2463,
                                "user_id": 966179,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "Matthias Urlichs"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1602096559,
                            "post_id": 33300001,
                            "comment_id": 113615540,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/33300001#comment113615540_33300001",
                            "body": "@MatthiasUrlichs what if <code>data</code> is  <code>Often, the sequence to represent a new line is `\\n`, but may include `\\r` as well\\0</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 2170745,
                        "reputation": 984,
                        "user_id": 1922816,
                        "user_type": "registered",
                        "display_name": "xenosoz"
                    },
                    "comment_count": 8,
                    "is_accepted": false,
                    "score": 79,
                    "last_activity_date": 1629531409,
                    "last_edit_date": 1629531409,
                    "creation_date": 1445595470,
                    "answer_id": 33300001,
                    "question_id": 8640959,
                    "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/33300001#33300001",
                    "body": "<p>Falling in love with <a href=\"/a/15423007/1922816\">@lbt's approach</a>, I got this code:</p>\n<pre><code>import yaml\n\ndef str_presenter(dumper, data):\n  if len(data.splitlines()) &gt; 1:  # check for multiline string\n    return dumper.represent_scalar('tag:yaml.org,2002:str', data, style='|')\n  return dumper.represent_scalar('tag:yaml.org,2002:str', data)\n\nyaml.add_representer(str, str_presenter)\n\n# to use with safe_dump:\nyaml.representer.SafeRepresenter.add_representer(str, str_presenter)\n</code></pre>\n<p>It makes every multiline string be a block literal.</p>\n<p>I was trying to avoid the monkey patching part.\nFull credit to @lbt and @J.F.Sebastian.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2890036,
                                "reputation": 1201,
                                "user_id": 2479038,
                                "user_type": "registered",
                                "display_name": "abstrus"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1683736288,
                            "post_id": 35406862,
                            "comment_id": 134413626,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/35406862#comment134413626_35406862",
                            "body": "&quot;provide the extra information&quot; this looks promising.  Do you have any clue about this? I can&#39;t find it in the documentation"
                        },
                        {
                            "owner": {
                                "account_id": 1373414,
                                "reputation": 73737,
                                "user_id": 1307905,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Anthon"
                            },
                            "reply_to_user": {
                                "account_id": 2890036,
                                "reputation": 1201,
                                "user_id": 2479038,
                                "user_type": "registered",
                                "display_name": "abstrus"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1683751066,
                            "post_id": 35406862,
                            "comment_id": 134416588,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/35406862#comment134416588_35406862",
                            "body": "You need to provide the positions in the string that the folds need to take place. There is no documentation for that, as there is no API for that, but you can simply do the same thing the constructor of the FoldedScalarString does."
                        },
                        {
                            "owner": {
                                "account_id": 5478346,
                                "reputation": 5872,
                                "user_id": 4355695,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Nikhil VJ"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1693276525,
                            "post_id": 35406862,
                            "comment_id": 135736100,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/35406862#comment135736100_35406862",
                            "body": "@Anthon how can we store the dump to a variable?"
                        },
                        {
                            "owner": {
                                "account_id": 5478346,
                                "reputation": 5872,
                                "user_id": 4355695,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Nikhil VJ"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1693276867,
                            "post_id": 35406862,
                            "comment_id": 135736124,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/35406862#comment135736124_35406862",
                            "body": "got a solution using StringIO: <code>output_stream = StringIO()</code>  <code>yaml.dump(data, output_stream)</code>  <code>yaml_output = output_stream.getvalue()</code>"
                        },
                        {
                            "owner": {
                                "account_id": 1373414,
                                "reputation": 73737,
                                "user_id": 1307905,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Anthon"
                            },
                            "reply_to_user": {
                                "account_id": 5478346,
                                "reputation": 5872,
                                "user_id": 4355695,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Nikhil VJ"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1693291295,
                            "post_id": 35406862,
                            "comment_id": 135737441,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/35406862#comment135737441_35406862",
                            "body": "@NikhilVJ You should look at the package <code>ruamel.yaml.string</code>  (or <code>ruamel.yaml.bytes</code>)"
                        }
                    ],
                    "owner": {
                        "account_id": 1373414,
                        "reputation": 73737,
                        "user_id": 1307905,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Anthon"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 9,
                    "last_activity_date": 1535010580,
                    "last_edit_date": 1535010580,
                    "creation_date": 1455531964,
                    "answer_id": 35406862,
                    "question_id": 8640959,
                    "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/35406862#35406862",
                    "body": "<p>You can use <a href=\"https://pypi.python.org/pypi/ruamel.yaml\" rel=\"noreferrer\"><code>ruamel.yaml</code></a> and its RoundTripLoader/Dumper (disclaimer: I am the author of that package) apart from doing what you want, it supports the YAML 1.2 specification (from 2009), and has several other improvements:</p>\n\n<pre><code>import sys\nfrom ruamel.yaml import YAML\n\nyaml_str = \"\"\"\\\nshort: \"Hello\"  # does keep the quotes, but need to tell the loader\nlong: |\n  Line1\n  Line2\n  Line3\nfolded: &gt;\n  some like\n  explicit folding\n  of scalars\n  for readability\n\"\"\"\n\nyaml = YAML()\nyaml.preserve_quotes = True\ndata = yaml.load(yaml_str)\nyaml.dump(data, sys.stdout)\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>short: \"Hello\"  # does keep the quotes, but need to tell the loader\nlong: |\n  Line1\n  Line2\n  Line3\nfolded: &gt;\n  some like\n  explicit folding\n  of scalars\n  for readability\n</code></pre>\n\n<p>(including the comment, starting in the same column as before)</p>\n\n<p>You can also create this output starting from scratch, but then you\ndo need to provide the extra information e.g. the explicit positions on where to fold.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 5684751,
                                "reputation": 393,
                                "user_id": 5065946,
                                "user_type": "registered",
                                "display_name": "powersource97"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1664336808,
                            "post_id": 72265455,
                            "comment_id": 130445731,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/72265455#comment130445731_72265455",
                            "body": "For some reason, some of my string values had &#39;\\n&#39; as string itself, so I had to check and split on &#39;\\\\n&#39; and then rstrip and join on &#39;\\n&#39;."
                        },
                        {
                            "owner": {
                                "account_id": 5681910,
                                "reputation": 343,
                                "user_id": 4492772,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Timothy Higinbottom"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1687295818,
                            "post_id": 72265455,
                            "comment_id": 134916119,
                            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/72265455#comment134916119_72265455",
                            "body": "This is the only solution here that worked for me, thanks!"
                        }
                    ],
                    "owner": {
                        "account_id": 15726910,
                        "reputation": 51,
                        "user_id": 11348282,
                        "user_type": "registered",
                        "display_name": "brian"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1652734127,
                    "last_edit_date": 1652734127,
                    "creation_date": 1652734108,
                    "answer_id": 72265455,
                    "question_id": 8640959,
                    "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/72265455#72265455",
                    "body": "<p>It's worth noting that pyyaml <a href=\"https://github.com/yaml/pyyaml/issues/121\" rel=\"noreferrer\">disallows trailing spaces in block scalars</a> and will force content into double-quoted format. It seems a lot of folk have run into this issue. If you don't care about being able to round-trip the data, this will strip out those trailing spaces:</p>\n<pre><code>def str_presenter(dumper, data):\n    if len(data.splitlines()) &gt; 1 or '\\n' in data:  \n        text_list = [line.rstrip() for line in data.splitlines()]\n        fixed_data = &quot;\\n&quot;.join(text_list)\n        return dumper.represent_scalar('tag:yaml.org,2002:str', fixed_data, style='|')\n    return dumper.represent_scalar('tag:yaml.org,2002:str', data)\n\nyaml.add_representer(str, str_presenter)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 5478346,
                        "reputation": 5872,
                        "user_id": 4355695,
                        "user_type": "registered",
                        "accept_rate": 50,
                        "display_name": "Nikhil VJ"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1693285138,
                    "creation_date": 1693285138,
                    "answer_id": 76997414,
                    "question_id": 8640959,
                    "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/76997414#76997414",
                    "body": "<p>Using <code>ruamel.yaml</code> <a href=\"https://stackoverflow.com/a/35406862/4355695\">posted by Anthon here</a>, here are simple functions to convert yaml text to dict and vice versa that you can conveniently keep in your utility funcs:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from ruamel.yaml import YAML\nfrom io import StringIO\n\ndef yaml2dict(y):\n    return YAML().load(y)\n\ndef dict2yaml(d):\n    output_stream = StringIO()\n    YAML().dump(d, output_stream)\n    return output_stream.getvalue()\n</code></pre>\n<p>Sample multi-line yaml to dict:</p>\n<pre class=\"lang-py prettyprint-override\"><code>y = &quot;&quot;&quot;\ntitle: organelles absent in animal cells and present in a plant cell\nquestion: |\n  Observe the following table and identify if the cell is of a plant or an animal\n  | Organelle | Present/Absent | \n  |---------- | -------------- | \n  | Nucleus | Present |\n  | Vacuole | Present |\n  | Cellwall | Absent |\n  | Cell membrane | Present |\n  | Mitochondria | Present |\n  | Chlorophyll | Absent |\nanswer_type: MCQ_single\nchoices:\n- Plant\n- Animal\npoints: 1\n&quot;&quot;&quot;\nd = yaml2dict(y)\nd\n</code></pre>\n<p>output:</p>\n<pre class=\"lang-py prettyprint-override\"><code>{'title': 'organelles absent in animal cells and present in a plant cell', 'question': 'Observe the following table and identify if the cell is of a plant or an animal\\n| Organelle | Present/Absent | \\n|---------- | -------------- | \\n| Nucleus | Present |\\n| Vacuole | Present |\\n| Cellwall | Absent |\\n| Cell membrane | Present |\\n| Mitochondria | Present |\\n| Chlorophyll | Absent |\\n', 'answer_type': 'MCQ_single', 'choices': ['Plant', 'Animal'], 'points': 1}\n</code></pre>\n<p>Converting it back to yaml:</p>\n<pre class=\"lang-py prettyprint-override\"><code>y2 = dict2yaml(d)\nprint(y2)\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>title: organelles absent in animal cells and present in a plant cell\nquestion: |\n  Observe the following table and identify if the cell is of a plant or an animal\n  | Organelle | Present/Absent | \n  |---------- | -------------- | \n  | Nucleus | Present |\n  | Vacuole | Present |\n  | Cellwall | Absent |\n  | Cell membrane | Present |\n  | Mitochondria | Present |\n  | Chlorophyll | Absent |\nanswer_type: MCQ_single\nchoices:\n- Plant\n- Animal\npoints: 1\n</code></pre>\n<p>For completeness, install <code>ruamel.yaml</code> by:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>pip install ruamel.yaml\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2447877,
                        "reputation": 1842,
                        "user_id": 2134775,
                        "user_type": "registered",
                        "display_name": "Vincent Wen"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1703745710,
                    "last_edit_date": 1703745710,
                    "creation_date": 1703661131,
                    "answer_id": 77720525,
                    "question_id": 8640959,
                    "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/77720525#77720525",
                    "body": "<p>This <a href=\"https://stackoverflow.com/a/33300001/2134775\">answer</a> is almost close, but if your data contains</p>\n<ol>\n<li>trailing space at the end of a line</li>\n<li>tab (\\t) character</li>\n</ol>\n<p>You'll see it's failed to be a block literal string in the dump result. So let's add fixes based on that:</p>\n<pre><code>def yaml_multiline_string_presenter(dumper, data):\n    if len(data.splitlines()) &gt; 1:\n        # Pyyaml does not allow trailing space at the end of line for block string\n        data = '\\n'.join([line.rstrip() for line in data.strip().splitlines()])\n        # Pyyaml does not allow tab in a block string\n        data = data.replace('\\t', '    ')\n        return dumper.represent_scalar('tag:yaml.org,2002:str', data, style='|')\n        \n    return dumper.represent_scalar('tag:yaml.org,2002:str', data)\n\nyaml.add_representer(str, yaml_multiline_string_presenter)\nyaml.representer.SafeRepresenter.add_representer(str, yaml_multiline_string_presenter)\n</code></pre>\n<p>Consider putting your strategy into it like replacing tab with 2 spaces.</p>\n<p>Why Pyyaml can't handle these special strings:</p>\n<ol>\n<li><a href=\"https://pyyaml.org/wiki/PyYAMLDocumentation#deviations-from-the-specification\" rel=\"nofollow noreferrer\">https://pyyaml.org/wiki/PyYAMLDocumentation#deviations-from-the-specification</a></li>\n<li>See how it calculates <code>allow_block</code> variable <a href=\"https://github.com/yaml/pyyaml/blob/48838a3c768e3d1bcab44197d800145cfd0719d6/lib/yaml/emitter.py#L784C21-L784C21\" rel=\"nofollow noreferrer\">https://github.com/yaml/pyyaml/blob/48838a3c768e3d1bcab44197d800145cfd0719d6/lib/yaml/emitter.py#L784C21-L784C21</a></li>\n</ol>\n"
                }
            ],
            "owner": {
                "account_id": 8083,
                "reputation": 370773,
                "user_id": 14343,
                "user_type": "registered",
                "accept_rate": 78,
                "display_name": "Ned Batchelder"
            },
            "comment_count": 0,
            "is_answered": true,
            "accepted_answer_id": 8641732,
            "answer_count": 7,
            "score": 64,
            "last_activity_date": 1703745710,
            "creation_date": 1324957760,
            "last_edit_date": 1455532017,
            "question_id": 8640959,
            "link": "https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data",
            "title": "How can I control what scalar form PyYAML uses for my data?",
            "body": "<p>I've got an object with a short string attribute, and a long multi-line string attribute.  I want to write the short string as a YAML quoted scalar, and the multi-line string as a literal scalar:</p>\n\n<pre><code>my_obj.short = \"Hello\"\nmy_obj.long = \"Line1\\nLine2\\nLine3\"\n</code></pre>\n\n<p>I'd like the YAML to look like this:</p>\n\n<pre><code>short: \"Hello\"\nlong: |\n  Line1\n  Line2\n  Line3\n</code></pre>\n\n<p>How can I instruct PyYAML to do this?  If I call <code>yaml.dump(my_obj)</code>, it produces a dict-like output:</p>\n\n<pre><code>{long: 'line1\n\n    line2\n\n    line3\n\n    ', short: Hello}\n</code></pre>\n\n<p>(Not sure why long is double-spaced like that...)</p>\n\n<p>Can I dictate to PyYAML how to treat my attributes?  I'd like to affect both the order and style.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 9496
}