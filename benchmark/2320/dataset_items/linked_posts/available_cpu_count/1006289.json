{
    "items": [
        {
            "tags": [
                "python",
                "system-information"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 1516034,
                        "reputation": 376,
                        "user_id": 1417016,
                        "user_type": "registered",
                        "display_name": "wpoely86"
                    },
                    "edited": false,
                    "score": 7,
                    "creation_date": 1380538757,
                    "post_id": 1006289,
                    "comment_id": 28225454,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python#comment28225454_1006289",
                    "body": "You should keep cpusets (in Linux) in mind. If you&#39;re in a cpuset, the solutions below will still give the number of real CPUs in the system, not the number available to your process. <code>&#47;proc&#47;&lt;PID&gt;&#47;status</code> has some lines that tell you the number of CPUs in the current cpuset: look for <code>Cpus_allowed_list</code>."
                },
                {
                    "owner": {
                        "account_id": 1589784,
                        "reputation": 6089,
                        "user_id": 1601580,
                        "user_type": "registered",
                        "accept_rate": 47,
                        "display_name": "Charlie Parker"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1613674998,
                    "post_id": 1006289,
                    "comment_id": 117155778,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python#comment117155778_1006289",
                    "body": "if you are using torch you can do <code>import torch.multiprocessing; mp.cpu_count()</code>"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 4374789,
                                "reputation": 2614,
                                "user_id": 3568095,
                                "user_type": "registered",
                                "display_name": "Mike O&#39;Connor"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1468991212,
                            "post_id": 1006301,
                            "comment_id": 64348551,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment64348551_1006301",
                            "body": "On a MacPro 1,0 running the latest Ubuntu, on an HP Laptop running a recent Debian, and on an old eMachine running an old Ubuntu, the cpus_allowed results of <code>&#47;proc&#47;self&#47;status</code> are respectively ff, f and f--- corresponding to 8, 4 and 4 by your (correct) math. However the actual numbers of CPUs are respectively 4, 2 and 1. I find that counting the number of occurrences of the word &quot;processor&quot; in <code>&#47;proc&#47;cpuinfo</code> may be the better way to go. (Or do I have the question wrong?)"
                        },
                        {
                            "owner": {
                                "account_id": 4374789,
                                "reputation": 2614,
                                "user_id": 3568095,
                                "user_type": "registered",
                                "display_name": "Mike O&#39;Connor"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1468997239,
                            "post_id": 1006301,
                            "comment_id": 64351148,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment64351148_1006301",
                            "body": "With some further research--- if that  can be said of &quot;Googling&quot;--- I find from the use of <code>&#47;proc&#47;cpuinfo</code> that if for any one of the listings for each &quot;processor&quot; you multiply the &quot;siblings&quot; by the &quot;cpu cores&quot; you get your &quot;Cpus_allowed&quot; number. And I gather that the siblings refer to hyper-threading, hence your reference to &quot;virtual&quot;. But the fact remains that your &quot;Cpus_allowed&quot; number is 8 on my MacPro whereas your <code>multiprocessing.cpu_count()</code> answer is 4. My own <code>open(&#39;&#47;proc&#47;cpuinfo&#39;).read().count(&#39;processor&#39;)</code> also produces 4, the number of physical cores (two dual-core processors)."
                        },
                        {
                            "owner": {
                                "account_id": 1021111,
                                "reputation": 3346,
                                "user_id": 1031434,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Tim Diels"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1490286979,
                            "post_id": 1006301,
                            "comment_id": 73055979,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment73055979_1006301",
                            "body": "<code>open(&#39;&#47;proc&#47;self&#47;status&#39;).read()</code> forgets to close the file. Use <code>with open(&#39;&#47;proc&#47;self&#47;status&#39;) as f: f.read()</code> instead"
                        },
                        {
                            "owner": {
                                "account_id": 3036830,
                                "reputation": 2138,
                                "user_id": 2574719,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "goetz"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1509297064,
                            "post_id": 1006301,
                            "comment_id": 80952391,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment80952391_1006301",
                            "body": "<code>os.cpu_count()</code>"
                        },
                        {
                            "owner": {
                                "account_id": 73597,
                                "reputation": 1256,
                                "user_id": 211827,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "amcgregor"
                            },
                            "reply_to_user": {
                                "account_id": 1021111,
                                "reputation": 3346,
                                "user_id": 1031434,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Tim Diels"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1543333200,
                            "post_id": 1006301,
                            "comment_id": 93875593,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment93875593_1006301",
                            "body": "@timdiels Not entirely correct; when the file handle&#39;s refcount reaches zero (immediately after the <code>read</code>), the GC will clean it up by calling (in latest versions) <code>io.BufferedReader.__del__</code>, which closes first: <a href=\"https://github.com/python/cpython/blob/3.7/Lib/_pyio.py#L375-L385\" rel=\"nofollow noreferrer\">github.com/python/cpython/blob/3.7/Lib/_pyio.py#L375-L385</a>"
                        },
                        {
                            "owner": {
                                "account_id": 1021111,
                                "reputation": 3346,
                                "user_id": 1031434,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Tim Diels"
                            },
                            "reply_to_user": {
                                "account_id": 73597,
                                "reputation": 1256,
                                "user_id": 211827,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "amcgregor"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1543421597,
                            "post_id": 1006301,
                            "comment_id": 93916319,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment93916319_1006301",
                            "body": "@amcgregor That&#39;s pretty cool and unless you have a circular reference you don&#39;t even have to wait for <code>gc.collect()</code>"
                        },
                        {
                            "owner": {
                                "account_id": 1021111,
                                "reputation": 3346,
                                "user_id": 1031434,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Tim Diels"
                            },
                            "reply_to_user": {
                                "account_id": 73597,
                                "reputation": 1256,
                                "user_id": 211827,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "amcgregor"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1544444874,
                            "post_id": 1006301,
                            "comment_id": 94265913,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment94265913_1006301",
                            "body": "@amcgregor Actually, reference counting is an implementation detail of CPython and thus should not be relied on (when easily avoidable as in this case) according to <a href=\"https://stackoverflow.com/a/7396043/1031434\">stackoverflow.com/a/7396043/1031434</a>"
                        },
                        {
                            "owner": {
                                "account_id": 73597,
                                "reputation": 1256,
                                "user_id": 211827,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "amcgregor"
                            },
                            "reply_to_user": {
                                "account_id": 1021111,
                                "reputation": 3346,
                                "user_id": 1031434,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Tim Diels"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1544538623,
                            "post_id": 1006301,
                            "comment_id": 94305887,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment94305887_1006301",
                            "body": "@timdiels Certainly is an artifact of the interpreter implementation, though I have not seen evidence in the question as to which interpreter is being used.  Under Pypy, cleanup (call to <code>__del__</code>) will happen <a href=\"https://pypy.readthedocs.io/en/latest/cpython_differences.html#differences-related-to-garbage-collection-strategies\" rel=\"nofollow noreferrer\">&quot;at some point in the future after the last reference is freed, or not if the interpreter is shut down beforehand&quot;</a>.  The &quot;or not&quot; situation is also acceptable; when the process is shut down, file handles are closed anyway."
                        },
                        {
                            "owner": {
                                "account_id": 1021111,
                                "reputation": 3346,
                                "user_id": 1031434,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Tim Diels"
                            },
                            "reply_to_user": {
                                "account_id": 73597,
                                "reputation": 1256,
                                "user_id": 211827,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "amcgregor"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1544549632,
                            "post_id": 1006301,
                            "comment_id": 94312567,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment94312567_1006301",
                            "body": "@amcgregor In this case it&#39;s acceptable, agreed, just file handles being left open which I guess is ok if you&#39;re not writing a long running daemon/process; which I fear might end up hitting a max open file handles of the OS. It&#39;s worse when writing to a file that needs to get read again before the process ends, but that&#39;s not the case here so that&#39;s a moot point. Still a good idea to have a habit of using <code>with</code> for when you do encounter a case where you need it."
                        },
                        {
                            "owner": {
                                "account_id": 481416,
                                "reputation": 365940,
                                "user_id": 895245,
                                "user_type": "registered",
                                "accept_rate": 49,
                                "display_name": "Ciro Santilli OurBigBook.com"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1553882531,
                            "post_id": 1006301,
                            "comment_id": 97565422,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment97565422_1006301",
                            "body": "This seems to have been added to Python 3 as <code>os.sched_getaffinity</code>: <a href=\"https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#55423170\" title=\"how to find out the number of cpus using python\">stackoverflow.com/questions/1006289/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 974612,
                                "reputation": 1061,
                                "user_id": 996298,
                                "user_type": "registered",
                                "accept_rate": 73,
                                "display_name": "manu3d"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1559997252,
                            "post_id": 1006301,
                            "comment_id": 99600296,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment99600296_1006301",
                            "body": "It should be noted os.sched_getaffinity does not seem to be available on Windows."
                        },
                        {
                            "owner": {
                                "account_id": 5521607,
                                "reputation": 6960,
                                "user_id": 4384381,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "Salvatore Cosentino"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1562897113,
                            "post_id": 1006301,
                            "comment_id": 100532103,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#comment100532103_1006301",
                            "body": "The reply should clarify that the count is the logical count has already mentioned in other comments. As of now (python 3.7) psutil.cpu_count(logical=False) is the only way I know to get the number of physical cores as suggested by @davoud-taghawi-nejad."
                        }
                    ],
                    "owner": {
                        "account_id": 16209,
                        "reputation": 283906,
                        "user_id": 35070,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "phihag"
                    },
                    "comment_count": 12,
                    "is_accepted": true,
                    "score": 237,
                    "last_activity_date": 1525687319,
                    "last_edit_date": 1525687319,
                    "creation_date": 1245235408,
                    "answer_id": 1006301,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006301#1006301",
                    "body": "<p>If you're interested into the number of processors <em>available</em> to your current process, you have to check <a href=\"http://man7.org/linux/man-pages/man7/cpuset.7.html\" rel=\"noreferrer\">cpuset</a> first. Otherwise (or if cpuset is not in use), <a href=\"http://docs.python.org/library/multiprocessing.html#multiprocessing.cpu_count\" rel=\"noreferrer\"><code>multiprocessing.cpu_count()</code></a> is the way to go in Python 2.6 and newer. The following method falls back to a couple of alternative methods in older versions of Python:</p>\n\n<pre><code>import os\nimport re\nimport subprocess\n\n\ndef available_cpu_count():\n    \"\"\" Number of available virtual or physical CPUs on this system, i.e.\n    user/real as output by time(1) when called with an optimally scaling\n    userspace-only program\"\"\"\n\n    # cpuset\n    # cpuset may restrict the number of *available* processors\n    try:\n        m = re.search(r'(?m)^Cpus_allowed:\\s*(.*)$',\n                      open('/proc/self/status').read())\n        if m:\n            res = bin(int(m.group(1).replace(',', ''), 16)).count('1')\n            if res &gt; 0:\n                return res\n    except IOError:\n        pass\n\n    # Python 2.6+\n    try:\n        import multiprocessing\n        return multiprocessing.cpu_count()\n    except (ImportError, NotImplementedError):\n        pass\n\n    # https://github.com/giampaolo/psutil\n    try:\n        import psutil\n        return psutil.cpu_count()   # psutil.NUM_CPUS on old versions\n    except (ImportError, AttributeError):\n        pass\n\n    # POSIX\n    try:\n        res = int(os.sysconf('SC_NPROCESSORS_ONLN'))\n\n        if res &gt; 0:\n            return res\n    except (AttributeError, ValueError):\n        pass\n\n    # Windows\n    try:\n        res = int(os.environ['NUMBER_OF_PROCESSORS'])\n\n        if res &gt; 0:\n            return res\n    except (KeyError, ValueError):\n        pass\n\n    # jython\n    try:\n        from java.lang import Runtime\n        runtime = Runtime.getRuntime()\n        res = runtime.availableProcessors()\n        if res &gt; 0:\n            return res\n    except ImportError:\n        pass\n\n    # BSD\n    try:\n        sysctl = subprocess.Popen(['sysctl', '-n', 'hw.ncpu'],\n                                  stdout=subprocess.PIPE)\n        scStdout = sysctl.communicate()[0]\n        res = int(scStdout)\n\n        if res &gt; 0:\n            return res\n    except (OSError, ValueError):\n        pass\n\n    # Linux\n    try:\n        res = open('/proc/cpuinfo').read().count('processor\\t:')\n\n        if res &gt; 0:\n            return res\n    except IOError:\n        pass\n\n    # Solaris\n    try:\n        pseudoDevices = os.listdir('/devices/pseudo/')\n        res = 0\n        for pd in pseudoDevices:\n            if re.match(r'^cpuid@[0-9]+$', pd):\n                res += 1\n\n        if res &gt; 0:\n            return res\n    except OSError:\n        pass\n\n    # Other UNIXes (heuristic)\n    try:\n        try:\n            dmesg = open('/var/run/dmesg.boot').read()\n        except IOError:\n            dmesgProcess = subprocess.Popen(['dmesg'], stdout=subprocess.PIPE)\n            dmesg = dmesgProcess.communicate()[0]\n\n        res = 0\n        while '\\ncpu' + str(res) + ':' in dmesg:\n            res += 1\n\n        if res &gt; 0:\n            return res\n    except OSError:\n        pass\n\n    raise Exception('Can not determine number of CPUs on this system')\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3959108,
                                "reputation": 454,
                                "user_id": 3266704,
                                "user_type": "registered",
                                "accept_rate": 90,
                                "display_name": "LittleByBlue"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1436092619,
                            "post_id": 1006337,
                            "comment_id": 50458001,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment50458001_1006337",
                            "body": "multiprocessing is also supported in 3.x"
                        },
                        {
                            "owner": {
                                "account_id": 1919325,
                                "reputation": 4589,
                                "user_id": 1731200,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Matthias"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1456242062,
                            "post_id": 1006337,
                            "comment_id": 58850269,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment58850269_1006337",
                            "body": "I want to add that this doesn&#39;t work in IronPython which raises a NotImplementedError."
                        },
                        {
                            "owner": {
                                "account_id": 4205763,
                                "reputation": 813,
                                "user_id": 3444703,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "amc"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1503530740,
                            "post_id": 1006337,
                            "comment_id": 78659605,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment78659605_1006337",
                            "body": "This gives the number of CPUs on available... not in use by the program!"
                        },
                        {
                            "owner": {
                                "account_id": 34203,
                                "reputation": 1674,
                                "user_id": 96436,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Achilles"
                            },
                            "edited": false,
                            "score": 92,
                            "creation_date": 1505159987,
                            "post_id": 1006337,
                            "comment_id": 79289251,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment79289251_1006337",
                            "body": "On Python 3.6.2 I could only use <code>os.cpu_count()</code>"
                        },
                        {
                            "owner": {
                                "account_id": 3549785,
                                "reputation": 22835,
                                "user_id": 2964927,
                                "user_type": "registered",
                                "accept_rate": 57,
                                "display_name": "borgr"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1513689265,
                            "post_id": 1006337,
                            "comment_id": 82741472,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment82741472_1006337",
                            "body": "is there a way to know only the number allocated (for example using slurm)"
                        },
                        {
                            "owner": {
                                "account_id": 2421817,
                                "reputation": 365,
                                "user_id": 2114616,
                                "user_type": "registered",
                                "display_name": "Lukas Z."
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1549916276,
                            "post_id": 1006337,
                            "comment_id": 96068922,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment96068922_1006337",
                            "body": "python -c &#39;import multiprocessing as m; print(m.cpu_count())&#39;"
                        },
                        {
                            "owner": {
                                "account_id": 133281,
                                "reputation": 2639,
                                "user_id": 334526,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "Christopher Barber"
                            },
                            "edited": false,
                            "score": 20,
                            "creation_date": 1559920877,
                            "post_id": 1006337,
                            "comment_id": 99583135,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment99583135_1006337",
                            "body": "Also, as noted below, this count can include &quot;virtual&quot; hyperthreaded cpus, which may not be what you want if you are scheduling cpu-intensive tasks."
                        },
                        {
                            "owner": {
                                "account_id": 1914642,
                                "reputation": 1345,
                                "user_id": 1727470,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Samie Bee"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1581195693,
                            "post_id": 1006337,
                            "comment_id": 106351866,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment106351866_1006337",
                            "body": "Fun fact, both these calls report &quot;4&quot; on my apple computer that <i>definitely</i> has only 2 cores. (1 dual-core cpu)"
                        },
                        {
                            "owner": {
                                "account_id": 15663519,
                                "reputation": 2674,
                                "user_id": 11301900,
                                "user_type": "registered",
                                "display_name": "AMC"
                            },
                            "reply_to_user": {
                                "account_id": 1914642,
                                "reputation": 1345,
                                "user_id": 1727470,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Samie Bee"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1583346569,
                            "post_id": 1006337,
                            "comment_id": 107088379,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment107088379_1006337",
                            "body": "@SamyBencherif Can you share more information on your CPU?"
                        },
                        {
                            "owner": {
                                "account_id": 8600460,
                                "reputation": 761,
                                "user_id": 6442235,
                                "user_type": "registered",
                                "display_name": "Jason Damiani"
                            },
                            "reply_to_user": {
                                "account_id": 1914642,
                                "reputation": 1345,
                                "user_id": 1727470,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Samie Bee"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1586795022,
                            "post_id": 1006337,
                            "comment_id": 108252595,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment108252595_1006337",
                            "body": "@SamyBencherif this is a result of what was mentioned above.  &quot;Hyperthreading&quot; results in the OS seeing double the number of physical processor cores"
                        },
                        {
                            "owner": {
                                "account_id": 200343,
                                "reputation": 4098,
                                "user_id": 446149,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "zeehio"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1587045134,
                            "post_id": 1006337,
                            "comment_id": 108358890,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment108358890_1006337",
                            "body": "Besides the hyperthreaded cpus, <code>multiprocessing.cpu_count()</code> does not account for limits in cpu usage through <code>docker run --cpus=2</code>."
                        },
                        {
                            "owner": {
                                "account_id": 13080122,
                                "reputation": 397,
                                "user_id": 9480266,
                                "user_type": "registered",
                                "display_name": "lol lol"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1691756342,
                            "post_id": 1006337,
                            "comment_id": 135538334,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#comment135538334_1006337",
                            "body": "This answer isn&#39;t correct. It will not work with Docker. For example <code>docker run -it --rm --cpuset-cpus=0,1 python:3 python3 -c &quot;import multiprocessing; print(multiprocessing.cpu_count())&quot;</code>."
                        }
                    ],
                    "owner": {
                        "account_id": 34591,
                        "reputation": 113490,
                        "user_id": 97828,
                        "user_type": "registered",
                        "display_name": "Nadia Alramli"
                    },
                    "comment_count": 12,
                    "is_accepted": false,
                    "score": 1273,
                    "last_activity_date": 1452202185,
                    "last_edit_date": 1452202185,
                    "creation_date": 1245236033,
                    "answer_id": 1006337,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/1006337#1006337",
                    "body": "<p>If you have python with a version >= 2.6 you can simply use</p>\n\n<pre><code>import multiprocessing\n\nmultiprocessing.cpu_count()\n</code></pre>\n\n<p><a href=\"http://docs.python.org/library/multiprocessing.html#multiprocessing.cpu_count\" rel=\"noreferrer\">http://docs.python.org/library/multiprocessing.html#multiprocessing.cpu_count</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 207432,
                        "reputation": 349,
                        "user_id": 457288,
                        "user_type": "registered",
                        "display_name": "Ben Scherrey"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 10,
                    "last_activity_date": 1286021762,
                    "creation_date": 1286021762,
                    "answer_id": 3845635,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/3845635#3845635",
                    "body": "<p>Can't figure out how to add to the code or reply to the message but here's support for jython that you can tack in before you give up:</p>\n\n<pre><code># jython\ntry:\n    from java.lang import Runtime\n    runtime = Runtime.getRuntime()\n    res = runtime.availableProcessors()\n    if res &gt; 0:\n        return res\nexcept ImportError:\n    pass\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7092256,
                                "reputation": 133,
                                "user_id": 5427094,
                                "user_type": "registered",
                                "display_name": "Devilhunter"
                            },
                            "edited": false,
                            "score": 17,
                            "creation_date": 1572275900,
                            "post_id": 14840102,
                            "comment_id": 103500167,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/14840102#comment103500167_14840102",
                            "body": "This one is really good, considering that used method allows to find out is the CPU cores are logical ore physical ones. <code>psutil.cpu_count(logical = True)</code>"
                        },
                        {
                            "owner": {
                                "account_id": 8685526,
                                "reputation": 1255,
                                "user_id": 7295290,
                                "user_type": "registered",
                                "display_name": "saichand"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1586245029,
                            "post_id": 14840102,
                            "comment_id": 108049899,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/14840102#comment108049899_14840102",
                            "body": "Hi @Bakuriu, Is there any way to get the number of cpu cores being used by a specific process using psutil?"
                        },
                        {
                            "owner": {
                                "account_id": 7960219,
                                "reputation": 721,
                                "user_id": 6008271,
                                "user_type": "registered",
                                "display_name": "OscarVanL"
                            },
                            "reply_to_user": {
                                "account_id": 7092256,
                                "reputation": 133,
                                "user_id": 5427094,
                                "user_type": "registered",
                                "display_name": "Devilhunter"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1587749763,
                            "post_id": 14840102,
                            "comment_id": 108641820,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/14840102#comment108641820_14840102",
                            "body": "@Devilhunter On Windows on my Intel i7-8700 <code>psutil.cpu_count()</code> gives 12 (it&#39;s a 6-core CPU with hyperthreading). This is because the default argument of <code>logical</code> is True, so you explicitly need to write <code>psutil.cpu_count(logical = False)</code> to get the number of physical Cores."
                        },
                        {
                            "owner": {
                                "account_id": 481416,
                                "reputation": 365940,
                                "user_id": 895245,
                                "user_type": "registered",
                                "accept_rate": 49,
                                "display_name": "Ciro Santilli OurBigBook.com"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1598482625,
                            "post_id": 14840102,
                            "comment_id": 112477089,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/14840102#comment112477089_14840102",
                            "body": "<code>psutil.Process().cpu_affinity()</code> is what most users will want I believe as explained at: <a href=\"https://stackoverflow.com/a/55423170/895245\">stackoverflow.com/a/55423170/895245</a> BTW."
                        },
                        {
                            "owner": {
                                "account_id": 1714783,
                                "reputation": 849,
                                "user_id": 1572112,
                                "user_type": "registered",
                                "accept_rate": 43,
                                "display_name": "The EasyLearn Academy"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1654691889,
                            "post_id": 14840102,
                            "comment_id": 128150921,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/14840102#comment128150921_14840102",
                            "body": "answer needs updation"
                        },
                        {
                            "owner": {
                                "account_id": 1714783,
                                "reputation": 849,
                                "user_id": 1572112,
                                "user_type": "registered",
                                "accept_rate": 43,
                                "display_name": "The EasyLearn Academy"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1654691895,
                            "post_id": 14840102,
                            "comment_id": 128150926,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/14840102#comment128150926_14840102",
                            "body": "psutil.cpu_count(logical=False)"
                        }
                    ],
                    "owner": {
                        "account_id": 240600,
                        "reputation": 100697,
                        "user_id": 510937,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Bakuriu"
                    },
                    "comment_count": 6,
                    "is_accepted": false,
                    "score": 136,
                    "last_activity_date": 1513748338,
                    "last_edit_date": 1513748338,
                    "creation_date": 1360696745,
                    "answer_id": 14840102,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/14840102#14840102",
                    "body": "<p>Another option is to use the <a href=\"https://github.com/giampaolo/psutil\" rel=\"noreferrer\"><code>psutil</code></a> library, which always turn out useful in these situations:</p>\n\n<pre><code>&gt;&gt;&gt; import psutil\n&gt;&gt;&gt; psutil.cpu_count()\n2\n</code></pre>\n\n<p>This should work on any platform supported by <code>psutil</code>(Unix and Windows).</p>\n\n<p>Note that in some occasions <code>multiprocessing.cpu_count</code> may raise a <code>NotImplementedError</code> while <code>psutil</code> will be able to obtain the number of CPUs. This is simply because <code>psutil</code> first tries to use the same techniques used by <code>multiprocessing</code> and, if those fail, it also uses other techniques.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 16209,
                                "reputation": 283906,
                                "user_id": 35070,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "phihag"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1405636459,
                            "post_id": 24805009,
                            "comment_id": 38520635,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/24805009#comment38520635_24805009",
                            "body": "In this case, I want the number of logical CPUs (i.e. how many threads should I start if this program scales really well), but the answer may be helpful nonetheless."
                        },
                        {
                            "owner": {
                                "account_id": 1355131,
                                "reputation": 2699,
                                "user_id": 1293689,
                                "user_type": "registered",
                                "accept_rate": 89,
                                "display_name": "TimZaman"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1480516586,
                            "post_id": 24805009,
                            "comment_id": 68995797,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/24805009#comment68995797_24805009",
                            "body": "or <code>psutil.cpu_count(logical=False)</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 1821093,
                        "reputation": 10796,
                        "user_id": 1655144,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "Douglas B. Staple"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 22,
                    "last_activity_date": 1405603930,
                    "creation_date": 1405603930,
                    "answer_id": 24805009,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/24805009#24805009",
                    "body": "<p><code>multiprocessing.cpu_count()</code> will return the number of logical CPUs, so if you have a quad-core CPU with hyperthreading, it will return <code>8</code>.  If you want the number of physical CPUs, use the python bindings to hwloc:</p>\n\n<pre><code>#!/usr/bin/env python\nimport hwloc\ntopology = hwloc.Topology()\ntopology.load()\nprint topology.get_nbobjs_by_type(hwloc.OBJ_CORE)\n</code></pre>\n\n<p>hwloc is designed to be portable across OSes and architectures.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 16209,
                                "reputation": 283906,
                                "user_id": 35070,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "phihag"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1409344614,
                            "post_id": 25569974,
                            "comment_id": 39944647,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/25569974#comment39944647_25569974",
                            "body": "Thanks! This is only available on Linux though, and already included <a href=\"http://stackoverflow.com/a/1006301/35070\">in my answer</a>."
                        }
                    ],
                    "owner": {
                        "account_id": 2432634,
                        "reputation": 35,
                        "user_id": 2123224,
                        "user_type": "registered",
                        "display_name": "Alkero"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1409324106,
                    "last_edit_date": 1409324106,
                    "creation_date": 1409321139,
                    "answer_id": 25569974,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/25569974#25569974",
                    "body": "<p>Another option if you don't have Python 2.6:</p>\n\n<pre><code>import commands\nn = commands.getoutput(\"grep -c processor /proc/cpuinfo\")\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 45260,
                                "reputation": 66874,
                                "user_id": 133374,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "Albert"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1539007224,
                            "post_id": 25636145,
                            "comment_id": 92334465,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/25636145#comment92334465_25636145",
                            "body": "See also the documentation of <code>cpu_count</code>. <code>len(os.sched_getaffinity(0))</code> might be better, depending on the purpose."
                        },
                        {
                            "owner": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "reply_to_user": {
                                "account_id": 45260,
                                "reputation": 66874,
                                "user_id": 133374,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "Albert"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1539008008,
                            "post_id": 25636145,
                            "comment_id": 92334917,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/25636145#comment92334917_25636145",
                            "body": "@Albert yes, the number of CPUs in the system (<code>os.cpu_count()</code>\u2014what OP asks) may differ from the number of CPUs that are available to the current process (<code>os.sched_getaffinity(0)</code>)."
                        },
                        {
                            "owner": {
                                "account_id": 45260,
                                "reputation": 66874,
                                "user_id": 133374,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "Albert"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1539070872,
                            "post_id": 25636145,
                            "comment_id": 92356831,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/25636145#comment92356831_25636145",
                            "body": "I know. I just wanted to add that for other readers, who might miss this difference, to get a more complete picture from them."
                        },
                        {
                            "owner": {
                                "account_id": 1751690,
                                "reputation": 568,
                                "user_id": 1600630,
                                "user_type": "registered",
                                "display_name": "Cometsong"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1557843803,
                            "post_id": 25636145,
                            "comment_id": 98896304,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/25636145#comment98896304_25636145",
                            "body": "Also: the <code>os.sched_getaffinity(0)</code> is <i>not</i> available on BSD, so the use of <code>os.cpu_count()</code> is required (without other external library, that is)."
                        },
                        {
                            "owner": {
                                "account_id": 974612,
                                "reputation": 1061,
                                "user_id": 996298,
                                "user_type": "registered",
                                "accept_rate": 73,
                                "display_name": "manu3d"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1559997214,
                            "post_id": 25636145,
                            "comment_id": 99600282,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/25636145#comment99600282_25636145",
                            "body": "It should be noted os.sched_getaffinity does not seem to be available on Windows."
                        }
                    ],
                    "owner": {
                        "account_id": 3021,
                        "reputation": 408304,
                        "user_id": 4279,
                        "user_type": "registered",
                        "accept_rate": 94,
                        "display_name": "jfs"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 69,
                    "last_activity_date": 1409717816,
                    "creation_date": 1409717816,
                    "answer_id": 25636145,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/25636145#25636145",
                    "body": "<p>In Python 3.4+: <a href=\"https://docs.python.org/3/library/os.html#os.cpu_count\">os.cpu_count()</a>.</p>\n\n<p><code>multiprocessing.cpu_count()</code> is implemented in terms of this function but raises <code>NotImplementedError</code> if <code>os.cpu_count()</code> returns <code>None</code> (\"can't determine number of CPUs\").</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 54702,
                                "reputation": 39800,
                                "user_id": 163740,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "ogrisel"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1488207321,
                            "post_id": 29770622,
                            "comment_id": 72117114,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/29770622#comment72117114_29770622",
                            "body": "joblib uses the underlying multiprocessing module. It&#39;s probably best to call into multiprocessing directly for this."
                        }
                    ],
                    "owner": {
                        "account_id": 2305551,
                        "reputation": 169,
                        "user_id": 2024909,
                        "user_type": "registered",
                        "display_name": "amit12690"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 11,
                    "last_activity_date": 1434364496,
                    "last_edit_date": 1434364496,
                    "creation_date": 1429614883,
                    "answer_id": 29770622,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/29770622#29770622",
                    "body": "<p>You can also use \"joblib\" for this purpose. </p>\n\n<pre><code>import joblib\nprint joblib.cpu_count()\n</code></pre>\n\n<p>This method will give you the number of cpus in the system. joblib needs to be installed though. More information on joblib can be found here       <a href=\"https://pythonhosted.org/joblib/parallel.html\" rel=\"noreferrer\">https://pythonhosted.org/joblib/parallel.html</a></p>\n\n<p>Alternatively you can use numexpr package of python. It has lot of simple functions helpful for getting information about the system cpu.</p>\n\n<pre><code>import numexpr as ne\nprint ne.detect_number_of_cores()\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 116679,
                                "reputation": 1701,
                                "user_id": 305883,
                                "user_type": "registered",
                                "accept_rate": 38,
                                "display_name": "user305883"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1476430765,
                            "post_id": 36540625,
                            "comment_id": 67351360,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/36540625#comment67351360_36540625",
                            "body": "What is difference between a logical CPU and not not a logical one? on my laptop: <code>psutil.cpu_count(logical=False) #4</code> <code>psutil.cpu_count(logical=True) #8</code> and <code>multiprocessing.cpu_count() #8</code>"
                        },
                        {
                            "owner": {
                                "account_id": 108913,
                                "reputation": 18521,
                                "user_id": 288875,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Andre Holzner"
                            },
                            "reply_to_user": {
                                "account_id": 116679,
                                "reputation": 1701,
                                "user_id": 305883,
                                "user_type": "registered",
                                "accept_rate": 38,
                                "display_name": "user305883"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1505741344,
                            "post_id": 36540625,
                            "comment_id": 79523980,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/36540625#comment79523980_36540625",
                            "body": "@user305883 assuming you have a x86 CPU, you have <a href=\"https://en.wikipedia.org/wiki/Hyper-threading\" rel=\"nofollow noreferrer\">hyperthreading</a> on this machine, i.e. each physical core corresponds to two hyperthreads (&#39;logical&#39; cores). Hyperthreading allows the physical core to be used to execute instructions from thread B when parts of it are idle for thread A (e.g. waiting for data being fetched from the cache or memory). Depending on your code one can get one or a few tens of percents of additional core utilization but it is far below the performance of a real physical core."
                        },
                        {
                            "owner": {
                                "account_id": 5385303,
                                "reputation": 2216,
                                "user_id": 4289417,
                                "user_type": "registered",
                                "accept_rate": 61,
                                "display_name": "Pavel Chernikov"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1637160388,
                            "post_id": 36540625,
                            "comment_id": 123751738,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/36540625#comment123751738_36540625",
                            "body": "By far the best answer, but it&#39;s very difficult to find among all the others."
                        }
                    ],
                    "owner": {
                        "account_id": 84798,
                        "reputation": 16512,
                        "user_id": 236830,
                        "user_type": "registered",
                        "accept_rate": 59,
                        "display_name": "Davoud Taghawi-Nejad"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 63,
                    "last_activity_date": 1591895275,
                    "last_edit_date": 1591895275,
                    "creation_date": 1460353375,
                    "answer_id": 36540625,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/36540625#36540625",
                    "body": "<p>If you want to know the number of physical cores (not virtual hyperthreaded cores), here is a platform independent solution:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>psutil.cpu_count(logical=False)\n</code></pre>\n\n<p><a href=\"https://github.com/giampaolo/psutil/blob/master/INSTALL.rst\" rel=\"noreferrer\">https://github.com/giampaolo/psutil/blob/master/INSTALL.rst</a></p>\n\n<p>Note that the default value for <code>logical</code> is <code>True</code>, so if you do want to include hyperthreaded cores you can use:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>psutil.cpu_count()\n</code></pre>\n\n<p>This will give the same number as <code>os.cpu_count()</code> and <code>multiprocessing.cpu_count()</code>, neither of which have the <code>logical</code> keyword argument.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 133281,
                                "reputation": 2639,
                                "user_id": 334526,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "Christopher Barber"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1559921158,
                            "post_id": 55163569,
                            "comment_id": 99583290,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55163569#comment99583290_55163569",
                            "body": "Not really. As noted, <code>os.cpu_count()</code> and <code>multiprocessing.cpu_count()</code> will return hyperthreaded cpu counts, not the actual physical cpu count."
                        },
                        {
                            "owner": {
                                "account_id": 2002371,
                                "reputation": 411,
                                "user_id": 1793092,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "yangliu2"
                            },
                            "reply_to_user": {
                                "account_id": 133281,
                                "reputation": 2639,
                                "user_id": 334526,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "Christopher Barber"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1559937787,
                            "post_id": 55163569,
                            "comment_id": 99590386,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55163569#comment99590386_55163569",
                            "body": "Yes. I reworded. It&#39;s typically # of cores x 2. What I mean is that if you are on a virtual machine, that carved out 8 cores, but your host machine is 20 core physically, first set of command give you 20, second set of command give you 8."
                        }
                    ],
                    "owner": {
                        "account_id": 2002371,
                        "reputation": 411,
                        "user_id": 1793092,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "yangliu2"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 32,
                    "last_activity_date": 1561404856,
                    "last_edit_date": 1561404856,
                    "creation_date": 1552569415,
                    "answer_id": 55163569,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55163569#55163569",
                    "body": "<p>These give you the hyperthreaded CPU count</p>\n\n<ol>\n<li><code>multiprocessing.cpu_count()</code></li>\n<li><code>os.cpu_count()</code></li>\n</ol>\n\n<p>These give you the virtual machine CPU count</p>\n\n<ol>\n<li><code>psutil.cpu_count()</code></li>\n<li><code>numexpr.detect_number_of_cores()</code></li>\n</ol>\n\n<p>Only matters if you works on VMs.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 133281,
                                "reputation": 2639,
                                "user_id": 334526,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "Christopher Barber"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1559921057,
                            "post_id": 55423170,
                            "comment_id": 99583231,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment99583231_55423170",
                            "body": "Only available on Unix."
                        },
                        {
                            "owner": {
                                "account_id": 3886694,
                                "reputation": 4100,
                                "user_id": 3217870,
                                "user_type": "registered",
                                "display_name": "Paul"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1599238719,
                            "post_id": 55423170,
                            "comment_id": 112723036,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment112723036_55423170",
                            "body": "Works on jupyter notebook!"
                        },
                        {
                            "owner": {
                                "account_id": 153562,
                                "reputation": 13789,
                                "user_id": 368896,
                                "user_type": "registered",
                                "accept_rate": 74,
                                "display_name": "Dan Nissenbaum"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1604607220,
                            "post_id": 55423170,
                            "comment_id": 114406188,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment114406188_55423170",
                            "body": "Just to clarify, does this support CPU limits in <code>Docker</code>-ized containers, as well?"
                        },
                        {
                            "owner": {
                                "account_id": 481416,
                                "reputation": 365940,
                                "user_id": 895245,
                                "user_type": "registered",
                                "accept_rate": 49,
                                "display_name": "Ciro Santilli OurBigBook.com"
                            },
                            "reply_to_user": {
                                "account_id": 153562,
                                "reputation": 13789,
                                "user_id": 368896,
                                "user_type": "registered",
                                "accept_rate": 74,
                                "display_name": "Dan Nissenbaum"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1604608529,
                            "post_id": 55423170,
                            "comment_id": 114406649,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment114406649_55423170",
                            "body": "@DanNissenbaum from a quick read Docker seems to be able to fake <code>nproc</code> to match <code>--cpuset-cpus</code>, but I haven&#39;t tested: <a href=\"https://stackoverflow.com/questions/37871540/how-many-cpus-does-a-docker-container-use/54112066#54112066\" title=\"how many cpus does a docker container use\">stackoverflow.com/questions/37871540/&hellip;</a> Docker can also limit how much time the kernel should allocate to each instance as wel it seems e.g. with <code>--cpu-quota</code>, <a href=\"https://docs.docker.com/engine/reference/run/#cpuset-constraint\" rel=\"nofollow noreferrer\">docs.docker.com/engine/reference/run/#cpuset-constraint</a> so even <code>nproc</code> might not be fully meaningful in that case however."
                        },
                        {
                            "owner": {
                                "account_id": 1208312,
                                "reputation": 360,
                                "user_id": 1177350,
                                "user_type": "registered",
                                "display_name": "Paul"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1606982974,
                            "post_id": 55423170,
                            "comment_id": 115130160,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment115130160_55423170",
                            "body": "This solution is also necessary for HPC situations where a compute node might have 48 cores but you only requested 10 of them. os.cpu_count() will tell you there&#39;s 48 cores but as @CiroSantilli\u90dd\u6d77\u4e1c\u51a0\u72b6\u75c5\u516d\u56db\u4e8b\u4ef6\u6cd5\u8f6e\u529f says you run into all sorts of problems if you try to use that. os.sched_getaffinity(0) will report what was actually requested from the scheduler eg. PBS"
                        },
                        {
                            "owner": {
                                "account_id": 69505,
                                "reputation": 33095,
                                "user_id": 202168,
                                "user_type": "registered",
                                "accept_rate": 66,
                                "display_name": "Anentropic"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1615489844,
                            "post_id": 55423170,
                            "comment_id": 117713415,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment117713415_55423170",
                            "body": "on macOS: <code>AttributeError: &#39;Process&#39; object has no attribute &#39;cpu_affinity&#39;</code>"
                        },
                        {
                            "owner": {
                                "account_id": 481416,
                                "reputation": 365940,
                                "user_id": 895245,
                                "user_type": "registered",
                                "accept_rate": 49,
                                "display_name": "Ciro Santilli OurBigBook.com"
                            },
                            "reply_to_user": {
                                "account_id": 69505,
                                "reputation": 33095,
                                "user_id": 202168,
                                "user_type": "registered",
                                "accept_rate": 66,
                                "display_name": "Anentropic"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1615493123,
                            "post_id": 55423170,
                            "comment_id": 117714851,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment117714851_55423170",
                            "body": "@Anentropic thanks for this info, what a shame. mac users gotta look into <code>psutil</code> and upstream to stdlib then as well it seems then :-)"
                        },
                        {
                            "owner": {
                                "account_id": 129990,
                                "reputation": 7696,
                                "user_id": 328936,
                                "user_type": "registered",
                                "accept_rate": 73,
                                "display_name": "Rich"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1619625995,
                            "post_id": 55423170,
                            "comment_id": 118963754,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment118963754_55423170",
                            "body": "<code>&quot;multiprocessing.cpu_count() and os.cpu_count() on the other hand just returns the total number of physical CPUs.&quot;</code> &lt;- both these functions return the number of logical cores: in the case of hyperthreading this will be double the number of physical cores."
                        },
                        {
                            "owner": {
                                "account_id": 5342770,
                                "reputation": 1503,
                                "user_id": 4259243,
                                "user_type": "registered",
                                "accept_rate": 65,
                                "display_name": "sh37211"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1679111085,
                            "post_id": 55423170,
                            "comment_id": 133667154,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment133667154_55423170",
                            "body": "This is not a good method to use inside Jupyter notebooks, which will return a value of only 2, when an ordinary python process might return 96.  when running Jupyter notebooks then, I will typically copy the sched affinity output from a python REPL in a shell, and set it in Jupyter via os.sched_setaffinity(0, {...paste...})"
                        },
                        {
                            "owner": {
                                "account_id": 481416,
                                "reputation": 365940,
                                "user_id": 895245,
                                "user_type": "registered",
                                "accept_rate": 49,
                                "display_name": "Ciro Santilli OurBigBook.com"
                            },
                            "reply_to_user": {
                                "account_id": 5342770,
                                "reputation": 1503,
                                "user_id": 4259243,
                                "user_type": "registered",
                                "accept_rate": 65,
                                "display_name": "sh37211"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1679124157,
                            "post_id": 55423170,
                            "comment_id": 133668089,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment133668089_55423170",
                            "body": "@sh37211 I don&#39;t reproduce on Ubuntu 22.10, <code>notebook==6.5.3</code> on a minimal example, the value for <code>os.sched_getaffinity(0)</code> inside Jupyter and outside were the same. I wonder why this happens to you."
                        },
                        {
                            "owner": {
                                "account_id": 1686042,
                                "reputation": 669,
                                "user_id": 1549322,
                                "user_type": "registered",
                                "display_name": "Judge"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1688039378,
                            "post_id": 55423170,
                            "comment_id": 135021825,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment135021825_55423170",
                            "body": "Using the <code>psutil</code> method on macos also does not work:  <code>AttributeError: &#39;Process&#39; object has no attribute &#39;cpu_affinity&#39;</code>"
                        },
                        {
                            "owner": {
                                "account_id": 2126879,
                                "reputation": 391,
                                "user_id": 2204954,
                                "user_type": "registered",
                                "display_name": "kikones34"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1700147723,
                            "post_id": 55423170,
                            "comment_id": 136621142,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment136621142_55423170",
                            "body": "On WSL, all three functions return the same value for me, corresponding to the number of logical processors."
                        },
                        {
                            "owner": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1710659897,
                            "post_id": 55423170,
                            "comment_id": 137818389,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment137818389_55423170",
                            "body": "On Python 3.13, there is <a href=\"https://docs.python.org/3.13/library/os.html#os.process_cpu_count\" rel=\"nofollow noreferrer\"><code>os.process_cpu_count()</code></a>. It is like <code>len(os.sched_getaffinity(0))</code> but can be also overridden by <code>-X cpu_count=&lt;n&gt;</code>, <code>$PYTHON_CPU_COUNT</code> (both <code>os.cpu_count()</code> &amp; <code>os.process_cpu_count()</code> are affected)."
                        },
                        {
                            "owner": {
                                "account_id": 481416,
                                "reputation": 365940,
                                "user_id": 895245,
                                "user_type": "registered",
                                "accept_rate": 49,
                                "display_name": "Ciro Santilli OurBigBook.com"
                            },
                            "reply_to_user": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1710666738,
                            "post_id": 55423170,
                            "comment_id": 137818796,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#comment137818796_55423170",
                            "body": "@jfs thanks for this. Weird function, feels like stdlib clutter, why not just let users limit CPUs via regular cli parameters."
                        }
                    ],
                    "owner": {
                        "account_id": 481416,
                        "reputation": 365940,
                        "user_id": 895245,
                        "user_type": "registered",
                        "accept_rate": 49,
                        "display_name": "Ciro Santilli OurBigBook.com"
                    },
                    "comment_count": 14,
                    "is_accepted": false,
                    "score": 162,
                    "last_activity_date": 1710667022,
                    "last_edit_date": 1710667022,
                    "creation_date": 1553882455,
                    "answer_id": 55423170,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170#55423170",
                    "body": "<p><strong><code>len(os.sched_getaffinity(0))</code> is what you usually want</strong></p>\n<p><a href=\"https://docs.python.org/3/library/os.html#os.sched_getaffinity\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/os.html#os.sched_getaffinity</a></p>\n<p><code>os.sched_getaffinity(0)</code> (added in Python 3) returns the set of CPUs available considering the <a href=\"https://stackoverflow.com/questions/10490756/how-to-use-sched-getaffinity-and-sched-setaffinity-in-linux-from-c/50117787#50117787\"><code>sched_setaffinity</code> Linux system call</a>, which limits which CPUs a process and its children can run on.</p>\n<p><code>0</code> means to get the value for the current process. The function returns a <code>set()</code> of allowed CPUs, thus the need for <code>len()</code>.</p>\n<p><code>multiprocessing.cpu_count()</code> and <code>os.cpu_count()</code> on the other hand just returns the total number of logical CPUs, that is e.g. the number of <a href=\"https://superuser.com/questions/133082/what-is-the-difference-between-hyper-threading-and-multiple-cores\">CPUs considering hyperthreading</a>.</p>\n<p>The difference is especially important because certain cluster management systems such as <a href=\"https://en.wikipedia.org/wiki/Platform_LSF\" rel=\"nofollow noreferrer\">Platform LSF</a> limit job CPU usage with <code>sched_getaffinity</code>.</p>\n<p>Therefore, if you use <code>multiprocessing.cpu_count()</code>, your script might try to use way more cores than it has available, which may lead to overload and timeouts.</p>\n<p>We can see the difference concretely by restricting the affinity with the <code>taskset</code> utility, which allows us to control the affinity of a process.</p>\n<p><strong>Minimal <code>taskset</code> example</strong></p>\n<p>For example, if I restrict Python to just 1 core (core 0) in my 16 core system:</p>\n<pre><code>taskset -c 0 ./main.py\n</code></pre>\n<p>with the test script:</p>\n<p>main.py</p>\n<pre><code>#!/usr/bin/env python3\n\nimport multiprocessing\nimport os\n\nprint(multiprocessing.cpu_count())\nprint(os.cpu_count())\nprint(len(os.sched_getaffinity(0)))\n</code></pre>\n<p>then the output is:</p>\n<pre><code>16\n16\n1\n</code></pre>\n<p><strong>Vs <code>nproc</code></strong></p>\n<p><code>nproc</code> does respect the affinity by default and:</p>\n<pre><code>taskset -c 0 nproc\n</code></pre>\n<p>outputs:</p>\n<pre><code>1\n</code></pre>\n<p>and <code>man nproc</code> makes that quite explicit:</p>\n<blockquote>\n<p>print the number of processing units available</p>\n</blockquote>\n<p>Therefore, <code>len(os.sched_getaffinity(0))</code> behaves like <code>nproc</code> by default.</p>\n<p><code>nproc</code> has the <code>--all</code> flag for the less common case that you want to get the physical CPU count without considering taskset:</p>\n<pre><code>taskset -c 0 nproc --all\n</code></pre>\n<p><strong><code>os.cpu_count</code> documentation</strong></p>\n<p>The documentation of <code>os.cpu_count</code> also briefly mentions this <a href=\"https://docs.python.org/3.8/library/os.html#os.cpu_count\" rel=\"nofollow noreferrer\">https://docs.python.org/3.8/library/os.html#os.cpu_count</a></p>\n<blockquote>\n<p>This number is not equivalent to the number of CPUs the current process can use. The number of usable CPUs can be obtained with <code>len(os.sched_getaffinity(0))</code></p>\n</blockquote>\n<p>The same comment is also copied on the documentation of <code>multiprocessing.cpu_count</code>: <a href=\"https://docs.python.org/3/library/multiprocessing.html#multiprocessing.cpu_count\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/multiprocessing.html#multiprocessing.cpu_count</a></p>\n<p>From the 3.8 source under <a href=\"https://github.com/python/cpython/blob/v3.8.5/Lib/multiprocessing/context.py#L41\" rel=\"nofollow noreferrer\"><code>Lib/multiprocessing/context.py</code></a> we also see that <code>multiprocessing.cpu_count</code> just forwards to <code>os.cpu_count</code>, except that the <code>multiprocessing</code> one throws an exception instead of returning None if <code>os.cpu_count</code> fails:</p>\n<pre><code>    def cpu_count(self):\n        '''Returns the number of CPUs in the system'''\n        num = os.cpu_count()\n        if num is None:\n            raise NotImplementedError('cannot determine number of cpus')\n        else:\n            return num\n</code></pre>\n<p><strong>3.8 availability: systems with a native <code>sched_getaffinity</code> function</strong></p>\n<p>The only downside of this <code>os.sched_getaffinity</code> is that this appears to be UNIX only as of Python 3.8.</p>\n<p>cpython 3.8 seems to just try to compile a small C hello world with a <code>sched_setaffinity</code> function call during configuration time, and if not present <code>HAVE_SCHED_SETAFFINITY</code> is not set and the function will likely be missing:</p>\n<ul>\n<li><a href=\"https://github.com/python/cpython/blob/v3.8.5/configure#L11523\" rel=\"nofollow noreferrer\">https://github.com/python/cpython/blob/v3.8.5/configure#L11523</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/v3.8.5/Modules/posixmodule.c#L6457\" rel=\"nofollow noreferrer\">https://github.com/python/cpython/blob/v3.8.5/Modules/posixmodule.c#L6457</a></li>\n</ul>\n<p><strong><code>psutil.Process().cpu_affinity()</code>: third-party version with a Windows port</strong></p>\n<p>The third-party <a href=\"https://github.com/giampaolo/psutil\" rel=\"nofollow noreferrer\"><code>psutil</code> package</a> (<code>pip install psutil</code>) had been mentioned at: <a href=\"https://stackoverflow.com/a/14840102/895245\">https://stackoverflow.com/a/14840102/895245</a> but not the <code>cpu_affinity</code> function: <a href=\"https://psutil.readthedocs.io/en/latest/#psutil.Process.cpu_affinity\" rel=\"nofollow noreferrer\">https://psutil.readthedocs.io/en/latest/#psutil.Process.cpu_affinity</a></p>\n<p>Usage:</p>\n<pre><code>import psutil\nprint(len(psutil.Process().cpu_affinity()))\n</code></pre>\n<p>This function does the same as the standard library <code>os.sched_getaffinity</code> on Linux, but they have also implemented it for Windows by making a call to the <code>GetProcessAffinityMask</code> Windows API function:</p>\n<ul>\n<li><a href=\"https://github.com/giampaolo/psutil/blob/ee60bad610822a7f630c52922b4918e684ba7695/psutil/_psutil_windows.c#L1112\" rel=\"nofollow noreferrer\">https://github.com/giampaolo/psutil/blob/ee60bad610822a7f630c52922b4918e684ba7695/psutil/_psutil_windows.c#L1112</a></li>\n<li><a href=\"https://learn.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-getprocessaffinitymask\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-getprocessaffinitymask</a></li>\n</ul>\n<p>So in other words: those Windows users have to stop being lazy and send a patch to the upstream stdlib :-)</p>\n<p>Tested in Ubuntu 16.04, Python 3.5.2.</p>\n<p><strong><code>os.process_cpu_count()</code> (Python 3.13)</strong></p>\n<p><a href=\"https://docs.python.org/3.13/library/os.html#os.process_cpu_count\" rel=\"nofollow noreferrer\">https://docs.python.org/3.13/library/os.html#os.process_cpu_count</a></p>\n<p>This seems to be the same as <code>len(os.sched_getaffinity(0))</code>, except that:</p>\n<ul>\n<li>it can be overridden by the <code>-X cpu_count</code> Python CLI argumentor the <code>PYTHON_CPU_COUNT</code> environment variable</li>\n<li>TODO confirm: it might fall back nicely on platforms where devs were too lazy to implement <code>sched_getaffinity</code> rather than blow an exception</li>\n</ul>\n<p>Mentioned <a href=\"https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/55423170?noredirect=1#comment137818389_55423170\">by jfs in the comments</a>.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 6600681,
                        "reputation": 1988,
                        "user_id": 5678653,
                        "user_type": "registered",
                        "display_name": "Konchog"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 13,
                    "last_activity_date": 1573127248,
                    "creation_date": 1573127248,
                    "answer_id": 58748125,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/58748125#58748125",
                    "body": "<p>This may work for those of us who use different os/systems, but want to get the best of all worlds:</p>\n\n<pre><code>import os\nworkers = os.cpu_count()\nif 'sched_getaffinity' in dir(os):\n    workers = len(os.sched_getaffinity(0))\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7490271,
                                "reputation": 164,
                                "user_id": 5692237,
                                "user_type": "registered",
                                "display_name": "Eli Simhayev"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1621251625,
                            "post_id": 66266501,
                            "comment_id": 119430481,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/66266501#comment119430481_66266501",
                            "body": "This answer should NOT be the first answer. Why to use <code>torch</code>, a deep learning framework, for a such easy task?  Just run:  <code>python -c &quot;import multiprocessing; print(multiprocessing.cpu_count())&quot;</code>"
                        },
                        {
                            "owner": {
                                "account_id": 1589784,
                                "reputation": 6089,
                                "user_id": 1601580,
                                "user_type": "registered",
                                "accept_rate": 47,
                                "display_name": "Charlie Parker"
                            },
                            "reply_to_user": {
                                "account_id": 7490271,
                                "reputation": 164,
                                "user_id": 5692237,
                                "user_type": "registered",
                                "display_name": "Eli Simhayev"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1621265862,
                            "post_id": 66266501,
                            "comment_id": 119437493,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/66266501#comment119437493_66266501",
                            "body": "@EliSimhayev oh I forgot that actually the torch mp module has the same interface so they are the same but will add details ;)  and no it&#39;s not the first answer, there are some before me :)"
                        }
                    ],
                    "owner": {
                        "account_id": 1589784,
                        "reputation": 6089,
                        "user_id": 1601580,
                        "user_type": "registered",
                        "accept_rate": 47,
                        "display_name": "Charlie Parker"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1621265905,
                    "last_edit_date": 1621265905,
                    "creation_date": 1613674949,
                    "answer_id": 66266501,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/66266501#66266501",
                    "body": "<p>If you are using torch you can do:</p>\n<pre><code>import torch.multiprocessing as mp\n\nmp.cpu_count()\n</code></pre>\n<p>the mp library in torch has the same interface as the main python one so you can do this too as the commenter mentioned:</p>\n<pre><code>python -c &quot;import multiprocessing; print(multiprocessing.cpu_count())&quot;\n</code></pre>\n<p>hope this helps! ;) it's always nice to have more than 1 option.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 5828920,
                        "reputation": 608,
                        "user_id": 4594212,
                        "user_type": "registered",
                        "display_name": "Jabir Ali"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 27,
                    "last_activity_date": 1625656881,
                    "creation_date": 1625656881,
                    "answer_id": 68285053,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/68285053#68285053",
                    "body": "<p>For python version above 3.4 you can use</p>\n<pre><code>import os\nos.cpu_count()\n</code></pre>\n<p>If you are looking for an equivanlent of linux command <code>nproc</code>. You have this option</p>\n<pre><code>len(os.sched_getaffinity(0))\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6931568,
                                "reputation": 52517,
                                "user_id": 5320906,
                                "user_type": "registered",
                                "display_name": "snakecharmerb"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1632245130,
                            "post_id": 69272889,
                            "comment_id": 122438533,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/69272889#comment122438533_69272889",
                            "body": "This solution is already provided in <a href=\"https://stackoverflow.com/a/25636145/5320906\">this existing answer</a>.  When answering old questions, please ensure that your answer provides a distinct and valuable contribution to the Q&amp;A."
                        },
                        {
                            "owner": {
                                "account_id": 17154415,
                                "reputation": 481,
                                "user_id": 12415637,
                                "user_type": "registered",
                                "display_name": "Ranjeet R Patil"
                            },
                            "reply_to_user": {
                                "account_id": 6931568,
                                "reputation": 52517,
                                "user_id": 5320906,
                                "user_type": "registered",
                                "display_name": "snakecharmerb"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1632246053,
                            "post_id": 69272889,
                            "comment_id": 122438890,
                            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/69272889#comment122438890_69272889",
                            "body": "ok thanks will provide suitable information."
                        }
                    ],
                    "owner": {
                        "account_id": 17154415,
                        "reputation": 481,
                        "user_id": 12415637,
                        "user_type": "registered",
                        "display_name": "Ranjeet R Patil"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": -3,
                    "last_activity_date": 1632244078,
                    "creation_date": 1632244078,
                    "answer_id": 69272889,
                    "question_id": 1006289,
                    "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python/69272889#69272889",
                    "body": "<p>If you are looking for printing the number of cores in your system.</p>\n<p><strong>Try this:</strong></p>\n<pre><code>import os \nno_of_cores = os.cpu_count()\nprint(no_of_cores)\n</code></pre>\n<p>This should help.</p>\n"
                }
            ],
            "owner": {
                "account_id": 16209,
                "reputation": 283906,
                "user_id": 35070,
                "user_type": "registered",
                "accept_rate": 78,
                "display_name": "phihag"
            },
            "comment_count": 2,
            "is_answered": true,
            "accepted_answer_id": 1006301,
            "answer_count": 15,
            "score": 827,
            "last_activity_date": 1710667022,
            "creation_date": 1245235304,
            "last_edit_date": 1416641804,
            "question_id": 1006289,
            "link": "https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python",
            "title": "How to find out the number of CPUs using python",
            "body": "<p>I want to know the number of CPUs on the local machine using Python. The result should be <code>user/real</code> as output by <code>time(1)</code> when called with an optimally scaling userspace-only program.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 5576
}