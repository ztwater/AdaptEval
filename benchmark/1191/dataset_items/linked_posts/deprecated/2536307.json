{
    "items": [
        {
            "tags": [
                "python",
                "decorator",
                "deprecated"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 3767962,
                        "reputation": 13547,
                        "user_id": 3130926,
                        "user_type": "registered",
                        "accept_rate": 82,
                        "display_name": "muon"
                    },
                    "edited": false,
                    "score": 23,
                    "creation_date": 1509570810,
                    "post_id": 2536307,
                    "comment_id": 81075691,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically#comment81075691_2536307",
                    "body": "now there is a <a href=\"https://pypi.python.org/pypi/deprecation\" rel=\"nofollow noreferrer\">deprecation</a> package"
                },
                {
                    "owner": {
                        "account_id": 1004669,
                        "reputation": 4320,
                        "user_id": 1018733,
                        "user_type": "registered",
                        "accept_rate": 46,
                        "display_name": "SwimBikeRun"
                    },
                    "edited": false,
                    "score": 21,
                    "creation_date": 1554130666,
                    "post_id": 2536307,
                    "comment_id": 97628948,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically#comment97628948_2536307",
                    "body": "I understand the ways to do it, but came here for some insight on why it&#39;s not in the std lib (as I assume is the case of the OP) and don&#39;t see a good answer to the actual question"
                },
                {
                    "owner": {
                        "account_id": 37371,
                        "reputation": 18575,
                        "user_id": 106797,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Catskul"
                    },
                    "edited": false,
                    "score": 23,
                    "creation_date": 1556815592,
                    "post_id": 2536307,
                    "comment_id": 98565539,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically#comment98565539_2536307",
                    "body": "Why does it happen so often that questions get dozens of answers that don&#39;t even attempt to answer the question, and actively ignore things like &quot;I&#39;m aware of recipes&quot;? It&#39;s maddening!"
                },
                {
                    "owner": {
                        "account_id": 29108,
                        "reputation": 141391,
                        "user_id": 78374,
                        "user_type": "registered",
                        "accept_rate": 67,
                        "display_name": "Stefano Borini"
                    },
                    "reply_to_user": {
                        "account_id": 37371,
                        "reputation": 18575,
                        "user_id": 106797,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Catskul"
                    },
                    "edited": false,
                    "score": 8,
                    "creation_date": 1556824059,
                    "post_id": 2536307,
                    "comment_id": 98569205,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically#comment98569205_2536307",
                    "body": "@Catskul because of fake internet points."
                },
                {
                    "owner": {
                        "account_id": 379606,
                        "reputation": 5997,
                        "user_id": 733092,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "Noumenon"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1615035517,
                    "post_id": 2536307,
                    "comment_id": 117570017,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically#comment117570017_2536307",
                    "body": "The OP rules out <code>warnings.warn</code>, but for those who aren&#39;t aware of it, I prefer it to anything found here for deprecation. <a href=\"https://stackoverflow.com/a/9008488/733092\">stackoverflow.com/a/9008488/733092</a>"
                },
                {
                    "owner": {
                        "account_id": 3506652,
                        "reputation": 9887,
                        "user_id": 2932052,
                        "user_type": "registered",
                        "accept_rate": 73,
                        "display_name": "Wolf"
                    },
                    "reply_to_user": {
                        "account_id": 37371,
                        "reputation": 18575,
                        "user_id": 106797,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Catskul"
                    },
                    "edited": false,
                    "score": 2,
                    "creation_date": 1622118086,
                    "post_id": 2536307,
                    "comment_id": 119702030,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically#comment119702030_2536307",
                    "body": "@Catskul Aren&#39;t <i>why</i> questions deprecated at all or shouldn&#39;t they be on SO? As we see so often, they tend to produce nonanswers. I would not have left this comment if I had not seen all your <i>doesn&#39;t answer</i> decorators \ud83d\ude09"
                },
                {
                    "owner": {
                        "account_id": 37371,
                        "reputation": 18575,
                        "user_id": 106797,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Catskul"
                    },
                    "edited": false,
                    "score": 3,
                    "creation_date": 1622129659,
                    "post_id": 2536307,
                    "comment_id": 119708311,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically#comment119708311_2536307",
                    "body": "I&#39;m unaware of any ruling against &quot;why&quot; questions, but IMO lots of &quot;why&quot; questions are likely to have a succinct answer, and the question/answers can be important so I&#39;d be sad if they were disallowed."
                },
                {
                    "owner": {
                        "account_id": 1202282,
                        "reputation": 1607,
                        "user_id": 1172685,
                        "user_type": "registered",
                        "display_name": "Darren Weber"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1678992171,
                    "post_id": 2536307,
                    "comment_id": 133645203,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically#comment133645203_2536307",
                    "body": "Watch <a href=\"https://peps.python.org/pep-0702/\" rel=\"nofollow noreferrer\">peps.python.org/pep-0702</a> (slated for python 3.12)"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 51862,
                                "reputation": 1740,
                                "user_id": 154970,
                                "user_type": "registered",
                                "display_name": "Janusz Lenar"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1361438633,
                            "post_id": 2536397,
                            "comment_id": 21067370,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/2536397#comment21067370_2536397",
                            "body": "And you should be able to indicate deprecation <b>when the function is imported from the module</b>. Decorator would be a right tool for that."
                        },
                        {
                            "owner": {
                                "account_id": 81935,
                                "reputation": 12943,
                                "user_id": 230744,
                                "user_type": "registered",
                                "accept_rate": 91,
                                "display_name": "ony"
                            },
                            "reply_to_user": {
                                "account_id": 51862,
                                "reputation": 1740,
                                "user_id": 154970,
                                "user_type": "registered",
                                "display_name": "Janusz Lenar"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1361446639,
                            "post_id": 2536397,
                            "comment_id": 21071683,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/2536397#comment21071683_2536397",
                            "body": "@JanuszLenar, that warning will be show even if we don&#39;t use that deprecated function. But I guess I can update my answer with some hint."
                        }
                    ],
                    "owner": {
                        "account_id": 81935,
                        "reputation": 12943,
                        "user_id": 230744,
                        "user_type": "registered",
                        "accept_rate": 91,
                        "display_name": "ony"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 19,
                    "last_activity_date": 1361446818,
                    "last_edit_date": 1361446818,
                    "creation_date": 1269848188,
                    "answer_id": 2536397,
                    "question_id": 2536307,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/2536397#2536397",
                    "body": "<p>I guess the reason is that Python code can't be processed statically (as it done for C++ compilers), you can't get warning about using some things before actually using it. I don't think that it's a good idea to spam user of your script with a bunch of messages \"Warning: this developer of this script is using deprecated API\".</p>\n\n<p><strong>Update:</strong> but you can create decorator which will transform original function into another. New function will mark/check switch telling that this function was called already and will show message only on turning switch into on state. And/or at exit it may print list of all deprecated functions used in program.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3679494,
                                "reputation": 8020,
                                "user_id": 3064736,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "Maximilian"
                            },
                            "edited": false,
                            "score": 14,
                            "creation_date": 1438872026,
                            "post_id": 30253848,
                            "comment_id": 51636910,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/30253848#comment51636910_30253848",
                            "body": "Why not use <code>functools.wraps</code> rather than setting the name and doc like that?"
                        },
                        {
                            "owner": {
                                "account_id": 36018,
                                "reputation": 96689,
                                "user_id": 102441,
                                "user_type": "registered",
                                "accept_rate": 76,
                                "display_name": "Eric"
                            },
                            "reply_to_user": {
                                "account_id": 3679494,
                                "reputation": 8020,
                                "user_id": 3064736,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "Maximilian"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1467086385,
                            "post_id": 30253848,
                            "comment_id": 63571961,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/30253848#comment63571961_30253848",
                            "body": "@Maximilian: Edited to add that, to save future copy-pasters of this code from doing it wrong too"
                        },
                        {
                            "owner": {
                                "account_id": 63740,
                                "reputation": 3886,
                                "user_id": 188530,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "Kentzo"
                            },
                            "edited": false,
                            "score": 35,
                            "creation_date": 1492537701,
                            "post_id": 30253848,
                            "comment_id": 74013279,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/30253848#comment74013279_30253848",
                            "body": "I do not like side effect (turning the filter on / off). It&#39;s not the job of the decorator to decide this."
                        },
                        {
                            "owner": {
                                "account_id": 935589,
                                "reputation": 25266,
                                "user_id": 974555,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "gerrit"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1499444006,
                            "post_id": 30253848,
                            "comment_id": 76925935,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/30253848#comment76925935_30253848",
                            "body": "Turning the filter on and off may trigger <a href=\"http://bugs.python.org/issue29672\" rel=\"nofollow noreferrer\">bugs.python.org/issue29672</a>"
                        },
                        {
                            "owner": {
                                "account_id": 37371,
                                "reputation": 18575,
                                "user_id": 106797,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Catskul"
                            },
                            "edited": false,
                            "score": 25,
                            "creation_date": 1556815300,
                            "post_id": 30253848,
                            "comment_id": 98565416,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/30253848#comment98565416_30253848",
                            "body": "doesn&#39;t answer the actual question."
                        },
                        {
                            "owner": {
                                "account_id": 68898,
                                "reputation": 1893,
                                "user_id": 200794,
                                "user_type": "registered",
                                "display_name": "FeRD"
                            },
                            "reply_to_user": {
                                "account_id": 37371,
                                "reputation": 18575,
                                "user_id": 106797,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Catskul"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1594139737,
                            "post_id": 30253848,
                            "comment_id": 111019603,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/30253848#comment111019603_30253848",
                            "body": "@Catskul The actual question would likely be subject to closure as being too subjective."
                        },
                        {
                            "owner": {
                                "account_id": 2218943,
                                "reputation": 6852,
                                "user_id": 1958900,
                                "user_type": "registered",
                                "display_name": "Aaron"
                            },
                            "reply_to_user": {
                                "account_id": 63740,
                                "reputation": 3886,
                                "user_id": 188530,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "Kentzo"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1607376862,
                            "post_id": 30253848,
                            "comment_id": 115248896,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/30253848#comment115248896_30253848",
                            "body": "Strongly agree with @Kentzo - disabling filters then resetting them to defaults is going to give some developer an amazing headache"
                        },
                        {
                            "owner": {
                                "account_id": 2961230,
                                "reputation": 3214,
                                "user_id": 3067276,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "fonini"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1648649005,
                            "post_id": 30253848,
                            "comment_id": 126678363,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/30253848#comment126678363_30253848",
                            "body": "Why <code>stackevel=2</code> here? What&#39;s deprecated is calling <code>new_func</code>, not calling the caller of <code>new_func</code>. (Note that <code>new_func</code> is what&#39;s actually called whenever someone calls the function that was decorated.) See the example case of using <code>stacklevel</code> in the documentation: <a href=\"https://docs.python.org/3/library/warnings.html#warnings.warn\" rel=\"nofollow noreferrer\">docs.python.org/3/library/warnings.html#warnings.warn</a> I don&#39;t think it applies here."
                        }
                    ],
                    "owner": {
                        "account_id": 1382826,
                        "reputation": 2658,
                        "user_id": 1315480,
                        "user_type": "registered",
                        "accept_rate": 77,
                        "display_name": "Patrizio Bertoni"
                    },
                    "comment_count": 8,
                    "is_accepted": false,
                    "score": 93,
                    "last_activity_date": 1517155487,
                    "last_edit_date": 1517155487,
                    "creation_date": 1431674668,
                    "answer_id": 30253848,
                    "question_id": 2536307,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/30253848#30253848",
                    "body": "<p>Here's some snippet, modified from those cited by Leandro:</p>\n\n<pre><code>import warnings\nimport functools\n\ndef deprecated(func):\n    \"\"\"This is a decorator which can be used to mark functions\n    as deprecated. It will result in a warning being emitted\n    when the function is used.\"\"\"\n    @functools.wraps(func)\n    def new_func(*args, **kwargs):\n        warnings.simplefilter('always', DeprecationWarning)  # turn off filter\n        warnings.warn(\"Call to deprecated function {}.\".format(func.__name__),\n                      category=DeprecationWarning,\n                      stacklevel=2)\n        warnings.simplefilter('default', DeprecationWarning)  # reset filter\n        return func(*args, **kwargs)\n    return new_func\n\n# Examples\n\n@deprecated\ndef some_old_function(x, y):\n    return x + y\n\nclass SomeClass:\n    @deprecated\n    def some_old_method(self, x, y):\n        return x + y\n</code></pre>\n\n<p>Because in some interpreters the first solution exposed (without filter handling) may result in a warning suppression.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 186634,
                                "reputation": 11851,
                                "user_id": 424153,
                                "user_type": "registered",
                                "accept_rate": 82,
                                "display_name": "Zero"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1480375498,
                            "post_id": 40301488,
                            "comment_id": 68927123,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/40301488#comment68927123_40301488",
                            "body": "Works, well - I prefer replacing the <code>warn_explicit</code> line with <code>warnings.warn(msg, category=DeprecationWarning, stacklevel=2)</code> which prints the function call site rather than the function definition site. It makes debugging easier."
                        },
                        {
                            "owner": {
                                "account_id": 935589,
                                "reputation": 25266,
                                "user_id": 974555,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "gerrit"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1499447970,
                            "post_id": 40301488,
                            "comment_id": 76927971,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/40301488#comment76927971_40301488",
                            "body": "Hello, I would like to use your code snippet in <a href=\"https://github.com/FIDUCEO/FCDR_HIRS/\" rel=\"nofollow noreferrer\">a GPLv3-licensed library</a>.  Would you be willing to relicense your code under GPLv3 <a href=\"https://opensource.stackexchange.com/a/3/33\">or any more permissive license</a>, so that I can legally do so?"
                        },
                        {
                            "owner": {
                                "account_id": 1641621,
                                "reputation": 22484,
                                "user_id": 1513933,
                                "user_type": "registered",
                                "accept_rate": 84,
                                "display_name": "Laurent LAPORTE"
                            },
                            "reply_to_user": {
                                "account_id": 935589,
                                "reputation": 25266,
                                "user_id": 974555,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "gerrit"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1499595332,
                            "post_id": 40301488,
                            "comment_id": 76964556,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/40301488#comment76964556_40301488",
                            "body": "@gerrit: <a href=\"https://stackoverflow.com/help/licensing\">All user contributions are licensed under Creative Commons Attribution-Share Alike</a>."
                        },
                        {
                            "owner": {
                                "account_id": 935589,
                                "reputation": 25266,
                                "user_id": 974555,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "gerrit"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1499610459,
                            "post_id": 40301488,
                            "comment_id": 76968813,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/40301488#comment76968813_40301488",
                            "body": "@LaurentLAPORTE I know.  CC-BY-SO does not permit usage within GPLv3 (because of the share-alike bit), which is why I&#39;m asking if you would be willing to release this code specifically additionally under a GPL-compatible license.  If not, that&#39;s fine, and I won&#39;t use your code."
                        },
                        {
                            "owner": {
                                "account_id": 37371,
                                "reputation": 18575,
                                "user_id": 106797,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Catskul"
                            },
                            "edited": false,
                            "score": 15,
                            "creation_date": 1556815330,
                            "post_id": 40301488,
                            "comment_id": 98565432,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/40301488#comment98565432_40301488",
                            "body": "doesn&#39;t answer the actual question."
                        },
                        {
                            "owner": {
                                "account_id": 17240,
                                "reputation": 17760,
                                "user_id": 38368,
                                "user_type": "registered",
                                "accept_rate": 96,
                                "display_name": "Danny Varod"
                            },
                            "reply_to_user": {
                                "account_id": 935589,
                                "reputation": 25266,
                                "user_id": 974555,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "gerrit"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1620556773,
                            "post_id": 40301488,
                            "comment_id": 119230952,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/40301488#comment119230952_40301488",
                            "body": "@gerrit GPL is actual a much less permissive license than most others. In many cases GPL should be avoided."
                        },
                        {
                            "owner": {
                                "account_id": 935589,
                                "reputation": 25266,
                                "user_id": 974555,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "gerrit"
                            },
                            "reply_to_user": {
                                "account_id": 17240,
                                "reputation": 17760,
                                "user_id": 38368,
                                "user_type": "registered",
                                "accept_rate": 96,
                                "display_name": "Danny Varod"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1620591782,
                            "post_id": 40301488,
                            "comment_id": 119240142,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/40301488#comment119240142_40301488",
                            "body": "@DannyVarod I know, but for code, CC-BY-SA is even more restrictive than GPL.  When I asked the question, I was working on a GPL library.  GPL libraries can use GPL code or more permissive code, but GPL libraries can <i>not</i> use CC-BY-SA code, so I was not able to use this code snippet. (And CC-BY-SA was never used for code anyway; SO would do good in licensing code snippets in user contributions under something more permissive, because as it is now, most users cannot use code snippets they find on SO)"
                        }
                    ],
                    "owner": {
                        "account_id": 1641621,
                        "reputation": 22484,
                        "user_id": 1513933,
                        "user_type": "registered",
                        "accept_rate": 84,
                        "display_name": "Laurent LAPORTE"
                    },
                    "comment_count": 7,
                    "is_accepted": false,
                    "score": 82,
                    "last_activity_date": 1630842970,
                    "last_edit_date": 1630842970,
                    "creation_date": 1477644949,
                    "answer_id": 40301488,
                    "question_id": 2536307,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/40301488#40301488",
                    "body": "<p>Here is another solution:</p>\n<p>This decorator (a <a href=\"https://stackoverflow.com/questions/739654\">decorator factory</a> in fact) allow you to give a <strong>reason</strong> message. It is also more useful to help the developer to diagnose the problem by giving the source <strong>filename</strong> and <strong>line number</strong>.</p>\n<p><strong>EDIT</strong>: This code use Zero's recommendation: it replace <code>warnings.warn_explicit</code> line by <code>warnings.warn(msg, category=DeprecationWarning, stacklevel=2)</code>,\nwhich prints the function call site rather than the function definition site. It makes debugging easier.</p>\n<p><strong>EDIT2</strong>: This version allow the developper to specify an optional &quot;reason&quot; message.</p>\n<pre><code>import functools\nimport inspect\nimport warnings\n\nstring_types = (type(b''), type(u''))\n\n\ndef deprecated(reason):\n    &quot;&quot;&quot;\n    This is a decorator which can be used to mark functions\n    as deprecated. It will result in a warning being emitted\n    when the function is used.\n    &quot;&quot;&quot;\n\n    if isinstance(reason, string_types):\n\n        # The @deprecated is used with a 'reason'.\n        #\n        # .. code-block:: python\n        #\n        #    @deprecated(&quot;please, use another function&quot;)\n        #    def old_function(x, y):\n        #      pass\n\n        def decorator(func1):\n\n            if inspect.isclass(func1):\n                fmt1 = &quot;Call to deprecated class {name} ({reason}).&quot;\n            else:\n                fmt1 = &quot;Call to deprecated function {name} ({reason}).&quot;\n\n            @functools.wraps(func1)\n            def new_func1(*args, **kwargs):\n                warnings.simplefilter('always', DeprecationWarning)\n                warnings.warn(\n                    fmt1.format(name=func1.__name__, reason=reason),\n                    category=DeprecationWarning,\n                    stacklevel=2\n                )\n                warnings.simplefilter('default', DeprecationWarning)\n                return func1(*args, **kwargs)\n\n            return new_func1\n\n        return decorator\n\n    elif inspect.isclass(reason) or inspect.isfunction(reason):\n\n        # The @deprecated is used without any 'reason'.\n        #\n        # .. code-block:: python\n        #\n        #    @deprecated\n        #    def old_function(x, y):\n        #      pass\n\n        func2 = reason\n\n        if inspect.isclass(func2):\n            fmt2 = &quot;Call to deprecated class {name}.&quot;\n        else:\n            fmt2 = &quot;Call to deprecated function {name}.&quot;\n\n        @functools.wraps(func2)\n        def new_func2(*args, **kwargs):\n            warnings.simplefilter('always', DeprecationWarning)\n            warnings.warn(\n                fmt2.format(name=func2.__name__),\n                category=DeprecationWarning,\n                stacklevel=2\n            )\n            warnings.simplefilter('default', DeprecationWarning)\n            return func2(*args, **kwargs)\n\n        return new_func2\n\n    else:\n        raise TypeError(repr(type(reason)))\n</code></pre>\n<p>You can use this decorator for <strong>functions</strong>, <strong>methods</strong> and <strong>classes</strong>.</p>\n<p>Here is a simple example:</p>\n<pre><code>@deprecated(&quot;use another function&quot;)\ndef some_old_function(x, y):\n    return x + y\n\n\nclass SomeClass(object):\n    @deprecated(&quot;use another method&quot;)\n    def some_old_method(self, x, y):\n        return x + y\n\n\n@deprecated(&quot;use another class&quot;)\nclass SomeOldClass(object):\n    pass\n\n\nsome_old_function(5, 3)\nSomeClass().some_old_method(8, 9)\nSomeOldClass()\n</code></pre>\n<p>You'll get:</p>\n<pre><code>deprecated_example.py:59: DeprecationWarning: Call to deprecated function or method some_old_function (use another function).\n  some_old_function(5, 3)\ndeprecated_example.py:60: DeprecationWarning: Call to deprecated function or method some_old_method (use another method).\n  SomeClass().some_old_method(8, 9)\ndeprecated_example.py:61: DeprecationWarning: Call to deprecated class SomeOldClass (use another class).\n  SomeOldClass()\n</code></pre>\n<p><strong>EDIT3:</strong> This decorator is now part of the Deprecated library:</p>\n<ul>\n<li><a href=\"https://pypi.python.org/pypi/deprecated\" rel=\"noreferrer\">Python package index (PyPi)</a></li>\n<li><a href=\"https://github.com/tantale/deprecated\" rel=\"noreferrer\">GitHub website</a></li>\n<li><a href=\"http://deprecated.readthedocs.io/en/latest/\" rel=\"noreferrer\">Read The Docs</a></li>\n<li><a href=\"https://twitter.com/laporte_laurent/status/1154836786323099648?s=20\" rel=\"noreferrer\">Twitter</a></li>\n</ul>\n<p>New stable release v1.2.13 \ud83c\udf89</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 206955,
                                "reputation": 23043,
                                "user_id": 456564,
                                "user_type": "registered",
                                "accept_rate": 89,
                                "display_name": "German Attanasio"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1517868187,
                            "post_id": 48632082,
                            "comment_id": 84261566,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/48632082#comment84261566_48632082",
                            "body": "Thanks, I&#39;m using this to send the user to the right place instead of just showing the deprecation message!"
                        },
                        {
                            "owner": {
                                "account_id": 37371,
                                "reputation": 18575,
                                "user_id": 106797,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Catskul"
                            },
                            "edited": false,
                            "score": 17,
                            "creation_date": 1556815358,
                            "post_id": 48632082,
                            "comment_id": 98565443,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/48632082#comment98565443_48632082",
                            "body": "doesn&#39;t answer the actual question."
                        }
                    ],
                    "owner": {
                        "account_id": 10334849,
                        "reputation": 1043,
                        "user_id": 7623365,
                        "user_type": "registered",
                        "display_name": "Erika Dsouza"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 18,
                    "last_activity_date": 1674542032,
                    "last_edit_date": 1674542032,
                    "creation_date": 1517867452,
                    "answer_id": 48632082,
                    "question_id": 2536307,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/48632082#48632082",
                    "body": "<p>You can create a utils file</p>\n<pre><code>import warnings\n\ndef deprecated(message):\n  def deprecated_decorator(func):\n      def deprecated_func(*args, **kwargs):\n          warnings.warn(&quot;{} is a deprecated function. {}&quot;.format(func.__name__, message),\n                        category=DeprecationWarning,\n                        stacklevel=2)\n          warnings.simplefilter('default', DeprecationWarning)\n          return func(*args, **kwargs)\n      return deprecated_func\n  return deprecated_decorator\n</code></pre>\n<p>And then import the deprecation decorator as follows:</p>\n<pre><code>from .utils import deprecated\n\n@deprecated(&quot;Use method yyy instead&quot;)\ndef some_method():\n pass\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 37371,
                                "reputation": 18575,
                                "user_id": 106797,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Catskul"
                            },
                            "edited": false,
                            "score": 21,
                            "creation_date": 1556815382,
                            "post_id": 50377180,
                            "comment_id": 98565452,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/50377180#comment98565452_50377180",
                            "body": "doesn&#39;t answer the actual question."
                        },
                        {
                            "owner": {
                                "account_id": 4422027,
                                "reputation": 8419,
                                "user_id": 3601660,
                                "user_type": "registered",
                                "accept_rate": 61,
                                "display_name": "c z"
                            },
                            "edited": false,
                            "score": 8,
                            "creation_date": 1566557732,
                            "post_id": 50377180,
                            "comment_id": 101703296,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/50377180#comment101703296_50377180",
                            "body": "Note <i>PyCharm</i> doesn&#39;t recognise this"
                        }
                    ],
                    "owner": {
                        "account_id": 4030991,
                        "reputation": 25340,
                        "user_id": 3357935,
                        "user_type": "registered",
                        "accept_rate": 82,
                        "display_name": "Stevoisiak"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 32,
                    "last_activity_date": 1528671812,
                    "last_edit_date": 1528671812,
                    "creation_date": 1526492977,
                    "answer_id": 50377180,
                    "question_id": 2536307,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/50377180#50377180",
                    "body": "<p><a href=\"https://stackoverflow.com/questions/2536307/how-do-i-deprecate-python-functions#comment81075691_2536307\">As muon suggested</a>, you can install the <a href=\"https://pypi.org/project/deprecation/#description\" rel=\"noreferrer\"><code>deprecation</code></a> package for this.</p>\n\n<blockquote>\n  <p>The <code>deprecation</code> library provides a <code>deprecated</code> decorator and a <code>fail_if_not_removed</code> decorator for your tests.</p>\n</blockquote>\n\n<h3>Installation</h3>\n\n<pre><code>pip install deprecation\n</code></pre>\n\n<h3>Example Usage</h3>\n\n<pre><code>import deprecation\n\n@deprecation.deprecated(deprecated_in=\"1.0\", removed_in=\"2.0\",\n                        current_version=__version__,\n                        details=\"Use the bar function instead\")\ndef foo():\n    \"\"\"Do some stuff\"\"\"\n    return 1\n</code></pre>\n\n<p>See <a href=\"http://deprecation.readthedocs.io/\" rel=\"noreferrer\">http://deprecation.readthedocs.io/</a> for the full documentation.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 381332,
                                "reputation": 18968,
                                "user_id": 735926,
                                "user_type": "registered",
                                "accept_rate": 95,
                                "display_name": "bfontaine"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1697734883,
                            "post_id": 71201209,
                            "comment_id": 136320252,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/71201209#comment136320252_71201209",
                            "body": "Python is a dynamically-typed language, but it does have static typing through the <code>typing</code>  module. This typing has no effect at runtime; it\u2019s only used by static analysis tools such as <code>mypy</code> or editor integrations. I\u2019m downvoting this answer because it suggests a solution that was <b>explicitely</b> mentioned as unsatisfying in the question body. Runtime warnings work, but they don\u2019t tell mypy or your editor that this function is deprecated."
                        }
                    ],
                    "owner": {
                        "user_type": "does_not_exist",
                        "display_name": "user8234870"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1645432950,
                    "last_edit_date": 1645432950,
                    "creation_date": 1645417208,
                    "answer_id": 71201209,
                    "question_id": 2536307,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/71201209#71201209",
                    "body": "<p><code>Python</code> is a <strong>dynamically</strong> typed language. Not necessary declare the type to variable or argument type for function statically.</p>\n<p>Since its dynamic every thing if processed at runtime. Even if a method is deprecated it will be known at runtime or during interpretation only.</p>\n<p>use <a href=\"https://deprecation.readthedocs.io/en/latest/#api-documentation\" rel=\"nofollow noreferrer\"><strong>deprecation</strong></a> module to deprecate methods.</p>\n<blockquote>\n<p>deprecation is a library that enables automated deprecations. It\noffers the <strong><a href=\"https://deprecation.readthedocs.io/en/latest/#deprecation.deprecated\" rel=\"nofollow noreferrer\">deprecated()</a></strong> decorator to wrap functions, providing proper\nwarnings both in documentation and via Python\u2019s <strong><a href=\"https://docs.python.org/dev/library/warnings.html#module-warnings\" rel=\"nofollow noreferrer\">warnings</a></strong> system, as\nwell as the <strong><a href=\"https://deprecation.readthedocs.io/en/latest/#deprecation.fail_if_not_removed\" rel=\"nofollow noreferrer\">deprecation.fail_if_not_removed()</a></strong> decorator for test\nmethods to ensure that deprecated code is eventually removed.</p>\n</blockquote>\n<h2>Installing :</h2>\n<pre><code>python3.10 -m pip install deprecation\n</code></pre>\n<h2>Small demonstration:</h2>\n<pre><code>import deprecation\n\n@deprecation.deprecated(details=&quot;Use bar instead&quot;)\ndef foo():\n    print(&quot;Foo&quot;)\n\n\ndef bar():\n    print(&quot;Bar&quot;)\n\n\nfoo()\n\nbar()\n</code></pre>\n<h2>Output:</h2>\n<pre><code>test.py: DeprecatedWarning: foo is deprecated. Use bar instead\n  foo()\n\nFoo\n\nBar\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1632921,
                                "reputation": 3789,
                                "user_id": 1507124,
                                "user_type": "registered",
                                "display_name": "CervEd"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1691746350,
                            "post_id": 76510266,
                            "comment_id": 135536402,
                            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/76510266#comment135536402_76510266",
                            "body": "@Catskul, maybe this finally answers the question?"
                        }
                    ],
                    "owner": {
                        "account_id": 20133401,
                        "reputation": 1356,
                        "user_id": 14765128,
                        "user_type": "registered",
                        "display_name": "thehale"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 24,
                    "last_activity_date": 1711979253,
                    "last_edit_date": 1711979253,
                    "creation_date": 1687211712,
                    "answer_id": 76510266,
                    "question_id": 2536307,
                    "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically/76510266#76510266",
                    "body": "<p>A future Python version (after 3.13) will include the <a href=\"https://peps.python.org/pep-0702/\" rel=\"noreferrer\"><code>warnings.deprecated</code> decorator</a> which will indicate deprecations to type checkers like <code>mypy</code>.</p>\n<blockquote>\n<p>As an example, consider this library stub named library.pyi:</p>\n<pre><code>from warnings import deprecated\n\n@deprecated(&quot;Use Spam instead&quot;)\nclass Ham: ...\n\n@deprecated(&quot;It is pining for the fiords&quot;)\ndef norwegian_blue(x: int) -&gt; int: ...\n\n@overload\n@deprecated(&quot;Only str will be allowed&quot;)\ndef foo(x: int) -&gt; str: ...\n@overload\ndef foo(x: str) -&gt; str: ...\n</code></pre>\n<p>Here is how type checkers should handle usage of this library:</p>\n<pre><code>from library import Ham  # error: Use of deprecated class Ham. Use Spam instead.\n\nimport library\n\nlibrary.norwegian_blue(1)  # error: Use of deprecated function norwegian_blue. It is pining for the fiords.\nmap(library.norwegian_blue, [1, 2, 3])  # error: Use of deprecated function norwegian_blue. It is pining for the fiords.\n\nlibrary.foo(1)  # error: Use of deprecated overload for foo. Only str will be allowed.\nlibrary.foo(&quot;x&quot;)  # no error\n\nham = Ham()  # no error (already reported above)\n</code></pre>\n<blockquote>\n<p>Source: <a href=\"https://peps.python.org/pep-0702/\" rel=\"noreferrer\">PEP702</a></p>\n</blockquote>\n</blockquote>\n"
                }
            ],
            "owner": {
                "account_id": 29108,
                "reputation": 141391,
                "user_id": 78374,
                "user_type": "registered",
                "accept_rate": 67,
                "display_name": "Stefano Borini"
            },
            "comment_count": 8,
            "is_answered": true,
            "answer_count": 7,
            "score": 236,
            "last_activity_date": 1711979253,
            "creation_date": 1269846897,
            "last_edit_date": 1602519566,
            "question_id": 2536307,
            "link": "https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically",
            "title": "decorators in the python standard lib (@deprecated specifically)",
            "body": "<p>I need to mark routines as deprecated, but apparently there's no standard library decorator for deprecation. I am aware of recipes for it and the warnings module, but my question is: why is there no standard library decorator for this (common) task ? </p>\n\n<p>Additional question: are there standard decorators in the standard library at all ?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 7785
}