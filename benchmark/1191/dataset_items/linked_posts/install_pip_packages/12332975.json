{
    "items": [
        {
            "tags": [
                "python",
                "pip",
                "python-module",
                "pypi"
            ],
            "comments": [
                {
                    "owner": {
                        "user_type": "does_not_exist",
                        "display_name": "user2665694"
                    },
                    "edited": false,
                    "score": 4,
                    "creation_date": 1347125643,
                    "post_id": 12332975,
                    "comment_id": 16554272,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code#comment16554272_12332975",
                    "body": "Why don&#39;t you define the related module as dependency in the setup.py of your own package?"
                },
                {
                    "owner": {
                        "account_id": 258701,
                        "reputation": 112482,
                        "user_id": 541038,
                        "user_type": "registered",
                        "accept_rate": 94,
                        "display_name": "Joran Beasley"
                    },
                    "edited": false,
                    "score": 8,
                    "creation_date": 1347125746,
                    "post_id": 12332975,
                    "comment_id": 16554290,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code#comment16554290_12332975",
                    "body": "you know ... the way its actually supposed to be done ... but you could always os.system(&quot;pip install blah&quot;)  but you may need sudo access ... better to just make it a dependency in your setup.py"
                },
                {
                    "owner": {
                        "account_id": 556766,
                        "reputation": 132341,
                        "user_id": 918959,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "Antti Haapala -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                    },
                    "edited": false,
                    "score": 2,
                    "creation_date": 1575669194,
                    "post_id": 12332975,
                    "comment_id": 104656926,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code#comment104656926_12332975",
                    "body": "Would you consider changing the accepted answer here? Importing <code>pip</code> is never a good idea - the mere fact that all of its contents are in <code>_internal</code> starting from version 10..."
                },
                {
                    "owner": {
                        "account_id": 6141164,
                        "reputation": 39647,
                        "user_id": 4788546,
                        "user_type": "registered",
                        "display_name": "CristiFati"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1575893752,
                    "post_id": 12332975,
                    "comment_id": 104707191,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code#comment104707191_12332975",
                    "body": "Not related, but some complications that might occur: <a href=\"https://stackoverflow.com/questions/56974185/import-runtime-installed-module-using-pip-in-python-3\" title=\"import runtime installed module using pip in python 3\">stackoverflow.com/questions/56974185/&hellip;</a>."
                },
                {
                    "owner": {
                        "account_id": 978109,
                        "reputation": 6500,
                        "user_id": 998523,
                        "user_type": "registered",
                        "accept_rate": 72,
                        "display_name": "chuwy"
                    },
                    "reply_to_user": {
                        "account_id": 556766,
                        "reputation": 132341,
                        "user_id": 918959,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "Antti Haapala -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1576055958,
                    "post_id": 12332975,
                    "comment_id": 104770836,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code#comment104770836_12332975",
                    "body": "@AnttiHaapala I certainly can change it, but I still don&#39;t see a better solution."
                },
                {
                    "owner": {
                        "account_id": 556766,
                        "reputation": 132341,
                        "user_id": 918959,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "Antti Haapala -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                    },
                    "edited": false,
                    "score": 2,
                    "creation_date": 1576059992,
                    "post_id": 12332975,
                    "comment_id": 104773075,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code#comment104773075_12332975",
                    "body": "@chuwy <a href=\"https://stackoverflow.com/a/50255019/918959\">stackoverflow.com/a/50255019/918959</a> &lt;= this one. <code>pip._internal</code> is not designed to be importable, it can do absolutely random things when imported in another program."
                },
                {
                    "owner": {
                        "account_id": 15439067,
                        "reputation": 20597,
                        "user_id": 11138259,
                        "user_type": "registered",
                        "display_name": "sinoroc"
                    },
                    "reply_to_user": {
                        "account_id": 556766,
                        "reputation": 132341,
                        "user_id": 918959,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "Antti Haapala -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                    },
                    "edited": false,
                    "score": 2,
                    "creation_date": 1576159109,
                    "post_id": 12332975,
                    "comment_id": 104814628,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code#comment104814628_12332975",
                    "body": "@Antti is right. Currently <a href=\"https://stackoverflow.com/a/50255019/11138259\">the best answer is here</a>. The current accepted answer is not recommended and prone to break, as is clearly stated in <a href=\"https://pip.pypa.io/en/latest/user_guide/#using-pip-from-your-program\" rel=\"nofollow noreferrer\"><i>pip</i>&#39;s user guide&#39;s section on &quot;Using pip from your program&quot;</a>. Coincidentally this is <a href=\"https://discuss.python.org/t/can-we-finally-add-a-minimal-api-to-pip/2833\" rel=\"nofollow noreferrer\">being discussed by <i>pip</i>&#39;s maintainers currently as well</a>."
                },
                {
                    "owner": {
                        "account_id": 978109,
                        "reputation": 6500,
                        "user_id": 998523,
                        "user_type": "registered",
                        "accept_rate": 72,
                        "display_name": "chuwy"
                    },
                    "reply_to_user": {
                        "account_id": 556766,
                        "reputation": 132341,
                        "user_id": 918959,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "Antti Haapala -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                    },
                    "edited": false,
                    "score": 3,
                    "creation_date": 1576257175,
                    "post_id": 12332975,
                    "comment_id": 104853358,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code#comment104853358_12332975",
                    "body": "@AnttiHaapala okay I changed it. I personally don&#39;t like both solutions, but I&#39;m far away from Python these days, so I trust your opinion."
                },
                {
                    "owner": {
                        "account_id": 556766,
                        "reputation": 132341,
                        "user_id": 918959,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "Antti Haapala -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1576261183,
                    "post_id": 12332975,
                    "comment_id": 104855184,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code#comment104855184_12332975",
                    "body": "@chuwy thanks. I do not like the fact that <code>pip</code> cannot be imported much either, am hoping there would be a better solution, but this <code>sys.executable</code> is the most portable way to do it."
                },
                {
                    "owner": {
                        "account_id": 22779,
                        "reputation": 130073,
                        "user_id": 56541,
                        "user_type": "registered",
                        "accept_rate": 81,
                        "display_name": "David Z"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1590304125,
                    "post_id": 12332975,
                    "comment_id": 109626156,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code#comment109626156_12332975",
                    "body": "@chuwy Thanks for changing the accepted answer! From someone who was steered in the right direction because you did so."
                },
                {
                    "owner": {
                        "account_id": 5257593,
                        "reputation": 4011,
                        "user_id": 4200039,
                        "user_type": "registered",
                        "display_name": "Ben Creasy"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1707275411,
                    "post_id": 12332975,
                    "comment_id": 137425428,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code#comment137425428_12332975",
                    "body": "Check out <a href=\"https://github.com/jaraco/pip-run\" rel=\"nofollow noreferrer\">github.com/jaraco/pip-run</a>"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1749730,
                                "reputation": 31681,
                                "user_id": 1599111,
                                "user_type": "registered",
                                "display_name": "Lukas Graf"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1347137303,
                            "post_id": 12333019,
                            "comment_id": 16556644,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333019#comment16556644_12333019",
                            "body": "This is the correct answer and the only sensible way to manage a Python projects&#39; dependencies. It will work with virtualenv, Fabric, buildout, you name it. The method described by @xiaomao, even though answering exactly what the OP asked, is pure madness."
                        },
                        {
                            "owner": {
                                "account_id": 8866,
                                "reputation": 59868,
                                "user_id": 16148,
                                "user_type": "registered",
                                "accept_rate": 73,
                                "display_name": "Corey Goldberg"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1484929774,
                            "post_id": 12333019,
                            "comment_id": 70727912,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333019#comment70727912_12333019",
                            "body": "while this is proper advice, it doesn&#39;t answer the question asked"
                        },
                        {
                            "owner": {
                                "account_id": 3133056,
                                "reputation": 63405,
                                "user_id": 2650249,
                                "user_type": "registered",
                                "accept_rate": 95,
                                "display_name": "hoefling"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1486061895,
                            "post_id": 12333019,
                            "comment_id": 71195850,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333019#comment71195850_12333019",
                            "body": "While packaging is a topic, there are a lot of other use cases, for example a deployment script written in python."
                        }
                    ],
                    "owner": {
                        "user_type": "does_not_exist",
                        "display_name": "user2665694"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1347125939,
                    "creation_date": 1347125939,
                    "answer_id": 12333019,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333019#12333019",
                    "body": "<p>You define the dependent module inside the setup.py of your own package with the \"install_requires\" option. </p>\n\n<p>If your package needs to have some console script generated then you can use the \"console_scripts\" entry point in order to generate a wrapper script that will be placed\nwithin the 'bin' folder (e.g. of your virtualenv environment).</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 978109,
                                "reputation": 6500,
                                "user_id": 998523,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "chuwy"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1347127388,
                            "post_id": 12333108,
                            "comment_id": 16554618,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333108#comment16554618_12333108",
                            "body": "Yes it&#39;s definitely should work. But I thought there is more elegant way;) I&#39;ll be waiting a little bit, may be there is."
                        },
                        {
                            "owner": {
                                "account_id": 1129182,
                                "reputation": 3562,
                                "user_id": 1115662,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "GaryBishop"
                            },
                            "edited": false,
                            "score": 16,
                            "creation_date": 1389959854,
                            "post_id": 12333108,
                            "comment_id": 31896526,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333108#comment31896526_12333108",
                            "body": "It depends on the right version of pip being first on the path. If the user is running an alternate python installation, pip will install into the first one instead of the current one. The import approach above will install in the right place. I upvoted anyway to counter the down vote."
                        },
                        {
                            "owner": {
                                "account_id": 2405256,
                                "reputation": 2460,
                                "user_id": 2112218,
                                "user_type": "registered",
                                "display_name": "Smit Johnth"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1438919178,
                            "post_id": 12333108,
                            "comment_id": 51657370,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333108#comment51657370_12333108",
                            "body": "Windows even don&#39;t have pip on PATH by default."
                        },
                        {
                            "owner": {
                                "account_id": 62760,
                                "reputation": 17734,
                                "user_id": 186202,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Natim"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1452690793,
                            "post_id": 12333108,
                            "comment_id": 57280077,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333108#comment57280077_12333108",
                            "body": "Depending on how the script is running you wont call the right pip."
                        },
                        {
                            "owner": {
                                "account_id": 2297210,
                                "reputation": 5509,
                                "user_id": 2018369,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "running.t"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1484059117,
                            "post_id": 12333108,
                            "comment_id": 70347304,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333108#comment70347304_12333108",
                            "body": "There is a lot of situations when this approach will not work. e.g. when you use several versions of python on one machine and you interpret current script with not default python."
                        },
                        {
                            "owner": {
                                "account_id": 1907989,
                                "reputation": 12742,
                                "user_id": 1722462,
                                "user_type": "registered",
                                "accept_rate": 82,
                                "display_name": "uchuugaka"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1503853132,
                            "post_id": 12333108,
                            "comment_id": 78773052,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333108#comment78773052_12333108",
                            "body": "Apparently, this approach is preferred by the pip team at this time."
                        },
                        {
                            "owner": {
                                "account_id": 2927922,
                                "reputation": 174,
                                "user_id": 2508883,
                                "user_type": "registered",
                                "display_name": "Kelvin Ng"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1523875605,
                            "post_id": 12333108,
                            "comment_id": 86725198,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333108#comment86725198_12333108",
                            "body": "Sadly, this works well with virtualenv <a href=\"https://github.com/explosion/spaCy/commit/1754e0db9b9974ce76d935bc1422df8a370265ab\" rel=\"nofollow noreferrer\">github.com/explosion/spaCy/commit/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 5490674,
                                "reputation": 2364,
                                "user_id": 4364101,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Jordan Mackie"
                            },
                            "reply_to_user": {
                                "account_id": 2927922,
                                "reputation": 174,
                                "user_id": 2508883,
                                "user_type": "registered",
                                "display_name": "Kelvin Ng"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1562774337,
                            "post_id": 12333108,
                            "comment_id": 100485288,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333108#comment100485288_12333108",
                            "body": "&quot;Sadly, this works well with...&quot; @KelvinNg did you mean to say it doesn&#39;t work well with virtualenv?"
                        },
                        {
                            "owner": {
                                "account_id": 2927922,
                                "reputation": 174,
                                "user_id": 2508883,
                                "user_type": "registered",
                                "display_name": "Kelvin Ng"
                            },
                            "reply_to_user": {
                                "account_id": 5490674,
                                "reputation": 2364,
                                "user_id": 4364101,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Jordan Mackie"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1562877418,
                            "post_id": 12333108,
                            "comment_id": 100527854,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333108#comment100527854_12333108",
                            "body": "@JordanMackie No, I just feel sad call <code>pip</code> programatically doesn&#39;t work but this one does."
                        },
                        {
                            "owner": {
                                "account_id": 342731,
                                "reputation": 351046,
                                "user_id": 674039,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "wim"
                            },
                            "edited": false,
                            "score": 13,
                            "creation_date": 1575562316,
                            "post_id": 12333108,
                            "comment_id": 104616183,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333108#comment104616183_12333108",
                            "body": "Calling <code>[sys.executable, &#39;-m&#39;, &#39;pip&#39;, &#39;install&#39;, name]</code> is making sure to get the &quot;right&quot; pip here."
                        }
                    ],
                    "owner": {
                        "account_id": 1097351,
                        "reputation": 3802,
                        "user_id": 1090657,
                        "user_type": "registered",
                        "display_name": "quantum"
                    },
                    "comment_count": 10,
                    "is_accepted": false,
                    "score": 47,
                    "last_activity_date": 1713874696,
                    "last_edit_date": 1713874696,
                    "creation_date": 1347126749,
                    "answer_id": 12333108,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/12333108#12333108",
                    "body": "<p>This should work:</p>\n<pre><code>import subprocess\nimport sys\n\ndef install(name):\n    subprocess.call([sys.executable, '-m', 'pip', 'install', name])\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 946150,
                                "reputation": 11826,
                                "user_id": 973380,
                                "user_type": "registered",
                                "accept_rate": 53,
                                "display_name": "fiatjaf"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1383165429,
                            "post_id": 15950647,
                            "comment_id": 29251431,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment29251431_15950647",
                            "body": "Here this exits after installing."
                        },
                        {
                            "owner": {
                                "account_id": 1937705,
                                "reputation": 4139,
                                "user_id": 1744744,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "jason"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1410849561,
                            "post_id": 15950647,
                            "comment_id": 40468607,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment40468607_15950647",
                            "body": "@Rikard Anglerud. Is there an option to upgrade the packages in a batch? something like <code>&#39;install --upgrade&#39;</code>?"
                        },
                        {
                            "owner": {
                                "account_id": 3993763,
                                "reputation": 2514,
                                "user_id": 3291873,
                                "user_type": "registered",
                                "accept_rate": 61,
                                "display_name": "Patrick"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1413181524,
                            "post_id": 15950647,
                            "comment_id": 41331383,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment41331383_15950647",
                            "body": "@RikAng What to change in your code if i want to install multiple packages"
                        },
                        {
                            "owner": {
                                "account_id": 4148701,
                                "reputation": 15803,
                                "user_id": 3924118,
                                "user_type": "registered",
                                "accept_rate": 35,
                                "display_name": "nbro"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1433369980,
                            "post_id": 15950647,
                            "comment_id": 49329095,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment49329095_15950647",
                            "body": "Is there a way to pass options when installing, for example the version of the package? If yes, could you please add it to your answer just for completeness."
                        },
                        {
                            "owner": {
                                "account_id": 199034,
                                "reputation": 1004,
                                "user_id": 444060,
                                "user_type": "registered",
                                "display_name": "Kaos"
                            },
                            "reply_to_user": {
                                "account_id": 4148701,
                                "reputation": 15803,
                                "user_id": 3924118,
                                "user_type": "registered",
                                "accept_rate": 35,
                                "display_name": "nbro"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1437387519,
                            "post_id": 15950647,
                            "comment_id": 50989376,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment50989376_15950647",
                            "body": "@nbro you pass options to <code>pip.main()</code> as you would on the command line (but with each option as a separate entry in the list, instead of a single string). And to specify which version of the package you want, do the same  as on the command line.. ex: <code>pip.main([&#39;install&#39;, &#39;pip==7.1.0&#39;])</code>"
                        },
                        {
                            "owner": {
                                "account_id": 29052,
                                "reputation": 3690,
                                "user_id": 78202,
                                "user_type": "registered",
                                "accept_rate": 69,
                                "display_name": "Myer"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1437391316,
                            "post_id": 15950647,
                            "comment_id": 50991638,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment50991638_15950647",
                            "body": "See also <a href=\"http://stackoverflow.com/questions/6457794/pip-install-r-continue-past-installs-that-fail\" title=\"pip install r continue past installs that fail\">stackoverflow.com/questions/6457794/&hellip;</a>, which shows how to handle the case where an install fails."
                        },
                        {
                            "owner": {
                                "account_id": 913922,
                                "reputation": 2914,
                                "user_id": 947167,
                                "user_type": "registered",
                                "accept_rate": 87,
                                "display_name": "Jared"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1448720811,
                            "post_id": 15950647,
                            "comment_id": 55701035,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment55701035_15950647",
                            "body": "This is also a great option for installing new python libraries on Windows via the Python console if you don&#39;t have a machine with powershell on it."
                        },
                        {
                            "owner": {
                                "account_id": 418059,
                                "reputation": 4604,
                                "user_id": 794401,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Xabs"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1458665280,
                            "post_id": 15950647,
                            "comment_id": 59957925,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment59957925_15950647",
                            "body": "How can I have this working for a particular virtualenv? I&#39;m trying to automate generating wheels for a matrix of packages and python versions. What I want is to create a virtualenv, install some dependencies, and create the wheel."
                        },
                        {
                            "owner": {
                                "account_id": 418059,
                                "reputation": 4604,
                                "user_id": 794401,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Xabs"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1458666012,
                            "post_id": 15950647,
                            "comment_id": 59958406,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment59958406_15950647",
                            "body": "Replying to myself: to install in a specific virtualenv: <code>pip install --target=my-virtualenv&#47;lib&#47;python2.7&#47;site-packages</code>."
                        },
                        {
                            "owner": {
                                "account_id": 7690366,
                                "reputation": 911,
                                "user_id": 5852648,
                                "user_type": "registered",
                                "accept_rate": 49,
                                "display_name": "kaycee"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1460404582,
                            "post_id": 15950647,
                            "comment_id": 60716519,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment60716519_15950647",
                            "body": "I&#39;m getting  <code>ValueError: Unable to configure handler &#39;console&#39;: &#39;OutStream&#39; object has no attribute &#39;closed&#39;</code> when using this function. Anyone know why ?"
                        },
                        {
                            "owner": {
                                "account_id": 1920862,
                                "reputation": 3966,
                                "user_id": 1732418,
                                "user_type": "registered",
                                "accept_rate": 53,
                                "display_name": "tribbloid"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1472975537,
                            "post_id": 15950647,
                            "comment_id": 65961766,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment65961766_15950647",
                            "body": "Doesn&#39;t work and gave me the error: Traceback (most recent call last):   File &quot;/home/***/git/pip.py&quot;, line 9, in &lt;module&gt;     install(&#39;arg&#39;)   File &quot;/home/***/git/pip.py&quot;, line 4, in install     pip.main([&#39;install&#39;, package]) AttributeError: &#39;module&#39; object has no attribute &#39;main&#39;"
                        },
                        {
                            "owner": {
                                "account_id": 1343737,
                                "reputation": 2933,
                                "user_id": 1284868,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "pitchblack408"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1495665236,
                            "post_id": 15950647,
                            "comment_id": 75354892,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment75354892_15950647",
                            "body": "How do you do this with pip3?"
                        },
                        {
                            "owner": {
                                "account_id": 6329014,
                                "reputation": 921,
                                "user_id": 6027379,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "3pitt"
                            },
                            "edited": false,
                            "score": 31,
                            "creation_date": 1527695310,
                            "post_id": 15950647,
                            "comment_id": 88227383,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment88227383_15950647",
                            "body": "<code>from pip._internal import main as pipmain</code> then you can use <code>pipmain()</code> just like the deprecated <code>pip.main()</code> see <a href=\"https://stackoverflow.com/questions/43398961/pip-module-has-no-attribute-main\" title=\"pip module has no attribute main\">stackoverflow.com/questions/43398961/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 1902248,
                                "reputation": 7917,
                                "user_id": 1878788,
                                "user_type": "registered",
                                "accept_rate": 87,
                                "display_name": "bli"
                            },
                            "reply_to_user": {
                                "account_id": 6329014,
                                "reputation": 921,
                                "user_id": 6027379,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "3pitt"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1527756747,
                            "post_id": 15950647,
                            "comment_id": 88250293,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment88250293_15950647",
                            "body": "For some reason, after compiling and installing a local version of python 2.7.15, the command-line pip was not working (it tried to import stuff from the system-installed python and complained about missing pip distribution). The above solution worked for me, but after upgrading pip (<code>pip.main([&quot;install&quot;, &quot;--upgrade&quot;, &quot;pip&quot;])</code>), I had to use the modification suggested by @MikePalmice to further install packages."
                        },
                        {
                            "owner": {
                                "account_id": 1016892,
                                "reputation": 29910,
                                "user_id": 1028270,
                                "user_type": "registered",
                                "accept_rate": 90,
                                "display_name": "red888"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1529016897,
                            "post_id": 15950647,
                            "comment_id": 88736239,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment88736239_15950647",
                            "body": "how do you use a requirements file and install packages to a different directory?"
                        },
                        {
                            "owner": {
                                "account_id": 4543432,
                                "reputation": 8712,
                                "user_id": 7907591,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Morse"
                            },
                            "edited": false,
                            "score": 19,
                            "creation_date": 1531012371,
                            "post_id": 15950647,
                            "comment_id": 89436138,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment89436138_15950647",
                            "body": "its depreceated now."
                        },
                        {
                            "owner": {
                                "account_id": 2927922,
                                "reputation": 174,
                                "user_id": 2508883,
                                "user_type": "registered",
                                "display_name": "Kelvin Ng"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1562877282,
                            "post_id": 15950647,
                            "comment_id": 100527803,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment100527803_15950647",
                            "body": "May not work with virtualenv <a href=\"https://github.com/explosion/spaCy/commit/1754e0db9b9974ce76d935bc1422df8a370265ab\" rel=\"nofollow noreferrer\">github.com/explosion/spaCy/commit/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 187709,
                                "reputation": 1992,
                                "user_id": 425974,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "nbk"
                            },
                            "edited": false,
                            "score": 14,
                            "creation_date": 1564332974,
                            "post_id": 15950647,
                            "comment_id": 100986920,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment100986920_15950647",
                            "body": "It&#39;s deprecated for a reason &amp; not recommended anymore. see <a href=\"https://pip.pypa.io/en/latest/user_guide/#using-pip-from-your-program\" rel=\"nofollow noreferrer\">pip.pypa.io/en/latest/user_guide/#using-pip-from-your-progra&zwnj;&#8203;m</a>"
                        },
                        {
                            "owner": {
                                "account_id": 1877929,
                                "reputation": 7843,
                                "user_id": 1698736,
                                "user_type": "registered",
                                "accept_rate": 90,
                                "display_name": "cowlinator"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1566416860,
                            "post_id": 15950647,
                            "comment_id": 101653844,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment101653844_15950647",
                            "body": "This fails with <code>AttributeError: module &#39;pip&#39; has no attribute &#39;_internal&#39;</code>.  However, it does work if you <code>import pip._internal</code>"
                        },
                        {
                            "owner": {
                                "account_id": 1522906,
                                "reputation": 44396,
                                "user_id": 1422096,
                                "user_type": "registered",
                                "accept_rate": 63,
                                "display_name": "Basj"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1573561424,
                            "post_id": 15950647,
                            "comment_id": 103914620,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment103914620_15950647",
                            "body": "This works for me on Python 3.6.7: <code>import pip._internal.main ; pip._internal.main.main([&#39;install&#39;, &#39;MODULENAMEHERE&#39;])</code>."
                        },
                        {
                            "owner": {
                                "account_id": 342731,
                                "reputation": 351046,
                                "user_id": 674039,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "wim"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1575562168,
                            "post_id": 15950647,
                            "comment_id": 104616088,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment104616088_15950647",
                            "body": "Does not work, update please.  <a href=\"https://pip.pypa.io/en/latest/user_guide/#using-pip-from-your-program\" rel=\"nofollow noreferrer\">pip.pypa.io/en/latest/user_guide/#using-pip-from-your-progra&zwnj;&#8203;m</a>"
                        },
                        {
                            "owner": {
                                "account_id": 12384690,
                                "reputation": 4845,
                                "user_id": 9028532,
                                "user_type": "registered",
                                "display_name": "dotbit"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1576049733,
                            "post_id": 15950647,
                            "comment_id": 104767877,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment104767877_15950647",
                            "body": "the official python docs explicitly recommend AGAINST doing such a thing. Whyever was this upvoted?"
                        },
                        {
                            "owner": {
                                "account_id": 7206340,
                                "reputation": 823,
                                "user_id": 5501835,
                                "user_type": "registered",
                                "display_name": "Borislav Aymaliev"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1587979817,
                            "post_id": 15950647,
                            "comment_id": 108712437,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment108712437_15950647",
                            "body": "Because in specific cases (e.g. when your cannot update your PATH on a corporate network) this is the only way to install a module. Generally, it is hard to take the docs seriously when it recommends &quot;against something&quot; without providing an alternative solution."
                        },
                        {
                            "owner": {
                                "account_id": 5430408,
                                "reputation": 2585,
                                "user_id": 4321462,
                                "user_type": "registered",
                                "accept_rate": 69,
                                "display_name": "Samufi"
                            },
                            "reply_to_user": {
                                "account_id": 12384690,
                                "reputation": 4845,
                                "user_id": 9028532,
                                "user_type": "registered",
                                "display_name": "dotbit"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1682423512,
                            "post_id": 15950647,
                            "comment_id": 134209640,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#comment134209640_15950647",
                            "body": "@dotbit And because debugging the build process is difficult when running pip as a standalone. Calling pip from your code is discouraged, because it cannot be used safely in conjunction with other code as you would expect. These arguments do not apply to running a script that does nothing else than installing this one package."
                        }
                    ],
                    "owner": {
                        "account_id": 137179,
                        "reputation": 4695,
                        "user_id": 341187,
                        "user_type": "registered",
                        "display_name": "Rikard Anglerud"
                    },
                    "comment_count": 24,
                    "is_accepted": false,
                    "score": 438,
                    "last_activity_date": 1534505849,
                    "last_edit_date": 1534505849,
                    "creation_date": 1365688483,
                    "answer_id": 15950647,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/15950647#15950647",
                    "body": "<p>You can also use something like:</p>\n\n<pre><code>import pip\n\ndef install(package):\n    if hasattr(pip, 'main'):\n        pip.main(['install', package])\n    else:\n        pip._internal.main(['install', package])\n\n# Example\nif __name__ == '__main__':\n    install('argh')\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 262393,
                                "reputation": 1556,
                                "user_id": 547223,
                                "user_type": "registered",
                                "display_name": "kgadek"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1438619722,
                            "post_id": 24773951,
                            "comment_id": 51512887,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/24773951#comment51512887_24773951",
                            "body": "Any idea how to do that on Python 3? <code>imp.reload(site)</code> gets me <code>RuntimeError: dictionary changed size during iteration</code>"
                        },
                        {
                            "owner": {
                                "account_id": 3559550,
                                "reputation": 1767,
                                "user_id": 2972348,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "Ishan Khare"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1461673202,
                            "post_id": 24773951,
                            "comment_id": 61296515,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/24773951#comment61296515_24773951",
                            "body": "where does this install the package, after i did this, i was not able to do <code>pip uninstall &lt;package_name&gt;</code>. I can still uninstall it using <code>pip.main</code> but just wanted to know where does it install the package?"
                        },
                        {
                            "owner": {
                                "account_id": 1498718,
                                "reputation": 10522,
                                "user_id": 1404049,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "Fallenreaper"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1494262032,
                            "post_id": 24773951,
                            "comment_id": 74741756,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/24773951#comment74741756_24773951",
                            "body": "Was curious.  would this work properly if i do: <code>pip install requests[security]</code> ?  I wasnt sure if it would properly define the globals correctly."
                        },
                        {
                            "owner": {
                                "account_id": 342731,
                                "reputation": 351046,
                                "user_id": 674039,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "wim"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1575562219,
                            "post_id": 24773951,
                            "comment_id": 104616118,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/24773951#comment104616118_24773951",
                            "body": "Outdated.  <code>pip.main</code> no longer works.  <a href=\"https://pip.pypa.io/en/latest/user_guide/#using-pip-from-your-program\" rel=\"nofollow noreferrer\">pip.pypa.io/en/latest/user_guide/#using-pip-from-your-progra&zwnj;&#8203;m</a>"
                        },
                        {
                            "owner": {
                                "account_id": 5342770,
                                "reputation": 1503,
                                "user_id": 4259243,
                                "user_type": "registered",
                                "accept_rate": 65,
                                "display_name": "sh37211"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1617150380,
                            "post_id": 24773951,
                            "comment_id": 118222167,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/24773951#comment118222167_24773951",
                            "body": "Does importing within a function really import into the main namespace, or just the namespace of that <code>install_and_import</code> function?"
                        },
                        {
                            "owner": {
                                "account_id": 4298052,
                                "reputation": 12507,
                                "user_id": 3512538,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "CIsForCookies"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1640845556,
                            "post_id": 24773951,
                            "comment_id": 124672712,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/24773951#comment124672712_24773951",
                            "body": "Why doesn&#39;t this work if the script that installs and reloads calls another script that does the import?"
                        }
                    ],
                    "owner": {
                        "account_id": 2297595,
                        "reputation": 2797,
                        "user_id": 2108548,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "rominf"
                    },
                    "comment_count": 6,
                    "is_accepted": false,
                    "score": 92,
                    "last_activity_date": 1408455679,
                    "last_edit_date": 1495541910,
                    "creation_date": 1405493137,
                    "answer_id": 24773951,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/24773951#24773951",
                    "body": "<p>If you want to use <code>pip</code> to install required package and import it after installation, you can use this code:</p>\n\n<pre><code>def install_and_import(package):\n    import importlib\n    try:\n        importlib.import_module(package)\n    except ImportError:\n        import pip\n        pip.main(['install', package])\n    finally:\n        globals()[package] = importlib.import_module(package)\n\n\ninstall_and_import('transliterate')\n</code></pre>\n\n<p>If you installed a package as a user you can encounter the problem that you cannot just import the package. See <a href=\"https://stackoverflow.com/questions/25384922\">How to refresh sys.path?</a> for additional information.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 504113,
                                "reputation": 232,
                                "user_id": 1234300,
                                "user_type": "registered",
                                "accept_rate": 40,
                                "display_name": "jdpipe"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1587086856,
                            "post_id": 50255019,
                            "comment_id": 108377739,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/50255019#comment108377739_50255019",
                            "body": "One issue with this is that, for novice users on Windows, python and pip are not always on their PATH, and so a .py file that could be double-clicked would be quite convenient, whereas a &quot;pip install xxx&quot; comment can be quite tricky."
                        },
                        {
                            "owner": {
                                "account_id": 4686232,
                                "reputation": 1390,
                                "user_id": 4042278,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "parvij"
                            },
                            "edited": false,
                            "score": 16,
                            "creation_date": 1589394621,
                            "post_id": 50255019,
                            "comment_id": 109280116,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/50255019#comment109280116_50255019",
                            "body": "CalledProcessError: Command &#39;[&#39;C:\\\\ProgramData\\\\Anaconda3\\\\pythonw.exe&#39;, &#39;-m&#39;, &#39;pip&#39;, &#39;install&#39;, &#39;googleapiclient&#39;]&#39; returned non-zero exit status 1."
                        },
                        {
                            "owner": {
                                "account_id": 197534,
                                "reputation": 1074,
                                "user_id": 441669,
                                "user_type": "registered",
                                "accept_rate": 27,
                                "display_name": "user441669"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1609027017,
                            "post_id": 50255019,
                            "comment_id": 115733819,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/50255019#comment115733819_50255019",
                            "body": "I&#39;m trying to use this approach, but my python is embedded/started from another executable, so &quot;sys.executable&quot; doesn&#39;t return the right path. Is there an alternative that would work for python that&#39;s started by some other process?"
                        },
                        {
                            "owner": {
                                "account_id": 5097170,
                                "reputation": 668,
                                "user_id": 4088081,
                                "user_type": "registered",
                                "accept_rate": 0,
                                "display_name": "BND"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1656057225,
                            "post_id": 50255019,
                            "comment_id": 128483207,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/50255019#comment128483207_50255019",
                            "body": "strange thing I need to rerun the script the module was installed from so that it will be recognized"
                        },
                        {
                            "owner": {
                                "account_id": 63082,
                                "reputation": 17404,
                                "user_id": 186964,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "Aaron de Windt"
                            },
                            "reply_to_user": {
                                "account_id": 5097170,
                                "reputation": 668,
                                "user_id": 4088081,
                                "user_type": "registered",
                                "accept_rate": 0,
                                "display_name": "BND"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1656336033,
                            "post_id": 50255019,
                            "comment_id": 128539708,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/50255019#comment128539708_50255019",
                            "body": "@BND You could automate this using <code>os.execv(...)</code> or it&#39;s variants. Something like <code>os.execv(&quot; &quot;.join((sys.excecutable, *sys.argv)))</code> might work."
                        },
                        {
                            "owner": {
                                "account_id": 63082,
                                "reputation": 17404,
                                "user_id": 186964,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "Aaron de Windt"
                            },
                            "reply_to_user": {
                                "account_id": 5097170,
                                "reputation": 668,
                                "user_id": 4088081,
                                "user_type": "registered",
                                "accept_rate": 0,
                                "display_name": "BND"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1656336092,
                            "post_id": 50255019,
                            "comment_id": 128539742,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/50255019#comment128539742_50255019",
                            "body": "@BND Another solution would be to use <code>imp.reload(...)</code> to reload the module if you already imported it before reinstalling."
                        },
                        {
                            "owner": {
                                "account_id": 2622923,
                                "reputation": 358,
                                "user_id": 2270568,
                                "user_type": "registered",
                                "display_name": "Brian"
                            },
                            "edited": false,
                            "score": 11,
                            "creation_date": 1658492291,
                            "post_id": 50255019,
                            "comment_id": 129070982,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/50255019#comment129070982_50255019",
                            "body": "note, since 3.5 its now recommended to use <a href=\"https://docs.python.org/3/library/subprocess.html#subprocess.check_call\" rel=\"nofollow noreferrer\">subprocess.run(..., check=True)</a>"
                        },
                        {
                            "owner": {
                                "account_id": 13991952,
                                "reputation": 165,
                                "user_id": 10105748,
                                "user_type": "registered",
                                "display_name": "Kostas Markakis"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1702291203,
                            "post_id": 50255019,
                            "comment_id": 136874029,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/50255019#comment136874029_50255019",
                            "body": "what about the case were your script is already packaged with pyinstaller ? if you invoke the command subproccess... where it will install it ?"
                        }
                    ],
                    "owner": {
                        "account_id": 63082,
                        "reputation": 17404,
                        "user_id": 186964,
                        "user_type": "registered",
                        "accept_rate": 68,
                        "display_name": "Aaron de Windt"
                    },
                    "comment_count": 8,
                    "is_accepted": true,
                    "score": 594,
                    "last_activity_date": 1575670746,
                    "last_edit_date": 1575670746,
                    "creation_date": 1525873635,
                    "answer_id": 50255019,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/50255019#50255019",
                    "body": "<p>The officially recommended way to install packages from a script is by calling pip's command-line interface via a subprocess. <a href=\"https://pip.pypa.io/en/latest/user_guide/#using-pip-from-your-program\" rel=\"noreferrer\">Most other answers presented here are not supported by pip</a>. Furthermore since pip v10, all code has been moved to <code>pip._internal</code> precisely in order to make it clear to users that programmatic use of pip is not allowed.</p>\n\n<p>Use <code>sys.executable</code> to ensure that you will call the same <code>pip</code> associated with the current runtime.</p>\n\n<pre><code>import subprocess\nimport sys\n\ndef install(package):\n    subprocess.check_call([sys.executable, \"-m\", \"pip\", \"install\", package])\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7219928,
                                "reputation": 571,
                                "user_id": 6280855,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "Shantanu Bedajna"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1569238241,
                            "post_id": 58040520,
                            "comment_id": 102519463,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/58040520#comment102519463_58040520",
                            "body": "nice implementation of subprocess and pip, better than most solutions here"
                        },
                        {
                            "owner": {
                                "account_id": 556766,
                                "reputation": 132341,
                                "user_id": 918959,
                                "user_type": "registered",
                                "accept_rate": 89,
                                "display_name": "Antti Haapala -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1575726171,
                            "post_id": 58040520,
                            "comment_id": 104666993,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/58040520#comment104666993_58040520",
                            "body": "You&#39;re not checking the retunr value of <code>subprocess.call</code> so the code might fail."
                        },
                        {
                            "owner": {
                                "account_id": 12003714,
                                "reputation": 556,
                                "user_id": 8782672,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Coddy"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1615524633,
                            "post_id": 58040520,
                            "comment_id": 117722760,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/58040520#comment117722760_58040520",
                            "body": "why <code>subprocess.check_call</code> and not <code>subprocess.call</code>?"
                        },
                        {
                            "owner": {
                                "account_id": 14096333,
                                "reputation": 369,
                                "user_id": 10183001,
                                "user_type": "registered",
                                "display_name": "Daniel Bandeira"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1633353282,
                            "post_id": 58040520,
                            "comment_id": 122729514,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/58040520#comment122729514_58040520",
                            "body": "Ok, running &quot;import pandas as pd&quot; brings no problem, but... logically isn&#39;t it ugly?"
                        },
                        {
                            "owner": {
                                "account_id": 230897,
                                "reputation": 305,
                                "user_id": 494775,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "AD - Stop Putin -"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1682675834,
                            "post_id": 58040520,
                            "comment_id": 134256523,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/58040520#comment134256523_58040520",
                            "body": "Nice,  but I would do the last <code>import</code> after the installation of the <code>except</code>-clause."
                        }
                    ],
                    "owner": {
                        "account_id": 10436210,
                        "reputation": 1590,
                        "user_id": 7694428,
                        "user_type": "registered",
                        "display_name": "Sohan Das"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 40,
                    "last_activity_date": 1677130272,
                    "last_edit_date": 1677130272,
                    "creation_date": 1569070694,
                    "answer_id": 58040520,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/58040520#58040520",
                    "body": "<p>I added some exception handling to <a href=\"https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/50255019#50255019\">Aaron's answer</a>.</p>\n<pre><code>import subprocess\nimport sys\n\ntry:\n    import pandas as pd\nexcept ImportError:\n    subprocess.check_call([sys.executable, &quot;-m&quot;, &quot;pip&quot;, &quot;install&quot;, 'pandas'])\nfinally:\n    import pandas as pd\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2403292,
                                "reputation": 30010,
                                "user_id": 2192488,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "Serge Stroobandt"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1643075046,
                            "post_id": 63096701,
                            "comment_id": 125238670,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/63096701#comment125238670_63096701",
                            "body": "The asterisk in front of <code>*missing</code> serves to unpack the set represented by the variable name <code>missing</code>. See also: <a href=\"https://medium.com/understand-the-python/understanding-the-asterisk-of-python-8b9daaa4a558\" rel=\"nofollow noreferrer\"><i>Understanding the asterisk(*) of Python</i></a>"
                        },
                        {
                            "owner": {
                                "account_id": 5875069,
                                "reputation": 1044,
                                "user_id": 4626146,
                                "user_type": "registered",
                                "display_name": "rdtsc"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1709851710,
                            "post_id": 63096701,
                            "comment_id": 137730863,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/63096701#comment137730863_63096701",
                            "body": "Sadly, this too is now depreciated; it throws a warning every time."
                        }
                    ],
                    "owner": {
                        "account_id": 10297570,
                        "reputation": 441,
                        "user_id": 7597224,
                        "user_type": "registered",
                        "display_name": "Tanmay Shrivastava"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 29,
                    "last_activity_date": 1643075350,
                    "last_edit_date": 1643075350,
                    "creation_date": 1595743797,
                    "answer_id": 63096701,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/63096701#63096701",
                    "body": "<p>For installing multiple packages, I am using a <code>setup.py</code> file with the following code:</p>\n<pre><code>import sys\nimport subprocess\nimport pkg_resources\n\nrequired  = {'numpy', 'pandas', '&lt;etc&gt;'} \ninstalled = {pkg.key for pkg in pkg_resources.working_set}\nmissing   = required - installed\n\nif missing:\n    # implement pip as a subprocess:\n    subprocess.check_call([sys.executable, '-m', 'pip', 'install', *missing])\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 20414150,
                                "reputation": 509,
                                "user_id": 14976810,
                                "user_type": "registered",
                                "display_name": "Shubham Garg"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1635931049,
                            "post_id": 65076262,
                            "comment_id": 123420843,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/65076262#comment123420843_65076262",
                            "body": "this is so easy and simple to understand for beginners as compared to all the other answers. Thank you very much."
                        }
                    ],
                    "owner": {
                        "account_id": 6549220,
                        "reputation": 1377,
                        "user_id": 5064153,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Janarthanan Ramu"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 13,
                    "last_activity_date": 1677130355,
                    "last_edit_date": 1677130355,
                    "creation_date": 1606749637,
                    "answer_id": 65076262,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/65076262#65076262",
                    "body": "<p>Use:</p>\n<pre><code>import os\nos.system('pip install requests')\n</code></pre>\n<p>I tried the above for a temporary solution instead of changing a <a href=\"https://en.wikipedia.org/wiki/Docker_(software)#Tools\" rel=\"noreferrer\">Docker file</a>.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3317928,
                                "reputation": 9686,
                                "user_id": 3866246,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "Glen Thompson"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1628435229,
                            "post_id": 67360616,
                            "comment_id": 121413871,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/67360616#comment121413871_67360616",
                            "body": "This is just a copy of Tanmay Shrivastava&#39;s answer"
                        }
                    ],
                    "owner": {
                        "account_id": 13079324,
                        "reputation": 93,
                        "user_id": 9450354,
                        "user_type": "registered",
                        "display_name": "Rijin"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1677130467,
                    "last_edit_date": 1677130467,
                    "creation_date": 1619985584,
                    "answer_id": 67360616,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/67360616#67360616",
                    "body": "<p>Try the below. So far, it was the best that worked for me.</p>\n<p>Install the 4 ones first and then <em>mention</em> the new ones in the <em>&quot;REQUIRED&quot;</em> list:</p>\n<pre><code>import pkg_resources\nimport subprocess\nimport sys\nimport os\n\nREQUIRED = {\n  'spacy', 'scikit-learn', 'numpy', 'pandas', 'torch',\n  'pyfunctional', 'textblob', 'seaborn', 'matplotlib'\n}\n\ninstalled = {pkg.key for pkg in pkg_resources.working_set}\nmissing = REQUIRED - installed\n\nif missing:\n    python = sys.executable\n    subprocess.check_call([python, '-m', 'pip', 'install', *missing], stdout=subprocess.DEVNULL)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 13604327,
                                "reputation": 400,
                                "user_id": 9814037,
                                "user_type": "registered",
                                "display_name": "Simon Provost"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1658851937,
                            "post_id": 68702837,
                            "comment_id": 129152671,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/68702837#comment129152671_68702837",
                            "body": "Amazing suggestion! As a little improvement, here we go:  ```        if requirements := [requirement for requirement in requirement_list if should_install_requirement(requirement)]:             subprocess.check_call(                 [sys.executable, &quot;-m&quot;, &quot;pip&quot;, &quot;install&quot;, *requirements])         else:             print(&quot;Requirements already satisfied.&quot;) ```"
                        },
                        {
                            "owner": {
                                "account_id": 24885,
                                "reputation": 31173,
                                "user_id": 63550,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "Peter Mortensen"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1677130742,
                            "post_id": 68702837,
                            "comment_id": 133278055,
                            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/68702837#comment133278055_68702837",
                            "body": "The animation is unreadable (though it does work if <a href=\"https://i.stack.imgur.com/KMDMl.gif\" rel=\"nofollow noreferrer\">opened in a separate tab or window</a>)."
                        }
                    ],
                    "owner": {
                        "account_id": 3317928,
                        "reputation": 9686,
                        "user_id": 3866246,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "Glen Thompson"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1677130647,
                    "last_edit_date": 1677130647,
                    "creation_date": 1628441139,
                    "answer_id": 68702837,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/68702837#68702837",
                    "body": "<p>If you want a more efficient answer that expands on <code>subprocess.check_call</code>. You can first check if the requirement has already been met using <code>pkg_resources</code>.</p>\n<p>This works for different <a href=\"https://packaging.python.org/glossary/#term-Requirement-Specifier\" rel=\"nofollow noreferrer\">requirement specifiers</a> which is nice. E.g., <code>&gt;=</code>, <code>==</code>:</p>\n<pre><code>import sys\nimport subprocess\nimport pkg_resources\nfrom pkg_resources import DistributionNotFound, VersionConflict\n\ndef should_install_requirement(requirement):\n    should_install = False\n    try:\n        pkg_resources.require(requirement)\n    except (DistributionNotFound, VersionConflict):\n        should_install = True\n    return should_install\n\n\ndef install_packages(requirement_list):\n    try:\n        requirements = [\n            requirement\n            for requirement in requirement_list\n            if should_install_requirement(requirement)\n        ]\n        if len(requirements) &gt; 0:\n            subprocess.check_call([sys.executable, &quot;-m&quot;, &quot;pip&quot;, &quot;install&quot;, *requirements])\n        else:\n            print(&quot;Requirements already satisfied.&quot;)\n\n    except Exception as e:\n        print(e)\n</code></pre>\n<p>Example usage:</p>\n<pre><code>requirement_list = ['requests', 'httpx==0.18.2']\ninstall_packages(requirement_list)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/KMDMl.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KMDMl.gif\" alt=\"Demo\" /></a></p>\n<p>Relevant information: <a href=\"https://stackoverflow.com/questions/58612272/pkg-resources-get-distributionmymodule-version-not-updated-after-reload\">Stack Overflow question: 58612272</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 708540,
                        "reputation": 4387,
                        "user_id": 2013891,
                        "user_type": "registered",
                        "accept_rate": 67,
                        "display_name": "Glenn Mohammad"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1632241766,
                    "creation_date": 1632241766,
                    "answer_id": 69272413,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/69272413#69272413",
                    "body": "<p>To <strong>conditionally</strong> install <strong>multiple</strong> packages with <strong>exact version</strong>, I've been using this pattern basing on @Tanmay Shrivastava's answer:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import sys\nfrom subprocess import run, PIPE, STDOUT\nimport pkg_resources\n\ndef run_cmd(cmd):\n    ps = run(cmd, stdout=PIPE, stderr=STDOUT, shell=True, text=True)\n    print(ps.stdout)\n\n\n# packages to be conditionally installed with exact version\nrequired = {&quot;click==8.0.1&quot;, &quot;semver==3.0.0.dev2&quot;}\ninstalled = {f&quot;{pkg.key}=={pkg.version}&quot; for pkg in pkg_resources.working_set}\nmissing = required - installed\n\nif missing:\n    run_cmd(f'pip install --ignore-installed {&quot; &quot;.join([*missing])}')\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 16992603,
                        "reputation": 247,
                        "user_id": 12291837,
                        "user_type": "registered",
                        "display_name": "grey"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1665297201,
                    "creation_date": 1665297201,
                    "answer_id": 74002592,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/74002592#74002592",
                    "body": "<pre><code>    import pip\n\ntry:\n    import imaplib\n    import email\n    import pandas as pd\n    # for hiding password\n    from pathlib import Path\n    from dotenv import load_dotenv\n    import os\n    import requests\n    # \n    from collections import defaultdict\n    from itertools import permutations,combinations\nexcept Exception as e:\n    print(e)\n    e = str(e).split(' ')[-1].replace(&quot;'&quot;,&quot;&quot;)\n    pip.main(['install', e])\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 19826989,
                        "reputation": 391,
                        "user_id": 14522393,
                        "user_type": "registered",
                        "display_name": "Evgeniy Blinov"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1683109305,
                    "last_edit_date": 1683109305,
                    "creation_date": 1683049307,
                    "answer_id": 76157522,
                    "question_id": 12332975,
                    "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code/76157522#76157522",
                    "body": "<p>I didn't like all the suggested options and I wrote my <a href=\"https://github.com/pomponchik/installed\" rel=\"nofollow noreferrer\">library</a> for this.</p>\n<p>Install it:</p>\n<pre><code>pip install instld\n</code></pre>\n<p>And use a context manager:</p>\n<pre><code>import installed\n\nwith installed('some_package'):\n  import some_module\n</code></pre>\n<p>To learn more about the library, follow the link I gave above. It allows you to use two different versions of the same library in one program, or, for example, libraries that are incompatible with each other.</p>\n"
                }
            ],
            "owner": {
                "account_id": 978109,
                "reputation": 6500,
                "user_id": 998523,
                "user_type": "registered",
                "accept_rate": 72,
                "display_name": "chuwy"
            },
            "comment_count": 11,
            "is_answered": true,
            "accepted_answer_id": 50255019,
            "answer_count": 13,
            "score": 507,
            "last_activity_date": 1713874696,
            "creation_date": 1347125582,
            "last_edit_date": 1677130206,
            "question_id": 12332975,
            "link": "https://stackoverflow.com/questions/12332975/how-can-i-install-a-python-module-within-code",
            "title": "How can I Install a Python module within code?",
            "body": "<p>I need to install a package from <a href=\"https://en.wikipedia.org/wiki/Python_Package_Index\" rel=\"noreferrer\">PyPI</a> straight within my script.</p>\n<p>Is there maybe some module or <code>distutils</code> (<code>distribute</code>, <code>pip</code>, etc.) feature which allows me to just execute something like <code>pypi.install('requests')</code> and requests will be installed into my virtualenv?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 7789
}