{
    "items": [
        {
            "tags": [
                "for-loop",
                "python",
                "idioms",
                "fencepost"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 21147,
                        "reputation": 132929,
                        "user_id": 51197,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Adam Matan"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1256645069,
                    "post_id": 1630320,
                    "comment_id": 1498564,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop#comment1498564_1630320",
                    "body": "What about he first one? Should it be suppressed too?"
                },
                {
                    "owner": {
                        "account_id": 7405,
                        "reputation": 313805,
                        "user_id": 12855,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "SilentGhost"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1256645339,
                    "post_id": 1630320,
                    "comment_id": 1498586,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop#comment1498586_1630320",
                    "body": "could you tell us what is it being done between elements?"
                },
                {
                    "owner": {
                        "account_id": 44489,
                        "reputation": 5191,
                        "user_id": 130627,
                        "user_type": "registered",
                        "accept_rate": 50,
                        "display_name": "e.tadeu"
                    },
                    "edited": false,
                    "score": 3,
                    "creation_date": 1256646768,
                    "post_id": 1630320,
                    "comment_id": 1498733,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop#comment1498733_1630320",
                    "body": "I&#39;d like to get the answer for a generic case, but a concrete case where I need this is writing things on a stream, with separators in between them, just like stream.write(&#39;, &#39;.join(name_list)), but doing it in a for loop without concatenating the strings, because there are many writes..."
                },
                {
                    "owner": {
                        "account_id": 2558,
                        "reputation": 99384,
                        "user_id": 3571,
                        "user_type": "registered",
                        "accept_rate": 57,
                        "display_name": "codeape"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1256653667,
                    "post_id": 1630320,
                    "comment_id": 1499521,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop#comment1499521_1630320",
                    "body": "Related: <a href=\"http://stackoverflow.com/questions/323750/how-to-access-previous-next-element-while-for-looping/325864#325864\" title=\"how to access previous next element while for looping\">stackoverflow.com/questions/323750/&hellip;</a>"
                },
                {
                    "owner": {
                        "account_id": 5383373,
                        "reputation": 7133,
                        "user_id": 4288043,
                        "user_type": "registered",
                        "accept_rate": 90,
                        "display_name": "cardamom"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1549282626,
                    "post_id": 1630320,
                    "comment_id": 95834684,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop#comment95834684_1630320",
                    "body": "The first three lines of <a href=\"https://stackoverflow.com/a/2429118/4288043\">this answer</a> really helped me, was having a similar challenge."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 44489,
                                "reputation": 5191,
                                "user_id": 130627,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "e.tadeu"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1256645490,
                            "post_id": 1630350,
                            "comment_id": 1498595,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment1498595_1630350",
                            "body": "True, this way seems better than mine, at least it don&#39;t need to use enumerate and len."
                        },
                        {
                            "owner": {
                                "account_id": 21147,
                                "reputation": 132929,
                                "user_id": 51197,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Adam Matan"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1256645604,
                            "post_id": 1630350,
                            "comment_id": 1498604,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment1498604_1630350",
                            "body": "Yes, but it adds another <code>if</code> which could be avoided if the loop was split into two loops. However, this is relevant only when iterating a huge data list."
                        },
                        {
                            "owner": {
                                "account_id": 44489,
                                "reputation": 5191,
                                "user_id": 130627,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "e.tadeu"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1256645726,
                            "post_id": 1630350,
                            "comment_id": 1498614,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment1498614_1630350",
                            "body": "The problem with splitting into two loops is that it either violates DRY or it forces you to define methods."
                        },
                        {
                            "owner": {
                                "account_id": 37145,
                                "reputation": 15633,
                                "user_id": 106140,
                                "user_type": "registered",
                                "accept_rate": 99,
                                "display_name": "Olivier Pons"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1449419368,
                            "post_id": 1630350,
                            "comment_id": 55988320,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment55988320_1630350",
                            "body": "I really try to understand your last example (which works flawlessly in my code), but I dont understand how it works (the idea behind)"
                        },
                        {
                            "owner": {
                                "account_id": 16137,
                                "reputation": 66317,
                                "user_id": 34855,
                                "user_type": "registered",
                                "display_name": "Ferdinand Beyer"
                            },
                            "reply_to_user": {
                                "account_id": 37145,
                                "reputation": 15633,
                                "user_id": 106140,
                                "user_type": "registered",
                                "accept_rate": 99,
                                "display_name": "Olivier Pons"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1449435037,
                            "post_id": 1630350,
                            "comment_id": 55993817,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment55993817_1630350",
                            "body": "@OlivierPons You need to understand Python&#39;s iterator protocol: I get an iterator for an object, and retrieve the first value with <code>next()</code>. Then I exploit that an iterator is iterable by itself, so I can use it in the <code>for</code> loop until exhaustion, iteration from the second to the last value. During this I keep the current value I retrieved from the iterator locally and <code>yield</code> the last one instead. This way I know there is one more value to come. After the for loop, I have reported every value but the last one."
                        },
                        {
                            "owner": {
                                "account_id": 2321930,
                                "reputation": 1175,
                                "user_id": 2037431,
                                "user_type": "registered",
                                "accept_rate": 89,
                                "display_name": "Marcos Pereira"
                            },
                            "edited": false,
                            "score": 26,
                            "creation_date": 1597243266,
                            "post_id": 1630350,
                            "comment_id": 112070319,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment112070319_1630350",
                            "body": "This does not answer the question"
                        },
                        {
                            "owner": {
                                "account_id": 12704190,
                                "reputation": 814,
                                "user_id": 9230013,
                                "user_type": "registered",
                                "display_name": "agftrading"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1643063459,
                            "post_id": 1630350,
                            "comment_id": 125236531,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment125236531_1630350",
                            "body": "This answer seems rather confusing.  Surely there must be a simpler way."
                        },
                        {
                            "owner": {
                                "account_id": 12704190,
                                "reputation": 814,
                                "user_id": 9230013,
                                "user_type": "registered",
                                "display_name": "agftrading"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1643064085,
                            "post_id": 1630350,
                            "comment_id": 125236666,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment125236666_1630350",
                            "body": "The answer here from Mattwmaster58 is much more on point: <a href=\"https://stackoverflow.com/questions/39808908/detect-if-item-is-the-last-in-a-list?noredirect=1&amp;lq=1\" title=\"detect if item is the last in a list\">stackoverflow.com/questions/39808908/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 2996,
                                "reputation": 23339,
                                "user_id": 4243,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "kris"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1669297913,
                            "post_id": 1630350,
                            "comment_id": 131616336,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment131616336_1630350",
                            "body": "Note that in Python 3.7+, you need to wrap <code>lookahead</code>&#39;s <code>next()</code> call in a try/except StopIteration or you&#39;ll get <code>RuntimeError: generator raised StopIteration</code>. See <a href=\"https://stackoverflow.com/a/51701040/4243\">stackoverflow.com/a/51701040/4243</a>."
                        },
                        {
                            "owner": {
                                "account_id": 248321,
                                "reputation": 61331,
                                "user_id": 523612,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Karl Knechtel"
                            },
                            "reply_to_user": {
                                "account_id": 2321930,
                                "reputation": 1175,
                                "user_id": 2037431,
                                "user_type": "registered",
                                "accept_rate": 89,
                                "display_name": "Marcos Pereira"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680069357,
                            "post_id": 1630350,
                            "comment_id": 133832239,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment133832239_1630350",
                            "body": "@MarcosPereira I cannot understand why you believe this to be the case. What do you think is being asked, that is different from what is answered here?"
                        },
                        {
                            "owner": {
                                "account_id": 1632921,
                                "reputation": 3789,
                                "user_id": 1507124,
                                "user_type": "registered",
                                "display_name": "CervEd"
                            },
                            "reply_to_user": {
                                "account_id": 248321,
                                "reputation": 61331,
                                "user_id": 523612,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Karl Knechtel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1696113950,
                            "post_id": 1630350,
                            "comment_id": 136112646,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment136112646_1630350",
                            "body": "@KarlKnechtel probably because most of the answer is about dealing with the <i>first</i> value"
                        },
                        {
                            "owner": {
                                "account_id": 248321,
                                "reputation": 61331,
                                "user_id": 523612,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Karl Knechtel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1696145760,
                            "post_id": 1630350,
                            "comment_id": 136114221,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#comment136114221_1630350",
                            "body": "Well, yes, but the specific point is that in the situations where one thinks &quot;detect the last element&quot; is necessary, it&#39;s often possible to transform the problem into one where &quot;detect the first element&quot; solves the problem instead, and that&#39;s easier to do."
                        }
                    ],
                    "owner": {
                        "account_id": 16137,
                        "reputation": 66317,
                        "user_id": 34855,
                        "user_type": "registered",
                        "display_name": "Ferdinand Beyer"
                    },
                    "comment_count": 12,
                    "is_accepted": true,
                    "score": 236,
                    "last_activity_date": 1449435606,
                    "last_edit_date": 1449435606,
                    "creation_date": 1256644948,
                    "answer_id": 1630350,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630350#1630350",
                    "body": "<p>Most of the times it is easier (and cheaper) to make the <em>first</em> iteration the special case instead of the last one:</p>\n\n<pre><code>first = True\nfor data in data_list:\n    if first:\n        first = False\n    else:\n        between_items()\n\n    item()\n</code></pre>\n\n<p>This will work for any iterable, even for those that have no <code>len()</code>:</p>\n\n<pre><code>file = open('/path/to/file')\nfor line in file:\n    process_line(line)\n\n    # No way of telling if this is the last line!\n</code></pre>\n\n<p>Apart from that, I don't think there is a generally superior solution as it depends on what you are trying to do. For example, if you are building a string from a list, it's naturally better to use <code>str.join()</code> than using a <code>for</code> loop \u201cwith special case\u201d.</p>\n\n<hr>\n\n<p>Using the same principle but more compact:</p>\n\n<pre><code>for i, line in enumerate(data_list):\n    if i &gt; 0:\n        between_items()\n    item()\n</code></pre>\n\n<p>Looks familiar, doesn't it? :)</p>\n\n<hr>\n\n<p>For @ofko, and others who really need to find out if the current value of an iterable without <code>len()</code> is the last one, you will need to look ahead:</p>\n\n<pre><code>def lookahead(iterable):\n    \"\"\"Pass through all values from the given iterable, augmented by the\n    information if there are more values to come after the current one\n    (True), or if it is the last value (False).\n    \"\"\"\n    # Get an iterator and pull the first value.\n    it = iter(iterable)\n    last = next(it)\n    # Run the iterator to exhaustion (starting from the second value).\n    for val in it:\n        # Report the *previous* value (more to come).\n        yield last, True\n        last = val\n    # Report the last value.\n    yield last, False\n</code></pre>\n\n<p>Then you can use it like this:</p>\n\n<pre><code>&gt;&gt;&gt; for i, has_more in lookahead(range(3)):\n...     print(i, has_more)\n0 True\n1 True\n2 False\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 44489,
                                "reputation": 5191,
                                "user_id": 130627,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "e.tadeu"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1256646010,
                            "post_id": 1630359,
                            "comment_id": 1498645,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630359#comment1498645_1630359",
                            "body": "I&#39;m not modifying it, I&#39;m using it to do something"
                        },
                        {
                            "owner": {
                                "account_id": 4156881,
                                "reputation": 1551,
                                "user_id": 3407933,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "spacetyper"
                            },
                            "reply_to_user": {
                                "account_id": 44489,
                                "reputation": 5191,
                                "user_id": 130627,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "e.tadeu"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1440793796,
                            "post_id": 1630359,
                            "comment_id": 52437298,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630359#comment52437298_1630359",
                            "body": "@e.tadeu it doesn&#39;t even matter if you&#39;re modifying it or not. Changing your if statement to: <code>if data != datalist[-1]:</code> and keeping everything else the same would be the best way to code this in my opinion."
                        },
                        {
                            "owner": {
                                "account_id": 1620758,
                                "reputation": 6561,
                                "user_id": 1497385,
                                "user_type": "registered",
                                "accept_rate": 59,
                                "display_name": "Ark-kun"
                            },
                            "reply_to_user": {
                                "account_id": 4156881,
                                "reputation": 1551,
                                "user_id": 3407933,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "spacetyper"
                            },
                            "edited": false,
                            "score": 11,
                            "creation_date": 1514556982,
                            "post_id": 1630359,
                            "comment_id": 83016992,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630359#comment83016992_1630359",
                            "body": "@spacetyper This breaks when the last value is non-unique."
                        },
                        {
                            "owner": {
                                "account_id": 248321,
                                "reputation": 61331,
                                "user_id": 523612,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Karl Knechtel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680074811,
                            "post_id": 1630359,
                            "comment_id": 133833364,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630359#comment133833364_1630359",
                            "body": "This doesn&#39;t answer the question; it&#39;s part of the problem statement that the input must be iterated over and each element processed in some way - it&#39;s just that the processing is <i>different</i> for the last element."
                        }
                    ],
                    "owner": {
                        "account_id": 33972,
                        "reputation": 15479,
                        "user_id": 95509,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Bartek"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 25,
                    "last_activity_date": 1256645119,
                    "creation_date": 1256645119,
                    "answer_id": 1630359,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630359#1630359",
                    "body": "<p>If you're simply looking to modify the last element in <code>data_list</code> then you can simply use the notation:</p>\n\n<pre><code>L[-1]\n</code></pre>\n\n<p>However, it looks like you're doing more than that. There is nothing really wrong with your way. I even took a quick glance at some <a href=\"http://code.djangoproject.com/browser/django/trunk/django/template/defaulttags.py\" rel=\"noreferrer\">Django code</a> for their template tags and they do basically what you're doing.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 44489,
                                "reputation": 5191,
                                "user_id": 130627,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "e.tadeu"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1256645806,
                            "post_id": 1630396,
                            "comment_id": 1498624,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630396#comment1498624_1630396",
                            "body": "But the last element should be treated similar to every other element in the list. The problem is the thing that should be done only <i>between</i> elements."
                        },
                        {
                            "owner": {
                                "account_id": 4413,
                                "reputation": 41143,
                                "user_id": 6610,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "xtofl"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1256647181,
                            "post_id": 1630396,
                            "comment_id": 1498783,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630396#comment1498783_1630396",
                            "body": "In that case, the first one is the only one without a predecessor.  Take that one apart, and loop over the rest of the list general code."
                        }
                    ],
                    "owner": {
                        "account_id": 4413,
                        "reputation": 41143,
                        "user_id": 6610,
                        "user_type": "registered",
                        "accept_rate": 72,
                        "display_name": "xtofl"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1256647432,
                    "last_edit_date": 1495540051,
                    "creation_date": 1256645477,
                    "answer_id": 1630396,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630396#1630396",
                    "body": "<p>Is there no possibility to iterate over all-but the last element, and treat the last one outside of the loop?  After all, a loop is created to do something similar to all elements you loop over; if one element needs something special, it shouldn't be in the loop.</p>\n\n<p>(see also this question: <a href=\"https://stackoverflow.com/questions/156650/does-the-last-element-in-a-loop-deserve-a-separate-treatment\">does-the-last-element-in-a-loop-deserve-a-separate-treatment</a>)</p>\n\n<p>EDIT: since the question is more about the \"in between\", either the <em>first</em> element is the special one in that it has no predecessor, or the <em>last</em> element is special in that it has no successor.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 44489,
                                "reputation": 5191,
                                "user_id": 130627,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "e.tadeu"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1256646204,
                            "post_id": 1630410,
                            "comment_id": 1498663,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630410#comment1498663_1630410",
                            "body": "But note that iterable[-1] will not work to <i>all</i> iterables (such as generator that do not have <b>len</b>)"
                        },
                        {
                            "owner": {
                                "account_id": 16137,
                                "reputation": 66317,
                                "user_id": 34855,
                                "user_type": "registered",
                                "display_name": "Ferdinand Beyer"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1256646451,
                            "post_id": 1630410,
                            "comment_id": 1498694,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630410#comment1498694_1630410",
                            "body": "If all you want is to access the last item after the loop, simply use <code>item</code> instead of re-calculating it using <code>list[-1]</code>. But nevertheless: I don&#39;t think this is what the OP was asking for, was it?"
                        },
                        {
                            "owner": {
                                "account_id": 55190,
                                "reputation": 63123,
                                "user_id": 165216,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "PaulMcG"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1256696189,
                            "post_id": 1630410,
                            "comment_id": 1503952,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630410#comment1503952_1630410",
                            "body": "Re: <code>iterable.__iter__() </code> - please don&#39;t call <code>__</code> functions directly.  Should be <code>iter(iterable)</code>."
                        },
                        {
                            "owner": {
                                "account_id": 248321,
                                "reputation": 61331,
                                "user_id": 523612,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Karl Knechtel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680074147,
                            "post_id": 1630410,
                            "comment_id": 133833217,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630410#comment133833217_1630410",
                            "body": "In 3.x, <code>iterator.next()</code> should instead be <code>next(iterator)</code>. However, this is really unpythonic. Digging into the details of the iterator protocol shouldn&#39;t be necessary for this task - <code>for</code> loops exist specifically so that code like this isn&#39;t necessary for normal cases."
                        }
                    ],
                    "owner": {
                        "account_id": 6018,
                        "reputation": 588679,
                        "user_id": 9951,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "Bite code"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1256730984,
                    "last_edit_date": 1256730984,
                    "creation_date": 1256645719,
                    "answer_id": 1630410,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630410#1630410",
                    "body": "<p>There is nothing wrong with your way, unless you will have 100 000 loops and wants save 100 000 \"if\" statements. In that case, you can go that way :</p>\n\n<pre><code>iterable = [1,2,3] # Your date\niterator = iter(iterable) # get the data iterator\n\ntry :   # wrap all in a try / except\n    while 1 : \n        item = iterator.next() \n        print item # put the \"for loop\" code here\nexcept StopIteration, e : # make the process on the last element here\n    print item\n</code></pre>\n\n<p>Outputs :</p>\n\n<pre><code>1\n2\n3\n3\n</code></pre>\n\n<p>But really, in your case I feel like it's overkill.</p>\n\n<p>In any case, you will probably be luckier with slicing :</p>\n\n<pre><code>for item in iterable[:-1] :\n    print item\nprint \"last :\", iterable[-1]\n\n#outputs\n1\n2\nlast : 3\n</code></pre>\n\n<p>or just :</p>\n\n<pre><code>for item in iterable :\n    print item\nprint iterable[-1]\n\n#outputs\n1\n2\n3\nlast : 3\n</code></pre>\n\n<p>Eventually, a KISS way to do you stuff, and that would work with any iterable, including the ones without <code>__len__</code> :</p>\n\n<pre><code>item = ''\nfor item in iterable :\n    print item\nprint item\n</code></pre>\n\n<p>Ouputs:</p>\n\n<pre><code>1\n2\n3\n3\n</code></pre>\n\n<p>If feel like I would do it that way, seems simple to me.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 37549,
                        "reputation": 54122,
                        "user_id": 107366,
                        "user_type": "registered",
                        "display_name": "Ants Aasma"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1256649441,
                    "creation_date": 1256649441,
                    "answer_id": 1630742,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630742#1630742",
                    "body": "<p>You can use a sliding window over the input data to get a peek at the next value and use a sentinel to detect the last value. This works on any iterable, so you don't need to know the length beforehand. The pairwise implementation is from <a href=\"http://docs.python.org/library/itertools.html\" rel=\"noreferrer\">itertools recipes</a>.</p>\n\n<pre><code>from itertools import tee, izip, chain\n\ndef pairwise(seq):\n    a,b = tee(seq)\n    next(b, None)\n    return izip(a,b)\n\ndef annotated_last(seq):\n    \"\"\"Returns an iterable of pairs of input item and a boolean that show if\n    the current item is the last item in the sequence.\"\"\"\n    MISSING = object()\n    for current_item, next_item in pairwise(chain(seq, [MISSING])):\n        yield current_item, next_item is MISSING:\n\nfor item, is_last_item in annotated_last(data_list):\n    if is_last_item:\n        # current item is the last item\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 16137,
                                "reputation": 66317,
                                "user_id": 34855,
                                "user_type": "registered",
                                "display_name": "Ferdinand Beyer"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1257360105,
                            "post_id": 1630853,
                            "comment_id": 1549502,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630853#comment1549502_1630853",
                            "body": "Function calls are way slower then <code>if</code> statements so the \u201cwasted execution\u201d argument does not hold."
                        },
                        {
                            "owner": {
                                "account_id": 6358,
                                "reputation": 388738,
                                "user_id": 10661,
                                "user_type": "registered",
                                "accept_rate": 91,
                                "display_name": "S.Lott"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1257360191,
                            "post_id": 1630853,
                            "comment_id": 1549508,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630853#comment1549508_1630853",
                            "body": "I&#39;m not sure what the speed difference between function call and if-statement has to do with anything.  The point is that this formulation has no if-statement that&#39;s always false (except once.)"
                        },
                        {
                            "owner": {
                                "account_id": 16137,
                                "reputation": 66317,
                                "user_id": 34855,
                                "user_type": "registered",
                                "display_name": "Ferdinand Beyer"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1257360722,
                            "post_id": 1630853,
                            "comment_id": 1549560,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630853#comment1549560_1630853",
                            "body": "I interpreted your statement \u201c\u2026and doesn&#39;t require a lot of wasted execution of an if condition which is always false except once\u201d as \u201c\u2026and is faster since it saves a couple of <code>if</code>s\u201d. Obviously you are just refering to \u201ccode cleanliness\u201d?"
                        },
                        {
                            "owner": {
                                "account_id": 1172394,
                                "reputation": 313,
                                "user_id": 1149282,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Markus von Broady"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1569395508,
                            "post_id": 1630853,
                            "comment_id": 102578432,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630853#comment102578432_1630853",
                            "body": "Is defining a function instead of using an <code>if</code> statement really considered cleaner by Python community?"
                        }
                    ],
                    "owner": {
                        "account_id": 6358,
                        "reputation": 388738,
                        "user_id": 10661,
                        "user_type": "registered",
                        "accept_rate": 91,
                        "display_name": "S.Lott"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 27,
                    "last_activity_date": 1602777419,
                    "last_edit_date": 1602777419,
                    "creation_date": 1256650716,
                    "answer_id": 1630853,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630853#1630853",
                    "body": "<p>The 'code between' is an example of the <strong>Head-Tail</strong> pattern.</p>\n<p>You have an item, which is followed by a sequence of ( between, item ) pairs.  You can also view this as a sequence of (item, between) pairs followed by an item.  It's generally simpler to take the first element as special and all the others as the &quot;standard&quot; case.</p>\n<p>Further, to avoid repeating code, you have to provide a function or other object to contain the code you don't want to repeat.  Embedding an <strong>if</strong> statement in a loop which is always false except one time is kind of silly.</p>\n<pre><code>def item_processing( item ):\n    # *the common processing*\n\nhead_tail_iter = iter( someSequence )\nhead = next(head_tail_iter)\nitem_processing( head )\nfor item in head_tail_iter:\n    # *the between processing*\n    item_processing( item )\n</code></pre>\n<p>This is more reliable because it's slightly easier to prove,  It doesn't create an extra data structure (i.e., a copy of a list) and doesn't require a lot of wasted execution of an <strong>if</strong> condition which is always false except once.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 809443,
                        "reputation": 12118,
                        "user_id": 108445,
                        "user_type": "unregistered",
                        "display_name": "Anon"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1256650780,
                    "creation_date": 1256650780,
                    "answer_id": 1630865,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1630865#1630865",
                    "body": "<p>Assuming input as an iterator, here's a way using tee and izip from itertools:</p>\n\n<pre><code>from itertools import tee, izip\nitems, between = tee(input_iterator, 2)  # Input must be an iterator.\nfirst = items.next()\ndo_to_every_item(first)  # All \"do to every\" operations done to first item go here.\nfor i, b in izip(items, between):\n    do_between_items(b)  # All \"between\" operations go here.\n    do_to_every_item(i)  # All \"do to every\" operations go here.\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>&gt;&gt;&gt; def do_every(x): print \"E\", x\n...\n&gt;&gt;&gt; def do_between(x): print \"B\", x\n...\n&gt;&gt;&gt; test_input = iter(range(5))\n&gt;&gt;&gt;\n&gt;&gt;&gt; from itertools import tee, izip\n&gt;&gt;&gt;\n&gt;&gt;&gt; items, between = tee(test_input, 2)\n&gt;&gt;&gt; first = items.next()\n&gt;&gt;&gt; do_every(first)\nE 0\n&gt;&gt;&gt; for i,b in izip(items, between):\n...     do_between(b)\n...     do_every(i)\n...\nB 0\nE 1\nB 1\nE 2\nB 2\nE 3\nB 3\nE 4\n&gt;&gt;&gt;\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 248321,
                                "reputation": 61331,
                                "user_id": 523612,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Karl Knechtel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680074868,
                            "post_id": 1633483,
                            "comment_id": 133833376,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1633483#comment133833376_1633483",
                            "body": "This is functionally the same as the <code>lookahead</code> iterator in Ferdinand Beyer&#39;s answer."
                        }
                    ],
                    "owner": {
                        "account_id": 25197,
                        "reputation": 15109,
                        "user_id": 64618,
                        "user_type": "registered",
                        "accept_rate": 62,
                        "display_name": "Andrew Dalke"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 16,
                    "last_activity_date": 1256679915,
                    "last_edit_date": 1256679915,
                    "creation_date": 1256675571,
                    "answer_id": 1633483,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/1633483#1633483",
                    "body": "<p>This is similar to Ants Aasma's approach but without using the itertools module. It's also a lagging iterator which looks-ahead a single element in the iterator stream:</p>\n\n<pre><code>def last_iter(it):\n    # Ensure it's an iterator and get the first field\n    it = iter(it)\n    prev = next(it)\n    for item in it:\n        # Lag by one item so I know I'm not at the end\n        yield 0, prev\n        prev = item\n    # Last item\n    yield 1, prev\n\ndef test(data):\n    result = list(last_iter(data))\n    if not result:\n        return\n    if len(result) &gt; 1:\n        assert set(x[0] for x in result[:-1]) == set([0]), result\n    assert result[-1][0] == 1\n\ntest([])\ntest([1])\ntest([1, 2])\ntest(range(5))\ntest(xrange(4))\n\nfor is_last, item in last_iter(\"Hi!\"):\n    print is_last, item\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 4815,
                                "reputation": 379779,
                                "user_id": 7432,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "Bryan Oakley"
                            },
                            "edited": false,
                            "score": 26,
                            "creation_date": 1453394741,
                            "post_id": 30885340,
                            "comment_id": 57592109,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/30885340#comment57592109_30885340",
                            "body": "You&#39;ve just reimplemented the join function: `&quot; &amp; &quot;.join([str(x) for x in l])"
                        },
                        {
                            "owner": {
                                "account_id": 400391,
                                "reputation": 5187,
                                "user_id": 766330,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "plhn"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1491805802,
                            "post_id": 30885340,
                            "comment_id": 73697094,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/30885340#comment73697094_30885340",
                            "body": "string concatenation is somewhat inefficient. If <code>len(l)=1000000</code> in this example, program will run for a while. <code>append</code>is recommended afaik. <code>l=[1,2,3]; l.append(4);</code>"
                        },
                        {
                            "owner": {
                                "account_id": 145428,
                                "reputation": 121960,
                                "user_id": 355230,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "martineau"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1603033667,
                            "post_id": 30885340,
                            "comment_id": 113901991,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/30885340#comment113901991_30885340",
                            "body": "Slicing isn&#39;t an option for all things that a <code>for</code> can iterate."
                        }
                    ],
                    "owner": {
                        "account_id": 6481707,
                        "reputation": 613,
                        "user_id": 5018484,
                        "user_type": "registered",
                        "display_name": "BeckmaR"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 48,
                    "last_activity_date": 1434527169,
                    "creation_date": 1434527169,
                    "answer_id": 30885340,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/30885340#30885340",
                    "body": "<p>Although that question is pretty old, I came here via google and I found a quite simple way: List slicing. Let's say you want to put an '&amp;' between all list entries.</p>\n\n<pre><code>s = \"\"\nl = [1, 2, 3]\nfor i in l[:-1]:\n    s = s + str(i) + ' &amp; '\ns = s + str(l[-1])\n</code></pre>\n\n<p>This returns '1 &amp; 2 &amp; 3'.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 181632,
                        "reputation": 15356,
                        "user_id": 442006,
                        "user_type": "registered",
                        "accept_rate": 84,
                        "display_name": "Roger Dahl"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1435513277,
                    "last_edit_date": 1435513277,
                    "creation_date": 1435030042,
                    "answer_id": 30993336,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/30993336#30993336",
                    "body": "<p>Use slicing and <code>is</code> to check for the last element:</p>\n\n<pre><code>for data in data_list:\n    &lt;code_that_is_done_for_every_element&gt;\n    if not data is data_list[-1]:\n        &lt;code_that_is_done_between_elements&gt;\n</code></pre>\n\n<p><strong>Caveat emptor</strong>: This only works if all elements in the list are actually different (have different locations in memory). Under the hood, Python may detect equal elements and reuse the same objects for them. For instance, for strings of the same value and common integers.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 1677846,
                        "reputation": 947,
                        "user_id": 1542937,
                        "user_type": "registered",
                        "accept_rate": 50,
                        "display_name": "tsf144"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1452289897,
                    "creation_date": 1452289897,
                    "answer_id": 34686726,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/34686726#34686726",
                    "body": "<p>if you are going through the list, for me this worked too:</p>\n\n<pre><code>for j in range(0, len(Array)):\n    if len(Array) - j &gt; 1:\n        notLast()\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6600681,
                                "reputation": 1988,
                                "user_id": 5678653,
                                "user_type": "registered",
                                "display_name": "Konchog"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1640175375,
                            "post_id": 38376487,
                            "comment_id": 124532338,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/38376487#comment124532338_38376487",
                            "body": "Why not just do <code>while element_list:</code> ?"
                        }
                    ],
                    "owner": {
                        "account_id": 96779,
                        "reputation": 169,
                        "user_id": 262867,
                        "user_type": "registered",
                        "display_name": "Anderson Santos"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1468505350,
                    "creation_date": 1468505350,
                    "answer_id": 38376487,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/38376487#38376487",
                    "body": "<p>Google brought me to this old question and I think I could add a different approach to this problem.</p>\n\n<p>Most of the answers here would deal with a proper treatment of a for loop  control as it was asked, but if the data_list is destructible, I would suggest that you pop the items from the list until you end up with an empty list:</p>\n\n<pre><code>while True:\n    element = element_list.pop(0)\n    do_this_for_all_elements()\n    if not element:\n        do_this_only_for_last_element()\n        break\n    do_this_for_all_elements_but_last()\n</code></pre>\n\n<p>you could even use <em>while len(element_list)</em> if you don't need to do anything with the last element. I find this solution more elegant then dealing with next().</p>\n"
                },
                {
                    "owner": {
                        "account_id": 9154274,
                        "reputation": 730,
                        "user_id": 6807687,
                        "user_type": "registered",
                        "accept_rate": 50,
                        "display_name": "Palza"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 53,
                    "last_activity_date": 1670439357,
                    "last_edit_date": 1670439357,
                    "creation_date": 1478231774,
                    "answer_id": 40415039,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/40415039#40415039",
                    "body": "<p>if the items are unique:</p>\n<pre><code>for x in list:\n    #code\n    if x == list[-1]:\n        #code\n</code></pre>\n<p>other options:</p>\n<pre><code>pos = -1\nfor x in list:\n    pos += 1\n    #code\n    if pos == len(list) - 1:\n        #code\n\n\nfor x in list:\n    #code\n#code - e.g. print x\n\n\nif len(list) &gt; 0:\n    for x in list[:-1]:\n        #process everything except the last element\n    for x in list[-1:]:\n        #process only last element\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 9365786,
                        "reputation": 1763,
                        "user_id": 6950750,
                        "user_type": "registered",
                        "accept_rate": 36,
                        "display_name": "DerWeh"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1491227123,
                    "creation_date": 1491227123,
                    "answer_id": 43186322,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/43186322#43186322",
                    "body": "<p>The most simple solution coming to my mind is:</p>\n\n<pre><code>for item in data_list:\n    try:\n        print(new)\n    except NameError: pass\n    new = item\nprint('The last item: ' + str(new))\n</code></pre>\n\n<p>So we always look ahead one item by delaying the the processing one iteration. To skip doing something during the first iteration I simply catch the error.</p>\n\n<p>Of course you need to think a bit, in order for the <code>NameError</code> to be raised when you want it.</p>\n\n<p>Also keep the `counstruct</p>\n\n<pre><code>try:\n    new\nexcept NameError: pass\nelse:\n    # continue here if no error was raised\n</code></pre>\n\n<p>This relies that the name new wasn't previously defined. If you are paranoid you can ensure that <code>new</code> doesn't exist using:</p>\n\n<pre><code>try:\n    del new\nexcept NameError:\n    pass\n</code></pre>\n\n<p>Alternatively you can of course also use an if statement (<code>if notfirst: print(new) else: notfirst = True</code>). But as far as I know the overhead is bigger.</p>\n\n<hr>\n\n<pre><code>Using `timeit` yields:\n\n    ...: try: new = 'test' \n    ...: except NameError: pass\n    ...: \n100000000 loops, best of 3: 16.2 ns per loop\n</code></pre>\n\n<p>so I expect the overhead to be unelectable. </p>\n"
                },
                {
                    "owner": {
                        "account_id": 15154,
                        "reputation": 1430,
                        "user_id": 31707,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Ethan T"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1495569860,
                    "creation_date": 1495569860,
                    "answer_id": 44144068,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/44144068#44144068",
                    "body": "<p>Count the items once and keep up with the number of items remaining:</p>\n\n<pre><code>remaining = len(data_list)\nfor data in data_list:\n    code_that_is_done_for_every_element\n\n    remaining -= 1\n    if remaining:\n        code_that_is_done_between_elements\n</code></pre>\n\n<p>This way you only evaluate the length of the list once. Many of the solutions on this page seem to assume the length is unavailable in advance, but that is not part of your question. If you have the length, use it.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 86508,
                        "reputation": 3147,
                        "user_id": 240515,
                        "user_type": "registered",
                        "display_name": "user240515"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1501628076,
                    "creation_date": 1501628076,
                    "answer_id": 45448858,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/45448858#45448858",
                    "body": "<p>Delay the special handling of the last item until after the loop.</p>\n\n<pre><code>&gt;&gt;&gt; for i in (1, 2, 3):\n...     pass\n...\n&gt;&gt;&gt; i\n3\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 248321,
                                "reputation": 61331,
                                "user_id": 523612,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Karl Knechtel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680073938,
                            "post_id": 49486415,
                            "comment_id": 133833166,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/49486415#comment133833166_49486415",
                            "body": "Repeatedly performing <code>data_list.pop(0)</code> is slow for large lists, because the entire remaining contents of the list must be shifted down into the previous positions."
                        }
                    ],
                    "owner": {
                        "account_id": 4618741,
                        "reputation": 322,
                        "user_id": 3744390,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Aliaksandr Klimovich"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1572904444,
                    "last_edit_date": 1572904444,
                    "creation_date": 1522050505,
                    "answer_id": 49486415,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/49486415#49486415",
                    "body": "<p>I like the approach of @ethan-t, but <code>while True</code> is dangerous from my point of view.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>data_list = [1, 2, 3, 2, 1]  # sample data\nL = list(data_list)  # destroy L instead of data_list\nwhile L:\n    e = L.pop(0)\n    if L:\n        print(f'process element {e}')\n    else:\n        print(f'process last element {e}')\ndel L\n</code></pre>\n\n<p>Here, <code>data_list</code> is so that last element is equal by value to the first one of the list. L can be exchanged with <code>data_list</code> but in this case it results empty after the loop. <code>while True</code> is also possible to use if you check that list is not empty before the processing or the check is not needed (ouch!).</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>data_list = [1, 2, 3, 2, 1]\nif data_list:\n    while True:\n        e = data_list.pop(0)\n        if data_list:\n            print(f'process element {e}')\n        else:\n            print(f'process last element {e}')\n            break\nelse:\n    print('list is empty')\n</code></pre>\n\n<p>The good part is that it is fast. The bad - it is destructible (<code>data_list</code> becomes empty).</p>\n\n<p>Most intuitive solution:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>data_list = [1, 2, 3, 2, 1]  # sample data\nfor i, e in enumerate(data_list):\n    if i != len(data_list) - 1:\n        print(f'process element {e}')\n    else:\n        print(f'process last element {e}')\n</code></pre>\n\n<p>Oh yes, you have already proposed it!</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6600681,
                                "reputation": 1988,
                                "user_id": 5678653,
                                "user_type": "registered",
                                "display_name": "Konchog"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1640175303,
                            "post_id": 51422086,
                            "comment_id": 124532306,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/51422086#comment124532306_51422086",
                            "body": "This is nice, but normally the final element isn&#39;t special. It&#39;s just at the end."
                        },
                        {
                            "owner": {
                                "account_id": 248321,
                                "reputation": 61331,
                                "user_id": 523612,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Karl Knechtel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680075261,
                            "post_id": 51422086,
                            "comment_id": 133833473,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/51422086#comment133833473_51422086",
                            "body": "This is redundant with several other answers."
                        }
                    ],
                    "owner": {
                        "account_id": 1404140,
                        "reputation": 1306,
                        "user_id": 1332314,
                        "user_type": "registered",
                        "accept_rate": 84,
                        "display_name": "Chris"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1532001348,
                    "creation_date": 1532001348,
                    "answer_id": 51422086,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/51422086#51422086",
                    "body": "<p>For me the most simple and pythonic way to handle a special case at the end of a list is:</p>\n\n<pre><code>for data in data_list[:-1]:\n    handle_element(data)\nhandle_special_element(data_list[-1])\n</code></pre>\n\n<p>Of course this can also be used to treat the first element in a special way .</p>\n"
                },
                {
                    "owner": {
                        "account_id": 3406733,
                        "reputation": 11,
                        "user_id": 2857610,
                        "user_type": "registered",
                        "display_name": "amolpachpute"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1549003592,
                    "creation_date": 1549003592,
                    "answer_id": 54474271,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/54474271#54474271",
                    "body": "<p>There can be multiple ways. slicing will be fastest. Adding one more which uses .index() method:</p>\n\n<pre><code>&gt;&gt;&gt; l1 = [1,5,2,3,5,1,7,43]                                                 \n&gt;&gt;&gt; [i for i in l1 if l1.index(i)+1==len(l1)]                               \n[43]\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 438002,
                        "reputation": 2078,
                        "user_id": 825995,
                        "user_type": "registered",
                        "display_name": "jeroent"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1563557849,
                    "creation_date": 1563557849,
                    "answer_id": 57117290,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/57117290#57117290",
                    "body": "<p>Instead of counting up, you can also count down:</p>\n\n<pre><code>  nrToProcess = len(list)\n  for s in list:\n    s.doStuff()\n    nrToProcess -= 1\n    if nrToProcess==0:  # this is the last one\n      s.doSpecialStuff()\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6600681,
                                "reputation": 1988,
                                "user_id": 5678653,
                                "user_type": "registered",
                                "display_name": "Konchog"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1640175183,
                            "post_id": 59765584,
                            "comment_id": 124532255,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/59765584#comment124532255_59765584",
                            "body": "The first fails for non-unique values.  The second is a &#39;c&#39; like approach that masks using enumerate.  please fix for duplicate items, or mark the constraint (only use this for lists of unique values)..."
                        }
                    ],
                    "owner": {
                        "account_id": 9579440,
                        "reputation": 1807,
                        "user_id": 7114428,
                        "user_type": "registered",
                        "display_name": "AnythingIsFine"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1579164981,
                    "last_edit_date": 1579164981,
                    "creation_date": 1579163449,
                    "answer_id": 59765584,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/59765584#59765584",
                    "body": "<p>One simple solution that comes to mind would be:</p>\n\n<pre><code>for i in MyList:\n    # Check if 'i' is the last element in the list\n    if i == MyList[-1]:\n        # Do something different for the last\n    else:\n        # Do something for all other elements\n</code></pre>\n\n<p>A second equally simple solution could be achieved by using a counter:</p>\n\n<pre><code># Count the no. of elements in the list\nListLength = len(MyList)\n# Initialize a counter\ncount = 0\n\nfor i in MyList:\n    # increment counter\n    count += 1\n    # Check if 'i' is the last element in the list\n    # by using the counter\n    if count == ListLength:\n        # Do something different for the last\n    else:\n        # Do something for all other elements\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1153665,
                                "reputation": 4013,
                                "user_id": 1134851,
                                "user_type": "registered",
                                "display_name": "Rod Xavier"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1606080140,
                            "post_id": 63235745,
                            "comment_id": 114844579,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/63235745#comment114844579_63235745",
                            "body": "This won&#39;t work for collections of non-unique items."
                        },
                        {
                            "owner": {
                                "account_id": 6600681,
                                "reputation": 1988,
                                "user_id": 5678653,
                                "user_type": "registered",
                                "display_name": "Konchog"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1640175104,
                            "post_id": 63235745,
                            "comment_id": 124532226,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/63235745#comment124532226_63235745",
                            "body": "same mistake as Risyad.. please fix for duplicate items, or mark the constraint (only use this for lists of unique values)"
                        }
                    ],
                    "owner": {
                        "account_id": 16142252,
                        "reputation": 885,
                        "user_id": 11653053,
                        "user_type": "registered",
                        "display_name": "howdoicode"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1680075293,
                    "last_edit_date": 1680075293,
                    "creation_date": 1596482763,
                    "answer_id": 63235745,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/63235745#63235745",
                    "body": "<p>Better late than never.  Your original code used <code>enumerate()</code>, but you only used the <code>i</code> index to check if it's the last item in a list.  Here's an simpler alternative (if you don't need <code>enumerate()</code>) using negative indexing:</p>\n<pre class=\"lang-py prettyprint-override\"><code>for data in data_list:\n    code_that_is_done_for_every_element\n    if data != data_list[-1]:\n        code_that_is_done_between_elements\n</code></pre>\n<p><code>if data != data_list[-1]</code> checks if the current item in the iteration is NOT the last item in the list.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1640684,
                                "reputation": 4166,
                                "user_id": 1513187,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "Nikola Lukic"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1614800882,
                            "post_id": 63463667,
                            "comment_id": 117498675,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/63463667#comment117498675_63463667",
                            "body": "So simple solution!"
                        },
                        {
                            "owner": {
                                "account_id": 171220,
                                "reputation": 796,
                                "user_id": 398491,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "daigorocub"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1628698786,
                            "post_id": 63463667,
                            "comment_id": 121493187,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/63463667#comment121493187_63463667",
                            "body": "We should calculate the length before the loop. This way it will be calculated every loop."
                        },
                        {
                            "owner": {
                                "account_id": 1489474,
                                "reputation": 926,
                                "user_id": 1396928,
                                "user_type": "registered",
                                "display_name": "tony"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1646927334,
                            "post_id": 63463667,
                            "comment_id": 126249638,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/63463667#comment126249638_63463667",
                            "body": "You may want to change the <code>list</code> variable to <code>items</code> or something else. <a href=\"https://docs.python.org/3/library/functions.html#func-list\" rel=\"nofollow noreferrer\"><code>list</code></a> is a <a href=\"https://docs.python.org/3/library/functions.html\" rel=\"nofollow noreferrer\">built-in function</a>."
                        },
                        {
                            "owner": {
                                "account_id": 1632921,
                                "reputation": 3789,
                                "user_id": 1507124,
                                "user_type": "registered",
                                "display_name": "CervEd"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1696114098,
                            "post_id": 63463667,
                            "comment_id": 136112665,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/63463667#comment136112665_63463667",
                            "body": "the question is about iterables, dealing with the last element of something with a length is trivial"
                        }
                    ],
                    "owner": {
                        "account_id": 13200517,
                        "reputation": 3313,
                        "user_id": 9533909,
                        "user_type": "registered",
                        "display_name": "hassanzadeh.sd"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 21,
                    "last_activity_date": 1597735274,
                    "creation_date": 1597735274,
                    "answer_id": 63463667,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/63463667#63463667",
                    "body": "<p>you can determine the last element with this code :</p>\n<pre><code>for i,element in enumerate(list):\n    if (i==len(list)-1):\n        print(&quot;last element is&quot; + element)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6600681,
                                "reputation": 1988,
                                "user_id": 5678653,
                                "user_type": "registered",
                                "display_name": "Konchog"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1640174995,
                            "post_id": 64038818,
                            "comment_id": 124532184,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/64038818#comment124532184_64038818",
                            "body": "This will fail if there are repeat values in the list. Please fix for duplicate items, or mark the constraint (only use this for lists of unique values)"
                        }
                    ],
                    "owner": {
                        "account_id": 9752712,
                        "reputation": 307,
                        "user_id": 12722668,
                        "user_type": "registered",
                        "display_name": "Risyad"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1600915648,
                    "creation_date": 1600915648,
                    "answer_id": 64038818,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/64038818#64038818",
                    "body": "<p>Just check if data is not the same as the last data in data_list (<code>data_list[-1]</code>).</p>\n<pre><code>for data in data_list:\n    code_that_is_done_for_every_element\n    if data != data_list[- 1]:\n        code_that_is_done_between_elements\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 37811,
                        "reputation": 105529,
                        "user_id": 108205,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "jsbueno"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1602777232,
                    "creation_date": 1602777232,
                    "answer_id": 64375353,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/64375353#64375353",
                    "body": "<p>So, this is definitely not the &quot;shorter&quot; version - and one might digress if &quot;shortest&quot; and &quot;Pythonic&quot; are actually compatible.</p>\n<p>But if one needs this pattern often, just put the logic in to a\n10-liner generator - and get any meta-data related to an element's\nposition directly on the <code>for</code> call. Another advantage here is that it will\nwork wit an arbitrary iterable, not only Sequences.</p>\n<pre class=\"lang-py prettyprint-override\"><code>_sentinel = object()\n\ndef iter_check_last(iterable):\n    iterable = iter(iterable)\n    current_element = next(iterable, _sentinel)\n    while current_element is not _sentinel:\n        next_element = next(iterable, _sentinel)\n        yield (next_element is _sentinel, current_element)\n        current_element = next_element\n</code></pre>\n<pre class=\"lang-py prettyprint-override\"><code>In [107]: for is_last, el in iter_check_last(range(3)):\n     ...:     print(is_last, el)\n     ...: \n     ...: \nFalse 0\nFalse 1\nTrue 2\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 248321,
                                "reputation": 61331,
                                "user_id": 523612,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Karl Knechtel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680075192,
                            "post_id": 66310747,
                            "comment_id": 133833451,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/66310747#comment133833451_66310747",
                            "body": "This implements the same iterator as <code>lookahead</code> in Ferdinand Beyer&#39;s answer, but I think it is a much cleaner implementation for modern versions of Python. It is slightly less performant in my testing, but not in a way that is likely to matter."
                        },
                        {
                            "owner": {
                                "account_id": 1632921,
                                "reputation": 3789,
                                "user_id": 1507124,
                                "user_type": "registered",
                                "display_name": "CervEd"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1707313835,
                            "post_id": 66310747,
                            "comment_id": 137430650,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/66310747#comment137430650_66310747",
                            "body": "try/catch for control flow is the opposite of elegant if you ask me"
                        }
                    ],
                    "owner": {
                        "account_id": 2494019,
                        "reputation": 59,
                        "user_id": 2170916,
                        "user_type": "registered",
                        "display_name": "manxisuo"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1613974364,
                    "last_edit_date": 1613974364,
                    "creation_date": 1613973862,
                    "answer_id": 66310747,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/66310747#66310747",
                    "body": "<p>I will provide with a more elegant and robust way as follows, using unpacking:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def mark_last(iterable):\n    try:\n        *init, last = iterable\n    except ValueError:  # if iterable is empty\n        return\n\n    for e in init:\n        yield e, True\n    yield last, False\n</code></pre>\n<p>Test:</p>\n<pre class=\"lang-py prettyprint-override\"><code>for a, b in mark_last([1, 2, 3]):\n    print(a, b)\n</code></pre>\n<p>The result is:</p>\n<blockquote>\n<p>1 True<br />\n2 True<br />\n3 False</p>\n</blockquote>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1632921,
                                "reputation": 3789,
                                "user_id": 1507124,
                                "user_type": "registered",
                                "display_name": "CervEd"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1707313695,
                            "post_id": 66679834,
                            "comment_id": 137430616,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/66679834#comment137430616_66679834",
                            "body": "problem is that it relies on length"
                        },
                        {
                            "owner": {
                                "account_id": 197017,
                                "reputation": 7764,
                                "user_id": 440805,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "mkoistinen"
                            },
                            "reply_to_user": {
                                "account_id": 1632921,
                                "reputation": 3789,
                                "user_id": 1507124,
                                "user_type": "registered",
                                "display_name": "CervEd"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1713368968,
                            "post_id": 66679834,
                            "comment_id": 138115428,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/66679834#comment138115428_66679834",
                            "body": "@CervEd doesn&#39;t OPs question which is looking for the &quot;last element&quot; imply length tho?"
                        },
                        {
                            "owner": {
                                "account_id": 1632921,
                                "reputation": 3789,
                                "user_id": 1507124,
                                "user_type": "registered",
                                "display_name": "CervEd"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1713370902,
                            "post_id": 66679834,
                            "comment_id": 138115792,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/66679834#comment138115792_66679834",
                            "body": "Not really. By <i>length</i> I mean <code>len</code> which requires the <i>length</i> to be known at the start of iteration as opposed to at the end. For example, reading lines from <code>sys.stdin</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 197017,
                        "reputation": 7764,
                        "user_id": 440805,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "mkoistinen"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1616008727,
                    "creation_date": 1616008727,
                    "answer_id": 66679834,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/66679834#66679834",
                    "body": "<p>This is an old question, and there's already lots of great responses, but I felt like this was pretty Pythonic:</p>\n<pre><code>def rev_enumerate(lst):\n    &quot;&quot;&quot;\n    Similar to enumerate(), but counts DOWN to the last element being the\n    zeroth, rather than counting UP from the first element being the zeroth.\n\n    Since the length has to be determined up-front, this is not suitable for\n    open-ended iterators.\n\n    Parameters\n    ----------\n    lst : Iterable\n        An iterable with a length (list, tuple, dict, set).\n\n    Yields\n    ------\n    tuple\n        A tuple with the reverse cardinal number of the element, followed by\n        the element of the iterable.\n    &quot;&quot;&quot;\n    length = len(lst) - 1\n    for i, element in enumerate(lst):\n        yield length - i, element\n</code></pre>\n<p>Used like this:</p>\n<pre><code>for num_remaining, item in rev_enumerate(['a', 'b', 'c']):\n    if not num_remaining:\n        print(f'This is the last item in the list: {item}')\n</code></pre>\n<p>Or perhaps you'd like to do the opposite:</p>\n<pre><code>for num_remaining, item in rev_enumerate(['a', 'b', 'c']):\n    if num_remaining:\n        print(f'This is NOT the last item in the list: {item}')\n</code></pre>\n<p>Or, just to know how many remain as you go...</p>\n<pre><code>for num_remaining, item in rev_enumerate(['a', 'b', 'c']):\n    print(f'After {item}, there are {num_remaining} items.')\n</code></pre>\n<p>I think the versatility and familiarity with the existing <code>enumerate</code> makes it most Pythonic.</p>\n<p>Caveat, unlike <code>enumerate()</code>, <code>rev_enumerate()</code> requires that the input implement <code>__len__</code>, but this includes lists, tuples, dicts and sets just fine.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 278292,
                                "reputation": 1776,
                                "user_id": 572801,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "cwhisperer"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1625033566,
                            "post_id": 67179925,
                            "comment_id": 120515623,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/67179925#comment120515623_67179925",
                            "body": "Nice approach, but does not work for queryset: &quot;Negative indexing is not supported.&quot;"
                        },
                        {
                            "owner": {
                                "account_id": 1085180,
                                "reputation": 35714,
                                "user_id": 1081043,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "wisbucky"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1633062734,
                            "post_id": 67179925,
                            "comment_id": 122665052,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/67179925#comment122665052_67179925",
                            "body": "The <code>else:</code> statement is useless here. You can just put <code>print(&#39; &#39;.join(cities[-1].upper()))</code> as the third line (unindented) and delete the <code>else:</code> line. ### The <code>for-else</code> loop is only useful when there is a <code>break</code> inside the <code>for</code> loop. Then <code>else</code> will only execute if the <code>break</code> was not triggered. <a href=\"https://stackoverflow.com/questions/9979970/why-does-python-use-else-after-for-and-while-loops\" title=\"why does python use else after for and while loops\">stackoverflow.com/questions/9979970/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 248321,
                                "reputation": 61331,
                                "user_id": 523612,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Karl Knechtel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680074692,
                            "post_id": 67179925,
                            "comment_id": 133833333,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/67179925#comment133833333_67179925",
                            "body": "Aside from the pointless use of <code>else:</code>, this is functionally equivalent to BeckmaR&#39;s answer and adds no additional insight."
                        }
                    ],
                    "owner": {
                        "account_id": 5531554,
                        "reputation": 1528,
                        "user_id": 9847625,
                        "user_type": "registered",
                        "display_name": "Nurul Huda"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 14,
                    "last_activity_date": 1625628796,
                    "last_edit_date": 1625628796,
                    "creation_date": 1618925194,
                    "answer_id": 67179925,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/67179925#67179925",
                    "body": "<p>We can achieve that using <code>for-else</code></p>\n<pre class=\"lang-py prettyprint-override\"><code>cities = [\n  'Jakarta',\n  'Surabaya',\n  'Semarang'\n]\n\nfor city in cities[:-1]:\n  print(city)\nelse:\n  print(' '.join(cities[-1].upper()))\n</code></pre>\n<p>output:</p>\n<pre><code>Jakarta\nSurabaya\nS E M A R A N G\n</code></pre>\n<p>The idea is we only using <code>for-else</code> loops until <code>n-1</code> index, then after the <code>for</code> is exhausted, we access directly the last index using <code>[-1]</code>.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 248321,
                                "reputation": 61331,
                                "user_id": 523612,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Karl Knechtel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680074914,
                            "post_id": 70359494,
                            "comment_id": 133833386,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/70359494#comment133833386_70359494",
                            "body": "This is functionally the same as hassanzadeh.sd&#39;s answer."
                        }
                    ],
                    "owner": {
                        "account_id": 12500940,
                        "reputation": 1985,
                        "user_id": 9099423,
                        "user_type": "registered",
                        "display_name": "W Kenny"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1639551285,
                    "creation_date": 1639551285,
                    "answer_id": 70359494,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/70359494#70359494",
                    "body": "<p>If you are looping the <code>List</code>,\nUsing <code>enumerate</code> function is one of the best try.</p>\n<pre><code>for index, element in enumerate(ListObj):\n    # print(index, ListObj[index], len(ListObj) )\n\n    if (index != len(ListObj)-1 ):\n        # Do things to the element which is not the last one\n    else:\n        # Do things to the element which is the last one\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3036674,
                                "reputation": 4042,
                                "user_id": 2574612,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "Nicholas Pipitone"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1658641624,
                            "post_id": 70448978,
                            "comment_id": 129098891,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/70448978#comment129098891_70448978",
                            "body": "That&#39;s a little rough because it&#39;s N^2. The moment you do that with even a list of 10,000 elements, you&#39;ll feel the lag."
                        },
                        {
                            "owner": {
                                "account_id": 6600681,
                                "reputation": 1988,
                                "user_id": 5678653,
                                "user_type": "registered",
                                "display_name": "Konchog"
                            },
                            "reply_to_user": {
                                "account_id": 3036674,
                                "reputation": 4042,
                                "user_id": 2574612,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "Nicholas Pipitone"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1658759621,
                            "post_id": 70448978,
                            "comment_id": 129125026,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/70448978#comment129125026_70448978",
                            "body": "@NicholasPipitone, how do you get N^2? I get O(n).  list.pop() with no arguments removes the last element. Accessing that element can be done in constant time. There are no elements following so nothing needs to be shifted. I answered my own question."
                        },
                        {
                            "owner": {
                                "account_id": 3036674,
                                "reputation": 4042,
                                "user_id": 2574612,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "Nicholas Pipitone"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1658776407,
                            "post_id": 70448978,
                            "comment_id": 129131174,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/70448978#comment129131174_70448978",
                            "body": "Yes, it&#39;s O(n) now. Re: &quot;how do you get N^2?&quot; That was the list.pop(0) version, the current version is good."
                        }
                    ],
                    "owner": {
                        "account_id": 6600681,
                        "reputation": 1988,
                        "user_id": 5678653,
                        "user_type": "registered",
                        "display_name": "Konchog"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1658760091,
                    "last_edit_date": 1658760091,
                    "creation_date": 1640175691,
                    "answer_id": 70448978,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/70448978#70448978",
                    "body": "<p>If you are happy to be destructive with the list, then there's the following.\nWe are going to reverse the list in order to speed up the process from O(n^2) to O(n), because pop(0) moves the list each iteration - cf. Nicholas Pipitone's comment below</p>\n<pre class=\"lang-py prettyprint-override\"><code>data_list.reverse()\nwhile data_list:\n   value = data_list.pop()\n   code_that_is_done_for_every_element(value)\n   if data_list:\n       code_that_is_done_between_elements(value)\n   else:\n       code_that_is_done_for_last_element(value)\n\n\n</code></pre>\n<p>This works well with empty lists, and lists of non-unique items.\nSince it's often the case that lists are transitory, this works pretty well ... at the cost of destructing the list.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": -1,
                                "reputation": 1,
                                "user_id": -1,
                                "user_type": "moderator",
                                "display_name": "Community"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1641766899,
                            "post_id": 70645684,
                            "comment_id": 124886355,
                            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/70645684#comment124886355_70645684",
                            "body": "Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/70645684/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."
                        }
                    ],
                    "owner": {
                        "account_id": 23884605,
                        "reputation": 1,
                        "user_id": 17884895,
                        "user_type": "unregistered",
                        "display_name": "Greg Willson"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1641773838,
                    "last_edit_date": 1641773838,
                    "creation_date": 1641763830,
                    "answer_id": 70645684,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/70645684#70645684",
                    "body": "<p>I have found it convenient to define the loop value before the loop expression. For this box example, match the value in the loop, or wherever else you may need it.</p>\n<pre class=\"lang-py prettyprint-override\"><code>numberofboxes = 1411\n\nfor j in range(1,numberofboxes):\n    if j != numberofboxes - 1:\n        print (&quot;},&quot;)\n    else:\n        print(&quot;}&quot;)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 9885388,
                        "reputation": 919,
                        "user_id": 7320048,
                        "user_type": "registered",
                        "display_name": "Praveen Kumar"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1659196908,
                    "creation_date": 1659196908,
                    "answer_id": 73177133,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/73177133#73177133",
                    "body": "<p>I've shared two simple methods below to find the end of the loop.</p>\n<p><strong>Method 1:</strong></p>\n<pre><code>num_list = [1, 2, 3, 4]\n\nfor n in num_list:\n    if num_list[-1] == n:\n        print('this is the last iteration of the loop')\n</code></pre>\n<p><strong>Method 2:</strong></p>\n<pre><code>num_list = [1, 2, 3, 4]\n\nloop_count = len(num_list) - 1  # 3\nfor index, num in enumerate(num_list):\n    if index == loop_count:\n        print('this is the last iteration of the loop')\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 6539891,
                        "reputation": 56,
                        "user_id": 5057886,
                        "user_type": "registered",
                        "display_name": "Florian"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1663841080,
                    "creation_date": 1663841080,
                    "answer_id": 73812803,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/73812803#73812803",
                    "body": "<p>I just came across this question and my generic solution uses an Iterator:</p>\n<pre><code>from typing import TypeVar, Iterable\nE = TypeVar('E')\n\ndef metait(i: Iterable[E]) -&gt; Iterable[tuple[E, bool, bool]]:\n\n    first = True\n    previous = None\n    for elem in i:\n        if previous:\n            yield previous, first, False\n            first = False\n        previous = elem\n\n    if previous:\n        yield previous, first, True\n</code></pre>\n<p>you will receive a tuple with the original elements and flags for the first and last item. It can be used with every iterable:</p>\n<pre><code>d = {'a': (1,2,3), 'b': (4,5,6), 'c': (7,8,9)}\n\nfor (k,v), is_first, is_last in metait(d.items()):\n    print(f'{k}: {v}  {is_first} {is_last}')\n</code></pre>\n<p>This will give you:</p>\n<pre><code>a: (1, 2, 3)  True False\nb: (4, 5, 6)  False False\nc: (7, 8, 9)  False True\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 248321,
                        "reputation": 61331,
                        "user_id": 523612,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Karl Knechtel"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1689997461,
                    "last_edit_date": 1689997461,
                    "creation_date": 1680074451,
                    "answer_id": 75874263,
                    "question_id": 1630320,
                    "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop/75874263#75874263",
                    "body": "<h2>Special case: input has a known &quot;sentinel&quot; value at the end, or values are known to be distinct</h2>\n<p>In this case, we can simply check for the value of the last input.</p>\n<h2>Special case: do something extra with the last element only</h2>\n<p>Python's <code>for</code> loop <a href=\"https://stackoverflow.com/questions/291978\">does not create a separate scope</a>, which is <a href=\"https://stackoverflow.com/questions/3611760\">by design</a>. Therefore, just write the &quot;extra&quot; code <em>after</em> the loop:</p>\n<pre><code>for element in iterable:\n    do_normal_thing(element)\ndo_extra_thing(element)\n</code></pre>\n<h2>Special case: do something extra &quot;between&quot; each element</h2>\n<p>Often, people conceive of this problem as: do something normal and then something extra on each iteration, except skipping the extra part on the last iteration. As described in <a href=\"https://stackoverflow.com/a/1630853/523612\">S.Lott's answer</a>, this makes the problem too complex. It is trivial to detect the <strong>first</strong> iteration of a <code>for</code> loop - for example, by using a simple flag variable - which also allows for solving the problem: do something <strong>extra and then something normal</strong> on each iteration, except skipping the extra part on the <strong>first</strong> iteration. Thus:</p>\n<pre><code>first = True\nfor element in iterable:\n    if first:\n        do_extra_thing(element)\n        first = False\n    do_normal_thing(element)\n</code></pre>\n<p>(Of course, there are cases that are even more special. For example, if &quot;do something normal&quot; means &quot;append the element to an output string&quot;, and &quot;do something extra&quot; means &quot;append a separator string to the output&quot;, then what we are really doing is <a href=\"https://stackoverflow.com/questions/12453580\">joining up the elements with separators in between</a>.)</p>\n<h2>Special case: handle overlapping pairs of elements</h2>\n<p>Sometimes people who need to loop over overlapping pairs of elements in the input, will conceive of this as: loop over every element except the last; for each of those elements, do something with that element and the one after it.</p>\n<p>This is actually a very awkward way to describe the problem, because getting the &quot;next element&quot; <em>from an element</em> does not work. We need either an iterator over the input, or index values (for a sequence).</p>\n<p>This problem is better considered as a <em>completely different</em> problem, which is covered in depth here: <a href=\"https://stackoverflow.com/questions/5434891\">How can I iterate over overlapping (current, next) pairs of values from a list?</a>.</p>\n<h2>General case: do something special with the last element</h2>\n<p>If the problem doesn't match either of the above special cases, it will be necessary to take a more heavy-duty approach. Here are some options:</p>\n<h3>Verify the last element by its index</h3>\n<p>If the input is a sequence (i.e., it has a known length), then it is trivial to determine the index of the last element. By <a href=\"https://stackoverflow.com/questions/522563\">accessing the index</a> using <code>enumerate</code>, then, it becomes straightforward to solve the problem. For example:</p>\n<pre><code>for index, element in enumerate(sequence):\n    if index == len(sequence) - 1:\n        do_something_special(element)\n    else:\n        do_something_normal(element)\n</code></pre>\n<h3>Slice the input</h3>\n<p>Again if the input is a sequence, we can take a <a href=\"https://stackoverflow.com/questions/509211\">slice</a> that contains every element but the last, iterate over that, and then handle the last element:</p>\n<pre><code>for element in sequence[:-1]:\n    do_something_normal(element)\ndo_something_special(sequence[-1])\n</code></pre>\n<p>This assumes that there is at least one element (otherwise, <code>element[-1]</code> will raise an <code>IndexError</code>). This can be handled in the usual ways (<a href=\"/q/11360858/\">by an explicit check ahead of time, or with standard exception handling</a>); or we can iterate over two separate slices to avoid the error:</p>\n<pre><code>for element in sequence[:-1]:\n    do_something_normal(element)\nfor element in sequence[-1:]:\n    do_something_special(element)\n</code></pre>\n<p>This works because slicing doesn't care about &quot;missing&quot; elements; if <code>sequence</code> is empty, then <code>sequence[-1:]</code> will simply be an empty list.</p>\n<p>It's not possible to slice iterables without a definite length, because they can only be processed by looking at the elements one at a time, and simply looking at an element doesn't determine whether it's the last one. <code>itertools.islice</code> cannot fix this (and therefore explicitly disallows negative values for the stop point of the slice).</p>\n<h3>Use lookahead</h3>\n<p>See the <code>lookahead</code> iterator implementation in <a href=\"https://stackoverflow.com/a/1630350/523612\">Ferdinand Beyer's answer</a>; this allows us to write code like:</p>\n<pre><code>for element, is_last in lookahead(sequence):\n    if is_last:\n        do_something_special(element)\n    else:\n        do_something_normal(element)\n</code></pre>\n<p>Another implementation of this idea is <a href=\"https://stackoverflow.com/a/1630742/523612\">Ants Aasma's answer</a>. This basically reframes the problem as a <a href=\"https://stackoverflow.com/questions/5434891\">&quot;iterate over overlapping pairs&quot;</a> problem, except that a sentinel value is added so that the last value in the input has a &quot;pair&quot;, and the loop can then simply check for that sentinel.</p>\n"
                }
            ],
            "owner": {
                "account_id": 44489,
                "reputation": 5191,
                "user_id": 130627,
                "user_type": "registered",
                "accept_rate": 50,
                "display_name": "e.tadeu"
            },
            "comment_count": 5,
            "is_answered": true,
            "accepted_answer_id": 1630350,
            "answer_count": 34,
            "score": 325,
            "last_activity_date": 1689997461,
            "creation_date": 1256644473,
            "last_edit_date": 1674040430,
            "question_id": 1630320,
            "link": "https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop",
            "title": "What is the pythonic way to detect the last element in a &#39;for&#39; loop?",
            "body": "<p>How can I treat the last element of the input specially, when iterating with a <code>for</code> loop? In particular, if there is code that should only occur &quot;between&quot; elements (and not &quot;after&quot; the last one), how can I structure the code?</p>\n<p>Currently, I write code like so:</p>\n<pre><code>for i, data in enumerate(data_list):\n    code_that_is_done_for_every_element\n    if i != len(data_list) - 1:\n        code_that_is_done_between_elements\n</code></pre>\n<p>How can I simplify or improve this?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 9429
}