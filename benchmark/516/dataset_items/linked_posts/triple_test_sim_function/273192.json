{
    "items": [
        {
            "tags": [
                "python",
                "exception",
                "path",
                "directory",
                "operating-system"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 39102,
                        "reputation": 2903,
                        "user_id": 112699,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Brian Hawkins"
                    },
                    "edited": false,
                    "score": 42,
                    "creation_date": 1274916621,
                    "post_id": 273192,
                    "comment_id": 2969634,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories#comment2969634_273192",
                    "body": "In general you might need to account for the case where there&#39;s no directory in the filename.  On my machine dirname(&#39;foo.txt&#39;) gives &#39;&#39;, which doesn&#39;t exist and causes makedirs() to fail."
                },
                {
                    "owner": {
                        "account_id": 392965,
                        "reputation": 1905,
                        "user_id": 754550,
                        "user_type": "registered",
                        "display_name": "miracle173"
                    },
                    "edited": false,
                    "score": 9,
                    "creation_date": 1392839574,
                    "post_id": 273192,
                    "comment_id": 33149166,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories#comment33149166_273192",
                    "body": "if the path exists one has not only to check if it is a directory and not a regular file or another object (many answers check this) it is also necessary to check if it is writable (I did not find an answer that checked this)"
                },
                {
                    "owner": {
                        "account_id": 1632148,
                        "reputation": 11557,
                        "user_id": 1506477,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Thamme Gowda"
                    },
                    "edited": false,
                    "score": 14,
                    "creation_date": 1477366827,
                    "post_id": 273192,
                    "comment_id": 67724774,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories#comment67724774_273192",
                    "body": "In case you came here to create parent directories of file path string <code>p</code>, here is my code snippet: <code>os.makedirs(p[:p.rindex(os.path.sep)], exist_ok=True)</code>"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 72095,
                                "reputation": 19451,
                                "user_id": 208273,
                                "user_type": "moderator",
                                "display_name": "Ryan M"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1682389163,
                            "post_id": 273206,
                            "comment_id": 134203893,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273206#comment134203893_273206",
                            "body": "This doesn&#39;t create parent directories.  From the <code>os.mkdir</code> docs: <i>&quot;If a parent directory in the path does not exist, <code>FileNotFoundError</code> is raised.&quot;</i>"
                        }
                    ],
                    "owner": {
                        "account_id": 13402,
                        "reputation": 4422,
                        "user_id": 26880,
                        "user_type": "registered",
                        "accept_rate": 56,
                        "display_name": "gone"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 87,
                    "last_activity_date": 1444925112,
                    "last_edit_date": 1444925112,
                    "creation_date": 1226084401,
                    "answer_id": 273206,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273206#273206",
                    "body": "<p>Try the <a href=\"https://docs.python.org/2/library/os.path.html#os.path.exists\" rel=\"noreferrer\" title=\"os.path.exists\"><code>os.path.exists</code></a> function</p>\n\n<pre><code>if not os.path.exists(dir):\n    os.mkdir(dir)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 914,
                                "reputation": 237628,
                                "user_id": 1199,
                                "user_type": "registered",
                                "display_name": "Blair Conrad"
                            },
                            "edited": false,
                            "score": 26,
                            "creation_date": 1226084995,
                            "post_id": 273208,
                            "comment_id": 126666,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273208#comment126666_273208",
                            "body": "with the try/except, you will mask errors in directory creation, in the case when the directory didn&#39;t exist but for some reason you can&#39;t make it"
                        }
                    ],
                    "owner": {
                        "account_id": 5304,
                        "reputation": 21409,
                        "user_id": 8458,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "Douglas Mayle"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 110,
                    "last_activity_date": 1558008939,
                    "last_edit_date": 1558008939,
                    "creation_date": 1226084485,
                    "answer_id": 273208,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273208#273208",
                    "body": "<p>Check <a href=\"https://docs.python.org/3/library/os.html#os.makedirs\" rel=\"noreferrer\"><code>os.makedirs</code></a>:  (It makes sure the complete path exists.)<br>\n To handle the fact the directory might exist, catch <code>OSError</code>.\n(If <code>exist_ok</code> is <code>False</code> (the default), an <code>OSError</code> is raised if the target directory already exists.)</p>\n\n<pre><code>import os\ntry:\n    os.makedirs('./path/to/somewhere')\nexcept OSError:\n    pass\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 914,
                                "reputation": 237628,
                                "user_id": 1199,
                                "user_type": "registered",
                                "display_name": "Blair Conrad"
                            },
                            "edited": false,
                            "score": 12,
                            "creation_date": 1226090141,
                            "post_id": 273227,
                            "comment_id": 126884,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273227#comment126884_273227",
                            "body": "The race condition is a good point, but the approach in <a href=\"http://stackoverflow.com/questions/273192/#273208\">stackoverflow.com/questions/273192/#273208</a>, will mask a failure to create the directory. Don&#39;t feel bad for voting down - you don&#39;t like the answer. It&#39;s what votes are for."
                        },
                        {
                            "owner": {
                                "account_id": 257234,
                                "reputation": 1097,
                                "user_id": 538507,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Andrew"
                            },
                            "edited": false,
                            "score": 38,
                            "creation_date": 1322507439,
                            "post_id": 273227,
                            "comment_id": 10226673,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273227#comment10226673_273227",
                            "body": "Remember that os.path.exists() isn&#39;t free. If the normal case is that the directory will be there, then the case where it isn&#39;t should be handled as an exception. In other words, try to open and write to your file, catch the OSError exception and, based on errno, do your makedir() and re-try or re-raise. This creates duplication of code unless you wrap the writing in a local method."
                        },
                        {
                            "owner": {
                                "account_id": 441885,
                                "reputation": 60711,
                                "user_id": 832230,
                                "user_type": "registered",
                                "display_name": "Asclepius"
                            },
                            "edited": false,
                            "score": 27,
                            "creation_date": 1360863179,
                            "post_id": 273227,
                            "comment_id": 20864661,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273227#comment20864661_273227",
                            "body": "<code>os.path.exists</code> also returns <code>True</code> for a file. I have posted an answer to address this."
                        },
                        {
                            "owner": {
                                "account_id": 517460,
                                "reputation": 2791,
                                "user_id": 1481384,
                                "user_type": "registered",
                                "accept_rate": 82,
                                "display_name": "Bobble"
                            },
                            "edited": false,
                            "score": 18,
                            "creation_date": 1369032640,
                            "post_id": 273227,
                            "comment_id": 23938267,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273227#comment23938267_273227",
                            "body": "As commenters to other answers here have noted, the <code>exists_ok</code> parameter to <code>os.makedirs()</code> can be used to cover how prior existence of the path is handled, since Python 3.2."
                        },
                        {
                            "owner": {
                                "account_id": 184675,
                                "reputation": 14840,
                                "user_id": 420867,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "drevicko"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1373092908,
                            "post_id": 273227,
                            "comment_id": 25439821,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273227#comment25439821_273227",
                            "body": "<code>os.mkdirs()</code> can create unintended folders if a path separator is accidentally left out, the current folder is not as expected, a path element contains the path separator. If you use <code>os.mkdir()</code> these bugs will raise an exception, alerting you to their existence."
                        },
                        {
                            "owner": {
                                "account_id": 18001769,
                                "reputation": 1840,
                                "user_id": 13083583,
                                "user_type": "registered",
                                "display_name": "do-me"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1639037555,
                            "post_id": 273227,
                            "comment_id": 124247265,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273227#comment124247265_273227",
                            "body": "If you want to create the directory in your current working directory leave out the first slash <code>Path(&quot;my_directory&quot;).mkdir(parents=True, exist_ok=True)</code>."
                        }
                    ],
                    "owner": {
                        "account_id": 914,
                        "reputation": 237628,
                        "user_id": 1199,
                        "user_type": "registered",
                        "display_name": "Blair Conrad"
                    },
                    "comment_count": 6,
                    "is_accepted": true,
                    "score": 7098,
                    "last_activity_date": 1577697804,
                    "last_edit_date": 1577697804,
                    "creation_date": 1226084767,
                    "answer_id": 273227,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273227#273227",
                    "body": "<p>On Python \u2265 3.5, use <a href=\"https://docs.python.org/library/pathlib.html#pathlib.Path.mkdir\" rel=\"noreferrer\"><code>pathlib.Path.mkdir</code></a>:</p>\n\n<pre><code>from pathlib import Path\nPath(\"/my/directory\").mkdir(parents=True, exist_ok=True)\n</code></pre>\n\n<p>For older versions of Python, I see two answers with good qualities, each with a small flaw, so I will give my take on it:</p>\n\n<p>Try <a href=\"https://docs.python.org/library/os.path.html#os.path.exists\" rel=\"noreferrer\"><code>os.path.exists</code></a>, and consider <a href=\"https://docs.python.org/library/os.html#os.makedirs\" rel=\"noreferrer\"><code>os.makedirs</code></a> for the creation.</p>\n\n<pre><code>import os\nif not os.path.exists(directory):\n    os.makedirs(directory)\n</code></pre>\n\n<p>As noted in comments and elsewhere, there's a race condition &ndash; if the directory is created between the <code>os.path.exists</code> and the <code>os.makedirs</code> calls, the <code>os.makedirs</code> will fail with an <code>OSError</code>. Unfortunately, blanket-catching <code>OSError</code> and continuing is not foolproof, as it will ignore a failure to create the directory due to other factors, such as insufficient permissions, full disk, etc.</p>\n\n<p>One option would be to trap the <code>OSError</code> and examine the embedded error code (see <a href=\"https://stackoverflow.com/questions/273698/is-there-a-cross-platform-way-of-getting-information-from-pythons-oserror\">Is there a cross-platform way of getting information from Python\u2019s OSError</a>):</p>\n\n<pre><code>import os, errno\n\ntry:\n    os.makedirs(directory)\nexcept OSError as e:\n    if e.errno != errno.EEXIST:\n        raise\n</code></pre>\n\n<p>Alternatively, there could be a second <code>os.path.exists</code>, but suppose another created the directory after the first check, then removed it before the second one &ndash; we could still be fooled. </p>\n\n<p>Depending on the application, the danger of concurrent operations may be more or less than the danger posed by other factors such as file permissions. The developer would have to know more about the particular application being developed and its expected environment before choosing an implementation.</p>\n\n<p>Modern versions of Python improve this code quite a bit, both by exposing <a href=\"https://docs.python.org/3.3/library/exceptions.html?#FileExistsError\" rel=\"noreferrer\"><code>FileExistsError</code></a> (in 3.3+)...</p>\n\n<pre><code>try:\n    os.makedirs(\"path/to/directory\")\nexcept FileExistsError:\n    # directory already exists\n    pass\n</code></pre>\n\n<p>...and by allowing <a href=\"https://docs.python.org/3.2/library/os.html#os.makedirs\" rel=\"noreferrer\">a keyword argument to <code>os.makedirs</code> called <code>exist_ok</code></a> (in 3.2+).</p>\n\n<pre><code>os.makedirs(\"path/to/directory\", exist_ok=True)  # succeeds even if directory exists.\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 13980,
                        "reputation": 41371,
                        "user_id": 28380,
                        "user_type": "registered",
                        "accept_rate": 91,
                        "display_name": "Ali Afshar"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 44,
                    "last_activity_date": 1401545111,
                    "last_edit_date": 1401545111,
                    "creation_date": 1226092983,
                    "answer_id": 273679,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/273679#273679",
                    "body": "<p>I have put the following down. It's not totally foolproof though.</p>\n\n<pre><code>import os\n\ndirname = 'create/me'\n\ntry:\n    os.makedirs(dirname)\nexcept OSError:\n    if os.path.exists(dirname):\n        # We are nearly safe\n        pass\n    else:\n        # There was an error on creation, so make sure we know about it\n        raise\n</code></pre>\n\n<p>Now as I say, this is not really foolproof, because we have the possiblity of failing to create the directory, and another process creating it during that period.</p>\n"
                },
                {
                    "owner": {
                        "user_type": "does_not_exist",
                        "display_name": "crimsonstone"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 130,
                    "last_activity_date": 1665046579,
                    "last_edit_date": 1665046579,
                    "creation_date": 1231955852,
                    "answer_id": 444023,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/444023#444023",
                    "body": "<p>I would personally recommend that you use <code>os.path.isdir()</code> to test instead of <code>os.path.exists()</code>.</p>\n<pre><code>&gt;&gt;&gt; os.path.exists('/tmp/dirname')\nTrue\n&gt;&gt;&gt; os.path.exists('/tmp/dirname/filename.etc')\nTrue\n&gt;&gt;&gt; os.path.isdir('/tmp/dirname/filename.etc')\nFalse\n&gt;&gt;&gt; os.path.isdir('/tmp/fakedirname')\nFalse\n</code></pre>\n<p>If you have:</p>\n<pre><code>&gt;&gt;&gt; directory = raw_input(&quot;:: &quot;)\n</code></pre>\n<p>And a foolish user input:</p>\n<pre><code>:: /tmp/dirname/filename.etc\n</code></pre>\n<p>... You're going to end up with a directory named <code>filename.etc</code> when you pass that argument to <code>os.makedirs()</code> if you test with <code>os.path.exists()</code>.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 517812,
                                "reputation": 952,
                                "user_id": 971529,
                                "user_type": "registered",
                                "display_name": "isaaclw"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1334346416,
                            "post_id": 5032238,
                            "comment_id": 13012230,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment13012230_5032238",
                            "body": "What&#39;s the common reason <i>against</i> this? ie: why do people prefer the if statement to the try/except? Is it that try/except is more dangerous if you miss the error?"
                        },
                        {
                            "owner": {
                                "account_id": 24568,
                                "reputation": 31030,
                                "user_id": 62596,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Heikki Toivonen"
                            },
                            "reply_to_user": {
                                "account_id": 517812,
                                "reputation": 952,
                                "user_id": 971529,
                                "user_type": "registered",
                                "display_name": "isaaclw"
                            },
                            "edited": false,
                            "score": 26,
                            "creation_date": 1336415000,
                            "post_id": 5032238,
                            "comment_id": 13553061,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment13553061_5032238",
                            "body": "The accepted answer is actually dangerous because it has a race-condition. It is simpler, though, so if you are unaware of the race-condition, or think it won&#39;t apply to you, that would be your obvious first pick."
                        },
                        {
                            "owner": {
                                "account_id": 441885,
                                "reputation": 60711,
                                "user_id": 832230,
                                "user_type": "registered",
                                "display_name": "Asclepius"
                            },
                            "edited": false,
                            "score": 18,
                            "creation_date": 1358356401,
                            "post_id": 5032238,
                            "comment_id": 19972619,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment19972619_5032238",
                            "body": "Raising the exception only when <code>exception.errno != errno.EEXIST</code> will unintentionally ignore the case when path exists but is a non-directory object such as a file. The exception should ideally be raised if the path is a non-directory object."
                        },
                        {
                            "owner": {
                                "account_id": 361030,
                                "reputation": 3957,
                                "user_id": 703382,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "Navin"
                            },
                            "edited": false,
                            "score": 195,
                            "creation_date": 1360424176,
                            "post_id": 5032238,
                            "comment_id": 20709813,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment20709813_5032238",
                            "body": "Note that the above code is equivalent to <code>os.makedirs(path,exist_ok=True)</code>"
                        },
                        {
                            "owner": {
                                "account_id": 441885,
                                "reputation": 60711,
                                "user_id": 832230,
                                "user_type": "registered",
                                "display_name": "Asclepius"
                            },
                            "reply_to_user": {
                                "account_id": 361030,
                                "reputation": 3957,
                                "user_id": 703382,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "Navin"
                            },
                            "edited": false,
                            "score": 60,
                            "creation_date": 1360864004,
                            "post_id": 5032238,
                            "comment_id": 20865058,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment20865058_5032238",
                            "body": "@Navin The <code>exist_ok</code> parameter was introduced in Python 3.2.  It is not present in Python 2.x.  I will incorporate it into my answer."
                        },
                        {
                            "owner": {
                                "account_id": 1486150,
                                "reputation": 29127,
                                "user_id": 1394393,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "jpmc26"
                            },
                            "edited": false,
                            "score": 28,
                            "creation_date": 1398811274,
                            "post_id": 5032238,
                            "comment_id": 35809094,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment35809094_5032238",
                            "body": "@HeikkiToivonen Technically speaking, if another program is modifying the directories and files at the same time your program is, your entire program is one giant race condition. What&#39;s to stop another program from just deleting this directory after the code creates it and before you actually put files in it?"
                        },
                        {
                            "owner": {
                                "account_id": 935589,
                                "reputation": 25266,
                                "user_id": 974555,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "gerrit"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1464185242,
                            "post_id": 5032238,
                            "comment_id": 62381702,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment62381702_5032238",
                            "body": "In Python 3.3 and above, you can use <code>FileExistsError</code>."
                        },
                        {
                            "owner": {
                                "account_id": 73090,
                                "reputation": 12590,
                                "user_id": 695591,
                                "user_type": "registered",
                                "accept_rate": 76,
                                "display_name": "Cl&#233;ment"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1496198490,
                            "post_id": 5032238,
                            "comment_id": 75557024,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment75557024_5032238",
                            "body": "Downvoted. The source code of <code>mkdirs</code> actually warns <i>against</i> checking for EEXIST: <a href=\"https://github.com/python/cpython/blob/e304e33c16e060932d1e2cc8a030d42b02b429b5/Lib/os.py#L195\" rel=\"nofollow noreferrer\">github.com/python/cpython/blob/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 1312338,
                                "reputation": 681,
                                "user_id": 6809909,
                                "user_type": "registered",
                                "display_name": "rtkaleta"
                            },
                            "reply_to_user": {
                                "account_id": 73090,
                                "reputation": 12590,
                                "user_id": 695591,
                                "user_type": "registered",
                                "accept_rate": 76,
                                "display_name": "Cl&#233;ment"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1499175710,
                            "post_id": 5032238,
                            "comment_id": 76791976,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment76791976_5032238",
                            "body": "@Cl&#233;ment You&#39;re looking at Python 3.x source code, the answer given above applies to Python 2.7: <a href=\"https://github.com/python/cpython/blob/2.7/Lib/os.py#L153\" rel=\"nofollow noreferrer\">github.com/python/cpython/blob/2.7/Lib/os.py#L153</a>"
                        },
                        {
                            "owner": {
                                "account_id": 11730609,
                                "reputation": 38169,
                                "user_id": 8586227,
                                "user_type": "registered",
                                "display_name": "Davis Herring"
                            },
                            "reply_to_user": {
                                "account_id": 1486150,
                                "reputation": 29127,
                                "user_id": 1394393,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "jpmc26"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1506988723,
                            "post_id": 5032238,
                            "comment_id": 80025279,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment80025279_5032238",
                            "body": "@jpmc26: It&#39;s not that there are no race conditions; it&#39;s that your program doesn&#39;t contain two <i>different</i> places where you might detect what (due to races) is really the same condition."
                        },
                        {
                            "owner": {
                                "account_id": 1486150,
                                "reputation": 29127,
                                "user_id": 1394393,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "jpmc26"
                            },
                            "reply_to_user": {
                                "account_id": 11730609,
                                "reputation": 38169,
                                "user_id": 8586227,
                                "user_type": "registered",
                                "display_name": "Davis Herring"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1506990461,
                            "post_id": 5032238,
                            "comment_id": 80025676,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment80025676_5032238",
                            "body": "@DavisHerring What you say isn&#39;t exactly true. An existence check occurs any time you access the directory or its contents. So if you create the directory and then open a file in it, you&#39;re still vulnerable to the same race condition. The answer is good; it&#39;s just still not safe if another program is modifying stuff, which is what Heikki (not the answer) asserted."
                        },
                        {
                            "owner": {
                                "account_id": 11730609,
                                "reputation": 38169,
                                "user_id": 8586227,
                                "user_type": "registered",
                                "display_name": "Davis Herring"
                            },
                            "reply_to_user": {
                                "account_id": 1486150,
                                "reputation": 29127,
                                "user_id": 1394393,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "jpmc26"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1506991640,
                            "post_id": 5032238,
                            "comment_id": 80025922,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment80025922_5032238",
                            "body": "@jpmc26: The races are materially worse the other way: with <code>if not path.exists(...)</code> a concurrent <code>mkdir</code> can give you an exception (despite the check).  More broadly put, the check doesn&#39;t protect you from having to deal with any race condition, so it&#39;s strictly inferior to include it."
                        },
                        {
                            "owner": {
                                "account_id": 11730609,
                                "reputation": 38169,
                                "user_id": 8586227,
                                "user_type": "registered",
                                "display_name": "Davis Herring"
                            },
                            "reply_to_user": {
                                "account_id": 1486150,
                                "reputation": 29127,
                                "user_id": 1394393,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "jpmc26"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1506996208,
                            "post_id": 5032238,
                            "comment_id": 80026903,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#comment80026903_5032238",
                            "body": "@jpmc26: It prevents the <code>mkdir</code> race (in that you have two clear cases and obvious code paths to deal with them).  Contention doesn&#39;t have to be a &quot;battle&quot;: it&#39;s easily useful to have several programs create different parts of a directory."
                        }
                    ],
                    "owner": {
                        "account_id": 24568,
                        "reputation": 31030,
                        "user_id": 62596,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Heikki Toivonen"
                    },
                    "comment_count": 13,
                    "is_accepted": false,
                    "score": 658,
                    "last_activity_date": 1492998954,
                    "last_edit_date": 1492998954,
                    "creation_date": 1297963045,
                    "answer_id": 5032238,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/5032238#5032238",
                    "body": "<p>Using try except and the right error code from errno module gets rid of the race condition and is cross-platform:</p>\n\n<pre><code>import os\nimport errno\n\ndef make_sure_path_exists(path):\n    try:\n        os.makedirs(path)\n    except OSError as exception:\n        if exception.errno != errno.EEXIST:\n            raise\n</code></pre>\n\n<p>In other words, we try to create the directories, but if they already exist we ignore the error. On the other hand, any other error gets reported. For example, if you create dir 'a' beforehand and remove all permissions from it, you will get an <code>OSError</code> raised with <code>errno.EACCES</code> (Permission denied, error 13).</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 268577,
                                "reputation": 6055,
                                "user_id": 557406,
                                "user_type": "registered",
                                "accept_rate": 90,
                                "display_name": "Charles L."
                            },
                            "edited": false,
                            "score": 17,
                            "creation_date": 1366955537,
                            "post_id": 14364249,
                            "comment_id": 23214713,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/14364249#comment23214713_14364249",
                            "body": "This answer covers pretty much every special case as far as I can tell.  I plan on wrapping this in a &quot;if not os.path.isdir()&quot; though since I expect the directory to exist almost every time and I can avoid the exception that way."
                        },
                        {
                            "owner": {
                                "account_id": 1486150,
                                "reputation": 29127,
                                "user_id": 1394393,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "jpmc26"
                            },
                            "reply_to_user": {
                                "account_id": 268577,
                                "reputation": 6055,
                                "user_id": 557406,
                                "user_type": "registered",
                                "accept_rate": 90,
                                "display_name": "Charles L."
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1398811147,
                            "post_id": 14364249,
                            "comment_id": 35809050,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/14364249#comment35809050_14364249",
                            "body": "@CharlesL. An exception is probably cheaper than the disk IO of the check, if your reason is performance."
                        },
                        {
                            "owner": {
                                "account_id": 347116,
                                "reputation": 12367,
                                "user_id": 681044,
                                "user_type": "registered",
                                "display_name": "kwarunek"
                            },
                            "reply_to_user": {
                                "account_id": 1486150,
                                "reputation": 29127,
                                "user_id": 1394393,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "jpmc26"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1411122681,
                            "post_id": 14364249,
                            "comment_id": 40595318,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/14364249#comment40595318_14364249",
                            "body": "@jpmc26 but makedirs does additional stat, umask, lstat when only checking to throw OSError."
                        },
                        {
                            "owner": {
                                "account_id": 347326,
                                "reputation": 1429,
                                "user_id": 681359,
                                "user_type": "registered",
                                "accept_rate": 43,
                                "display_name": "penguin359"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1451512489,
                            "post_id": 14364249,
                            "comment_id": 56817797,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/14364249#comment56817797_14364249",
                            "body": "@CharesL Anytime there&#39;s a directory separator, os.makedirs() starts off with a stat() so a pre-check with os.path.isdir() is just extra effort."
                        },
                        {
                            "owner": {
                                "account_id": 1321705,
                                "reputation": 5915,
                                "user_id": 1267398,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "SleepyCal"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1452266449,
                            "post_id": 14364249,
                            "comment_id": 57106172,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/14364249#comment57106172_14364249",
                            "body": "This is the wrong answer, as it introduces a potential FS race cond. See answer from Aaron Hall."
                        },
                        {
                            "owner": {
                                "account_id": 2843268,
                                "reputation": 1389,
                                "user_id": 2442366,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "farmir"
                            },
                            "reply_to_user": {
                                "account_id": 1321705,
                                "reputation": 5915,
                                "user_id": 1267398,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "SleepyCal"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1461741654,
                            "post_id": 14364249,
                            "comment_id": 61330983,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/14364249#comment61330983_14364249",
                            "body": "as @sleepycal has said, this suffers from a similar race condition as the accepted answer. If between raising the error and checking <code>os.path.isdir</code> someone else deletes the folder, you will raise the wrong, outdated, and confusing error that folder exists."
                        },
                        {
                            "owner": {
                                "account_id": 238568,
                                "reputation": 13013,
                                "user_id": 507544,
                                "user_type": "registered",
                                "accept_rate": 43,
                                "display_name": "nealmcb"
                            },
                            "reply_to_user": {
                                "account_id": 1321705,
                                "reputation": 5915,
                                "user_id": 1267398,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "SleepyCal"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1508689287,
                            "post_id": 14364249,
                            "comment_id": 80699694,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/14364249#comment80699694_14364249",
                            "body": "The concern about race conditions noted by @sleepycal is addressed in the comments on Heikki Toivonen&#39;s answer for many (most) use cases, including mine. If you&#39;re worried that someone else is going to remove the directory, you&#39;re still going to need to check that before using it later on. Creating multiple places where you check for what you&#39;ll need later just adds complications."
                        },
                        {
                            "owner": {
                                "account_id": 69533,
                                "reputation": 33443,
                                "user_id": 202229,
                                "user_type": "registered",
                                "accept_rate": 74,
                                "display_name": "smci"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1546938480,
                            "post_id": 14364249,
                            "comment_id": 95009226,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/14364249#comment95009226_14364249",
                            "body": "On Windows, what about permissions errors when parent directory is owned by Administrator, or else a special directory e.g. <code>C:\\Program Files or ...(x86)</code> or <code>Documents and Settings</code>, and hence creating directory fails? Does this code propagate the exact permissions error?"
                        },
                        {
                            "owner": {
                                "account_id": 441885,
                                "reputation": 60711,
                                "user_id": 832230,
                                "user_type": "registered",
                                "display_name": "Asclepius"
                            },
                            "reply_to_user": {
                                "account_id": 69533,
                                "reputation": 33443,
                                "user_id": 202229,
                                "user_type": "registered",
                                "accept_rate": 74,
                                "display_name": "smci"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1546967630,
                            "post_id": 14364249,
                            "comment_id": 95025820,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/14364249#comment95025820_14364249",
                            "body": "@smci It doesn&#39;t seem so, but at least on Linux the available permissions can then be checked. I don&#39;t know about Windows."
                        },
                        {
                            "owner": {
                                "account_id": 4657884,
                                "reputation": 95,
                                "user_id": 4933452,
                                "user_type": "registered",
                                "display_name": "fitzl"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1547013828,
                            "post_id": 14364249,
                            "comment_id": 95040494,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/14364249#comment95040494_14364249",
                            "body": "Note that <code>NotADirectoryError: [Errno 20] Not a directory: ...</code> <i>is</i> raised by <code>pathlib.Path(&#39;&#47;my&#47;directory&#39;).mkdir(parents=True, exist_ok=True)</code> in cases where a file exists matching the proposed name of a directory in the path, e.g., if <code>my</code> is a file."
                        }
                    ],
                    "owner": {
                        "account_id": 441885,
                        "reputation": 60711,
                        "user_id": 832230,
                        "user_type": "registered",
                        "display_name": "Asclepius"
                    },
                    "comment_count": 10,
                    "is_accepted": false,
                    "score": 1546,
                    "last_activity_date": 1675916041,
                    "last_edit_date": 1675916041,
                    "creation_date": 1358357479,
                    "answer_id": 14364249,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/14364249#14364249",
                    "body": "<h2>Python 3.5+:</h2>\n<pre><code>import pathlib\npathlib.Path('/my/directory').mkdir(parents=True, exist_ok=True) \n</code></pre>\n<p><a href=\"https://docs.python.org/library/pathlib.html#pathlib.Path.mkdir\" rel=\"noreferrer\"><code>pathlib.Path.mkdir</code></a> as used above recursively creates the directory and does not raise an exception if the directory already exists. If you don't need or want the parents to be created, skip the <code>parents</code> argument.</p>\n<h2>Python 3.2+:</h2>\n<p><strong>Using <code>pathlib</code>:</strong></p>\n<p>If you can, install the current <code>pathlib</code> backport named <a href=\"https://pypi.python.org/pypi/pathlib2/\" rel=\"noreferrer\"><code>pathlib2</code></a>. Do not install the older unmaintained backport named <a href=\"https://pypi.python.org/pypi/pathlib/\" rel=\"noreferrer\"><code>pathlib</code></a>. Next, refer to the Python 3.5+ section above and use it the same.</p>\n<p>If using Python 3.4, even though it comes with <code>pathlib</code>, it is missing the useful <code>exist_ok</code> option. The backport is intended to offer a newer and superior implementation of <code>mkdir</code> which includes this missing option.</p>\n<p><strong>Using <code>os</code>:</strong></p>\n<pre><code>import os\nos.makedirs(path, exist_ok=True)\n</code></pre>\n<p><a href=\"https://docs.python.org/library/os.html#os.makedirs\" rel=\"noreferrer\"><code>os.makedirs</code></a> as used above recursively creates the directory and does not raise an exception if the directory already exists. It has the optional <code>exist_ok</code> argument only if using Python 3.2+, with a default value of <code>False</code>. This argument does not exist in Python 2.x up to 2.7. As such, there is no need for manual exception handling as with Python 2.7.</p>\n<h2>Python 2.7+:</h2>\n<p><strong>Using <code>pathlib</code>:</strong></p>\n<p>If you can, install the current <code>pathlib</code> backport named <a href=\"https://pypi.python.org/pypi/pathlib2/\" rel=\"noreferrer\"><code>pathlib2</code></a>. Do not install the older unmaintained backport named <a href=\"https://pypi.python.org/pypi/pathlib/\" rel=\"noreferrer\"><code>pathlib</code></a>. Next, refer to the Python 3.5+ section above and use it the same.</p>\n<p><strong>Using <code>os</code>:</strong></p>\n<pre><code>import os\ntry: \n    os.makedirs(path)\nexcept OSError:\n    if not os.path.isdir(path):\n        raise\n</code></pre>\n<p>While a naive solution may first use <a href=\"https://docs.python.org/2/library/os.path.html#os.path.isdir\" rel=\"noreferrer\" title=\"os.path.isdir\"><code>os.path.isdir</code></a> followed by <a href=\"https://docs.python.org/2/library/os.html#os.makedirs\" rel=\"noreferrer\" title=\"os.makedirs\"><code>os.makedirs</code></a>, the solution above reverses the order of the two operations. In doing so, it prevents a common race condition having to do with a duplicated attempt at creating the directory, and also disambiguates files from directories.</p>\n<p>Note that capturing the exception and using <code>errno</code> is of limited usefulness because <code>OSError: [Errno 17] File exists</code>, i.e. <code>errno.EEXIST</code>, is raised for both files and directories. It is more reliable simply to check if the directory exists.</p>\n<h2>Alternative:</h2>\n<p><a href=\"https://docs.python.org/distutils/apiref.html#distutils.dir_util.mkpath\" rel=\"noreferrer\"><code>mkpath</code></a> creates the nested directory, and does nothing if the directory already exists. This works in both Python 2 and 3. Note however that <a href=\"https://docs.python.org/3/library/distutils.html#module-distutils\" rel=\"noreferrer\"><code>distutils</code></a> has been deprecated, and is scheduled for removal in Python 3.12.</p>\n<pre><code>import distutils.dir_util\ndistutils.dir_util.mkpath(path)\n</code></pre>\n<p>Per <a href=\"http://bugs.python.org/issue10948\" rel=\"noreferrer\">Bug 10948</a>, a severe limitation of this alternative is that it works only once per python process for a given path. In other words, if you use it to create a directory, then delete the directory from inside or outside Python, then use <code>mkpath</code> again to recreate the same directory, <code>mkpath</code> will simply silently use its invalid cached info of having previously created the directory, and will not actually make the directory again. In contrast, <code>os.makedirs</code> doesn't rely on any such cache. This limitation may be okay for some applications.</p>\n<hr />\n<p>With regard to the directory's <em>mode</em>, please refer to the documentation if you care about it.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 2293268,
                        "reputation": 1114,
                        "user_id": 2258526,
                        "user_type": "registered",
                        "display_name": "kavadias"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 21,
                    "last_activity_date": 1514689968,
                    "last_edit_date": 1514689968,
                    "creation_date": 1405351747,
                    "answer_id": 24740135,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/24740135#24740135",
                    "body": "<p>The <a href=\"https://docs.python.org/2/library/os.html#files-and-directories\" rel=\"noreferrer\">relevant Python documentation</a> suggests the use of the <a href=\"https://docs.python.org/2/library/os.html#files-and-directories\" rel=\"noreferrer\">EAFP coding style (Easier to Ask for Forgiveness than Permission)</a>. This means that the code</p>\n\n<pre><code>try:\n    os.makedirs(path)\nexcept OSError as exception:\n    if exception.errno != errno.EEXIST:\n        raise\n    else:\n        print \"\\nBE CAREFUL! Directory %s already exists.\" % path\n</code></pre>\n\n<p>is better than the alternative</p>\n\n<pre><code>if not os.path.exists(path):\n    os.makedirs(path)\nelse:\n    print \"\\nBE CAREFUL! Directory %s already exists.\" % path\n</code></pre>\n\n<p>The documentation suggests this exactly because of the race condition discussed in this question. In addition, as others mention here, there is a performance advantage in querying once instead of twice the OS. Finally, the argument placed forward, potentially, in favour of the second code in some cases --when the developer knows the environment the application is running-- can only be advocated in the special case that the program has set up a private environment for itself (and other instances of the same program).</p>\n\n<p>Even in that case, this is a bad practice and can lead to long useless debugging. For example, the fact we set the permissions for a directory should not leave us with the impression permissions are set appropriately for our purposes. A parent directory could be mounted with other permissions. In general, a program should always work correctly and the programmer should not expect one specific environment.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 258754,
                        "reputation": 385523,
                        "user_id": 541136,
                        "user_type": "moderator",
                        "accept_rate": 96,
                        "display_name": "Russia Must Remove Putin"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 35,
                    "last_activity_date": 1499397571,
                    "last_edit_date": 1499397571,
                    "creation_date": 1421970359,
                    "answer_id": 28100717,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/28100717#28100717",
                    "body": "<blockquote>\n  <p><strong>Check if a directory exists and create it if necessary?</strong></p>\n</blockquote>\n\n<p>The direct answer to this is, assuming a simple situation where you don't expect other users or processes to be messing with your directory:</p>\n\n<pre><code>if not os.path.exists(d):\n    os.makedirs(d)\n</code></pre>\n\n<p><strong>or</strong> if making the directory is subject to race conditions (i.e. if after checking the path exists, something else may have already made it) do this:</p>\n\n<pre><code>import errno\ntry:\n    os.makedirs(d)\nexcept OSError as exception:\n    if exception.errno != errno.EEXIST:\n        raise\n</code></pre>\n\n<p>But perhaps an even better approach is to sidestep the resource contention issue, by using temporary directories via <a href=\"https://docs.python.org/library/tempfile.html#tempfile.mkdtemp\" rel=\"noreferrer\" title=\"tempfile.mkdtemp\"><code>tempfile</code></a>:</p>\n\n<pre><code>import tempfile\n\nd = tempfile.mkdtemp()\n</code></pre>\n\n<p>Here's the essentials from the online doc:</p>\n\n<blockquote>\n<pre><code>mkdtemp(suffix='', prefix='tmp', dir=None)\n    User-callable function to create and return a unique temporary\n    directory.  The return value is the pathname of the directory.\n\n    The directory is readable, writable, and searchable only by the\n    creating user.\n\n    Caller is responsible for deleting the directory when done with it.\n</code></pre>\n</blockquote>\n\n<h2>New in Python 3.5: <code>pathlib.Path</code> with <code>exist_ok</code></h2>\n\n<p>There's a new <code>Path</code> object (as of 3.4) with lots of methods one would want to use with paths - one of which is <code>mkdir</code>.</p>\n\n<p>(For context, I'm tracking my weekly rep with a script. Here's the relevant parts of code from the script that allow me to avoid hitting Stack Overflow more than once a day for the same data.)</p>\n\n<p>First the relevant imports:</p>\n\n<pre><code>from pathlib import Path\nimport tempfile\n</code></pre>\n\n<p>We don't have to deal with <code>os.path.join</code> now - just join path parts with a <code>/</code>:</p>\n\n<pre><code>directory = Path(tempfile.gettempdir()) / 'sodata'\n</code></pre>\n\n<p>Then I idempotently ensure the directory exists - the <code>exist_ok</code> argument shows up in Python 3.5:</p>\n\n<pre><code>directory.mkdir(exist_ok=True)\n</code></pre>\n\n<p>Here's the relevant part of the <a href=\"https://docs.python.org/3/library/pathlib.html#pathlib.Path.mkdir\" rel=\"noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>If <code>exist_ok</code> is true, <code>FileExistsError</code> exceptions will be ignored (same behavior as the <code>POSIX mkdir -p</code> command), but only if the last path component is not an existing non-directory file.</p>\n</blockquote>\n\n<p>Here's a little more of the script - in my case, I'm not subject to a race condition, I only have one process that expects the directory (or contained files) to be there, and I don't have anything trying to remove the directory. </p>\n\n<pre><code>todays_file = directory / str(datetime.datetime.utcnow().date())\nif todays_file.exists():\n    logger.info(\"todays_file exists: \" + str(todays_file))\n    df = pd.read_json(str(todays_file))\n</code></pre>\n\n<p><code>Path</code> objects have to be coerced to <code>str</code> before other APIs that expect <code>str</code> paths can use them.</p>\n\n<p>Perhaps Pandas should be updated to accept instances of the abstract base class, <code>os.PathLike</code>.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 258754,
                        "reputation": 385523,
                        "user_id": 541136,
                        "user_type": "moderator",
                        "accept_rate": 96,
                        "display_name": "Russia Must Remove Putin"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 63,
                    "last_activity_date": 1682389111,
                    "last_edit_date": 1682389111,
                    "creation_date": 1421970558,
                    "answer_id": 28100757,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/28100757#28100757",
                    "body": "<h2>Insights on the specifics of this situation</h2>\n<p>You give a particular file at a certain path and you pull the directory from the file path. Then after making sure you have the directory, you attempt to open a file for reading. To comment on this code:</p>\n<blockquote>\n<pre><code>filename = &quot;/my/directory/filename.txt&quot;\ndir = os.path.dirname(filename)\n</code></pre>\n</blockquote>\n<p>We want to avoid overwriting the builtin function, <code>dir</code>. Also, <code>filepath</code> or perhaps <code>fullfilepath</code> is probably a better semantic name than <code>filename</code> so this would be better written:</p>\n<pre><code>import os\nfilepath = '/my/directory/filename.txt'\ndirectory = os.path.dirname(filepath)\n</code></pre>\n<p>Your end goal is to open this file, you initially state, for writing, but you're essentially approaching this goal (based on your code) like this, which opens the file for <strong>reading</strong>:</p>\n<blockquote>\n<pre><code>if not os.path.exists(directory):\n    os.makedirs(directory)\nf = file(filename)\n</code></pre>\n</blockquote>\n<h2>Assuming opening for reading</h2>\n<p>Why would you make a directory for a file that you expect to be there and be able to read?</p>\n<p>Just attempt to open the file.</p>\n<pre><code>with open(filepath) as my_file:\n    do_stuff(my_file)\n</code></pre>\n<p>If the directory or file isn't there, you'll get an <code>IOError</code> with an associated error number: <code>errno.ENOENT</code> will point to the correct error number regardless of your platform. You can catch it if you want, for example:</p>\n<pre><code>import errno\ntry:\n    with open(filepath) as my_file:\n        do_stuff(my_file)\nexcept IOError as error:\n    if error.errno == errno.ENOENT:\n        print 'ignoring error because directory or file is not there'\n    else:\n        raise\n</code></pre>\n<h2>Assuming we're opening for writing</h2>\n<p>This is <em>probably</em> what you're wanting.</p>\n<p>In this case, we probably aren't facing any race conditions. So just do as you were, but note that for writing, you need to open with the <code>w</code> mode (or <code>a</code> to append). It's also a Python best practice to use the context manager for opening files.</p>\n<pre><code>import os\nif not os.path.exists(directory):\n    os.makedirs(directory)\nwith open(filepath, 'w') as my_file:\n    do_stuff(my_file)\n</code></pre>\n<p>However, say we have several Python processes that attempt to put all their data into the same directory. Then we may have contention over creation of the directory. In that case it's best to wrap the <code>makedirs</code> call in a try-except block.</p>\n<pre><code>import os\nimport errno\nif not os.path.exists(directory):\n    try:\n        os.makedirs(directory)\n    except OSError as error:\n        if error.errno != errno.EEXIST:\n            raise\nwith open(filepath, 'w') as my_file:\n    do_stuff(my_file)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 556766,
                        "reputation": 132341,
                        "user_id": 918959,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "Antti Haapala -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 27,
                    "last_activity_date": 1426107001,
                    "creation_date": 1426107001,
                    "answer_id": 28997083,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/28997083#28997083",
                    "body": "<p>In Python 3.4 you can also use the <a href=\"https://docs.python.org/3/library/pathlib.html\">brand new <code>pathlib</code> module</a>:</p>\n\n<pre><code>from pathlib import Path\npath = Path(\"/my/directory/filename.txt\")\ntry:\n    if not path.parent.exists():\n        path.parent.mkdir(parents=True)\nexcept OSError:\n    # handle error; you can also catch specific errors like\n    # FileExistsError and so on.\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 3661488,
                        "reputation": 307,
                        "user_id": 3051142,
                        "user_type": "registered",
                        "display_name": "Aly Niichi"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 9,
                    "last_activity_date": 1514690069,
                    "last_edit_date": 1514690069,
                    "creation_date": 1454904486,
                    "answer_id": 35262209,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/35262209#35262209",
                    "body": "<p>I saw <a href=\"https://stackoverflow.com/a/5032238/3051142\">Heikki Toivonen</a> and <a href=\"https://stackoverflow.com/a/14364249\">A-B-B</a>'s answers and thought of this variation.</p>\n\n<pre><code>import os\nimport errno\n\ndef make_sure_path_exists(path):\n    try:\n        os.makedirs(path)\n    except OSError as exception:\n        if exception.errno != errno.EEXIST or not os.path.isdir(path):\n            raise\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2325017,
                        "reputation": 5076,
                        "user_id": 2039736,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "tashuhka"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 26,
                    "last_activity_date": 1627477303,
                    "last_edit_date": 1627477303,
                    "creation_date": 1459266653,
                    "answer_id": 36289129,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/36289129#36289129",
                    "body": "<p>For a one-liner solution, you can use <a href=\"https://github.com/ipython/ipython/blob/b70b3f21749ca969088fdb54edcc36bb8a2267b9/IPython/utils/path.py#L423-L438\" rel=\"noreferrer\"><code>IPython.utils.path.ensure_dir_exists()</code></a>:</p>\n<pre><code>from IPython.utils.path import ensure_dir_exists\nensure_dir_exists(dir)\n</code></pre>\n<p>From the <a href=\"https://ipython.org/ipython-doc/3/api/generated/IPython.utils.path.html#IPython.utils.path.ensure_dir_exists\" rel=\"noreferrer\">documentation</a>: <em>Ensure that a directory exists. If it doesn\u2019t exist, try to create it and protect against a race condition if another process is doing the same.</em></p>\n<p>IPython is an extension package, not part of the standard library.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 115946,
                        "reputation": 16839,
                        "user_id": 304209,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Dennis Golomazov"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 13,
                    "last_activity_date": 1473803096,
                    "creation_date": 1473803096,
                    "answer_id": 39479473,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/39479473#39479473",
                    "body": "<p>You can use <a href=\"https://docs.python.org/2/distutils/apiref.html#distutils.dir_util.mkpath\" rel=\"noreferrer\"><code>mkpath</code></a></p>\n\n<pre><code># Create a directory and any missing ancestor directories. \n# If the directory already exists, do nothing.\n\nfrom distutils.dir_util import mkpath\nmkpath(\"test\")    \n</code></pre>\n\n<p>Note that it will create the ancestor directories as well. </p>\n\n<p>It works for Python 2 and 3.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 16532656,
                                "reputation": 551,
                                "user_id": 11945463,
                                "user_type": "registered",
                                "display_name": "lam vu Nguyen"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1679905104,
                            "post_id": 41147087,
                            "comment_id": 133798020,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/41147087#comment133798020_41147087",
                            "body": "one note: it will be &#39;[Errno 17] File exists&#39; error if foldername and filename are the same in a location, even an exist_ok flag"
                        }
                    ],
                    "owner": {
                        "account_id": 6386201,
                        "reputation": 45900,
                        "user_id": 4954037,
                        "user_type": "registered",
                        "accept_rate": 82,
                        "display_name": "hiro protagonist"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 142,
                    "last_activity_date": 1603865625,
                    "last_edit_date": 1603865625,
                    "creation_date": 1481731569,
                    "answer_id": 41147087,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/41147087#41147087",
                    "body": "<p>Starting from Python 3.5, <a href=\"https://docs.python.org/3/library/pathlib.html#pathlib.Path.mkdir\" rel=\"noreferrer\"><code>pathlib.Path.mkdir</code></a> has an <code>exist_ok</code> flag:</p>\n<pre><code>from pathlib import Path\npath = Path('/my/directory/filename.txt')\npath.parent.mkdir(parents=True, exist_ok=True) \n# path.parent ~ os.path.dirname(path)\n</code></pre>\n<p>This recursively creates the directory and does not raise an exception if the directory already exists.</p>\n<p>(just as <a href=\"https://docs.python.org/3/library/os.html?highlight=makedirs#os.makedirs\" rel=\"noreferrer\"><code>os.makedirs</code></a> got an <code>exist_ok</code> flag starting from python 3.2 e.g <code>os.makedirs(path, exist_ok=True)</code>)</p>\n<hr />\n<p>Note: when i posted this answer none of the other answers mentioned <code>exist_ok</code>...</p>\n"
                },
                {
                    "owner": {
                        "account_id": 501499,
                        "reputation": 755,
                        "user_id": 3109254,
                        "user_type": "registered",
                        "display_name": "euccas"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 26,
                    "last_activity_date": 1483482827,
                    "last_edit_date": 1495542391,
                    "creation_date": 1483482827,
                    "answer_id": 41453417,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/41453417#41453417",
                    "body": "<p>In <strong>Python3</strong>, <code>os.makedirs</code> supports setting <code>exist_ok</code>. The default setting is <code>False</code>, which means an <code>OSError</code> will be raised if the target directory already exists. By setting <code>exist_ok</code> to <code>True</code>, <code>OSError</code> (directory exists) will be ignored and the directory will not be created.</p>\n\n<pre><code>os.makedirs(path,exist_ok=True)\n</code></pre>\n\n<p>In <strong>Python2</strong>, <code>os.makedirs</code> doesn't support setting <code>exist_ok</code>. You can use the approach in <a href=\"https://stackoverflow.com/a/5032238/3109254\">heikki-toivonen's answer</a>:</p>\n\n<pre><code>import os\nimport errno\n\ndef make_sure_path_exists(path):\n    try:\n        os.makedirs(path)\n    except OSError as exception:\n        if exception.errno != errno.EEXIST:\n            raise\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 72095,
                                "reputation": 19451,
                                "user_id": 208273,
                                "user_type": "moderator",
                                "display_name": "Ryan M"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1682388972,
                            "post_id": 42127930,
                            "comment_id": 134203877,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/42127930#comment134203877_42127930",
                            "body": "If you created this script, please include it in the answer <i>here</i>.  Links can become invalid if the linked page changes."
                        }
                    ],
                    "owner": {
                        "account_id": 10041360,
                        "reputation": 367,
                        "user_id": 7424032,
                        "user_type": "registered",
                        "display_name": "Michael Strobel"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 9,
                    "last_activity_date": 1514690171,
                    "last_edit_date": 1514690171,
                    "creation_date": 1486612565,
                    "answer_id": 42127930,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/42127930#42127930",
                    "body": "<p>I use <code>os.path.exists()</code>, <a href=\"http://pastebin.com/vnVk2rY5\" rel=\"noreferrer\">here</a> is a Python 3 script that can be used to check if a directory exists, create one if it does not exist, and delete it if it does exist (if desired).</p>\n\n<p>It prompts users for input of the directory and can be easily modified.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1888781,
                                "reputation": 2110,
                                "user_id": 1707427,
                                "user_type": "registered",
                                "display_name": "S&#246;ren"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1656101693,
                            "post_id": 47842472,
                            "comment_id": 128498015,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/47842472#comment128498015_47842472",
                            "body": "The reason your method 1 doesn&#39;t work is the call to os.dirname. Without it, method 1 works as expected."
                        }
                    ],
                    "owner": {
                        "account_id": 2147673,
                        "reputation": 4910,
                        "user_id": 1904943,
                        "user_type": "registered",
                        "display_name": "Victoria Stuart"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 14,
                    "last_activity_date": 1642266005,
                    "last_edit_date": 1642266005,
                    "creation_date": 1513397767,
                    "answer_id": 47842472,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/47842472#47842472",
                    "body": "<p>I found this Q/A after I was puzzled by some of the failures and errors I was getting while working with directories in Python. I am working in Python 3 (v.3.5 in an Anaconda virtual environment on an Arch Linux x86_64 system).</p>\n<p>Consider this directory structure:</p>\n<pre><code>\u2514\u2500\u2500 output/         ## dir\n   \u251c\u2500\u2500 corpus       ## file\n   \u251c\u2500\u2500 corpus2/     ## dir\n   \u2514\u2500\u2500 subdir/      ## dir\n</code></pre>\n<p>Here are my experiments/notes, which provides clarification:</p>\n<pre><code># ----------------------------------------------------------------------------\n# [1] https://stackoverflow.com/questions/273192/how-can-i-create-a-directory-if-it-does-not-exist\n\nimport pathlib\n\n&quot;&quot;&quot; Notes:\n        1.  Include a trailing slash at the end of the directory path\n            (&quot;Method 1,&quot; below).\n        2.  If a subdirectory in your intended path matches an existing file\n            with same name, you will get the following error:\n            &quot;NotADirectoryError: [Errno 20] Not a directory:&quot; ...\n&quot;&quot;&quot;\n# Uncomment and try each of these &quot;out_dir&quot; paths, singly:\n\n# ----------------------------------------------------------------------------\n# METHOD 1:\n# Re-running does not overwrite existing directories and files; no errors.\n\n# out_dir = 'output/corpus3'                ## no error but no dir created (missing tailing /)\n# out_dir = 'output/corpus3/'               ## works\n# out_dir = 'output/corpus3/doc1'           ## no error but no dir created (missing tailing /)\n# out_dir = 'output/corpus3/doc1/'          ## works\n# out_dir = 'output/corpus3/doc1/doc.txt'   ## no error but no file created (os.makedirs creates dir, not files!  ;-)\n# out_dir = 'output/corpus2/tfidf/'         ## fails with &quot;Errno 20&quot; (existing file named &quot;corpus2&quot;)\n# out_dir = 'output/corpus3/tfidf/'         ## works\n# out_dir = 'output/corpus3/a/b/c/d/'       ## works\n\n# [2] https://docs.python.org/3/library/os.html#os.makedirs\n\n# Uncomment these to run &quot;Method 1&quot;:\n\n#directory = os.path.dirname(out_dir)\n#os.makedirs(directory, mode=0o777, exist_ok=True)\n\n# ----------------------------------------------------------------------------\n# METHOD 2:\n# Re-running does not overwrite existing directories and files; no errors.\n\n# out_dir = 'output/corpus3'                ## works\n# out_dir = 'output/corpus3/'               ## works\n# out_dir = 'output/corpus3/doc1'           ## works\n# out_dir = 'output/corpus3/doc1/'          ## works\n# out_dir = 'output/corpus3/doc1/doc.txt'   ## no error but creates a .../doc.txt./ dir\n# out_dir = 'output/corpus2/tfidf/'         ## fails with &quot;Errno 20&quot; (existing file named &quot;corpus2&quot;)\n# out_dir = 'output/corpus3/tfidf/'         ## works\n# out_dir = 'output/corpus3/a/b/c/d/'       ## works\n\n# Uncomment these to run &quot;Method 2&quot;:\n\n#import os, errno\n#try:\n#       os.makedirs(out_dir)\n#except OSError as e:\n#       if e.errno != errno.EEXIST:\n#               raise\n# ----------------------------------------------------------------------------\n</code></pre>\n<p>Conclusion: in my opinion, &quot;Method 2&quot; is more robust.</p>\n<p>[1] <a href=\"https://stackoverflow.com/questions/273192/how-can-i-create-a-directory-if-it-does-not-exist\">How can I safely create a nested directory?</a></p>\n<p>[2] <a href=\"https://docs.python.org/3/library/os.html#os.makedirs\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/os.html#os.makedirs</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 72095,
                                "reputation": 19451,
                                "user_id": 208273,
                                "user_type": "moderator",
                                "display_name": "Ryan M"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1682388883,
                            "post_id": 49851755,
                            "comment_id": 134203871,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/49851755#comment134203871_49851755",
                            "body": "This doesn&#39;t create parent directories.  From the <code>os.mkdir</code> docs: <i>&quot;If a parent directory in the path does not exist, <code>FileNotFoundError</code> is raised.&quot;</i>"
                        }
                    ],
                    "owner": {
                        "account_id": 8772920,
                        "reputation": 1542,
                        "user_id": 6559063,
                        "user_type": "registered",
                        "display_name": "Manivannan Murugavel"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1558033674,
                    "last_edit_date": 1558033674,
                    "creation_date": 1523863810,
                    "answer_id": 49851755,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/49851755#49851755",
                    "body": "<p>Use this command check and create dir</p>\n\n<pre><code> if not os.path.isdir(test_img_dir):\n     os.mkdir(test_img_dir)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 9359310,
                        "reputation": 3905,
                        "user_id": 7245145,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Steffi Keran Rani J"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1524931240,
                    "creation_date": 1524931240,
                    "answer_id": 50078422,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/50078422#50078422",
                    "body": "<p>Call the function <code>create_dir()</code> at the entry point of your program/project.</p>\n\n<pre><code>import os\n\ndef create_dir(directory):\n    if not os.path.exists(directory):\n        print('Creating Directory '+directory)\n        os.makedirs(directory)\n\ncreate_dir('Project directory')\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 6187533,
                        "reputation": 312,
                        "user_id": 4821206,
                        "user_type": "registered",
                        "display_name": "Geoff Paul Bremner"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 10,
                    "last_activity_date": 1558035450,
                    "last_edit_date": 1558035450,
                    "creation_date": 1536690237,
                    "answer_id": 52282050,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/52282050#52282050",
                    "body": "<p>Why not use subprocess module if running on a machine that supports command \n<code>mkdir</code> with <code>-p</code> option ? \nWorks on python 2.7 and python 3.6</p>\n\n<pre><code>from subprocess import call\ncall(['mkdir', '-p', 'path1/path2/path3'])\n</code></pre>\n\n<p>Should do the trick on most systems.</p>\n\n<p>In situations where portability doesn't matter (ex, using docker) the solution is a clean 2 lines. You also don't have to add logic to check if directories exist or not. Finally, it is safe to re-run without any side effects</p>\n\n<p>If you need error handling:</p>\n\n<pre><code>from subprocess import check_call\ntry:\n    check_call(['mkdir', '-p', 'path1/path2/path3'])\nexcept:\n    handle...\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1785876,
                        "reputation": 8808,
                        "user_id": 1627358,
                        "user_type": "registered",
                        "display_name": "Hussam Kurd"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 10,
                    "last_activity_date": 1558226445,
                    "last_edit_date": 1558226445,
                    "creation_date": 1558225943,
                    "answer_id": 56203876,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/56203876#56203876",
                    "body": "<p>You have to set the full path before creating the directory:</p>\n\n<pre><code>import os,sys,inspect\nimport pathlib\n\ncurrentdir = os.path.dirname(os.path.abspath(inspect.getfile(inspect.currentframe())))\nyour_folder = currentdir + \"/\" + \"your_folder\"\n\nif not os.path.exists(your_folder):\n   pathlib.Path(your_folder).mkdir(parents=True, exist_ok=True)\n</code></pre>\n\n<p>This works for me and hopefully, it will works for you as well</p>\n"
                },
                {
                    "owner": {
                        "account_id": 9031630,
                        "reputation": 39754,
                        "user_id": 6729010,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "korakot"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1635416485,
                    "last_edit_date": 1635416485,
                    "creation_date": 1603337563,
                    "answer_id": 64474894,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/64474894#64474894",
                    "body": "<p>This may not exactly answer the question. But I guess your real intention is to create a file and its parent directories, given its content all in 1 command.</p>\n<p>You can do that with <code>fastcore</code> extension to pathlib: <code>path.mk_write(data)</code></p>\n<pre class=\"lang-py prettyprint-override\"><code>from fastcore.utils import Path\nPath('/dir/to/file.txt').mk_write('Hello World')\n</code></pre>\n<p>See more in <a href=\"https://fastcore.fast.ai/xtras.html#Path.mk_write\" rel=\"nofollow noreferrer\">fastcore documentation</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 1898614,
                        "reputation": 7965,
                        "user_id": 1714997,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Dominykas Mostauskis"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 11,
                    "last_activity_date": 1629221045,
                    "creation_date": 1629221045,
                    "answer_id": 68821616,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/68821616#68821616",
                    "body": "<p>In case you're writing a file to a variable path, you can use this on the file's path to make sure that the parent directories are created.</p>\n<pre><code>from pathlib import Path\n\npath_to_file = Path(&quot;zero/or/more/directories/file.ext&quot;)\nparent_directory_of_file = path_to_file.parent\nparent_directory_of_file.mkdir(parents=True, exist_ok=True)\n</code></pre>\n<p>Works even if <code>path_to_file</code> is <code>file.ext</code> (zero directories deep).</p>\n<p>See <a href=\"https://docs.python.org/3/library/pathlib.html#pathlib.PurePath.parent\" rel=\"noreferrer\">pathlib.PurePath.parent</a> and <a href=\"https://docs.python.org/3/library/pathlib.html#pathlib.Path.mkdir\" rel=\"noreferrer\">pathlib.Path.mkdir</a>.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 13045207,
                        "reputation": 1104,
                        "user_id": 9427260,
                        "user_type": "registered",
                        "display_name": "Devil"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 31,
                    "last_activity_date": 1682389059,
                    "last_edit_date": 1682389059,
                    "creation_date": 1644300668,
                    "answer_id": 71029280,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/71029280#71029280",
                    "body": "<pre><code>import os\ndirectory = &quot;./out_dir/subdir1/subdir2&quot;\nif not os.path.exists(directory):\n    os.makedirs(directory)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 11476171,
                        "reputation": 863,
                        "user_id": 8411609,
                        "user_type": "registered",
                        "display_name": "Simone"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 33,
                    "last_activity_date": 1647252740,
                    "creation_date": 1647252740,
                    "answer_id": 71466038,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/71466038#71466038",
                    "body": "<p>fastest safest way to do it is:\nit will create if not exists and skip if exists:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from pathlib import Path\nPath(&quot;path/with/childs/.../&quot;).mkdir(parents=True, exist_ok=True)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7368221,
                                "reputation": 1440,
                                "user_id": 5609328,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Adam Jaamour"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1699961479,
                            "post_id": 76142478,
                            "comment_id": 136593639,
                            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/76142478#comment136593639_76142478",
                            "body": "Very clean/concise solution that does not require if statements!"
                        }
                    ],
                    "owner": {
                        "account_id": 10300086,
                        "reputation": 424,
                        "user_id": 7599062,
                        "user_type": "registered",
                        "display_name": "SyntaxNavigator"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 14,
                    "last_activity_date": 1682873974,
                    "creation_date": 1682873974,
                    "answer_id": 76142478,
                    "question_id": 273192,
                    "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories/76142478#76142478",
                    "body": "<p>You can pass the exist_ok=True parameter to the os.makedirs() function to suppress the error in case the directory already exists:</p>\n<pre><code>import os\n\n# Create directory /path/to/nested/directory if it doesn't already exist\nos.makedirs('/path/to/nested/directory', exist_ok=True)\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 7495,
                "reputation": 104782,
                "user_id": 13055,
                "user_type": "registered",
                "accept_rate": 68,
                "display_name": "Parand"
            },
            "comment_count": 3,
            "is_answered": true,
            "accepted_answer_id": 273227,
            "answer_count": 27,
            "score": 5668,
            "last_activity_date": 1682873974,
            "creation_date": 1226084205,
            "last_edit_date": 1682319558,
            "question_id": 273192,
            "link": "https://stackoverflow.com/questions/273192/how-do-i-create-a-directory-and-any-missing-parent-directories",
            "title": "How do I create a directory, and any missing parent directories?",
            "body": "<p>How do I create a directory at a given path, and also create any missing parent directories along that path? For example, the Bash command <code>mkdir -p /path/to/nested/directory</code> does this.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 9120
}