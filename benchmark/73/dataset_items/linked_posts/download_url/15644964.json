{
    "items": [
        {
            "tags": [
                "python",
                "download",
                "progress-bar"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 11397503,
                        "reputation": 326,
                        "user_id": 8355384,
                        "user_type": "registered",
                        "display_name": "kekkler"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1504249642,
                    "post_id": 15644964,
                    "comment_id": 121021349,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads#comment121021349_15644964",
                    "body": "I&#39;m surprised that <a href=\"https://pypi.python.org/pypi/tqdm\" rel=\"nofollow noreferrer\">tqdm</a> has not been suggested! <a href=\"https://i.stack.imgur.com/eJ21m.gif\" rel=\"nofollow noreferrer\">![enter image description here</a>](<a href=\"https://i.stack.imgur.com/eJ21m.gif\" rel=\"nofollow noreferrer\">i.stack.imgur.com/eJ21m.gif</a>)"
                },
                {
                    "owner": {
                        "account_id": 12680234,
                        "reputation": 838,
                        "user_id": 12576581,
                        "user_type": "registered",
                        "display_name": "DeadSec"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1614366172,
                    "post_id": 15644964,
                    "comment_id": 117373226,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads#comment117373226_15644964",
                    "body": "I&#39;m probably late but you can use this library that is exactly what you want: <a href=\"https://pypi.org/project/Pretty-Downloader/0.0.2/\" rel=\"nofollow noreferrer\">pypi.org/project/Pretty-Downloader/0.0.2</a>"
                },
                {
                    "owner": {
                        "account_id": 3380428,
                        "reputation": 162,
                        "user_id": 2837591,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Enok82"
                    },
                    "reply_to_user": {
                        "account_id": 12680234,
                        "reputation": 838,
                        "user_id": 12576581,
                        "user_type": "registered",
                        "display_name": "DeadSec"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1692360150,
                    "post_id": 15644964,
                    "comment_id": 135615829,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads#comment135615829_15644964",
                    "body": "Something @DeadSec maybe should have disclosed is that they are the maintainer of said library"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1760224,
                                "reputation": 1549,
                                "user_id": 1607549,
                                "user_type": "registered",
                                "accept_rate": 41,
                                "display_name": "user1607549"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1364325163,
                            "post_id": 15645088,
                            "comment_id": 22199939,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment22199939_15645088",
                            "body": "requests is not defined anywhere"
                        },
                        {
                            "owner": {
                                "account_id": 1760224,
                                "reputation": 1549,
                                "user_id": 1607549,
                                "user_type": "registered",
                                "accept_rate": 41,
                                "display_name": "user1607549"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1364326745,
                            "post_id": 15645088,
                            "comment_id": 22200742,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment22200742_15645088",
                            "body": "I tried initialized it as requests = {}  but that still didn&#39;t fix it. Not sure why?"
                        },
                        {
                            "owner": {
                                "account_id": 191556,
                                "reputation": 21205,
                                "user_id": 432193,
                                "user_type": "registered",
                                "accept_rate": 84,
                                "display_name": "Endophage"
                            },
                            "reply_to_user": {
                                "account_id": 1760224,
                                "reputation": 1549,
                                "user_id": 1607549,
                                "user_type": "registered",
                                "accept_rate": 41,
                                "display_name": "user1607549"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1364327400,
                            "post_id": 15645088,
                            "comment_id": 22201096,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment22201096_15645088",
                            "body": "@user1607549 from above &quot;It uses the requests library so you&#39;ll need to install that.&quot; (sudo pip install requests) then <code>import requests</code>"
                        },
                        {
                            "owner": {
                                "account_id": 480192,
                                "reputation": 445,
                                "user_id": 893284,
                                "user_type": "registered",
                                "display_name": "EML"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1364329827,
                            "post_id": 15645088,
                            "comment_id": 22202326,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment22202326_15645088",
                            "body": "What is <code>pdf</code> in this example? I understand you&#39;re downloading pdf files, but is pdf a module?"
                        },
                        {
                            "owner": {
                                "account_id": 1760224,
                                "reputation": 1549,
                                "user_id": 1607549,
                                "user_type": "registered",
                                "accept_rate": 41,
                                "display_name": "user1607549"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1364332059,
                            "post_id": 15645088,
                            "comment_id": 22203524,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment22203524_15645088",
                            "body": "I have the same question, what is pdf?"
                        },
                        {
                            "owner": {
                                "account_id": 191556,
                                "reputation": 21205,
                                "user_id": 432193,
                                "user_type": "registered",
                                "accept_rate": 84,
                                "display_name": "Endophage"
                            },
                            "reply_to_user": {
                                "account_id": 480192,
                                "reputation": 445,
                                "user_id": 893284,
                                "user_type": "registered",
                                "display_name": "EML"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1364335007,
                            "post_id": 15645088,
                            "comment_id": 22204937,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment22204937_15645088",
                            "body": "@EML sorry, literally copy pasted out of my own script, renamed some variables to make it more generic, missed that one. I&#39;ll fix now, it was just a variable name."
                        },
                        {
                            "owner": {
                                "account_id": 3849458,
                                "reputation": 170,
                                "user_id": 3189977,
                                "user_type": "registered",
                                "display_name": "0942v8653"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1420483169,
                            "post_id": 15645088,
                            "comment_id": 43981463,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment43981463_15645088",
                            "body": "You may want to define chunk_size in iter_content so it won&#39;t be so slow."
                        },
                        {
                            "owner": {
                                "account_id": 305396,
                                "reputation": 1365,
                                "user_id": 615528,
                                "user_type": "registered",
                                "display_name": "cnelson"
                            },
                            "reply_to_user": {
                                "account_id": 3849458,
                                "reputation": 170,
                                "user_id": 3189977,
                                "user_type": "registered",
                                "display_name": "0942v8653"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1426254763,
                            "post_id": 15645088,
                            "comment_id": 46308833,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment46308833_15645088",
                            "body": "As @0942v8653 mentions, iter_content() takes a chunk_size so you can specify it for speed, but also if the content you are downloading is small enough that ~ 1% of it can fit in memory, you could simplify your code alot by doing chunk_size=total_length/100 and each iteration of the loop would be 1% of your download"
                        },
                        {
                            "owner": {
                                "account_id": 1211489,
                                "reputation": 20913,
                                "user_id": 1179925,
                                "user_type": "registered",
                                "accept_rate": 47,
                                "display_name": "mrgloom"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1462528329,
                            "post_id": 15645088,
                            "comment_id": 61683814,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment61683814_15645088",
                            "body": "Worked for me on Windows. Also changed one line from <code>for data in response.iter_content():</code> to <code>for data in response.iter_content(chunk_size=total_length&#47;100):</code>."
                        },
                        {
                            "owner": {
                                "account_id": 956,
                                "reputation": 13020,
                                "user_id": 1265,
                                "user_type": "registered",
                                "accept_rate": 82,
                                "display_name": "Grey Panther"
                            },
                            "reply_to_user": {
                                "account_id": 1211489,
                                "reputation": 20913,
                                "user_id": 1179925,
                                "user_type": "registered",
                                "accept_rate": 47,
                                "display_name": "mrgloom"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1473135443,
                            "post_id": 15645088,
                            "comment_id": 66011997,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment66011997_15645088",
                            "body": "@mrgloom&#39;s solutions also has one other advantage: if you don&#39;t define <code>chunk_size</code> it will be veeeeery slow (also @0942v8653 said this and here is a related GH issue: <a href=\"https://github.com/kennethreitz/requests/issues/2015\" rel=\"nofollow noreferrer\">github.com/kennethreitz/requests/issues/2015</a>). So always define chunk size to be something like 4096."
                        },
                        {
                            "owner": {
                                "account_id": 2706416,
                                "reputation": 982,
                                "user_id": 2335930,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "fotinsky"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1513258302,
                            "post_id": 15645088,
                            "comment_id": 82590509,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment82590509_15645088",
                            "body": "Perfect. No additional package import needed."
                        },
                        {
                            "owner": {
                                "account_id": 4076787,
                                "reputation": 1316,
                                "user_id": 4317688,
                                "user_type": "registered",
                                "display_name": "nnsense"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1545746326,
                            "post_id": 15645088,
                            "comment_id": 94687738,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment94687738_15645088",
                            "body": "It wasn&#39;t working until I&#39;ve changed the <code>response = requests.get(link, stream=True)</code> bit into <code>response = requests.get(link + &quot;&#47;&quot; + file_name, stream=True)</code>.  As it is, it just downloads the webpage (for me at least)."
                        },
                        {
                            "owner": {
                                "account_id": 191556,
                                "reputation": 21205,
                                "user_id": 432193,
                                "user_type": "registered",
                                "accept_rate": 84,
                                "display_name": "Endophage"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1546419046,
                            "post_id": 15645088,
                            "comment_id": 94843620,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment94843620_15645088",
                            "body": "It&#39;s only sample code. The file_name is the local file name, the link is the URL to the file. If your URL happens to end with the the same thing you want the local file to be called, that&#39;s incidental to your situation."
                        },
                        {
                            "owner": {
                                "account_id": 19024339,
                                "reputation": 461,
                                "user_id": 13887747,
                                "user_type": "registered",
                                "display_name": "Pyzard"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1597028294,
                            "post_id": 15645088,
                            "comment_id": 111990910,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment111990910_15645088",
                            "body": "Thanks, this was really useful. I suggest using <code>&#39;\\N{full block}&#39;</code> instead of <code>&#39;=&#39;</code> to make the progress bar look professional. That&#39;s what I did. But I admit, you have to be really smart to be able to come up with code like this. I have a question too. Is <code>sys.stdout.write</code> the same as <code>print</code> with <code>end=&#39;&#39;</code>?"
                        },
                        {
                            "owner": {
                                "account_id": 19103376,
                                "reputation": 1054,
                                "user_id": 13951118,
                                "user_type": "registered",
                                "display_name": "David"
                            },
                            "reply_to_user": {
                                "account_id": 19024339,
                                "reputation": 461,
                                "user_id": 13887747,
                                "user_type": "registered",
                                "display_name": "Pyzard"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1626072540,
                            "post_id": 15645088,
                            "comment_id": 120785095,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment120785095_15645088",
                            "body": "@Pyzard <code>print</code> has a bunch of parameters that make your life easier, like simply passing in an <code>int</code> or anything else and printing out many things at once. But basically, yes."
                        },
                        {
                            "owner": {
                                "account_id": 17222908,
                                "reputation": 162,
                                "user_id": 12469275,
                                "user_type": "registered",
                                "display_name": "Minek Po1"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1640081990,
                            "post_id": 15645088,
                            "comment_id": 124505351,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment124505351_15645088",
                            "body": "From what I know the command line on windows 10 does support <code>\\r</code>"
                        },
                        {
                            "owner": {
                                "account_id": 6009045,
                                "reputation": 13204,
                                "user_id": 4720018,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "djvg"
                            },
                            "reply_to_user": {
                                "account_id": 17222908,
                                "reputation": 162,
                                "user_id": 12469275,
                                "user_type": "registered",
                                "display_name": "Minek Po1"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1657642473,
                            "post_id": 15645088,
                            "comment_id": 128857026,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment128857026_15645088",
                            "body": "@MinekPo1 Exactly, <code>\\r</code> works on my windows 10 machine, both in <code>cmd</code> <i>and</i> in powershell. For example: <code>for i in range(n): print(f&#39;\\r{i&#47;n*100:.1f}%&#39;, end=&#39;&#39;)</code> works like a charm."
                        },
                        {
                            "owner": {
                                "account_id": 6009045,
                                "reputation": 13204,
                                "user_id": 4720018,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "djvg"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1657642769,
                            "post_id": 15645088,
                            "comment_id": 128857120,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#comment128857120_15645088",
                            "body": "<a href=\"https://stackoverflow.com/q/3263672\">stdout.write vs print</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 191556,
                        "reputation": 21205,
                        "user_id": 432193,
                        "user_type": "registered",
                        "accept_rate": 84,
                        "display_name": "Endophage"
                    },
                    "comment_count": 18,
                    "is_accepted": false,
                    "score": 160,
                    "last_activity_date": 1623489644,
                    "last_edit_date": 1623489644,
                    "creation_date": 1364323852,
                    "answer_id": 15645088,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/15645088#15645088",
                    "body": "<p>I've just written a super simple (slightly hacky) approach to this for scraping PDFs off a certain site. Note, it only works correctly on Unix based systems (Linux, mac os) as PowerShell does not handle <code>&quot;\\r&quot;</code>:</p>\n<pre><code>import sys\nimport requests\n\nlink = &quot;http://indy/abcde1245&quot;\nfile_name = &quot;download.data&quot;\nwith open(file_name, &quot;wb&quot;) as f:\n    print(&quot;Downloading %s&quot; % file_name)\n    response = requests.get(link, stream=True)\n    total_length = response.headers.get('content-length')\n\n    if total_length is None: # no content length header\n        f.write(response.content)\n    else:\n        dl = 0\n        total_length = int(total_length)\n        for data in response.iter_content(chunk_size=4096):\n            dl += len(data)\n            f.write(data)\n            done = int(50 * dl / total_length)\n            sys.stdout.write(&quot;\\r[%s%s]&quot; % ('=' * done, ' ' * (50-done)) )    \n            sys.stdout.flush()\n</code></pre>\n<p>It uses the <a href=\"https://requests.readthedocs.io/en/master/\" rel=\"noreferrer\">requests library</a> so you'll need to install that. This outputs something like the following into your console:</p>\n<blockquote>\n<p>&gt;Downloading download.data</p>\n<p>&gt;[=============\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0]</p>\n</blockquote>\n<p>The progress bar is 52 characters wide in the script (2 characters are simply the <code>[]</code> so 50 characters of progress). Each <code>=</code> represents 2% of the download.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1207139,
                                "reputation": 8028,
                                "user_id": 3311276,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "Ciasto piekarz"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1408176991,
                            "post_id": 20943461,
                            "comment_id": 39503411,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/20943461#comment39503411_20943461",
                            "body": "it would be great if this can be a part of python standard library."
                        },
                        {
                            "owner": {
                                "account_id": 1365151,
                                "reputation": 241,
                                "user_id": 1301753,
                                "user_type": "registered",
                                "display_name": "tshrinivasan"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1449420824,
                            "post_id": 20943461,
                            "comment_id": 55988807,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/20943461#comment55988807_20943461",
                            "body": "path is a filename you want to save the file."
                        },
                        {
                            "owner": {
                                "account_id": 1365151,
                                "reputation": 241,
                                "user_id": 1301753,
                                "user_type": "registered",
                                "display_name": "tshrinivasan"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1449420900,
                            "post_id": 20943461,
                            "comment_id": 55988846,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/20943461#comment55988846_20943461",
                            "body": "path = &quot;filename.ext&quot;"
                        },
                        {
                            "owner": {
                                "account_id": 6383729,
                                "reputation": 5746,
                                "user_id": 5437621,
                                "user_type": "registered",
                                "accept_rate": 33,
                                "display_name": "mrid"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1563271918,
                            "post_id": 20943461,
                            "comment_id": 100635736,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/20943461#comment100635736_20943461",
                            "body": "Clint has now been discontinued"
                        },
                        {
                            "owner": {
                                "account_id": 1032976,
                                "reputation": 5335,
                                "user_id": 1040915,
                                "user_type": "registered",
                                "accept_rate": 69,
                                "display_name": "scubbo"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1572500917,
                            "post_id": 20943461,
                            "comment_id": 103581305,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/20943461#comment103581305_20943461",
                            "body": "Commenting for when I inevitably want to return to this -  this is great!"
                        },
                        {
                            "owner": {
                                "account_id": 7419912,
                                "reputation": 1450,
                                "user_id": 5644721,
                                "user_type": "registered",
                                "display_name": "Ehsan Ahmadi"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1612974650,
                            "post_id": 20943461,
                            "comment_id": 116934755,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/20943461#comment116934755_20943461",
                            "body": "Great. You could grab filename with re.findall(&#39;filename=(.+)&#39;, r.headers.get(&#39;content-disposition&#39;))"
                        }
                    ],
                    "owner": {
                        "account_id": 524846,
                        "reputation": 1432,
                        "user_id": 1135467,
                        "user_type": "registered",
                        "accept_rate": 0,
                        "display_name": "Rich Jones"
                    },
                    "comment_count": 6,
                    "is_accepted": false,
                    "score": 84,
                    "last_activity_date": 1682007820,
                    "last_edit_date": 1682007820,
                    "creation_date": 1388985555,
                    "answer_id": 20943461,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/20943461#20943461",
                    "body": "<p>You can use the '<a href=\"https://github.com/kennethreitz/clint\" rel=\"nofollow noreferrer\">clint</a>' package (written by the same author as 'requests') to add a simple progress bar to your downloads like this:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import requests\nfrom clint.textui import progress\n\nr = requests.get(url, stream=True)\npath = '/some/path/for/file.txt'\nwith open(path, 'wb') as f:\n    total_length = int(r.headers.get('content-length'))\n    for chunk in progress.bar(r.iter_content(chunk_size=1024), expected_size=(total_length/1024) + 1): \n        if chunk:\n            f.write(chunk)\n            f.flush()\n</code></pre>\n<p>which will give you a dynamic output which will look like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[################################] 5210/5210 - 00:00:01\n</code></pre>\n<p>It should work on multiple platforms as well! You <a href=\"https://github.com/kennethreitz/clint/blob/master/examples/progressbar.py\" rel=\"nofollow noreferrer\">can also change</a> the bar to dots or a spinner with .dots and .mill instead of .bar.</p>\n<p>Enjoy!</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 229320,
                                "reputation": 14682,
                                "user_id": 492203,
                                "user_type": "registered",
                                "accept_rate": 93,
                                "display_name": "Luna"
                            },
                            "reply_to_user": {
                                "account_id": 255909,
                                "reputation": 3112,
                                "user_id": 536262,
                                "user_type": "registered",
                                "accept_rate": 58,
                                "display_name": "MortenB"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1502530193,
                            "post_id": 37995058,
                            "comment_id": 78255873,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/37995058#comment78255873_37995058",
                            "body": "@MortenB Is it? I get <code>ModuleNotFoundError: No module named &#39;click&#39;</code> on 3.6.1."
                        },
                        {
                            "owner": {
                                "account_id": 1950993,
                                "reputation": 3307,
                                "user_id": 1755083,
                                "user_type": "registered",
                                "accept_rate": 58,
                                "display_name": "AbdealiLoKo"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1565955837,
                            "post_id": 37995058,
                            "comment_id": 101514504,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/37995058#comment101514504_37995058",
                            "body": "It&#39;s a 2rd party library that needs to be installed"
                        },
                        {
                            "owner": {
                                "account_id": 6503350,
                                "reputation": 5419,
                                "user_id": 5033247,
                                "user_type": "registered",
                                "display_name": "Smart Manoj"
                            },
                            "reply_to_user": {
                                "account_id": 1950993,
                                "reputation": 3307,
                                "user_id": 1755083,
                                "user_type": "registered",
                                "accept_rate": 58,
                                "display_name": "AbdealiLoKo"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1566105652,
                            "post_id": 37995058,
                            "comment_id": 101547565,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/37995058#comment101547565_37995058",
                            "body": "@AbdealiJK 3rd party"
                        },
                        {
                            "owner": {
                                "account_id": 14722783,
                                "reputation": 469,
                                "user_id": 15342452,
                                "user_type": "registered",
                                "display_name": "WhatTheClown"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1613219059,
                            "post_id": 37995058,
                            "comment_id": 117011396,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/37995058#comment117011396_37995058",
                            "body": "What is &quot;total_size&quot;?"
                        },
                        {
                            "owner": {
                                "account_id": 19605217,
                                "reputation": 397,
                                "user_id": 14349078,
                                "user_type": "registered",
                                "display_name": "Rid"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1626171954,
                            "post_id": 37995058,
                            "comment_id": 120816262,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/37995058#comment120816262_37995058",
                            "body": "@MortenB Do <code>pip install click</code> first, then execute the code \ud83d\ude42"
                        }
                    ],
                    "owner": {
                        "account_id": 8606665,
                        "reputation": 353,
                        "user_id": 6446587,
                        "user_type": "registered",
                        "display_name": "Tian Zhang"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 9,
                    "last_activity_date": 1623489792,
                    "last_edit_date": 1623489792,
                    "creation_date": 1466693418,
                    "answer_id": 37995058,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/37995058#37995058",
                    "body": "<p>You can also use <a href=\"http://click.pocoo.org/5/utils/#showing-progress-bars\" rel=\"nofollow noreferrer\">click</a>. It has a good library for progress bar:</p>\n<pre><code>import click\n\nwith click.progressbar(length=total_size, label='Downloading files') as bar:\n    for file in files:\n        download(file)\n        bar.update(file.size)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 4992724,
                        "reputation": 632,
                        "user_id": 4014399,
                        "user_type": "registered",
                        "display_name": "Vamsidhar Muggulla"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1477118201,
                    "creation_date": 1477118201,
                    "answer_id": 40189100,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/40189100#40189100",
                    "body": "<p>You can stream a downloads as it is here -> <a href=\"http://docs.python-requests.org/en/latest/user/quickstart/?highlight=download#raw-response-content\" rel=\"nofollow\">Stream a Download</a>.</p>\n\n<p>Also you can <a href=\"http://docs.python-requests.org/en/latest/user/advanced/?highlight=Uploads#streaming-uploads\" rel=\"nofollow\">Stream Uploads</a>.</p>\n\n<p>The most important streaming a request is done unless you try to access the response.content\nwith just 2 lines</p>\n\n<pre><code>for line in r.iter_lines():    \n    if line:\n        print(line)\n</code></pre>\n\n<p><a href=\"http://docs.python-requests.org/en/latest/user/advanced/?highlight=#streaming-requests\" rel=\"nofollow\">Stream Requests</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 18604225,
                                "reputation": 134,
                                "user_id": 13558274,
                                "user_type": "registered",
                                "display_name": "Amit Kharel"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1594202443,
                            "post_id": 53877507,
                            "comment_id": 111041469,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/53877507#comment111041469_53877507",
                            "body": "This is by far the best one."
                        }
                    ],
                    "owner": {
                        "account_id": 3720703,
                        "reputation": 3459,
                        "user_id": 3095845,
                        "user_type": "registered",
                        "display_name": "Chris Chute"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 62,
                    "last_activity_date": 1545349453,
                    "creation_date": 1545349453,
                    "answer_id": 53877507,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/53877507#53877507",
                    "body": "<p><strong>Python 3 with TQDM</strong></p>\n\n<p>This is the suggested technique from the <a href=\"https://github.com/tqdm/tqdm#hooks-and-callbacks\" rel=\"noreferrer\">TQDM docs</a>.</p>\n\n<pre><code>import urllib.request\n\nfrom tqdm import tqdm\n\n\nclass DownloadProgressBar(tqdm):\n    def update_to(self, b=1, bsize=1, tsize=None):\n        if tsize is not None:\n            self.total = tsize\n        self.update(b * bsize - self.n)\n\n\ndef download_url(url, output_path):\n    with DownloadProgressBar(unit='B', unit_scale=True,\n                             miniters=1, desc=url.split('/')[-1]) as t:\n        urllib.request.urlretrieve(url, filename=output_path, reporthook=t.update_to)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 18331071,
                        "reputation": 41,
                        "user_id": 13349592,
                        "user_type": "registered",
                        "display_name": "Himanshu Binjola"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1623490023,
                    "last_edit_date": 1623490023,
                    "creation_date": 1587238823,
                    "answer_id": 61295200,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/61295200#61295200",
                    "body": "<p><strong># Define Progress Bar function</strong></p>\n<pre><code>def print_progressbar(total, current, barsize=60):\n    progress = int(current*barsize/total)\n    completed = str(int(current*100/total)) + '%'\n    print('[', chr(9608)*progress, ' ', completed, '.'*(barsize-progress), '] ', str(i)+'/'+str(total), sep='', end='\\r', flush=True)\n</code></pre>\n<p><strong># Sample Code</strong></p>\n<pre><code>total = 6000\nbarsize = 60\nprint_frequency = max(min(total//barsize, 100), 1)\nprint(&quot;Start Task..&quot;, flush=True)\nfor i in range(1, total+1):\n  if i%print_frequency == 0 or i == 1:\n    print_progressbar(total, i, barsize)\nprint(&quot;\\nFinished&quot;, flush=True)\n</code></pre>\n<p><strong># Snapshot of Progress Bar :</strong></p>\n<p>Below lines are for illustrations only. In command prompt you will see single progress bar showing incremental progress.</p>\n<pre><code>[ 0%............................................................] 1/6000\n\n[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 16%..................................................] 1000/6000\n\n[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 33%........................................] 2000/6000\n\n[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 50%..............................] 3000/6000\n\n[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 66%....................] 4000/6000\n\n[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 83%..........] 5000/6000\n\n[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 100%] 6000/6000\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 4827076,
                        "reputation": 13969,
                        "user_id": 3896283,
                        "user_type": "registered",
                        "display_name": "casper.dcl"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1588515582,
                    "last_edit_date": 1588515582,
                    "creation_date": 1588514708,
                    "answer_id": 61575758,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/61575758#61575758",
                    "body": "<p>Sorry for being late with an answer; just updated the <code>tqdm</code> docs:</p>\n\n<p><a href=\"https://github.com/tqdm/tqdm/#hooks-and-callbacks\" rel=\"noreferrer\">https://github.com/tqdm/tqdm/#hooks-and-callbacks</a></p>\n\n<p>Using <code>urllib.urlretrieve</code> and OOP:</p>\n\n<pre><code>import urllib\nfrom tqdm.auto import tqdm\n\nclass TqdmUpTo(tqdm):\n    \"\"\"Provides `update_to(n)` which uses `tqdm.update(delta_n)`.\"\"\"\n    def update_to(self, b=1, bsize=1, tsize=None):\n        \"\"\"\n        b  : Blocks transferred so far\n        bsize  : Size of each block\n        tsize  : Total size\n        \"\"\"\n        if tsize is not None:\n            self.total = tsize\n        self.update(b * bsize - self.n)  # will also set self.n = b * bsize\n\neg_link = \"https://github.com/tqdm/tqdm/releases/download/v4.46.0/tqdm-4.46.0-py2.py3-none-any.whl\"\neg_file = eg_link.split('/')[-1]\nwith TqdmUpTo(unit='B', unit_scale=True, unit_divisor=1024, miniters=1,\n              desc=eg_file) as t:  # all optional kwargs\n    urllib.urlretrieve(\n        eg_link, filename=eg_file, reporthook=t.update_to, data=None)\n    t.total = t.n\n</code></pre>\n\n<p>or using <code>requests.get</code> and file wrappers:</p>\n\n<pre><code>import requests\nfrom tqdm.auto import tqdm\n\neg_link = \"https://github.com/tqdm/tqdm/releases/download/v4.46.0/tqdm-4.46.0-py2.py3-none-any.whl\"\neg_file = eg_link.split('/')[-1]\nresponse = requests.get(eg_link, stream=True)\nwith tqdm.wrapattr(open(eg_file, \"wb\"), \"write\", miniters=1,\n                   total=int(response.headers.get('content-length', 0)),\n                   desc=eg_file) as fout:\n    for chunk in response.iter_content(chunk_size=4096):\n        fout.write(chunk)\n</code></pre>\n\n<p>You could of course mix &amp; match techniques.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1655785,
                                "reputation": 456,
                                "user_id": 2192272,
                                "user_type": "registered",
                                "display_name": "Mah&#233;"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1713867774,
                            "post_id": 62113293,
                            "comment_id": 138167046,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/62113293#comment138167046_62113293",
                            "body": "Nice. I got an error with tqdm, which I think comes from the file name in desc= being the same as the file name opened for writing. Anyway I got it to work using: <code>for chunk in tqdm.tqdm(response.iter_content(chunk_size=chunk_size), total=total&#47;chunk_size, unit=&#39;MB&#39;): ... </code> (with a chunk_size of 1000*1024)"
                        }
                    ],
                    "owner": {
                        "account_id": 7337694,
                        "reputation": 4046,
                        "user_id": 5588463,
                        "user_type": "registered",
                        "display_name": "Yan QiDong"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 33,
                    "last_activity_date": 1650398246,
                    "last_edit_date": 1650398246,
                    "creation_date": 1590912408,
                    "answer_id": 62113293,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/62113293#62113293",
                    "body": "<p>There is an answer with <a href=\"https://pypi.org/project/requests/\" rel=\"noreferrer\">requests</a> and <a href=\"https://pypi.org/project/tqdm/\" rel=\"noreferrer\">tqdm</a>.</p>\n<pre class=\"lang-py prettyprint-override\"><code>import requests\nfrom tqdm import tqdm\n\n\ndef download(url: str, fname: str):\n    resp = requests.get(url, stream=True)\n    total = int(resp.headers.get('content-length', 0))\n    # Can also replace 'file' with a io.BytesIO object\n    with open(fname, 'wb') as file, tqdm(\n        desc=fname,\n        total=total,\n        unit='iB',\n        unit_scale=True,\n        unit_divisor=1024,\n    ) as bar:\n        for data in resp.iter_content(chunk_size=1024):\n            size = file.write(data)\n            bar.update(size)\n</code></pre>\n<p>Gist: <a href=\"https://gist.github.com/yanqd0/c13ed29e29432e3cf3e7c38467f42f51\" rel=\"noreferrer\">https://gist.github.com/yanqd0/c13ed29e29432e3cf3e7c38467f42f51</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2471691,
                                "reputation": 438,
                                "user_id": 3609568,
                                "user_type": "registered",
                                "display_name": "user66081"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1615367789,
                            "post_id": 63831244,
                            "comment_id": 117666312,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/63831244#comment117666312_63831244",
                            "body": "gotta &lt;3 pathlib"
                        }
                    ],
                    "owner": {
                        "account_id": 494418,
                        "reputation": 19822,
                        "user_id": 1194883,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "Mike"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1599746073,
                    "creation_date": 1599746073,
                    "answer_id": 63831244,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/63831244#63831244",
                    "body": "<p>The <a href=\"https://tqdm.github.io/\" rel=\"nofollow noreferrer\"><code>tqdm</code></a> package now includes a function designed to handle exactly this type of situation: <a href=\"https://tqdm.github.io/docs/tqdm/#wrapattr\" rel=\"nofollow noreferrer\"><code>wrapattr</code></a>.  You just wrap an object's <code>read</code> (or <code>write</code>) attribute, and tqdm handles the rest.  Here's a simple download function that puts it all together with <code>requests</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def download(url, filename):\n    import functools\n    import pathlib\n    import shutil\n    import requests\n    import tqdm\n    \n    r = requests.get(url, stream=True, allow_redirects=True)\n    if r.status_code != 200:\n        r.raise_for_status()  # Will only raise for 4xx codes, so...\n        raise RuntimeError(f&quot;Request to {url} returned status code {r.status_code}&quot;)\n    file_size = int(r.headers.get('Content-Length', 0))\n\n    path = pathlib.Path(filename).expanduser().resolve()\n    path.parent.mkdir(parents=True, exist_ok=True)\n\n    desc = &quot;(Unknown total file size)&quot; if file_size == 0 else &quot;&quot;\n    r.raw.read = functools.partial(r.raw.read, decode_content=True)  # Decompress if needed\n    with tqdm.tqdm.wrapattr(r.raw, &quot;read&quot;, total=file_size, desc=desc) as r_raw:\n        with path.open(&quot;wb&quot;) as f:\n            shutil.copyfileobj(r_raw, f)\n\n    return path\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 7419912,
                        "reputation": 1450,
                        "user_id": 5644721,
                        "user_type": "registered",
                        "display_name": "Ehsan Ahmadi"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1612976733,
                    "last_edit_date": 1612976733,
                    "creation_date": 1612975822,
                    "answer_id": 66141267,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/66141267#66141267",
                    "body": "<p>Just some improvements of @rich-jones's answer</p>\n<pre><code> import re\n import request\n from clint.textui import progress\n\n def get_filename(cd):\n    &quot;&quot;&quot;\n    Get filename from content-disposition\n    &quot;&quot;&quot;\n    if not cd:\n        return None\n    fname = re.findall('filename=(.+)', cd)\n    if len(fname) == 0:\n        return None\n    return fname[0].replace('&quot;', &quot;&quot;)\n\ndef stream_download_file(url, output, chunk_size=1024, session=None, verbose=False):\n    \n    if session:\n        file = session.get(url, stream=True)\n    else:\n        file = requests.get(url, stream=True)\n        \n    file_name = get_filename(file.headers.get('content-disposition'))\n    filepath = &quot;{}/{}&quot;.format(output, file_name)\n    \n    if verbose: \n        print (&quot;Downloading {}&quot;.format(file_name))\n        \n    with open(filepath, 'wb') as f:\n        total_length = int(file.headers.get('content-length'))\n        for chunk in progress.bar(file.iter_content(chunk_size=chunk_size), expected_size=(total_length/chunk_size) + 1): \n            if chunk:\n                f.write(chunk)\n                f.flush()\n    if verbose: \n        print (&quot;Finished&quot;)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 13474214,
                                "reputation": 309,
                                "user_id": 9721745,
                                "user_type": "registered",
                                "display_name": "Eric Grinstein"
                            },
                            "reply_to_user": {
                                "account_id": 1655785,
                                "reputation": 456,
                                "user_id": 2192272,
                                "user_type": "registered",
                                "display_name": "Mah&#233;"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1714656078,
                            "post_id": 66896426,
                            "comment_id": 138251222,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/66896426#comment138251222_66896426",
                            "body": "Hi @Mah&#233;, I tried again and it worked for me."
                        },
                        {
                            "owner": {
                                "account_id": 1655785,
                                "reputation": 456,
                                "user_id": 2192272,
                                "user_type": "registered",
                                "display_name": "Mah&#233;"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1714801601,
                            "post_id": 66896426,
                            "comment_id": 138266470,
                            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/66896426#comment138266470_66896426",
                            "body": "For some reason my comment seems to have been deleted. It may well work, but I was surprised that the associated homepage on bitbucket is not a valid link. Sort of raised a red flag to me. However the author seems to have published many relevant pip packages and I quickly looked at the source code on pip, which seems legit. So my only reservation is the lack of associated homepage with version tracking."
                        }
                    ],
                    "owner": {
                        "account_id": 13474214,
                        "reputation": 309,
                        "user_id": 9721745,
                        "user_type": "registered",
                        "display_name": "Eric Grinstein"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 11,
                    "last_activity_date": 1617232158,
                    "creation_date": 1617232158,
                    "answer_id": 66896426,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/66896426#66896426",
                    "body": "<p>Another good option is <code>wget</code>:</p>\n<pre><code>import wget\nwget.download('http://download.geonames.org/export/zip/US.zip')\n</code></pre>\n<p>The output will look like this:</p>\n<pre><code>11% [........                                     ] 73728 / 633847\n</code></pre>\n<p>Source: <a href=\"https://medium.com/@petehouston/download-files-with-progress-in-python-96f14f6417a2\" rel=\"noreferrer\">https://medium.com/@petehouston/download-files-with-progress-in-python-96f14f6417a2</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 9609587,
                        "reputation": 392,
                        "user_id": 7134419,
                        "user_type": "registered",
                        "display_name": "Han Zhang"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1669625029,
                    "last_edit_date": 1669625029,
                    "creation_date": 1669624367,
                    "answer_id": 74597913,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/74597913#74597913",
                    "body": "<p>I come up with a solution that looks a bit nicer based on <code>tqdm</code>. My implementation is based on the answer of @Endophage.</p>\n<p>The effect:</p>\n<pre><code># import the download_file definition from the next cell first.\n&gt;&gt;&gt; download_file(url, 'some_data.dat')\nDownloading some_data.dat.\n  7%|\u2588\u258e                  | 195.31MB/2.82GB:  [00:04&lt;01:02, 49.61MB/s]\n</code></pre>\n<p>The implementation:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import time\nimport math\nimport requests\nfrom tqdm import tqdm\n\n\ndef download_file(url, filename, update_interval=500, chunk_size=4096):\n    def memory2str(mem):\n        sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB']\n        power = int(math.log(mem, 1024))\n        size = sizes[power]\n        for _ in range(power):\n            mem /= 1024\n        if power &gt; 0:\n            return f'{mem:.2f}{size}'\n        else:\n            return f'{mem}{size}'\n    with open(filename, 'wb') as f:\n        response = requests.get(url, stream=True)\n        total_length = response.headers.get('content-length')\n        if total_length is None:\n            f.write(response.content)\n        else:\n            print(f'Downloading {filename}.', flush=True)\n            downloaded, total_length = 0, int(total_length)\n            total_size = memory2str(total_length)\n            bar_format = '{percentage:3.0f}%|{bar:20}| {desc} [{elapsed}&lt;{remaining}' \\\n                         '{postfix}]'\n            if update_interval * chunk_size * 100 &gt;= total_length:\n                update_interval = 1\n            with tqdm(total=total_length, bar_format=bar_format) as bar:\n                counter = 0\n                now_time, now_size = time.time(), downloaded\n                for data in response.iter_content(chunk_size=chunk_size):\n                    f.write(data)\n                    downloaded += len(data)\n                    counter += 1\n                    bar.update(len(data))\n                    if counter % update_interval == 0:\n                        ellapsed = time.time() - now_time\n                        runtime_downloaded = downloaded - now_size\n                        now_time, now_size = time.time(), downloaded\n\n                        cur_size = memory2str(downloaded)\n                        speed_size = memory2str(runtime_downloaded / ellapsed)\n                        bar.set_description(f'{cur_size}/{total_size}')\n                        bar.set_postfix_str(f'{speed_size}/s')\n\n                        counter = 0\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1382999,
                        "reputation": 3242,
                        "user_id": 1315621,
                        "user_type": "registered",
                        "accept_rate": 81,
                        "display_name": "user1315621"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1673991278,
                    "creation_date": 1673991278,
                    "answer_id": 75152455,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/75152455#75152455",
                    "body": "<p>Simple solution with <code>wget</code> and <code>tqdm</code> python libraries that shows progress in megabytes and remaining time:</p>\n<pre><code>MB:  37%|\u2588\u2588\u2588\u258b      | 2044.8/5588.7 [02:57&lt;04:30, 13.11it/s]\n</code></pre>\n<ul>\n<li><p>Install libraries <code>pip3 install wget tqdm</code></p>\n</li>\n<li><p>Import libraries</p>\n<pre><code>import wget\nfrom tqdm import tqdm\n</code></pre>\n</li>\n<li><p>Wrapper class for tqdm</p>\n<pre><code>class ProgressBar:\n\n  def __init__(self):\n      self.progress_bar = None\n\n  def __call__(self, current_bytes, total_bytes, width):\n      current_mb = round(current_bytes / 1024 ** 2, 1)\n      total_mb = round(total_bytes / 1024 ** 2, 1)\n      if self.progress_bar is None:\n          self.progress_bar = tqdm(total=total_mb, desc=&quot;MB&quot;)\n      delta_mb = current_mb - self.progress_bar.n\n      self.progress_bar.update(delta_mb)\n</code></pre>\n</li>\n<li><p>How to use it</p>\n<pre><code>wget.download(url, dst_filepath, ProgressBar())\n</code></pre>\n</li>\n</ul>\n"
                },
                {
                    "owner": {
                        "account_id": 21450473,
                        "reputation": 84,
                        "user_id": 15803036,
                        "user_type": "registered",
                        "display_name": "solarmoon12"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1675118561,
                    "creation_date": 1675118561,
                    "answer_id": 75290925,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/75290925#75290925",
                    "body": "<p>Here is the &quot;Goat Progress bar&quot; implementation from George Hotz.</p>\n<pre><code>r = requests.get(url, stream=True)\nprogress_bar = tqdm(total=int(r.headers.get('content-length', 0)), unit='B', unit_scale=True, desc=url)\ndat = b''.join(x for x in r.iter_content(chunk_size=16384) if progress_bar.update(len(x)) or True)\n</code></pre>\n<p>cc: <a href=\"https://github.com/geohot/tinygrad/commit/7118602c976d264d97af3c1c8b97d72077616d07\" rel=\"nofollow noreferrer\">https://github.com/geohot/tinygrad/commit/7118602c976d264d97af3c1c8b97d72077616d07</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 28776224,
                        "reputation": 41,
                        "user_id": 22038797,
                        "user_type": "registered",
                        "display_name": "mimseyedi"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1686181403,
                    "creation_date": 1686181403,
                    "answer_id": 76427732,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/76427732#76427732",
                    "body": "<p>You can easily use the <code>dlbar</code> module:</p>\n<pre><code>python3 -m pip install dlbar\n</code></pre>\n<p>Just <code>import</code> it and call the <code>download</code> method:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from dlbar import DownloadBar\n\ndownload_bar = DownloadBar()\n\ndownload_bar.download(\n    url='https://url',\n    dest='/a/b/c/downloaded_file.suffix',\n    title='Downloading downloaded_file.suffix'\n)\n</code></pre>\n<p>Output:</p>\n<pre><code>Downloading downloaded_file.suffix\n43% \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588----------------------------- 197.777 MB/450.327 MB\n</code></pre>\n<p>You can also customize the download bar.\nSee <a href=\"https://github.com/mimseyedi/dlbar\" rel=\"nofollow noreferrer\">here</a> for more information.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 17552844,
                        "reputation": 140,
                        "user_id": 12732923,
                        "user_type": "registered",
                        "display_name": "Steffen"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1686487851,
                    "creation_date": 1686487851,
                    "answer_id": 76450545,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/76450545#76450545",
                    "body": "<p>I modified the many great suggestions to suit my situation.</p>\n<p>I needed to download a large .txt file (&gt;2.5 GB). Each line in the text file contains a unique paragraph. And hence I needed to retrieve a list of paragraphs from the file.</p>\n<p>Be aware that the following code is <strong>not 100% bulletproof</strong>. This is because the chunks might not be exactly at the end/beginning of a paragraph, resulting in paragraphs being split into two. However, in my case, that was not an issue. Increasing the <code>chunk_size</code> will reduce the number of &quot;corrupt&quot; paragraphs.</p>\n<pre><code>import requests\nfrom tqdm import tqdm\n\n     def DownloadFile(url):      \n        req = requests.get(url, stream=True)\n        total_length = int(req.headers.get('content-length'))\n        chunk_size = 4194304 # 4Mb\n        steps = total_length / chunk_size\n        data = []\n        for chunk in tqdm(req.iter_content(chunk_size=chunk_size), total=steps):\n            text = chunk.decode(&quot;utf-8&quot;, &quot;ignore&quot;) \n            for line in text.split(&quot;\\n&quot;):\n                data.append(line.rstrip())\n        return data \n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 14699752,
                        "reputation": 301,
                        "user_id": 10616114,
                        "user_type": "registered",
                        "display_name": "lupdidup"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1708973548,
                    "creation_date": 1708973548,
                    "answer_id": 78063260,
                    "question_id": 15644964,
                    "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads/78063260#78063260",
                    "body": "<p>I was missing a solution without dependencies, so here it is:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from urllib.request import urlretrieve\n\nif __name__ == '__main__':\n    urlretrieve(url, filename, printProgress)\n    print(end='\\r')\n\n\ndef printProgress(blocknum, bs, size):\n    percent = (blocknum * bs) / size\n    done = &quot;#&quot; * int(40 * percent)\n    print(f'\\r[{done:&lt;40}] {percent:.1%}', end='')\n</code></pre>\n<p>The print after <code>urlretrieve</code> will clear the progress bar. Use a different progress bar width (40) if you like</p>\n"
                }
            ],
            "owner": {
                "account_id": 1760224,
                "reputation": 1549,
                "user_id": 1607549,
                "user_type": "registered",
                "accept_rate": 41,
                "display_name": "user1607549"
            },
            "comment_count": 3,
            "is_answered": true,
            "answer_count": 17,
            "score": 121,
            "last_activity_date": 1708973548,
            "creation_date": 1364323386,
            "last_edit_date": 1623489512,
            "question_id": 15644964,
            "link": "https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads",
            "title": "Python progress bar and downloads",
            "body": "<p>I have a Python script that launches a URL that is a downloadable file. Is there some way to have Python display the download progress as oppose to launching the browser?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 9860
}