{
    "items": [
        {
            "tags": [
                "python"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 25085,
                        "reputation": 16724,
                        "user_id": 64236,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "riza"
                    },
                    "reply_to_user": {
                        "account_id": 398487,
                        "reputation": 2255,
                        "user_id": 763191,
                        "user_type": "registered",
                        "display_name": "user763191"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1305917447,
                    "post_id": 6076270,
                    "comment_id": 7038154,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions#comment7038154_6076270",
                    "body": "<code>[lambda x: x*x for x in range(10)]</code> is faster than the first one, since it does not call an outside loop function, f repeatedly."
                },
                {
                    "owner": {
                        "account_id": 190183,
                        "reputation": 29322,
                        "user_id": 429982,
                        "user_type": "registered",
                        "accept_rate": 88,
                        "display_name": "Gerrat"
                    },
                    "reply_to_user": {
                        "account_id": 25085,
                        "reputation": 16724,
                        "user_id": 64236,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "riza"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1305918012,
                    "post_id": 6076270,
                    "comment_id": 7038314,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions#comment7038314_6076270",
                    "body": "@Selinap: ...no, instead you&#39;re creating a brand spanking new function each and every time through the loop.  ...and the overhead of creating this new function, then calling is a little slower (on my system anyway)."
                },
                {
                    "owner": {
                        "account_id": 25085,
                        "reputation": 16724,
                        "user_id": 64236,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "riza"
                    },
                    "reply_to_user": {
                        "account_id": 190183,
                        "reputation": 29322,
                        "user_id": 429982,
                        "user_type": "registered",
                        "accept_rate": 88,
                        "display_name": "Gerrat"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1305918803,
                    "post_id": 6076270,
                    "comment_id": 7038473,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions#comment7038473_6076270",
                    "body": "@Gerrat: Even with overhead, it is still faster. But, of course <code>[x*x for x in range(10)]</code> is better."
                },
                {
                    "owner": {
                        "account_id": 248321,
                        "reputation": 61331,
                        "user_id": 523612,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Karl Knechtel"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1715138190,
                    "post_id": 6076270,
                    "comment_id": 138298566,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions#comment138298566_6076270",
                    "body": "If <code>f</code> means the same thing as <code>lambda x: x*x</code>, then it stands to reason that <code>[lambda x: x*x for x in range(10)]</code> means the same thing (by backwards substitution) as <code>[f for x in range(10)]. Clearly, </code>f` <b>does not</b> mean the same thing as <code>f(x)</code>. So if that was the conceptual problem (expecting the <code>lambda</code> to get automatically called for some reason), then, no, of course it does not; it&#39;s the same as any other time you write a function name by itself (first duplicate). If the problem is generally not understanding what <code>lambda</code> means, see the second duplicate."
                },
                {
                    "owner": {
                        "account_id": 248321,
                        "reputation": 61331,
                        "user_id": 523612,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Karl Knechtel"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1715138249,
                    "post_id": 6076270,
                    "comment_id": 138298572,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions#comment138298572_6076270",
                    "body": "But either way, this is not in any way a <i>useful</i> Q&amp;A and it certainly doesn&#39;t deserve its current score or popularity. Anyone who was helped by it surely needed to do some interpretation."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 36572,
                                "reputation": 594745,
                                "user_id": 104349,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "Daniel Roseman"
                            },
                            "edited": false,
                            "score": 36,
                            "creation_date": 1305917596,
                            "post_id": 6076304,
                            "comment_id": 7038202,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/6076304#comment7038202_6076304",
                            "body": "Or <code>map(lambda x: x*x, range(10))</code>, which was probably what the OP meant in the first place."
                        },
                        {
                            "owner": {
                                "account_id": 2878481,
                                "reputation": 620,
                                "user_id": 2469858,
                                "user_type": "registered",
                                "display_name": "staticor"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1376928588,
                            "post_id": 6076304,
                            "comment_id": 26882539,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/6076304#comment26882539_6076304",
                            "body": "yeah, lambda x : x*x .. (x)  seems tenet."
                        },
                        {
                            "owner": {
                                "account_id": 2055352,
                                "reputation": 2017,
                                "user_id": 1833261,
                                "user_type": "registered",
                                "accept_rate": 55,
                                "display_name": "moshe beeri"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1440877902,
                            "post_id": 6076304,
                            "comment_id": 52457765,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/6076304#comment52457765_6076304",
                            "body": "[lambda x: x*x  for x in range(10)] is basically a functur in haskell"
                        },
                        {
                            "owner": {
                                "account_id": 3420730,
                                "reputation": 1555,
                                "user_id": 2868465,
                                "user_type": "registered",
                                "accept_rate": 64,
                                "display_name": "rrlamichhane"
                            },
                            "reply_to_user": {
                                "account_id": 36572,
                                "reputation": 594745,
                                "user_id": 104349,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "Daniel Roseman"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1592002736,
                            "post_id": 6076304,
                            "comment_id": 110278329,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/6076304#comment110278329_6076304",
                            "body": "@DanielRoseman, or to be precise <code>list(map(lambda x: x*x, range(10)))</code> will give you <code>[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 126362,
                        "reputation": 44641,
                        "user_id": 322806,
                        "user_type": "registered",
                        "accept_rate": 40,
                        "display_name": "Winston Ewert"
                    },
                    "comment_count": 4,
                    "is_accepted": true,
                    "score": 363,
                    "last_activity_date": 1594646233,
                    "last_edit_date": 1594646233,
                    "creation_date": 1305916905,
                    "answer_id": 6076304,
                    "question_id": 6076270,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/6076304#6076304",
                    "body": "<p>The first one creates a single lambda function and calls it ten times.</p>\n<p>The second one doesn't call the function. It creates 10 different lambda functions. It puts all of those in a list. To make it equivalent to the first you need:</p>\n<pre><code>[(lambda x: x*x)(x) for x in range(10)]\n</code></pre>\n<p>Or better yet:</p>\n<pre><code>[x*x for x in range(10)]\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 119097,
                        "reputation": 85934,
                        "user_id": 310574,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Gabe"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 23,
                    "last_activity_date": 1305916906,
                    "creation_date": 1305916906,
                    "answer_id": 6076305,
                    "question_id": 6076270,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/6076305#6076305",
                    "body": "<p>The big difference is that the first example actually invokes the lambda <code>f(x)</code>, while the second example doesn't.</p>\n\n<p>Your first example is equivalent to <code>[(lambda x: x*x)(x) for x in range(10)]</code> while your second example is equivalent to <code>[f for x in range(10)]</code>.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 107007,
                        "reputation": 31986,
                        "user_id": 284731,
                        "user_type": "registered",
                        "display_name": "zellio"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 15,
                    "last_activity_date": 1305916963,
                    "creation_date": 1305916963,
                    "answer_id": 6076322,
                    "question_id": 6076270,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/6076322#6076322",
                    "body": "<p>The first one </p>\n\n<pre><code>f = lambda x: x*x\n[f(x) for x in range(10)]\n</code></pre>\n\n<p>runs <code>f()</code> for each value in the range so it does <code>f(x)</code> for each value</p>\n\n<p>the second one </p>\n\n<pre><code>[lambda x: x*x for x in range(10)]\n</code></pre>\n\n<p>runs the lambda for each value in the list, so it generates all of those functions.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1412466,
                                "reputation": 8603,
                                "user_id": 1338797,
                                "user_type": "registered",
                                "display_name": "Tomasz Gandor"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1448975959,
                            "post_id": 32254018,
                            "comment_id": 55797650,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/32254018#comment55797650_32254018",
                            "body": "This is an important point. I upvoted you and elaborated on it in my answer."
                        }
                    ],
                    "owner": {
                        "account_id": 6858965,
                        "reputation": 141,
                        "user_id": 5273673,
                        "user_type": "registered",
                        "display_name": "Tidhar seifer"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 14,
                    "last_activity_date": 1474833683,
                    "last_edit_date": 1474833683,
                    "creation_date": 1440690419,
                    "answer_id": 32254018,
                    "question_id": 6076270,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/32254018#32254018",
                    "body": "<p>People gave good answers but forgot to mention the most important part in my opinion:\nIn the second example the <code>X</code> of the list comprehension is NOT the same as the <code>X</code> of the <code>lambda</code> function, they are totally unrelated.\nSo the second example is actually the same as:</p>\n\n<pre><code>[Lambda X: X*X for I in range(10)]\n</code></pre>\n\n<p>The internal iterations on <code>range(10)</code> are only responsible for creating 10 similar lambda functions in a list (10 separate functions but totally similar - returning the power 2 of each input).</p>\n\n<p>On the other hand, the first example works totally different, because the X of the iterations DO interact with the results, for each iteration the value is <code>X*X</code> so the result would be <code>[0,1,4,9,16,25, 36, 49, 64 ,81]</code></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 4514996,
                                "reputation": 3296,
                                "user_id": 3681451,
                                "user_type": "registered",
                                "display_name": "szeitlin"
                            },
                            "edited": false,
                            "score": 48,
                            "creation_date": 1449856177,
                            "post_id": 34021333,
                            "comment_id": 56202972,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/34021333#comment56202972_34021333",
                            "body": "that is a cruel and unusual job interview question."
                        },
                        {
                            "owner": {
                                "account_id": 1917933,
                                "reputation": 1729,
                                "user_id": 2102764,
                                "user_type": "registered",
                                "display_name": "piggybox"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1478741623,
                            "post_id": 34021333,
                            "comment_id": 68279028,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/34021333#comment68279028_34021333",
                            "body": "If my colleague didn&#39;t ask, I probably would never search for this answer"
                        },
                        {
                            "owner": {
                                "account_id": 212375,
                                "reputation": 5241,
                                "user_id": 465159,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Ant"
                            },
                            "edited": false,
                            "score": 11,
                            "creation_date": 1508499104,
                            "post_id": 34021333,
                            "comment_id": 80643656,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/34021333#comment80643656_34021333",
                            "body": "Wow. I just got bitten badly by this absurd behavior. Thank you for your post!"
                        },
                        {
                            "owner": {
                                "account_id": 6108287,
                                "reputation": 439,
                                "user_id": 4765406,
                                "user_type": "registered",
                                "display_name": "ahota"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1530131598,
                            "post_id": 34021333,
                            "comment_id": 89131700,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/34021333#comment89131700_34021333",
                            "body": "Excellent answer. I just ran into this issue as well. On one hand it does point to a Python limitation, but on the other hand it might also be a code smell indicator. I&#39;m using this solution for a toy project, but it might be a signal to restructure in a production environment."
                        },
                        {
                            "owner": {
                                "account_id": 5453803,
                                "reputation": 1413,
                                "user_id": 4337867,
                                "user_type": "registered",
                                "display_name": "josoler"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1565954147,
                            "post_id": 34021333,
                            "comment_id": 101513760,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/34021333#comment101513760_34021333",
                            "body": "For the sake of clarity and completeness you could write the last list comprehension like: <code>[partial(lambda i, x: i * x, i) for i in (1, 2)]</code>"
                        },
                        {
                            "owner": {
                                "account_id": 1412466,
                                "reputation": 8603,
                                "user_id": 1338797,
                                "user_type": "registered",
                                "display_name": "Tomasz Gandor"
                            },
                            "reply_to_user": {
                                "account_id": 5453803,
                                "reputation": 1413,
                                "user_id": 4337867,
                                "user_type": "registered",
                                "display_name": "josoler"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1567159886,
                            "post_id": 34021333,
                            "comment_id": 101889882,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/34021333#comment101889882_34021333",
                            "body": "Thanks @josoler, I added a section on using <code>partial</code> to my answer."
                        },
                        {
                            "owner": {
                                "account_id": 5689793,
                                "reputation": 330,
                                "user_id": 4498838,
                                "user_type": "registered",
                                "display_name": "Marco"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1569811769,
                            "post_id": 34021333,
                            "comment_id": 102704008,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/34021333#comment102704008_34021333",
                            "body": "Just for completeness&#39; sake: The function objects generated by the nested lambda solution are located at equally crazy addresses, e.g. <code>&lt;function run.&lt;locals&gt;.&lt;listcomp&gt;.&lt;lambda&gt;.&lt;locals&gt;.&lt;lambda&gt; at 0x1a1db776a8&gt;</code>."
                        },
                        {
                            "owner": {
                                "account_id": 6018068,
                                "reputation": 607,
                                "user_id": 4726173,
                                "user_type": "registered",
                                "display_name": "dasWesen"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1597476457,
                            "post_id": 34021333,
                            "comment_id": 112149885,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/34021333#comment112149885_34021333",
                            "body": "For many purposes, I think there is a python-internal way around it: Lambdas with default values. This should work: <code>[lambda x, i=i: x * i for i in range(4)]</code> <a href=\"https://docs.python.org/3.4/faq/programming.html#why-do-lambdas-defined-in-a-loop-with-different-values-all-return-the-same-result\" rel=\"nofollow noreferrer\">docs.python.org/3.4/faq/&hellip;</a> . That&#39;s good if you don&#39;t mind the additional, overwritable parameter."
                        },
                        {
                            "owner": {
                                "account_id": 12521330,
                                "reputation": 1761,
                                "user_id": 9112585,
                                "user_type": "registered",
                                "display_name": "Chris J Harris"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1664249714,
                            "post_id": 34021333,
                            "comment_id": 130422325,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/34021333#comment130422325_34021333",
                            "body": "For the second time in my coding career, this issue has cost me a few hours. I found my way to this answer and discovered I&#39;d already upvoted it some time back. there&#39;s no good solution here but at least your response has the appropriate degree of indignation to it."
                        },
                        {
                            "owner": {
                                "account_id": 13553674,
                                "reputation": 463,
                                "user_id": 9777827,
                                "user_type": "registered",
                                "display_name": "pinkwaffles"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1713433629,
                            "post_id": 34021333,
                            "comment_id": 138122505,
                            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/34021333#comment138122505_34021333",
                            "body": "Have you ever asked a question and see an answer so detailed you regret even asking the question?"
                        }
                    ],
                    "owner": {
                        "account_id": 1412466,
                        "reputation": 8603,
                        "user_id": 1338797,
                        "user_type": "registered",
                        "display_name": "Tomasz Gandor"
                    },
                    "comment_count": 10,
                    "is_accepted": false,
                    "score": 187,
                    "last_activity_date": 1597734350,
                    "last_edit_date": 1597734350,
                    "creation_date": 1448975647,
                    "answer_id": 34021333,
                    "question_id": 6076270,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/34021333#34021333",
                    "body": "<p>This question touches a very stinking part of the &quot;famous&quot; and &quot;obvious&quot; Python syntax - what takes precedence, the lambda, or the for of list comprehension.</p>\n<p>I don't think the purpose of the OP was to generate a list of squares from 0 to 9. If that was the case, we could give even more solutions:</p>\n<pre><code>squares = []\nfor x in range(10): squares.append(x*x)\n</code></pre>\n<ul>\n<li>this is the good ol' way of imperative syntax.</li>\n</ul>\n<p>But it's not the point. The point is W(hy)TF is this ambiguous expression so counter-intuitive? And I have an idiotic case for you at the end, so don't dismiss my answer too early (I had it on a job interview).</p>\n<p>So, the OP's comprehension returned a list of lambdas:</p>\n<pre><code>[(lambda x: x*x) for x in range(10)]\n</code></pre>\n<p>This is of course just 10 <em>different</em> copies of the squaring function, see:</p>\n<pre><code>&gt;&gt;&gt; [lambda x: x*x for _ in range(3)]\n[&lt;function &lt;lambda&gt; at 0x00000000023AD438&gt;, &lt;function &lt;lambda&gt; at 0x00000000023AD4A8&gt;, &lt;function &lt;lambda&gt; at 0x00000000023AD3C8&gt;]\n</code></pre>\n<p><strong>Note</strong> the memory addresses of the lambdas - they are all different!</p>\n<p>You could of course have a more &quot;optimal&quot; (haha) version of this expression:</p>\n<pre><code>&gt;&gt;&gt; [lambda x: x*x] * 3\n[&lt;function &lt;lambda&gt; at 0x00000000023AD2E8&gt;, &lt;function &lt;lambda&gt; at 0x00000000023AD2E8&gt;, &lt;function &lt;lambda&gt; at 0x00000000023AD2E8&gt;]\n</code></pre>\n<p>See? 3 time <em>the same</em> lambda.</p>\n<p>Please note, that I used <code>_</code> as the <code>for</code> variable. It has nothing to do with the <code>x</code> in the <code>lambda</code> (it is overshadowed lexically!). Get it?</p>\n<p>I'm leaving out the discussion, why the syntax precedence is not so, that it all meant:</p>\n<pre><code>[lambda x: (x*x for x in range(10))]\n</code></pre>\n<p>which could be: <code>[[0, 1, 4, ..., 81]]</code>, or <code>[(0, 1, 4, ..., 81)]</code>, or <strong>which I find most logical</strong>, this would be a <code>list</code> of 1 element - a <code>generator</code> returning the values. It is just not the case, the language doesn't work this way.</p>\n<p><strong>BUT</strong> What, If...</p>\n<p>What if you DON'T overshadow the <code>for</code> variable, AND use it in your <code>lambda</code>s???</p>\n<p>Well, then crap happens. Look at this:</p>\n<pre><code>[lambda x: x * i for i in range(4)]\n</code></pre>\n<p>this means of course:</p>\n<pre><code>[(lambda x: x * i) for i in range(4)]\n</code></pre>\n<p>BUT it DOESN'T mean:</p>\n<pre><code>[(lambda x: x * 0), (lambda x: x * 1), ... (lambda x: x * 3)]\n</code></pre>\n<p>This is just crazy!</p>\n<p>The lambdas in the list comprehension are a closure over the scope of this comprehension. A <strong>lexical</strong> closure, so they refer to the <code>i</code> via reference, and not its value when they were evaluated!</p>\n<p>So, this expression:</p>\n<pre><code>[(lambda x: x * i) for i in range(4)]\n</code></pre>\n<p>IS roughly EQUIVALENT to:</p>\n<pre><code>[(lambda x: x * 3), (lambda x: x * 3), ... (lambda x: x * 3)]\n</code></pre>\n<p>I'm sure we could see more here using a python decompiler (by which I mean e.g. the <code>dis</code> module), but for Python-VM-agnostic discussion this is enough.\nSo much for the job interview question.</p>\n<p>Now, how to make a <code>list</code> of multiplier lambdas, which really multiply by consecutive integers? Well, similarly to the accepted answer, we need to break the direct tie to <code>i</code> by wrapping it in another <code>lambda</code>, which is getting called <em>inside</em> the list comprehension expression:</p>\n<p>Before:</p>\n<pre><code>&gt;&gt;&gt; a = [(lambda x: x * i) for i in (1, 2)]\n&gt;&gt;&gt; a[1](1)\n2\n&gt;&gt;&gt; a[0](1)\n2\n</code></pre>\n<p>After:</p>\n<pre><code>&gt;&gt;&gt; a = [(lambda y: (lambda x: y * x))(i) for i in (1, 2)]\n&gt;&gt;&gt; a[1](1)\n2\n&gt;&gt;&gt; a[0](1)\n1\n</code></pre>\n<p>(I had the outer lambda variable also = <code>i</code>, but I decided this is the clearer solution - I introduced <code>y</code> so that we can all see which witch is which).</p>\n<p>Edit 2019-08-30:</p>\n<p>Following a suggestion by @josoler, which is also present in an answer by @sheridp - the value of the list comprehension &quot;loop variable&quot; can be &quot;embedded&quot; inside an object - the key is for it to be accessed at the right time. The section &quot;After&quot; above does it by wrapping it in another <code>lambda</code> and calling it immediately with the current value of <code>i</code>. Another way (a little bit easier to read - it produces no 'WAT' effect) is to store the value of <code>i</code> inside a <code>partial</code> object, and have the &quot;inner&quot; (original) <code>lambda</code> take it as an argument (passed supplied by the <code>partial</code> object at the time of the call), i.e.:</p>\n<p>After 2:</p>\n<pre><code>&gt;&gt;&gt; from functools import partial\n&gt;&gt;&gt; a = [partial(lambda y, x: y * x, i) for i in (1, 2)]\n&gt;&gt;&gt; a[0](2), a[1](2)\n(2, 4)\n</code></pre>\n<p>Great, but there is still a little twist for you! Let's say we wan't to make it easier on the code reader, and pass the factor by name (as a keyword argument to <code>partial</code>). Let's do some renaming:</p>\n<p>After 2.5:</p>\n<pre><code>&gt;&gt;&gt; a = [partial(lambda coef, x: coef * x, coef=i) for i in (1, 2)]\n&gt;&gt;&gt; a[0](1)\nTraceback (most recent call last):\n  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;\nTypeError: &lt;lambda&gt;() got multiple values for argument 'coef'\n</code></pre>\n<p>WAT?</p>\n<pre><code>&gt;&gt;&gt; a[0]()\nTraceback (most recent call last):\nFile &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;\nTypeError: &lt;lambda&gt;() missing 1 required positional argument: 'x'\n</code></pre>\n<p>Wait... We're changing the number of arguments by 1, and going from &quot;too many&quot; to &quot;too few&quot;?</p>\n<p>Well, it's not a real WAT, when we pass <code>coef</code> to <code>partial</code> in this way, it becomes a keyword argument, so it must come after the positional <code>x</code> argument, like so:</p>\n<p>After 3:</p>\n<pre><code>&gt;&gt;&gt; a = [partial(lambda x, coef: coef * x, coef=i) for i in (1, 2)]\n&gt;&gt;&gt; a[0](2), a[1](2)\n(2, 4)\n</code></pre>\n<p>I would prefer the last version over the nested lambda, but to each their own...</p>\n<p>Edit 2020-08-18:</p>\n<p>Thanks to commenter dasWesen, I found out that this stuff is covered in the Python documentation: <a href=\"https://docs.python.org/3.4/faq/programming.html#why-do-lambdas-defined-in-a-loop-with-different-values-all-return-the-same-result\" rel=\"noreferrer\">https://docs.python.org/3.4/faq/programming.html#why-do-lambdas-defined-in-a-loop-with-different-values-all-return-the-same-result</a> - it deals with loops instead of list comprehensions, but the idea is the same - global or nonlocal variable access in the lambda function. There's even a solution - using default argument values (like for any function):</p>\n<pre><code>&gt;&gt;&gt; a = [lambda x, coef=i: coef * x for i in (1, 2)]\n&gt;&gt;&gt; a[0](2), a[1](2)\n(2, 4)\n</code></pre>\n<p>This way the coef value is bound to the value of i at the time of function definition (see James Powell's talk &quot;Top To Down, Left To Right&quot;, which also explains why mutable default values are shunned).</p>\n"
                },
                {
                    "owner": {
                        "account_id": 3202717,
                        "reputation": 1406,
                        "user_id": 2887872,
                        "user_type": "registered",
                        "accept_rate": 60,
                        "display_name": "sheridp"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1485269535,
                    "creation_date": 1485269535,
                    "answer_id": 41831242,
                    "question_id": 6076270,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/41831242#41831242",
                    "body": "<p>The other answers are correct, but if you are trying to make a list of functions, each with a different parameter, that can be executed <em>later</em>, the following code will do that:</p>\n\n<pre><code>import functools\na = [functools.partial(lambda x: x*x, x) for x in range(10)]\n\nb = []\nfor i in a:\n    b.append(i())\n\nIn [26]: b\nOut[26]: [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]\n</code></pre>\n\n<p>While the example is contrived, I found it useful when I wanted a list of functions that each print something different, i.e.</p>\n\n<pre><code>import functools\na = [functools.partial(lambda x: print(x), x) for x in range(10)]\n\nfor i in a:\n    i()\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 19940235,
                        "reputation": 184,
                        "user_id": 14612108,
                        "user_type": "registered",
                        "display_name": "Muhammad Ali Malekzadeh"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1712610910,
                    "creation_date": 1712610910,
                    "answer_id": 78295094,
                    "question_id": 6076270,
                    "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions/78295094#78295094",
                    "body": "<p>you can fix The second code problem by using the default argument in the <code>lambda</code> function.</p>\n<pre><code>&gt;&gt;&gt; a = [lambda x=x: x*x for x in range(10)]\n&gt;&gt;&gt; for item in a:\n&gt;&gt;&gt;     print(item())\n0\n1\n4\n9\n16\n25\n36\n49\n64\n81\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 398487,
                "reputation": 2255,
                "user_id": 763191,
                "user_type": "registered",
                "display_name": "user763191"
            },
            "comment_count": 5,
            "is_answered": true,
            "closed_date": 1715138054,
            "accepted_answer_id": 6076304,
            "answer_count": 7,
            "score": 222,
            "last_activity_date": 1715138070,
            "creation_date": 1305916740,
            "last_edit_date": 1560548497,
            "question_id": 6076270,
            "link": "https://stackoverflow.com/questions/6076270/lambda-function-in-list-comprehensions",
            "closed_reason": "Duplicate",
            "title": "Lambda function in list comprehensions",
            "body": "<p>Why is the output of the following two list comprehensions different, even though <code>f</code> and the <code>lambda</code> function are the same?</p>\n\n<pre><code>f = lambda x: x*x\n[f(x) for x in range(10)]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>[lambda x: x*x for x in range(10)]\n</code></pre>\n\n<p>Mind you, both <code>type(f)</code> and <code>type(lambda x: x*x)</code> return the same type.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 9869
}