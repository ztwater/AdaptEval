{
    "items": [
        {
            "tags": [
                "python",
                "ipython",
                "jupyter-notebook"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 1891677,
                        "reputation": 148638,
                        "user_id": 1709587,
                        "user_type": "registered",
                        "accept_rate": 71,
                        "display_name": "Mark Amery"
                    },
                    "edited": false,
                    "score": 8,
                    "creation_date": 1569094653,
                    "post_id": 15411967,
                    "comment_id": 102487266,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook#comment102487266_15411967",
                    "body": "I suggest accepting <a href=\"https://stackoverflow.com/a/39662359/1709587\">Gustavo Bezerra&#39;s answer</a>. The currently accepted answer doesn&#39;t answer the question, and Gustavo&#39;s answer is the highest-scored answer that still works in the latest version of Jupyter Notebook."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 106127,
                                "reputation": 1190,
                                "user_id": 282840,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Who8MyLunch"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1397828060,
                            "post_id": 15412661,
                            "comment_id": 35407072,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment35407072_15412661",
                            "body": "The link above to the IPython Rich Display System is broken.  Here is the link to current documentation: <a href=\"http://ipython.org/ipython-doc/dev/config/integrating.html\" rel=\"nofollow noreferrer\">ipython.org/ipython-doc/dev/config/integrating.html</a>, and here is a link to some great examples: <a href=\"http://nbviewer.ipython.org/github/ipython/ipython/blob/master/examples/Notebook/Display%20System.ipynb\" rel=\"nofollow noreferrer\">nbviewer.ipython.org/github/ipython/ipython/blob/master/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 528306,
                                "reputation": 590,
                                "user_id": 1395973,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Dr. Goulu"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1400480503,
                            "post_id": 15412661,
                            "comment_id": 36477772,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment36477772_15412661",
                            "body": "I have a problem like this in my <a href=\"https://github.com/goulu/Goulib/blob/master/Goulib/drawing.py\" rel=\"nofollow noreferrer\">drawing module</a> . I need to import call matplotlib.use(&quot;Agg&quot;) there for travis-ci to allow saving drawings (see <a href=\"http://stackoverflow.com/questions/4706451/how-to-save-a-figure-remotely-with-pylab/4706614#4706614\" title=\"how to save a figure remotely with pylab\">stackoverflow.com/questions/4706451/&hellip;</a> ) But this generates a warning <a href=\"http://nbviewer.ipython.org/github/Goulu/Goulib/blob/master/notebook.ipynb\" rel=\"nofollow noreferrer\">in the notebook</a> UserWarning:  This call to matplotlib.use() has no effect because the backend has already been chosen; How to solve this ?"
                        },
                        {
                            "owner": {
                                "account_id": 46628,
                                "reputation": 27550,
                                "user_id": 137794,
                                "user_type": "registered",
                                "display_name": "Matt"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1400493279,
                            "post_id": 15412661,
                            "comment_id": 36484564,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment36484564_15412661",
                            "body": "This mean somethign else have already make a call to matplotlib.use, or you are starting ipython with an option that already set the mlp backend (--matplolib=.. or --pylab, or %matplotlib...)"
                        },
                        {
                            "owner": {
                                "account_id": 4641,
                                "reputation": 1597,
                                "user_id": 7061,
                                "user_type": "registered",
                                "accept_rate": 69,
                                "display_name": "Thomas Andrews"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1456502312,
                            "post_id": 15412661,
                            "comment_id": 58992893,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment58992893_15412661",
                            "body": "Link in this answer is stale."
                        },
                        {
                            "owner": {
                                "account_id": 1136346,
                                "reputation": 16542,
                                "user_id": 1121352,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "gaborous"
                            },
                            "edited": false,
                            "score": 46,
                            "creation_date": 1465330747,
                            "post_id": 15412661,
                            "comment_id": 62854243,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment62854243_15412661",
                            "body": "I have one example: progress bars. Jupyter notebook terminal emulator does not support extended terminal control characters such as <code>\\x1b[A</code> (move up), so it&#39;s not possible to print <a href=\"https://github.com/tqdm/tqdm#nested-progress-bars\" rel=\"nofollow noreferrer\">nested bars</a>. No problem with <a href=\"https://github.com/ipython/ipywidgets\" rel=\"nofollow noreferrer\">ipywidgets</a>, we can use native Jupyter widgets to display progress bars. But then we have two different means of displaying a progress bar, and an application might want to know what is the display environment in order to adapt and print the compatible bar."
                        },
                        {
                            "owner": {
                                "account_id": 413111,
                                "reputation": 3830,
                                "user_id": 786559,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "Ciprian Tomoiag\u0103"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1513076305,
                            "post_id": 15412661,
                            "comment_id": 82502700,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment82502700_15412661",
                            "body": "for instance, I want to set IPython config to always run <code>%matplotlib inline</code> when it acts as a notebook, but not in a terminal, since that is not needed."
                        },
                        {
                            "owner": {
                                "account_id": 133281,
                                "reputation": 2639,
                                "user_id": 334526,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "Christopher Barber"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1551810887,
                            "post_id": 15412661,
                            "comment_id": 96773759,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment96773759_15412661",
                            "body": "While this is a perfectly valid opinion, this answer does not address the actual question. No matter how much you would wish it be otherwise there will always be differences in behavior that may matter."
                        },
                        {
                            "owner": {
                                "account_id": 1633247,
                                "reputation": 8426,
                                "user_id": 1507393,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Pyrce"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1556594827,
                            "post_id": 15412661,
                            "comment_id": 98481493,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment98481493_15412661",
                            "body": "Many users may actually only need to know if they are in a kernel, not necessarily in a notebook, which can be done via <a href=\"https://github.com/ipython/ipython/issues/11694\" rel=\"nofollow noreferrer\">github.com/ipython/ipython/issues/11694</a>"
                        },
                        {
                            "owner": {
                                "account_id": 1423552,
                                "reputation": 5732,
                                "user_id": 1347646,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "mic_e"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1570021022,
                            "post_id": 15412661,
                            "comment_id": 102781891,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment102781891_15412661",
                            "body": "In my example, I have a line <code>display(HTML(...))</code> in my script. When run from a notebook it works. When run as a normal Python script it just prints <code>&lt;IPython.core.display.HTML object&gt;</code> which is useless, so I need to manually open a browser to display the HTML code, or convert the HTML to something that I can print in the terminal."
                        },
                        {
                            "owner": {
                                "account_id": 1933309,
                                "reputation": 8405,
                                "user_id": 2056067,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "A. Donda"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1580411254,
                            "post_id": 15412661,
                            "comment_id": 106098598,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment106098598_15412661",
                            "body": "The intention is good, but the practice is different. There are perfectly valid reasons to make code depend on the environment. My application is the startup file <code>startup.ipy</code>. When in the terminal IPython, for convenience I like to have a few packages pre-imported. When in a notebook, that is considered bad style, and not necessary because I can put the imports in the first cell, not having to type them again and again."
                        },
                        {
                            "owner": {
                                "account_id": 9023797,
                                "reputation": 918,
                                "user_id": 6723872,
                                "user_type": "registered",
                                "display_name": "zolastro"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1591205210,
                            "post_id": 15412661,
                            "comment_id": 109970097,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment109970097_15412661",
                            "body": "This does not answer the question asked. The title is &quot;How can I check if code is executed in the IPython notebook?&quot; Please, either change the correct answer or the title of the question."
                        },
                        {
                            "owner": {
                                "account_id": 2123624,
                                "reputation": 7683,
                                "user_id": 1886357,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "eric"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1599061823,
                            "post_id": 15412661,
                            "comment_id": 112658910,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#comment112658910_15412661",
                            "body": "This non-answer answer predates ubiquitous Jupyter use. There are things that are literally impossible in one context and not another, and this is modern Python. E.g., try using <code>display()</code> from the command line."
                        }
                    ],
                    "owner": {
                        "account_id": 46628,
                        "reputation": 27550,
                        "user_id": 137794,
                        "user_type": "registered",
                        "display_name": "Matt"
                    },
                    "comment_count": 12,
                    "is_accepted": true,
                    "score": 4,
                    "last_activity_date": 1456513974,
                    "last_edit_date": 1456513974,
                    "creation_date": 1363272988,
                    "answer_id": 15412661,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/15412661#15412661",
                    "body": "<p>The question is what do you want execute differently.</p>\n\n<p>We do our best in IPython prevent the kernel from knowing to which kind of frontend is connected, and actually you can even have a kernel connected to many differents frontends at the same time. Even if you can take a peek at the type of <code>stderr/out</code> to know wether you are in a ZMQ kernel or not, it does not guaranties you of what you have on the other side. You could even have no frontends at all.</p>\n\n<p>You should probably write your code in a frontend independent manner, but if you want to display different things, you can use the <a href=\"http://nbviewer.jupyter.org/github/ipython/ipython/blob/4.x/examples/IPython%20Kernel/Rich%20Output.ipynb\" rel=\"nofollow noreferrer\">rich display system (link pinned to version 4.x of IPython)</a> to display different things depending on the frontend, but the frontend will choose, not the library.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1325498,
                                "reputation": 832,
                                "user_id": 3086470,
                                "user_type": "registered",
                                "accept_rate": 57,
                                "display_name": "marscher"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1429620947,
                            "post_id": 22424821,
                            "comment_id": 47676048,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/22424821#comment47676048_22424821",
                            "body": "python -c &quot;def is_interactive(): &gt;     import <b>main</b> as main &gt;     return not hasattr(main, &#39;<b>file</b>&#39;) &gt; print is_interactive()&quot; True"
                        },
                        {
                            "owner": {
                                "account_id": 144642,
                                "reputation": 29350,
                                "user_id": 353852,
                                "user_type": "registered",
                                "display_name": "krock"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1444107872,
                            "post_id": 22424821,
                            "comment_id": 53749055,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/22424821#comment53749055_22424821",
                            "body": "<code>is_interactive()</code> does not distinguish between notebook and console."
                        },
                        {
                            "owner": {
                                "account_id": 81789,
                                "reputation": 3607,
                                "user_id": 230446,
                                "user_type": "registered",
                                "display_name": "dirkjot"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1497634592,
                            "post_id": 22424821,
                            "comment_id": 76177903,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/22424821#comment76177903_22424821",
                            "body": "Another caveat, issuing a <code>%run</code> from ipython is non-interactive. You could argue it should be, but it is still a gotcha."
                        },
                        {
                            "owner": {
                                "account_id": 11614889,
                                "reputation": 8059,
                                "user_id": 8508004,
                                "user_type": "registered",
                                "display_name": "Wayne"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1518719271,
                            "post_id": 22424821,
                            "comment_id": 84631520,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/22424821#comment84631520_22424821",
                            "body": "For others prototyping in the notebook, the variant of Till&#39;s approach featured <a href=\"https://stackoverflow.com/a/22923872/8508004\">here</a> might be useful."
                        },
                        {
                            "owner": {
                                "account_id": 1891677,
                                "reputation": 148638,
                                "user_id": 1709587,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Mark Amery"
                            },
                            "reply_to_user": {
                                "account_id": 1325498,
                                "reputation": 832,
                                "user_id": 3086470,
                                "user_type": "registered",
                                "accept_rate": 57,
                                "display_name": "marscher"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1569095488,
                            "post_id": 22424821,
                            "comment_id": 102487473,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/22424821#comment102487473_22424821",
                            "body": "The second half of this answer is useful, but the first half (about <code>is_interactive</code>) seems to me to be basically irrelevant to the question. It&#39;s also of dubious correctness; as @marscher points out, it counts anything run using <code>python -c</code> as being in &quot;interactive&quot; mode even though this isn&#39;t true. I don&#39;t want to do it myself since it&#39;s not my answer, but I think this would be improved by simply deleting the entire first half of the answer."
                        },
                        {
                            "owner": {
                                "account_id": 115820,
                                "reputation": 10737,
                                "user_id": 303931,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Lucas Wiman"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1583518013,
                            "post_id": 22424821,
                            "comment_id": 107157052,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/22424821#comment107157052_22424821",
                            "body": "Note that <code>get_ipython</code> will returns <code>None</code> when run from an ordinary python shell or a running a script, so this code needs to guard against that case."
                        },
                        {
                            "owner": {
                                "account_id": 2194374,
                                "reputation": 590,
                                "user_id": 1940485,
                                "user_type": "registered",
                                "display_name": "NMech"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1596261060,
                            "post_id": 22424821,
                            "comment_id": 111761398,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/22424821#comment111761398_22424821",
                            "body": "Another note, is that in vscode it does not recognize Python Interactive as Interactive."
                        },
                        {
                            "owner": {
                                "account_id": 6760494,
                                "reputation": 81,
                                "user_id": 6007101,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "thinkvitamin"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1707470475,
                            "post_id": 22424821,
                            "comment_id": 137451831,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/22424821#comment137451831_22424821",
                            "body": "After I tried putting this example in PyCharm, I get this warning: <code>Python versions 3.12, 3.11 do not have module __main__</code>."
                        }
                    ],
                    "owner": {
                        "account_id": 1174677,
                        "reputation": 9757,
                        "user_id": 1150961,
                        "user_type": "registered",
                        "accept_rate": 65,
                        "display_name": "Till Hoffmann"
                    },
                    "comment_count": 8,
                    "is_accepted": false,
                    "score": 46,
                    "last_activity_date": 1634235538,
                    "last_edit_date": 1634235538,
                    "creation_date": 1394892307,
                    "answer_id": 22424821,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/22424821#22424821",
                    "body": "<p>You can check whether python is in <em>interactive</em> mode with the following snippet <a href=\"https://stackoverflow.com/questions/2356399/tell-if-python-is-in-interactive-mode\">[1]</a>:</p>\n<pre><code>def is_interactive():\n    import __main__ as main\n    return not hasattr(main, '__file__')\n</code></pre>\n<p>I have found this method very useful because I do a lot of prototyping in the notebook. For testing purposes, I use default parameters. Otherwise, I read the parameters from <code>sys.argv</code>.</p>\n<pre><code>from sys import argv\n\nif is_interactive():\n    params = [&lt;list of default parameters&gt;]\nelse:\n    params = argv[1:]\n</code></pre>\n<p>Following the implementation of <a href=\"https://github.com/tqdm/tqdm/blob/master/tqdm/autonotebook.py\" rel=\"noreferrer\"><code>autonotebook</code></a>, you can tell whether you are in a notebook using the following code.</p>\n<pre><code>def in_notebook():\n    try:\n        from IPython import get_ipython\n        if 'IPKernelApp' not in get_ipython().config:  # pragma: no cover\n            return False\n    except ImportError:\n        return False\n    except AttributeError:\n        return False\n    return True\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3178280,
                                "reputation": 1226,
                                "user_id": 2685624,
                                "user_type": "registered",
                                "accept_rate": 56,
                                "display_name": "Dux"
                            },
                            "edited": false,
                            "score": 8,
                            "creation_date": 1432555633,
                            "post_id": 24937408,
                            "comment_id": 48959024,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/24937408#comment48959024_24937408",
                            "body": "In my IPython-Notebook (IPython version 3.1), <code>cfg[&#39;IPKernelApp&#39;][&#39;parent_appname&#39;]</code> is a <code>IPython.config.loader.LazyConfigValue</code>, which does not compare to <code>True</code> with <code>&quot;iypthon-notebook&quot;</code>"
                        },
                        {
                            "owner": {
                                "account_id": 310642,
                                "reputation": 18929,
                                "user_id": 623735,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "hobs"
                            },
                            "reply_to_user": {
                                "account_id": 50423,
                                "reputation": 631,
                                "user_id": 150404,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "juanjux"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1444427785,
                            "post_id": 24937408,
                            "comment_id": 53916407,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/24937408#comment53916407_24937408",
                            "body": "@juanjux get_ipython returns an <code>IPython.kernel.zmq.zmqshell.ZMQInteractiveShell</code> instance in ipynb (Jupyter) and an <code>IPython.terminal.interactiveshell.TerminalInteractiveShell</code> in a terminal REPL, in case you need to differentiate between notebooks and terminal/consoles (which affects plotting)."
                        },
                        {
                            "owner": {
                                "account_id": 3020597,
                                "reputation": 1367,
                                "user_id": 2561747,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "user2561747"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1473994687,
                            "post_id": 24937408,
                            "comment_id": 66361700,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/24937408#comment66361700_24937408",
                            "body": "^ therefore you can replace the inside of the <code>try</code> block with: <code>return str(type(get_ipython())) == &quot;&lt;class &#39;ipykernel.zmqshell.ZMQInteractiveShell&#39;&gt;&quot;</code>"
                        },
                        {
                            "owner": {
                                "account_id": 1891677,
                                "reputation": 148638,
                                "user_id": 1709587,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Mark Amery"
                            },
                            "reply_to_user": {
                                "account_id": 3178280,
                                "reputation": 1226,
                                "user_id": 2685624,
                                "user_type": "registered",
                                "accept_rate": 56,
                                "display_name": "Dux"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1569094600,
                            "post_id": 24937408,
                            "comment_id": 102487255,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/24937408#comment102487255_24937408",
                            "body": "Like @Dux, this doesn&#39;t work for me; it always returns false, even in a Notebook. Suspect that this answer became obsolete with the introduction of some sort of lazy config loading system."
                        },
                        {
                            "owner": {
                                "account_id": 262163,
                                "reputation": 1724,
                                "user_id": 2364215,
                                "user_type": "registered",
                                "display_name": "hlongmore"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1597286521,
                            "post_id": 24937408,
                            "comment_id": 112085063,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/24937408#comment112085063_24937408",
                            "body": "Note also that your config may come back as an empty dict, in which case you would need to add KeyError to the except block. It is probably better however to use code based on Gustavo Bezerra&#39;s answer. Even though I get an empty config, I get <code>shell=&#39;PyDevTerminalInteractiveShell&#39;</code> when inspecting the class name."
                        }
                    ],
                    "owner": {
                        "account_id": 430749,
                        "reputation": 18736,
                        "user_id": 814354,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "keflavich"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 41,
                    "last_activity_date": 1406214296,
                    "creation_date": 1406214296,
                    "answer_id": 24937408,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/24937408#24937408",
                    "body": "<p>To check if you're in a notebook, which can be important e.g. when determining what sort of progressbar to use, this worked for me:</p>\n\n<pre><code>def in_ipynb():\n    try:\n        cfg = get_ipython().config \n        if cfg['IPKernelApp']['parent_appname'] == 'ipython-notebook':\n            return True\n        else:\n            return False\n    except NameError:\n        return False\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 188419,
                                "reputation": 37503,
                                "user_id": 427158,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "maxschlepzig"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1477833464,
                            "post_id": 37661854,
                            "comment_id": 67913937,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/37661854#comment67913937_37661854",
                            "body": "Hm, I am using the Fedora 23 Jupyter, and there <code>&#39;Ipython&#39; in sys.modules</code> evaluates to <code>False</code>. Perhaps you mean <code>&#39;IPython&#39; in sys.modules</code>? This is <code>True</code> in my Jupyter environment. The <code>sys.modules</code> dictionary also doesn&#39;t include the <code>&#39;ipykernel&#39;</code> key - when running inside a notebook."
                        },
                        {
                            "owner": {
                                "account_id": 159876,
                                "reputation": 486,
                                "user_id": 379547,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "danielpcox"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1585683637,
                            "post_id": 37661854,
                            "comment_id": 107847536,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/37661854#comment107847536_37661854",
                            "body": "This is the best answer so far, IMO. Short and sweet."
                        },
                        {
                            "owner": {
                                "account_id": 1008778,
                                "reputation": 8128,
                                "user_id": 1021819,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "jtlz2"
                            },
                            "reply_to_user": {
                                "account_id": 159876,
                                "reputation": 486,
                                "user_id": 379547,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "danielpcox"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1627903684,
                            "post_id": 37661854,
                            "comment_id": 121271782,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/37661854#comment121271782_37661854",
                            "body": "@danielpcox so which of the sub-answers is the best answer?"
                        },
                        {
                            "owner": {
                                "account_id": 2242450,
                                "reputation": 4587,
                                "user_id": 1976597,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "David Gilbertson"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1672792382,
                            "post_id": 37661854,
                            "comment_id": 132352628,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/37661854#comment132352628_37661854",
                            "body": "Some packages incorrectly detect running in Jupyter, and then import <code>ipykernel</code>, which results in this logic returning a false positive (e.g. Weights and Biases package). So it will work <i>most</i> of the time, but not always."
                        }
                    ],
                    "owner": {
                        "account_id": 456284,
                        "reputation": 4360,
                        "user_id": 854988,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "deeenes"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 27,
                    "last_activity_date": 1477935148,
                    "last_edit_date": 1495540982,
                    "creation_date": 1465228568,
                    "answer_id": 37661854,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/37661854#37661854",
                    "body": "<p>Recently I encountered a <a href=\"https://github.com/fchollet/keras/pull/2860\" rel=\"noreferrer\">bug in Jupyter notebook</a> which needs a workaround, and I wanted to do this without loosing functionality in other shells. I realized that <a href=\"https://stackoverflow.com/a/24937408/854988\">keflavich's solution</a> does not work in this case, because <code>get_ipython()</code> is available only directly from the notebook, and not from imported modules. So I found a way to detect from my module whether it is imported and used from a Jupyter notebook or not:</p>\n\n<pre><code>import sys\n\ndef in_notebook():\n    \"\"\"\n    Returns ``True`` if the module is running in IPython kernel,\n    ``False`` if in IPython shell or other Python shell.\n    \"\"\"\n    return 'ipykernel' in sys.modules\n\n# later I found out this:\n\ndef ipython_info():\n    ip = False\n    if 'ipykernel' in sys.modules:\n        ip = 'notebook'\n    elif 'IPython' in sys.modules:\n        ip = 'terminal'\n    return ip\n</code></pre>\n\n<p>Comments are appreciated if this is robust enough.</p>\n\n<p>Similar way it is possible to get some info about the client, and IPython version as well:</p>\n\n<pre><code>import sys\n\nif 'ipykernel' in sys.modules:\n    ip = sys.modules['ipykernel']\n    ip_version = ip.version_info\n    ip_client = ip.write_connection_file.__module__.split('.')[0]\n\n# and this might be useful too:\n\nip_version = IPython.utils.sysinfo.get_sys_info()['ipython_version']\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 61175,
                                "reputation": 3682,
                                "user_id": 182469,
                                "user_type": "registered",
                                "display_name": "Josh Bode"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1511570020,
                            "post_id": 39662359,
                            "comment_id": 81917993,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/39662359#comment81917993_39662359",
                            "body": "On <code>jupyter console</code>, unfortunately <code>get_ipython()</code> returns an instance of <code>ZMQInteractiveShell</code> also"
                        },
                        {
                            "owner": {
                                "account_id": 6623317,
                                "reputation": 160,
                                "user_id": 5114276,
                                "user_type": "registered",
                                "display_name": "guiferviz"
                            },
                            "edited": false,
                            "score": 15,
                            "creation_date": 1542665099,
                            "post_id": 39662359,
                            "comment_id": 93642570,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/39662359#comment93642570_39662359",
                            "body": "If someone is interested in detecting whether the notebook is running on Google Colab you can check this: <code>get_ipython().__class__.__module__ == &quot;google.colab._shell&quot;</code>"
                        },
                        {
                            "owner": {
                                "account_id": 133281,
                                "reputation": 2639,
                                "user_id": 334526,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "Christopher Barber"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1551811544,
                            "post_id": 39662359,
                            "comment_id": 96774082,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/39662359#comment96774082_39662359",
                            "body": "This only works for code in the notebook. It doesn&#39;t work if the function is in an imported package."
                        },
                        {
                            "owner": {
                                "account_id": 1891677,
                                "reputation": 148638,
                                "user_id": 1709587,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Mark Amery"
                            },
                            "reply_to_user": {
                                "account_id": 133281,
                                "reputation": 2639,
                                "user_id": 334526,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "Christopher Barber"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1569094380,
                            "post_id": 39662359,
                            "comment_id": 102487198,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/39662359#comment102487198_39662359",
                            "body": "@ChristopherBarber That&#39;s not what I see. If I paste this function into a file <code>test.py</code> then run <code>from test import isnotebook; print(isnotebook())</code> in a Jupyter Notebook, it prints <code>True</code>. (Tested on Notebook server versions 5.2.1 and 6.0.1.)"
                        },
                        {
                            "owner": {
                                "account_id": 133281,
                                "reputation": 2639,
                                "user_id": 334526,
                                "user_type": "registered",
                                "accept_rate": 20,
                                "display_name": "Christopher Barber"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1595280563,
                            "post_id": 39662359,
                            "comment_id": 111415028,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/39662359#comment111415028_39662359",
                            "body": "I thought there was some case that did not work for me, but unfortunately I don&#39;t remember the details. Perhaps it is no longer a problem or perhaps I was just confused."
                        },
                        {
                            "owner": {
                                "account_id": 201262,
                                "reputation": 3727,
                                "user_id": 447599,
                                "user_type": "registered",
                                "accept_rate": 57,
                                "display_name": "Jules Gagnon-Marchand"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1665951715,
                            "post_id": 39662359,
                            "comment_id": 130814135,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/39662359#comment130814135_39662359",
                            "body": "the code of this answer is automatically generated by Github Copilot when you type the function name <code>def we_are_in_jupyter()</code> :) <a href=\"https://imgur.com/9mx9COw\" rel=\"nofollow noreferrer\">imgur.com/9mx9COw</a> You&#39;ve made it to the brain of the AI"
                        },
                        {
                            "owner": {
                                "account_id": 18019579,
                                "reputation": 735,
                                "user_id": 13097194,
                                "user_type": "registered",
                                "display_name": "KBurchfiel"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1698464369,
                            "post_id": 39662359,
                            "comment_id": 136412457,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/39662359#comment136412457_39662359",
                            "body": "In my case, I needed to determine whether my code was running within Jupyter Notebook (on VS Code) or within a .py file. I found that just running get_ipython() within a try/except block was sufficient; that function would fail when launched within a Python file but would exit successfully within a Jupyter Notebook. Not sure whether this is also the case on Linux but I can check."
                        }
                    ],
                    "owner": {
                        "account_id": 2445188,
                        "reputation": 10554,
                        "user_id": 2132753,
                        "user_type": "registered",
                        "display_name": "Gustavo Bezerra"
                    },
                    "comment_count": 7,
                    "is_accepted": false,
                    "score": 137,
                    "last_activity_date": 1673051709,
                    "last_edit_date": 1673051709,
                    "creation_date": 1474638215,
                    "answer_id": 39662359,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/39662359#39662359",
                    "body": "<p>The following worked for my needs:</p>\n<pre><code>get_ipython().__class__.__name__\n</code></pre>\n<p>It returns <code>'TerminalInteractiveShell'</code> on a terminal IPython, <code>'ZMQInteractiveShell'</code> on Jupyter (notebook AND qtconsole) and fails (<code>NameError</code>) on a regular Python interpreter. The function <code>get_ipython()</code> is available on the global namespace by default when IPython is started.</p>\n<p>Wrapping it in a simple function:</p>\n<pre><code>def is_notebook() -&gt; bool:\n    try:\n        shell = get_ipython().__class__.__name__\n        if shell == 'ZMQInteractiveShell':\n            return True   # Jupyter notebook or qtconsole\n        elif shell == 'TerminalInteractiveShell':\n            return False  # Terminal running IPython\n        else:\n            return False  # Other type (?)\n    except NameError:\n        return False      # Probably standard Python interpreter\n</code></pre>\n<p>The above was tested with Python 3.5.2, IPython 5.1.0 and Jupyter 4.2.1 on macOS 10.12 and Ubuntu 14.04.4 LTS</p>\n<p>EDIT: This still works fine in 2022 on newer Python/IPython/Jupyter/OS versions</p>\n"
                },
                {
                    "owner": {
                        "account_id": 10115440,
                        "reputation": 985,
                        "user_id": 7647113,
                        "user_type": "registered",
                        "accept_rate": 90,
                        "display_name": "user31415629"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1509706959,
                    "creation_date": 1509706959,
                    "answer_id": 47094224,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/47094224#47094224",
                    "body": "<p>I am using Django Shell Plus to launch IPython, and I wanted to make 'running in notebook' available as a Django settings value. <code>get_ipython()</code> is not available when loading settings, so I use this (which is not bulletproof, but good enough for the local development environments it's used in):</p>\n\n<pre><code>import sys\n\nif '--notebook' in sys.argv:\n    ENVIRONMENT = \"notebook\"\nelse:\n    ENVIRONMENT = \"dev\"\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3343278,
                                "reputation": 10053,
                                "user_id": 2809027,
                                "user_type": "registered",
                                "display_name": "Cecil Curry"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1620798286,
                            "post_id": 50234148,
                            "comment_id": 119303984,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/50234148#comment119303984_50234148",
                            "body": "<b>Fascinating.</b> The issue here, of course, is the non-portability. You&#39;re calling the POSIX-specific <code>ps</code> command. That&#39;s bad. Windows isn&#39;t POSIX-compatible unless you&#39;re running under the Windows Subsystem for Linux (WSL), which means this fails on the world&#39;s most popular platform. <i>Woops.</i>"
                        }
                    ],
                    "owner": {
                        "account_id": 7829102,
                        "reputation": 289,
                        "user_id": 5919817,
                        "user_type": "registered",
                        "display_name": "Yang"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1627903628,
                    "last_edit_date": 1627903628,
                    "creation_date": 1525784003,
                    "answer_id": 50234148,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/50234148#50234148",
                    "body": "<p>As far as I know, Here has 3 kinds of ipython that used <code>ipykernel</code></p>\n<ol>\n<li><code>ipython qtconsole</code> (&quot;qtipython&quot; for short)</li>\n<li>IPython in spyder (&quot;spyder&quot; for short)</li>\n<li>IPython in jupyter notebook (&quot;jn&quot; for short)</li>\n</ol>\n<p>use <code>'spyder' in sys.modules</code> can distinguish spyder</p>\n<p>but for qtipython and jn are hard to distinguish because</p>\n<p>they have same <code>sys.modules</code> and same IPython config:<code>get_ipython().config</code></p>\n<p>I find a different between qtipython and jn:</p>\n<p>first run <code>os.getpid()</code> in IPython shell to get the pid number</p>\n<p>then run <code>ps -ef|grep [pid number]</code></p>\n<p>my qtipython pid is 8699</p>\n<pre><code>yanglei   8699  8693  4 20:31 ?        00:00:01 /home/yanglei/miniconda2/envs/py3/bin/python -m ipykernel_launcher -f /run/user/1000/jupyter/kernel-8693.json\n</code></pre>\n<p>my jn pid is 8832</p>\n<pre><code>yanglei   8832  9788 13 20:32 ?        00:00:01 /home/yanglei/miniconda2/bin/python -m ipykernel_launcher -f /run/user/1000/jupyter/kernel-ccb962ec-3cd3-4008-a4b7-805a79576b1b.json\n</code></pre>\n<p>the different of qtipython and jn is the ipython's json name, jn's json name are longer than qtipython's</p>\n<p>so, we can auto-detect all Python Environment using the following code:</p>\n<pre><code>import sys,os\ndef jupyterNotebookOrQtConsole():\n    env = 'Unknow'\n    cmd = 'ps -ef'\n    try:\n        with os.popen(cmd) as stream:\n            if not py2:\n                stream = stream._stream\n            s = stream.read()\n        pid = os.getpid()\n        ls = list(filter(lambda l:'jupyter' in l and str(pid) in l.split(' '), s.split('\\n')))\n        if len(ls) == 1:\n            l = ls[0]\n            import re\n            pa = re.compile(r'kernel-([-a-z0-9]*)\\.json')\n            rs = pa.findall(l)\n            if len(rs):\n                r = rs[0]\n                if len(r)&lt;12:\n                    env = 'qtipython'\n                else :\n                    env = 'jn'\n        return env\n    except:\n        return env\n    \npyv = sys.version_info.major\npy3 = (pyv == 3)\npy2 = (pyv == 2)\nclass pyi():\n    '''\n    python info\n    \n    plt : Bool\n        mean plt avaliable\n    env :\n        belong [cmd, cmdipython, qtipython, spyder, jn]\n    '''\n    pid = os.getpid()\n    gui = 'ipykernel' in sys.modules\n    cmdipython = 'IPython' in sys.modules and not gui\n    ipython = cmdipython or gui\n    spyder = 'spyder' in sys.modules\n    if gui:\n        env = 'spyder' if spyder else jupyterNotebookOrQtConsole()\n    else:\n        env = 'cmdipython' if ipython else 'cmd'\n    \n    cmd = not ipython\n    qtipython = env == 'qtipython'\n    jn = env == 'jn'\n    \n    plt = gui or 'DISPLAY' in os.environ \n\nprint('Python Envronment is %s'%pyi.env)\n</code></pre>\n<p>The source code is here:<a href=\"https://gist.github.com/DIYer22/5cc015dcef53d62c16bdff0f8f345e96\" rel=\"nofollow noreferrer\"> Detection Python Environment, Especially distinguish Spyder, Jupyter notebook, Qtconsole.py</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 5854412,
                                "reputation": 2606,
                                "user_id": 4970632,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "Luke Davis"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1579556529,
                            "post_id": 53436734,
                            "comment_id": 105798888,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/53436734#comment105798888_53436734",
                            "body": "For me, this just shows <code>jupyter</code> whether it is a <code>jupyter console</code>, <code>jupyter qtconsole</code>, or <code>jupyter notebook</code>."
                        }
                    ],
                    "owner": {
                        "account_id": 1613222,
                        "reputation": 31,
                        "user_id": 1491619,
                        "user_type": "registered",
                        "display_name": "Bob Weigel"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1542912826,
                    "creation_date": 1542912826,
                    "answer_id": 53436734,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/53436734#53436734",
                    "body": "<p>The following captures the cases of <a href=\"https://stackoverflow.com/a/50234148/1491619\">https://stackoverflow.com/a/50234148/1491619</a> without needing to parse the output of <code>ps</code></p>\n\n<pre><code>def pythonshell():\n    \"\"\"Determine python shell\n\n    pythonshell() returns\n\n    'shell' (started python on command line using \"python\")\n    'ipython' (started ipython on command line using \"ipython\")\n    'ipython-notebook' (e.g., running in Spyder or started with \"ipython qtconsole\")\n    'jupyter-notebook' (running in a Jupyter notebook)\n\n    See also https://stackoverflow.com/a/37661854\n    \"\"\"\n\n    import os\n    env = os.environ\n    shell = 'shell'\n    program = os.path.basename(env['_'])\n\n    if 'jupyter-notebook' in program:\n        shell = 'jupyter-notebook'\n    elif 'JPY_PARENT_PID' in env or 'ipython' in program:\n        shell = 'ipython'\n        if 'JPY_PARENT_PID' in env:\n            shell = 'ipython-notebook'\n\n    return shell\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1098746,
                                "reputation": 512,
                                "user_id": 1091722,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "twink_ml"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1553119881,
                            "post_id": 54967911,
                            "comment_id": 97273030,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/54967911#comment97273030_54967911",
                            "body": "Doesn&#39;t work for me -- When I try this in Jupyter Notebook on Ubuntu with Python3, <code>get_ipython()</code> returns <code>&lt;ipykernel.zmqshell.ZMQInteractiveShell at 0x7f750ba94320&gt;</code>."
                        },
                        {
                            "owner": {
                                "account_id": 262163,
                                "reputation": 1724,
                                "user_id": 2364215,
                                "user_type": "registered",
                                "display_name": "hlongmore"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1597287178,
                            "post_id": 54967911,
                            "comment_id": 112085186,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/54967911#comment112085186_54967911",
                            "body": "The problem with this approach is that it doesn&#39;t solve the OP&#39;s question, &quot;How can I check from my Python code if it&#39;s running in the IPython <i>notebook</i>?&quot; (emphasis mine). The IPython shell is not a notebook, but when I run it in my Python Console in PyCharm, I get <code>get_ipython() is not None</code> returning <code>True</code>."
                        },
                        {
                            "owner": {
                                "account_id": 239367,
                                "reputation": 13618,
                                "user_id": 508907,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "ntg"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1603715244,
                            "post_id": 54967911,
                            "comment_id": 114114463,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/54967911#comment114114463_54967911",
                            "body": "hm, how can I detect if I am running on jupyter vs. voila?"
                        },
                        {
                            "owner": {
                                "account_id": 3343278,
                                "reputation": 10053,
                                "user_id": 2809027,
                                "user_type": "registered",
                                "display_name": "Cecil Curry"
                            },
                            "reply_to_user": {
                                "account_id": 239367,
                                "reputation": 13618,
                                "user_id": 508907,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "ntg"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1620798138,
                            "post_id": 54967911,
                            "comment_id": 119303947,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/54967911#comment119303947_54967911",
                            "body": "@ntg: That&#39;s a rather different distinction. If you&#39;d genuinely like to know, consider submitting a new StackOverflow question."
                        },
                        {
                            "owner": {
                                "account_id": 239367,
                                "reputation": 13618,
                                "user_id": 508907,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "ntg"
                            },
                            "reply_to_user": {
                                "account_id": 3343278,
                                "reputation": 10053,
                                "user_id": 2809027,
                                "user_type": "registered",
                                "display_name": "Cecil Curry"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1621845022,
                            "post_id": 54967911,
                            "comment_id": 119607732,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/54967911#comment119607732_54967911",
                            "body": "@Cecil: Ahm, makes sense, actually there seems to be <a href=\"https://stackoverflow.com/questions/64676189/is-there-a-way-to-detect-that-notebook-is-displayed-in-voila-jupyter-or-jupyter\" title=\"is there a way to detect that notebook is displayed in voila jupyter or jupyter\">stackoverflow.com/questions/64676189/&hellip;</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 71838,
                        "reputation": 66456,
                        "user_id": 207661,
                        "user_type": "registered",
                        "accept_rate": 64,
                        "display_name": "Shital Shah"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1563092078,
                    "last_edit_date": 1563092078,
                    "creation_date": 1551609198,
                    "answer_id": 54967911,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/54967911#54967911",
                    "body": "<p>I would recommend avoiding to detect specific frontend because there are <a href=\"https://github.com/markusschanta/awesome-jupyter#runtimesfrontends\" rel=\"nofollow noreferrer\">too many of them</a>. Instead you can just test if you are running from within iPython environment:</p>\n\n<pre><code>def is_running_from_ipython():\n    from IPython import get_ipython\n    return get_ipython() is not None\n</code></pre>\n\n<p>Above will return <code>False</code> if you are invoking <code>running_from_ipython</code> from usual python command line. When you invoke it from Jupyter Notebook, JupyterHub, iPython shell, Google Colab etc then it will return <code>True</code>.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 5017938,
                                "reputation": 4352,
                                "user_id": 4034025,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Janosh"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1613473853,
                            "post_id": 58102605,
                            "comment_id": 117079871,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/58102605#comment117079871_58102605",
                            "body": "Nice and simple!"
                        },
                        {
                            "owner": {
                                "account_id": 5017938,
                                "reputation": 4352,
                                "user_id": 4034025,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Janosh"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1613499370,
                            "post_id": 58102605,
                            "comment_id": 117091676,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/58102605#comment117091676_58102605",
                            "body": "You should probably <code>import builtins</code> though and check <code>hasattr(builtins, &quot;__IPYTHON__&quot;)</code>, since <a href=\"https://docs.python.org/3/library/builtins.html\" rel=\"nofollow noreferrer\"><code>__builtins__</code> is an implementation detail</a> that could change."
                        },
                        {
                            "owner": {
                                "account_id": 3679494,
                                "reputation": 8020,
                                "user_id": 3064736,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "Maximilian"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1619389290,
                            "post_id": 58102605,
                            "comment_id": 118884053,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/58102605#comment118884053_58102605",
                            "body": "Downvoted \u2014 this is also true in an IPython session"
                        },
                        {
                            "owner": {
                                "account_id": 1008778,
                                "reputation": 8128,
                                "user_id": 1021819,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "jtlz2"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1627903834,
                            "post_id": 58102605,
                            "comment_id": 121271848,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/58102605#comment121271848_58102605",
                            "body": "<code>NameError: name &#39;__IPYTHON__&#39; is not defined</code>"
                        },
                        {
                            "owner": {
                                "account_id": 3343640,
                                "reputation": 1377,
                                "user_id": 3671939,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "Carlos Pinz&#243;n"
                            },
                            "reply_to_user": {
                                "account_id": 1008778,
                                "reputation": 8128,
                                "user_id": 1021819,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "jtlz2"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1631000476,
                            "post_id": 58102605,
                            "comment_id": 122098450,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/58102605#comment122098450_58102605",
                            "body": "@jtlz2 You probably missed the quotes around the string."
                        },
                        {
                            "owner": {
                                "account_id": 256068,
                                "reputation": 4489,
                                "user_id": 536538,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "Marc Maxmeister"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1633710846,
                            "post_id": 58102605,
                            "comment_id": 122841080,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/58102605#comment122841080_58102605",
                            "body": "Been using this in all my PyPI packages since 2019 and so far, no one has complained. It is notoriously hard to test with <code>pytest</code> but I will continue using it until one of the other tricks is proven best. Seems like a great article for someone to summarize and test against all the versions of environments for the community!"
                        },
                        {
                            "owner": {
                                "account_id": 6247652,
                                "reputation": 474,
                                "user_id": 4858926,
                                "user_type": "registered",
                                "display_name": "Isa&#237;as"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1664892766,
                            "post_id": 58102605,
                            "comment_id": 130570867,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/58102605#comment130570867_58102605",
                            "body": "This works perfectly!!, and does not need the inconvinient and slow try except clauses"
                        },
                        {
                            "owner": {
                                "account_id": 2242450,
                                "reputation": 4587,
                                "user_id": 1976597,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "David Gilbertson"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1672789680,
                            "post_id": 58102605,
                            "comment_id": 132352269,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/58102605#comment132352269_58102605",
                            "body": "This is a fine test for running in IPython, but not for running in a notebook. E.g. it returns true in PyCharm Python Console when using IPython."
                        },
                        {
                            "owner": {
                                "account_id": 4915667,
                                "reputation": 427,
                                "user_id": 3959671,
                                "user_type": "registered",
                                "display_name": "tuna_fish"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1685434267,
                            "post_id": 58102605,
                            "comment_id": 134655323,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/58102605#comment134655323_58102605",
                            "body": "On Python 3.11/IPython 8.13 I found I had to use <code>import builtins</code> and <code>hasattr(builtins, &quot;__IPYTHON__&quot;)</code> for this to work; <code>__builtins__</code> returned False for IPython too."
                        }
                    ],
                    "owner": {
                        "account_id": 5720940,
                        "reputation": 265,
                        "user_id": 4519387,
                        "user_type": "registered",
                        "display_name": "Robert Nowak"
                    },
                    "comment_count": 9,
                    "is_accepted": false,
                    "score": 13,
                    "last_activity_date": 1571344444,
                    "last_edit_date": 1571344444,
                    "creation_date": 1569427972,
                    "answer_id": 58102605,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/58102605#58102605",
                    "body": "<p>Tested for python 3.7.3</p>\n\n<p>CPython implementations have the name <code>__builtins__</code> available as part of their globals which btw. can be retrieved by the function globals().<br>\nIf a script is running in an Ipython environment then <code>__IPYTHON__</code> should be an attribute of <code>__builtins__</code>.<br>\nThe code below therefore returns <code>True</code> if run under Ipython or else it gives <code>False</code></p>\n\n<pre><code>hasattr(__builtins__,'__IPYTHON__')\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3343278,
                                "reputation": 10053,
                                "user_id": 2809027,
                                "user_type": "registered",
                                "display_name": "Cecil Curry"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1620798385,
                            "post_id": 60176426,
                            "comment_id": 119304017,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/60176426#comment119304017_60176426",
                            "body": "That&#39;s a fairly generous assumption you have there."
                        }
                    ],
                    "owner": {
                        "account_id": 1415704,
                        "reputation": 606,
                        "user_id": 1341417,
                        "user_type": "registered",
                        "display_name": "Ron Sims II"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1581450925,
                    "creation_date": 1581450925,
                    "answer_id": 60176426,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/60176426#60176426",
                    "body": "<p>Assuming you have control of the Jupyter Notebook you could: </p>\n\n<ol>\n<li><p>set an environment value in a cell that uses this as a <strong>flag in your code</strong>. Place a unique comment in that cell (or all cells you want to exclude)</p>\n\n<p># exclude_from_export<br>\n    %set_env is_jupyter=1</p></li>\n<li><p>Export the notebook as a python script to be used in a different context. The export would exclude the commented cell(s) and subsequently the code that sets the environment value. Note: replace <em>your_notebook.ipynb</em> with the name of your actual notebook file.</p>\n\n<p>jupyter nbconvert --to script --RegexRemovePreprocessor.patterns=\"['^# exclude_from_export']\" your_notebook.ipynb</p></li>\n</ol>\n\n<p>This will generate a file that will not have the jupyter environment flag set allowing for code that uses it to deterministically execute.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3343278,
                                "reputation": 10053,
                                "user_id": 2809027,
                                "user_type": "registered",
                                "display_name": "Cecil Curry"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1620798030,
                            "post_id": 60284165,
                            "comment_id": 119303918,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/60284165#comment119303918_60284165",
                            "body": "Yeah, that&#39;s demonstrably horrible. The last command-line argument passed to the current Python process is <code>&quot;json&quot;</code> <b>!=</b> the current Python process is Jupyter. Those two conditions are only tangentially correlated at best.  Good luck resolving false positives with a naively brute-force detection scheme like this."
                        }
                    ],
                    "owner": {
                        "account_id": 191052,
                        "reputation": 55,
                        "user_id": 431378,
                        "user_type": "registered",
                        "display_name": "user431378"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1585245107,
                    "last_edit_date": 1585245107,
                    "creation_date": 1582039208,
                    "answer_id": 60284165,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/60284165#60284165",
                    "body": "<p>How about something like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys\n\ninJupyter = sys.argv[-1].endswith('json')\n\nprint(inJupyter);\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 5342770,
                                "reputation": 1503,
                                "user_id": 4259243,
                                "user_type": "registered",
                                "accept_rate": 65,
                                "display_name": "sh37211"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1679115844,
                            "post_id": 60289508,
                            "comment_id": 133667485,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/60289508#comment133667485_60289508",
                            "body": "Hahah i really like this approach. :-)  Bravo."
                        }
                    ],
                    "owner": {
                        "account_id": 15076738,
                        "reputation": 49,
                        "user_id": 10880632,
                        "user_type": "registered",
                        "display_name": "Julio Alves"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1582061696,
                    "last_edit_date": 1582061696,
                    "creation_date": 1582060157,
                    "answer_id": 60289508,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/60289508#60289508",
                    "body": "<p>All you have to do is to place these two cells at the beginning of your notebook:</p>\n\n<p>Cell 1: (marked as \"code\"):</p>\n\n<pre><code>is_notebook = True\n</code></pre>\n\n<p>Cell 2: (marked as \"Raw NBConvert\"):</p>\n\n<pre><code>is_notebook = False\n</code></pre>\n\n<p>The first cell will always be executed, but the second cell will only be executed when you export the notebook as a Python script.</p>\n\n<p>Later, you can check:</p>\n\n<pre><code>if is_notebook:\n    notebook_code()\nelse:\n    script_code()\n</code></pre>\n\n<p>Hope this helps.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 5501255,
                                "reputation": 184,
                                "user_id": 4370518,
                                "user_type": "registered",
                                "display_name": "Olivier OUDOT"
                            },
                            "reply_to_user": {
                                "account_id": 1008778,
                                "reputation": 8128,
                                "user_id": 1021819,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "jtlz2"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1628076288,
                            "post_id": 67622408,
                            "comment_id": 121323635,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/67622408#comment121323635_67622408",
                            "body": "Interesting. Can you give the content of your call stack please ?"
                        },
                        {
                            "owner": {
                                "account_id": 1170362,
                                "reputation": 15761,
                                "user_id": 1147688,
                                "user_type": "registered",
                                "accept_rate": 53,
                                "display_name": "not2qubit"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1661337468,
                            "post_id": 67622408,
                            "comment_id": 129746531,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/67622408#comment129746531_67622408",
                            "body": "Doesn&#39;t seem to work on Windows when using Powershell vs Jupyter. Both return false. Please explain how this is supposed to work? Output?"
                        }
                    ],
                    "owner": {
                        "account_id": 5501255,
                        "reputation": 184,
                        "user_id": 4370518,
                        "user_type": "registered",
                        "display_name": "Olivier OUDOT"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1621520948,
                    "creation_date": 1621520948,
                    "answer_id": 67622408,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/67622408#67622408",
                    "body": "<p>A very simple and efficient solution is to check if the top of the call stack refers to IPython environment, as follows:</p>\n<pre><code>import traceback\n\ndef is_in_notebook():\n    rstk = traceback.extract_stack(limit=1)[0]\n    return rstk[0].startswith(&quot;&lt;ipython&quot;)\n</code></pre>\n<p>This code works for both Python 2 and 3, on IPython or Jupyter, with no need to check, set or change the environment.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2263702,
                                "reputation": 21713,
                                "user_id": 2132157,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "G M"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1660306094,
                            "post_id": 73078764,
                            "comment_id": 129507624,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/73078764#comment129507624_73078764",
                            "body": "This will be true also if you are using the QtConsole"
                        }
                    ],
                    "owner": {
                        "account_id": 11510608,
                        "reputation": 10379,
                        "user_id": 9926721,
                        "user_type": "registered",
                        "display_name": "funnydman"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1658485272,
                    "creation_date": 1658485272,
                    "answer_id": 73078764,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/73078764#73078764",
                    "body": "<p>You can try to <code>eval('__IPYTHON__')</code>, borrowed from <a href=\"https://github.com/samuelcolvin/pydantic/blob/9d631a3429a66f30742c1a52c94ac18ec6ba848d/pydantic/utils.py#L183\" rel=\"nofollow noreferrer\">pydantic</a>:</p>\n<pre><code>def in_ipython() -&gt; bool:\n    &quot;&quot;&quot;\n    Check whether we're in an ipython environment, including jupyter notebooks.\n    &quot;&quot;&quot;\n    try:\n        eval('__IPYTHON__')\n    except NameError:\n        return False\n    else:  # pragma: no cover\n        return True\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1170362,
                                "reputation": 15761,
                                "user_id": 1147688,
                                "user_type": "registered",
                                "accept_rate": 53,
                                "display_name": "not2qubit"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1661341439,
                            "post_id": 73334083,
                            "comment_id": 129747989,
                            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/73334083#comment129747989_73334083",
                            "body": "The one-liner: <code>python.exe -c &quot;import psutil as p; T=any([i.endswith(&#39;bin&#47;jupyter-notebook&#39;) for i in p.Process().parent().cmdline()]);print(T);&quot;</code> works in powershell, but <b>not</b> running the same in Jupyter."
                        }
                    ],
                    "owner": {
                        "account_id": 2263702,
                        "reputation": 21713,
                        "user_id": 2132157,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "G M"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": -2,
                    "last_activity_date": 1676903548,
                    "last_edit_date": 1676903548,
                    "creation_date": 1660306591,
                    "answer_id": 73334083,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/73334083#73334083",
                    "body": "<h1>Check the parent process</h1>\n<p>So far the only solution that worked for me is to check the parent processes using <a href=\"https://psutil.readthedocs.io/en/latest/#install-1\" rel=\"nofollow noreferrer\">psutil</a>:</p>\n<pre><code>import psutil\ndef runninginJupyterNotebook():\n    for i in psutil.Process().parent().cmdline():\n        if &quot;jupyter-notebook&quot; in i:\n            return True\n    else:\n        return False\n</code></pre>\n<p>Or you can set a variable in one line:</p>\n<pre><code>RUNNING_IN_JUPYTER = any([&quot;jupyter-notebook&quot; in i for i in psutil.Process().parent().cmdline()])\n</code></pre>\n<p><code>RUNNING_IN_JUPYTER</code> is <code>True</code> if you are running a Jupyter Notebook.</p>\n<p>Note that it will be true also if you are running a Colab notebook.</p>\n<h2>in MacOS</h2>\n<pre><code>import psutil\ndef runninginJupyterNotebook():\n    for i in psutil.Process().parent().cmdline():\n        if &quot;jupyter-notebook&quot; in i:\n            return True\n    else:\n        return False\n</code></pre>\n<p>Or you can set a variable in one line:</p>\n<pre><code>RUNNING_IN_JUPYTER = any([i.endswith(&quot;bin/jupyter-notebook&quot;) for i in psutil.Process().parent().cmdline()])\n</code></pre>\n<h3>Comparison to the other solutions:</h3>\n<pre><code>get_ipython().__class__.__name__\n</code></pre>\n<p>All the solutions using <code>get_ipython()</code> work only if you don't care if it is running on a QtConsole.</p>\n<p>Credits: <a href=\"https://stackoverflow.com/a/65498256/2132157\">https://stackoverflow.com/a/65498256/2132157</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 10850068,
                        "reputation": 1675,
                        "user_id": 7978112,
                        "user_type": "registered",
                        "accept_rate": 67,
                        "display_name": "reservoirinvest"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1679882634,
                    "last_edit_date": 1679882634,
                    "creation_date": 1678675370,
                    "answer_id": 75717652,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/75717652#75717652",
                    "body": "<p>The following would let one know where the python code is being run... be it in Jupyter standalone, Python standalone, Spyder, VSCode or Jupyter notbeook within VSCode.</p>\n<pre class=\"lang-py prettyprint-override\"><code>import os\nimport IPython as ipy\n\n# add string sources only\nsources = str(os.environ.keys()) + \\\n          ipy.get_ipython().__class__.__name__\n\n# make pattern of unique keys\nchecks = {'SPYDER': 'Spyder', 'QTIPYTHON': 'qt IPython', 'VSCODE': \n          'VS Code', 'ZMQINTERACTIVEshell': 'Jupyter', }\n\nresults = []\nmsg = []\n\nfor k, v in checks.items():\n    u = str(k.upper())\n    if u in sources.upper():\n        results.append(checks[k])\n\nif not results:\n    msg.append(&quot;Unknown IDE&quot;)\nelse:\n    msg.append(&quot;Program working &quot;)\n    while results:\n        msg.append(f&quot;in {results.pop()}&quot;)\n        if results:\n            msg.append(' with')\n\nprint(''.join(msg))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 216624,
                        "reputation": 353,
                        "user_id": 471988,
                        "user_type": "registered",
                        "display_name": "Daniel Byrne"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1703873814,
                    "creation_date": 1703873814,
                    "answer_id": 77733427,
                    "question_id": 15411967,
                    "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook/77733427#77733427",
                    "body": "<p>This works:</p>\n<pre><code>def is_interactive():\n    try:\n        __IPYTHON__\n        return True\n    except NameError:\n        return False\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 233416,
                "reputation": 2900,
                "user_id": 498873,
                "user_type": "registered",
                "accept_rate": 58,
                "display_name": "Christoph"
            },
            "comment_count": 1,
            "is_answered": true,
            "accepted_answer_id": 15412661,
            "answer_count": 18,
            "score": 152,
            "last_activity_date": 1703873814,
            "creation_date": 1363271144,
            "question_id": 15411967,
            "link": "https://stackoverflow.com/questions/15411967/how-can-i-check-if-code-is-executed-in-the-ipython-notebook",
            "title": "How can I check if code is executed in the IPython notebook?",
            "body": "<p>I have some Python code example I'd like to share that should do something different if executed in the terminal Python / IPython or in the IPython notebook.</p>\n\n<p>How can I check from my Python code if it's running in the IPython notebook?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 9978
}