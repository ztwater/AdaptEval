{
    "items": [
        {
            "tags": [
                "python",
                "code-snippets",
                "filesize"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 19699,
                        "reputation": 55828,
                        "user_id": 46387,
                        "user_type": "registered",
                        "accept_rate": 84,
                        "display_name": "Ben Blank"
                    },
                    "edited": false,
                    "score": 2,
                    "creation_date": 1247000967,
                    "post_id": 1094841,
                    "comment_id": 909078,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size#comment909078_1094841",
                    "body": "I think this falls under the heading of &quot;too small a task to require a library&quot;.  If you look at the source for hurry.filesize, there&#39;s only a single function, with a dozen lines of code.  And even that could be compacted."
                },
                {
                    "owner": {
                        "account_id": 22422,
                        "reputation": 83464,
                        "user_id": 55246,
                        "user_type": "registered",
                        "accept_rate": 69,
                        "display_name": "Sridhar Ratnakumar"
                    },
                    "edited": false,
                    "score": 21,
                    "creation_date": 1247003340,
                    "post_id": 1094841,
                    "comment_id": 909328,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size#comment909328_1094841",
                    "body": "The advantage of using a library is that it is usually tested (contains tests that can be run in case if one&#39;s edit introduces a bug). If you add the tests, then it is not anymore &#39;dozen lines of code&#39; :-)"
                },
                {
                    "owner": {
                        "account_id": 13863832,
                        "reputation": 3334,
                        "user_id": 10008771,
                        "user_type": "registered",
                        "display_name": "Edward Aung"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1555285769,
                    "post_id": 1094841,
                    "comment_id": 98046394,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size#comment98046394_1094841",
                    "body": "The amount of re-inventing the wheel in python community is crazy and ridiculous. Just ls -h /path/to/file.ext will do the job.   Having said that, the accepted answer is doing a good job. Kudo."
                },
                {
                    "owner": {
                        "account_id": 76010,
                        "reputation": 10809,
                        "user_id": 217867,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Lonnie Best"
                    },
                    "edited": false,
                    "score": 3,
                    "creation_date": 1635134626,
                    "post_id": 1094841,
                    "comment_id": 123205178,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size#comment123205178_1094841",
                    "body": "<a href=\"http://www.lonniebest.com/DataUnitConverter/#2048B\" rel=\"nofollow noreferrer\">2048 bytes</a> = <a href=\"http://www.lonniebest.com/DataUnitConverter/#2KiB\" rel=\"nofollow noreferrer\">2 kibibytes</a> (not kilobytes)."
                },
                {
                    "owner": {
                        "account_id": 2679033,
                        "reputation": 28452,
                        "user_id": 2314737,
                        "user_type": "registered",
                        "accept_rate": 82,
                        "display_name": "user2314737"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1714159446,
                    "post_id": 1094841,
                    "comment_id": 138203855,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size#comment138203855_1094841",
                    "body": "There&#39;s an <a href=\"https://github.com/python/cpython/issues/75930\" rel=\"nofollow noreferrer\">open request</a> for this to be included in Python&#39;s standard library as this is a very common function."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 22422,
                                "reputation": 83464,
                                "user_id": 55246,
                                "user_type": "registered",
                                "accept_rate": 69,
                                "display_name": "Sridhar Ratnakumar"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1247000780,
                            "post_id": 1094845,
                            "comment_id": 909050,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094845#comment909050_1094845",
                            "body": "However, this library is not very customizable.      &gt;&gt;&gt; from hurry.filesize import size     &gt;&gt;&gt; size(1031053)     &gt;&gt;&gt; size(3033053) &#39;2M&#39;  I expect it show, for example, &#39;2.4M&#39; or &#39;2423K&#39; .. instead of the blatantly approximated &#39;2M&#39;."
                        },
                        {
                            "owner": {
                                "account_id": 25284,
                                "reputation": 17817,
                                "user_id": 64911,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "mlissner"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1319339033,
                            "post_id": 1094845,
                            "comment_id": 9593060,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094845#comment9593060_1094845",
                            "body": "Note also that it&#39;s very easy to just grab the code out of hurry.filesize and put it directly in your own code, if you&#39;re dealing with dependency systems and the like. It&#39;s about as short as the snippets people are providing here."
                        },
                        {
                            "owner": {
                                "account_id": 441885,
                                "reputation": 60711,
                                "user_id": 832230,
                                "user_type": "registered",
                                "display_name": "Asclepius"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1422491155,
                            "post_id": 1094845,
                            "comment_id": 44775737,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094845#comment44775737_1094845",
                            "body": "@SridharRatnakumar, to address the over-approximation problem somewhat intelligently, please see my mathematical <a href=\"http://pastebin.com/DNNHkpZU\" rel=\"nofollow noreferrer\"><b>hack</b></a>. Can the approach be further improved upon?"
                        }
                    ],
                    "owner": {
                        "account_id": 22422,
                        "reputation": 83464,
                        "user_id": 55246,
                        "user_type": "registered",
                        "accept_rate": 69,
                        "display_name": "Sridhar Ratnakumar"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 10,
                    "last_activity_date": 1715086639,
                    "last_edit_date": 1715086639,
                    "creation_date": 1247000425,
                    "answer_id": 1094845,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094845#1094845",
                    "body": "<p>One such library is <a href=\"http://pypi.python.org/pypi/hurry.filesize\" rel=\"nofollow noreferrer\">hurry.filesize</a>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;&gt; from hurry.filesize import alternative\n&gt;&gt;&gt; size(1, system=alternative)\n'1 byte'\n\n&gt;&gt;&gt; size(10, system=alternative)\n'10 bytes'\n\n&gt;&gt;&gt; size(1024, system=alternative)\n'1 KB'\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 32984,
                                "reputation": 4451,
                                "user_id": 91933,
                                "user_type": "registered",
                                "accept_rate": 65,
                                "display_name": "markvgti"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1391241495,
                            "post_id": 1094933,
                            "comment_id": 32448624,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment32448624_1094933",
                            "body": "I thought <code>num &#47;= 1024.0</code> style was discouraged in Python... I am surprised it&#39;s even legal..."
                        },
                        {
                            "owner": {
                                "account_id": 1615557,
                                "reputation": 4312,
                                "user_id": 1493365,
                                "user_type": "registered",
                                "accept_rate": 89,
                                "display_name": "Matt3o12"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1407269845,
                            "post_id": 1094933,
                            "comment_id": 39147223,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment39147223_1094933",
                            "body": "Isn&#39;t %3.1f kind of useless? The string will always have a length of 3 and more, right?"
                        },
                        {
                            "owner": {
                                "account_id": 411906,
                                "reputation": 6906,
                                "user_id": 784669,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "josch"
                            },
                            "edited": false,
                            "score": 10,
                            "creation_date": 1416581851,
                            "post_id": 1094933,
                            "comment_id": 42642184,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment42642184_1094933",
                            "body": "There should be a space between the number and the unit. If you are outputting html or latex it should be a non-breaking-space."
                        },
                        {
                            "owner": {
                                "account_id": 69505,
                                "reputation": 33095,
                                "user_id": 202168,
                                "user_type": "registered",
                                "accept_rate": 66,
                                "display_name": "Anentropic"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1419329753,
                            "post_id": 1094933,
                            "comment_id": 43657535,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment43657535_1094933",
                            "body": "just a thought, but for any(?) suffix other than <code>B</code> (i.e. for units other than bytes) you&#39;d want the factor to be <code>1000.0</code> rather than <code>1024.0</code> no?"
                        },
                        {
                            "owner": {
                                "account_id": 19910,
                                "reputation": 5791,
                                "user_id": 47078,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "Harvey"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1422363676,
                            "post_id": 1094933,
                            "comment_id": 44711496,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment44711496_1094933",
                            "body": "another nitpick: kilo, mega, etc. are called <a href=\"https://en.wikipedia.org/wiki/Metric_prefix\" rel=\"nofollow noreferrer\">metric prefixes</a> whereas <b>B</b>ytes is a unit."
                        },
                        {
                            "owner": {
                                "account_id": 1560212,
                                "reputation": 1090,
                                "user_id": 1450248,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Matthew G"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1431230868,
                            "post_id": 1094933,
                            "comment_id": 48403228,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment48403228_1094933",
                            "body": "If you want to increase the precision of the decimal component,change the <code>1</code> on lines 4 and 6 to whatever precision you want."
                        },
                        {
                            "owner": {
                                "account_id": 40764,
                                "reputation": 5775,
                                "user_id": 118201,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "eSniff"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1433224048,
                            "post_id": 1094933,
                            "comment_id": 49245676,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment49245676_1094933",
                            "body": "cool!  I liked it some much I converted it to Go lang : <a href=\"http://play.golang.org/p/68w_QCsE4F\" rel=\"nofollow noreferrer\">play.golang.org/p/68w_QCsE4F</a>"
                        },
                        {
                            "owner": {
                                "account_id": 89238,
                                "reputation": 881,
                                "user_id": 246330,
                                "user_type": "registered",
                                "display_name": "xOneca"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1437927872,
                            "post_id": 1094933,
                            "comment_id": 51224952,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment51224952_1094933",
                            "body": "The last <code>Yi</code> could go in the format string, so there&#39;s one less item to substitute."
                        },
                        {
                            "owner": {
                                "account_id": 138444,
                                "reputation": 1549,
                                "user_id": 343388,
                                "user_type": "registered",
                                "display_name": "fess ."
                            },
                            "edited": false,
                            "score": 75,
                            "creation_date": 1456610628,
                            "post_id": 1094933,
                            "comment_id": 59030612,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment59030612_1094933",
                            "body": "sure would be nice if all this iteration on this &quot;too small a task&quot; were captured and encapsulated into a library with tests."
                        },
                        {
                            "owner": {
                                "account_id": 506985,
                                "reputation": 5955,
                                "user_id": 1174784,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "anarcat"
                            },
                            "reply_to_user": {
                                "account_id": 138444,
                                "reputation": 1549,
                                "user_id": 343388,
                                "user_type": "registered",
                                "display_name": "fess ."
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1478791717,
                            "post_id": 1094933,
                            "comment_id": 68302428,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment68302428_1094933",
                            "body": "@fess - there are two such libraries in <a href=\"http://stackoverflow.com/a/15485265/1174784\">stackoverflow.com/a/15485265/1174784</a>. also, note that the above code has been adopted by borg backup and improved for Python3: <a href=\"https://github.com/borgbackup/borg/blob/master/src/borg/helpers.py#L745\" rel=\"nofollow noreferrer\">github.com/borgbackup/borg/blob/master/src/borg/helpers.py#L&zwnj;&#8203;745</a>"
                        },
                        {
                            "owner": {
                                "account_id": 14295,
                                "reputation": 24203,
                                "user_id": 29290,
                                "user_type": "registered",
                                "accept_rate": 73,
                                "display_name": "Jeroen Wiert Pluimers"
                            },
                            "reply_to_user": {
                                "account_id": 506985,
                                "reputation": 5955,
                                "user_id": 1174784,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "anarcat"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1539541875,
                            "post_id": 1094933,
                            "comment_id": 92530031,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment92530031_1094933",
                            "body": "@anarcat it seems moved to <a href=\"https://github.com/borgbackup/borg/blob/master/src/borg/helpers/parseformat.py#L256\" rel=\"nofollow noreferrer\">github.com/borgbackup/borg/blob/master/src/borg/helpers/&hellip;</a> now."
                        },
                        {
                            "owner": {
                                "account_id": 5106257,
                                "reputation": 599,
                                "user_id": 4098506,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Mr. Clear"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1555503691,
                            "post_id": 1094933,
                            "comment_id": 98133598,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment98133598_1094933",
                            "body": "<code>sizeof_fmt(5)</code> returns <code>5.0B</code>. There shouldn&#39;t be a precision for bytes."
                        },
                        {
                            "owner": {
                                "account_id": 1964464,
                                "reputation": 420,
                                "user_id": 3779655,
                                "user_type": "registered",
                                "display_name": "darkdragon"
                            },
                            "reply_to_user": {
                                "account_id": 506985,
                                "reputation": 5955,
                                "user_id": 1174784,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "anarcat"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1590512547,
                            "post_id": 1094933,
                            "comment_id": 109705236,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment109705236_1094933",
                            "body": "@anarcat thanks for the link. I created a <a href=\"https://github.com/borgbackup/borg/pull/5199\" rel=\"nofollow noreferrer\">PR</a> with further improvements."
                        },
                        {
                            "owner": {
                                "account_id": 12155295,
                                "reputation": 4081,
                                "user_id": 8874388,
                                "user_type": "registered",
                                "display_name": "Mitch McMabers"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1599788027,
                            "post_id": 1094933,
                            "comment_id": 112889382,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment112889382_1094933",
                            "body": "<b>It&#39;s really interesting that this and all of the other answers contain a serious bug which makes the functions break completely on certain input. I don&#39;t mean to hijack this post, but I want to help people find a working, high-performance function instead. This answer explains why the others are bugged:</b> <a href=\"https://stackoverflow.com/a/63839503/8874388\">stackoverflow.com/a/63839503/8874388</a> <b>(follow the link to see the answer)</b>"
                        },
                        {
                            "owner": {
                                "account_id": 12571088,
                                "reputation": 457,
                                "user_id": 9145163,
                                "user_type": "registered",
                                "display_name": "jemand771"
                            },
                            "reply_to_user": {
                                "account_id": 12155295,
                                "reputation": 4081,
                                "user_id": 8874388,
                                "user_type": "registered",
                                "display_name": "Mitch McMabers"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1626165673,
                            "post_id": 1094933,
                            "comment_id": 120813636,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment120813636_1094933",
                            "body": "@MitchMcMabers calm down. the function doesn&#39;t &quot;break completely&quot;, it just displays 1024. no biggie"
                        },
                        {
                            "owner": {
                                "account_id": 205210,
                                "reputation": 14218,
                                "user_id": 453851,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "Philip Couling"
                            },
                            "reply_to_user": {
                                "account_id": 12155295,
                                "reputation": 4081,
                                "user_id": 8874388,
                                "user_type": "registered",
                                "display_name": "Mitch McMabers"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1637716110,
                            "post_id": 1094933,
                            "comment_id": 123899444,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#comment123899444_1094933",
                            "body": "@MitchMcMabers actually you did mean to hijack this post.  your &quot;serious bug&quot; is a minor <i>cosmetic</i> bug at best and you could have offered a minor fix for it like so many others have.  Instead you wrote in bold text and forced people to go read your answer just to find out what the bug is. -1 just for that.  BTW the 1024 issue is easily fixed with a <code>round()</code> on line 3 of <b>this</b> answer."
                        }
                    ],
                    "owner": {
                        "account_id": 22422,
                        "reputation": 83464,
                        "user_id": 55246,
                        "user_type": "registered",
                        "accept_rate": 69,
                        "display_name": "Sridhar Ratnakumar"
                    },
                    "comment_count": 16,
                    "is_accepted": true,
                    "score": 762,
                    "last_activity_date": 1687607800,
                    "last_edit_date": 1687607800,
                    "creation_date": 1247001341,
                    "answer_id": 1094933,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094933#1094933",
                    "body": "<p>Addressing the above &quot;too small a task to require a library&quot; issue by a straightforward implementation (using f-strings, so Python 3.6+):</p>\n<pre class=\"lang-py prettyprint-override\"><code>def sizeof_fmt(num, suffix=&quot;B&quot;):\n    for unit in (&quot;&quot;, &quot;Ki&quot;, &quot;Mi&quot;, &quot;Gi&quot;, &quot;Ti&quot;, &quot;Pi&quot;, &quot;Ei&quot;, &quot;Zi&quot;):\n        if abs(num) &lt; 1024.0:\n            return f&quot;{num:3.1f}{unit}{suffix}&quot;\n        num /= 1024.0\n    return f&quot;{num:.1f}Yi{suffix}&quot;\n</code></pre>\n<p>Supports:</p>\n<ul>\n<li>all currently known <a href=\"https://en.wikipedia.org/wiki/Binary_prefix#Specific_units_of_IEC_60027-2_A.2_and_ISO.2FIEC_80000\" rel=\"noreferrer\">binary prefixes</a></li>\n<li>negative and positive numbers</li>\n<li>numbers larger than 1000 Yobibytes</li>\n<li>arbitrary units (maybe you like to count in Gibibits!)</li>\n</ul>\n<p>Example:</p>\n<pre><code>&gt;&gt;&gt; sizeof_fmt(168963795964)\n'157.4GiB'\n</code></pre>\n<p>by <a href=\"https://web.archive.org/web/20111010015624/http://blogmag.net/blog/read/38/Print_human_readable_file_size\" rel=\"noreferrer\">Fred Cirera</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 24885,
                                "reputation": 31173,
                                "user_id": 63550,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "Peter Mortensen"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1715086720,
                            "post_id": 2181538,
                            "comment_id": 138292390,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/2181538#comment138292390_2181538",
                            "body": "An explanation would be in order. E.g., what is the idea/gist? From <a href=\"https://stackoverflow.com/help/promotion\">the Help Center</a>: <i>&quot;...always explain why the solution you&#39;re presenting is appropriate and how it works&quot;</i>. A more complete answer could also include sample input and output, what version of Python it was tested with, on what system."
                        },
                        {
                            "owner": {
                                "account_id": 24885,
                                "reputation": 31173,
                                "user_id": 63550,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "Peter Mortensen"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1715086906,
                            "post_id": 2181538,
                            "comment_id": 138292423,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/2181538#comment138292423_2181538",
                            "body": "cont&#39; - Please respond by <a href=\"https://stackoverflow.com/posts/2181538/edit\">editing (changing) your answer</a>, not here in comments (*** *** *** *** *** <b><i><a href=\"https://meta.stackexchange.com/a/131011\">without</a></i></b> *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today)."
                        }
                    ],
                    "owner": {
                        "account_id": 50152,
                        "reputation": 115424,
                        "user_id": 149482,
                        "user_type": "registered",
                        "accept_rate": 79,
                        "display_name": "Matt Joiner"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1265077783,
                    "creation_date": 1265077783,
                    "answer_id": 2181538,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/2181538#2181538",
                    "body": "<pre><code>def human_readable_data_quantity(quantity, multiple=1024):\n    if quantity == 0:\n        quantity = +0\n    SUFFIXES = [\"B\"] + [i + {1000: \"B\", 1024: \"iB\"}[multiple] for i in \"KMGTPEZY\"]\n    for suffix in SUFFIXES:\n        if quantity &lt; multiple or suffix == SUFFIXES[-1]:\n            if suffix == SUFFIXES[0]:\n                return \"%d%s\" % (quantity, suffix)\n            else:\n                return \"%.1f%s\" % (quantity, suffix)\n        else:\n            quantity /= multiple\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 437199,
                        "reputation": 471,
                        "user_id": 824770,
                        "user_type": "registered",
                        "display_name": "markltbaker"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1309520416,
                    "creation_date": 1309520416,
                    "answer_id": 6547474,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/6547474#6547474",
                    "body": "<p>Riffing on the snippet provided as an alternative to hurry.filesize(), here is a snippet that gives varying precision numbers based on the prefix used. It isn't as terse as some snippets, but I like the results.</p>\n\n<pre><code>def human_size(size_bytes):\n    \"\"\"\n    format a size in bytes into a 'human' file size, e.g. bytes, KB, MB, GB, TB, PB\n    Note that bytes/KB will be reported in whole numbers but MB and above will have greater precision\n    e.g. 1 byte, 43 bytes, 443 KB, 4.3 MB, 4.43 GB, etc\n    \"\"\"\n    if size_bytes == 1:\n        # because I really hate unnecessary plurals\n        return \"1 byte\"\n\n    suffixes_table = [('bytes',0),('KB',0),('MB',1),('GB',2),('TB',2), ('PB',2)]\n\n    num = float(size_bytes)\n    for suffix, precision in suffixes_table:\n        if num &lt; 1024.0:\n            break\n        num /= 1024.0\n\n    if precision == 0:\n        formatted_size = \"%d\" % num\n    else:\n        formatted_size = str(round(num, ndigits=precision))\n\n    return \"%s %s\" % (formatted_size, suffix)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 94703,
                                "reputation": 4927,
                                "user_id": 258418,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "ted"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1346914235,
                            "post_id": 10171475,
                            "comment_id": 16493307,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/10171475#comment16493307_10171475",
                            "body": "while you talk about optimizing such a short code, why not use if/elif/else? Th last check num==1 is unnecessary unless you expect negative file sizes. Otherwise: nice work, I like this version."
                        },
                        {
                            "owner": {
                                "account_id": 107169,
                                "reputation": 2469,
                                "user_id": 285105,
                                "user_type": "registered",
                                "display_name": "joctee"
                            },
                            "reply_to_user": {
                                "account_id": 94703,
                                "reputation": 4927,
                                "user_id": 258418,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "ted"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1347120052,
                            "post_id": 10171475,
                            "comment_id": 16553143,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/10171475#comment16553143_10171475",
                            "body": "My code could surely be more optimized. However, my point was to demonstrate that this task could be solved with constant complexity."
                        },
                        {
                            "owner": {
                                "account_id": 406963,
                                "reputation": 657,
                                "user_id": 776774,
                                "user_type": "registered",
                                "display_name": "Thomas Minor"
                            },
                            "edited": false,
                            "score": 47,
                            "creation_date": 1366217636,
                            "post_id": 10171475,
                            "comment_id": 22929516,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/10171475#comment22929516_10171475",
                            "body": "The answers with for loops are also O(1), because the for loops are bounded--their computation time doesn&#39;t scale with the size of the input (we don&#39;t have unbounded SI prefixes)."
                        },
                        {
                            "owner": {
                                "account_id": 108651,
                                "reputation": 12593,
                                "user_id": 288280,
                                "user_type": "registered",
                                "accept_rate": 96,
                                "display_name": "iTayb"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1388740473,
                            "post_id": 10171475,
                            "comment_id": 31370351,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/10171475#comment31370351_10171475",
                            "body": "probably should add a comma for the formatting, so <code>1000</code> would show as <code>1,000 bytes</code>."
                        },
                        {
                            "owner": {
                                "account_id": 158516,
                                "reputation": 184,
                                "user_id": 377230,
                                "user_type": "registered",
                                "display_name": "donarb"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1519249610,
                            "post_id": 10171475,
                            "comment_id": 84838498,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/10171475#comment84838498_10171475",
                            "body": "Note that when using Python 3, zip returns an iterator, so you need to wrap it with list().  <code>unit_list = list(zip([&#39;bytes&#39;, &#39;kB&#39;, &#39;MB&#39;, &#39;GB&#39;, &#39;TB&#39;, &#39;PB&#39;], [0, 0, 1, 2, 2, 2]))</code>"
                        },
                        {
                            "owner": {
                                "account_id": 199923,
                                "reputation": 107794,
                                "user_id": 445517,
                                "user_type": "registered",
                                "accept_rate": 43,
                                "display_name": "CodesInChaos"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1528995669,
                            "post_id": 10171475,
                            "comment_id": 88727501,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/10171475#comment88727501_10171475",
                            "body": "Your code is inconsistent. It uses decimal suffixes but divides by 1024."
                        }
                    ],
                    "owner": {
                        "account_id": 107169,
                        "reputation": 2469,
                        "user_id": 285105,
                        "user_type": "registered",
                        "display_name": "joctee"
                    },
                    "comment_count": 6,
                    "is_accepted": false,
                    "score": 39,
                    "last_activity_date": 1715086825,
                    "last_edit_date": 1715086825,
                    "creation_date": 1334567804,
                    "answer_id": 10171475,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/10171475#10171475",
                    "body": "<p>Here's my version. It does not use a <em>for</em> loop. It has constant complexity, O(<em>1</em>), and is in theory more efficient than the answers here that use a <em>for</em> loop.</p>\n<pre class=\"lang-python prettyprint-override\"><code>from math import log\nunit_list = zip(['bytes', 'kB', 'MB', 'GB', 'TB', 'PB'], [0, 0, 1, 2, 2, 2])\ndef sizeof_fmt(num):\n    &quot;&quot;&quot;Human friendly file size&quot;&quot;&quot;\n    if num &gt; 1:\n        exponent = min(int(log(num, 1024)), len(unit_list) - 1)\n        quotient = float(num) / 1024**exponent\n        unit, num_decimals = unit_list[exponent]\n        format_string = '{:.%sf} {}' % (num_decimals)\n        return format_string.format(quotient, unit)\n    if num == 0:\n        return '0 bytes'\n    if num == 1:\n        return '1 byte'\n</code></pre>\n<p>To make it more clear what is going on, we can omit the code for the string formatting. Here are the lines that actually do the work:</p>\n<pre><code>exponent = int(log(num, 1024))\nquotient = num / 1024**exponent\nunit_list[exponent]\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 108194,
                        "reputation": 6340,
                        "user_id": 287297,
                        "user_type": "registered",
                        "accept_rate": 65,
                        "display_name": "xApple"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1334677674,
                    "creation_date": 1334677674,
                    "answer_id": 10194541,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/10194541#10194541",
                    "body": "<p>Drawing from all the previous answers, here is my take on it. It's an object which will store the file size in bytes as an integer. But when you try to print the object, you automatically get a human readable version.</p>\n\n<pre><code>class Filesize(object):\n    \"\"\"\n    Container for a size in bytes with a human readable representation\n    Use it like this::\n\n        &gt;&gt;&gt; size = Filesize(123123123)\n        &gt;&gt;&gt; print size\n        '117.4 MB'\n    \"\"\"\n\n    chunk = 1024\n    units = ['bytes', 'KB', 'MB', 'GB', 'TB', 'PB']\n    precisions = [0, 0, 1, 2, 2, 2]\n\n    def __init__(self, size):\n        self.size = size\n\n    def __int__(self):\n        return self.size\n\n    def __str__(self):\n        if self.size == 0: return '0 bytes'\n        from math import log\n        unit = self.units[min(int(log(self.size, self.chunk)), len(self.units) - 1)]\n        return self.format(unit)\n\n    def format(self, unit):\n        if unit not in self.units: raise Exception(\"Not a valid file size unit: %s\" % unit)\n        if self.size == 1 and unit == 'bytes': return '1 byte'\n        exponent = self.units.index(unit)\n        quotient = float(self.size) / self.chunk**exponent\n        precision = self.precisions[exponent]\n        format_string = '{:.%sf} {}' % (precision)\n        return format_string.format(quotient, unit)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 32602,
                                "reputation": 23187,
                                "user_id": 90580,
                                "user_type": "registered",
                                "accept_rate": 47,
                                "display_name": "RubenLaguna"
                            },
                            "edited": false,
                            "score": 23,
                            "creation_date": 1453889424,
                            "post_id": 15485265,
                            "comment_id": 57793518,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/15485265#comment57793518_15485265",
                            "body": "Some examples using the data from the OP: <code>humanize.naturalsize(2048) # =&gt; &#39;2.0 kB&#39;</code>  , <code>humanize.naturalsize(2048, binary=True) # =&gt; &#39;2.0 KiB&#39;</code> <code>humanize.naturalsize(2048, gnu=True) # =&gt; &#39;2.0K&#39;</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 1416821,
                        "reputation": 2122,
                        "user_id": 1342300,
                        "user_type": "registered",
                        "display_name": "Pyrocater"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 201,
                    "last_activity_date": 1715088321,
                    "last_edit_date": 1715088321,
                    "creation_date": 1363634968,
                    "answer_id": 15485265,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/15485265#15485265",
                    "body": "<p>A library that has all the functionality that it seems you're looking for is <a href=\"https://pypi.python.org/pypi/humanize\" rel=\"nofollow noreferrer\"><code>humanize</code></a>.  <code>humanize.naturalsize()</code> seems to do everything you're looking for.</p>\n<p>Example code (Python\u00a03.10)</p>\n<pre><code>import humanize\n\ndisk_sizes_list = [1, 100, 999, 1000,1024, 2000,2048, 3000, 9999, 10000, 2048000000, 9990000000, 9000000000000000000000]\nfor size in disk_sizes_list:\n    natural_size = humanize.naturalsize(size)\n    binary_size = humanize.naturalsize(size, binary=True)\n    print(f&quot; {natural_size} \\t| {binary_size}\\t|{size}&quot;)\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code> 1 Byte     | 1 Byte      |1\n 100 Bytes  | 100 Bytes   |100\n 999 Bytes  | 999 Bytes   |999\n 1.0 kB     | 1000 Bytes  |1000\n 1.0 kB     | 1.0 KiB     |1024\n 2.0 kB     | 2.0 KiB     |2000\n 2.0 kB     | 2.0 KiB     |2048\n 3.0 kB     | 2.9 KiB     |3000\n 10.0 kB    | 9.8 KiB     |9999\n 10.0 kB    | 9.8 KiB     |10000\n 2.0 GB     | 1.9 GiB     |2048000000\n 10.0 GB    | 9.3 GiB     |9990000000\n 9.0 ZB     | 7.6 ZiB     |9000000000000000000000\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 3063205,
                        "reputation": 67,
                        "user_id": 2595465,
                        "user_type": "registered",
                        "display_name": "HST"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1463508256,
                    "last_edit_date": 1495540985,
                    "creation_date": 1374262576,
                    "answer_id": 17754143,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/17754143#17754143",
                    "body": "<p>I like the fixed precision of <a href=\"https://stackoverflow.com/a/5414105/2595465\">senderle's decimal version</a>, so here's a sort of hybrid of that with joctee's answer above (did you know you could take logs with non-integer bases?):</p>\n\n<pre><code>from math import log\ndef human_readable_bytes(x):\n    # hybrid of https://stackoverflow.com/a/10171475/2595465\n    #      with https://stackoverflow.com/a/5414105/2595465\n    if x == 0: return '0'\n    magnitude = int(log(abs(x),10.24))\n    if magnitude &gt; 16:\n        format_str = '%iP'\n        denominator_mag = 15\n    else:\n        float_fmt = '%2.1f' if magnitude % 3 == 1 else '%1.2f'\n        illion = (magnitude + 1) // 3\n        format_str = float_fmt + ['', 'K', 'M', 'G', 'T', 'P'][illion]\n    return (format_str % (x * 1.0 / (1024 ** illion))).lstrip('0')\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 4345189,
                                "reputation": 9651,
                                "user_id": 3547347,
                                "user_type": "registered",
                                "accept_rate": 56,
                                "display_name": "Douglas Gaskell"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1518315713,
                            "post_id": 23773174,
                            "comment_id": 84454229,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/23773174#comment84454229_23773174",
                            "body": "<code>P.S. Never trust a library that prints thousands with the K (uppercase) suffix :)</code> Why not? The code could be perfectly sound and the author just didn&#39;t consider the casing for kilo. It seems pretty asinine to automatically dismiss any code based on your rule..."
                        }
                    ],
                    "owner": {
                        "account_id": 3813599,
                        "reputation": 1277,
                        "user_id": 3163607,
                        "user_type": "registered",
                        "display_name": "Giancarlo Sportelli"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1409302928,
                    "last_edit_date": 1409302928,
                    "creation_date": 1400640549,
                    "answer_id": 23773174,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/23773174#23773174",
                    "body": "<p>Using either powers of 1000 or <a href=\"http://en.wikipedia.org/wiki/Kibibyte\" rel=\"noreferrer\">kibibytes</a> would be more standard-friendly:</p>\n\n<pre><code>def sizeof_fmt(num, use_kibibyte=True):\n    base, suffix = [(1000.,'B'),(1024.,'iB')][use_kibibyte]\n    for x in ['B'] + map(lambda x: x+suffix, list('kMGTP')):\n        if -base &lt; num &lt; base:\n            return \"%3.1f %s\" % (num, x)\n        num /= base\n    return \"%3.1f %s\" % (num, x)\n</code></pre>\n\n<p>P.S. Never trust a library that prints thousands with the K (uppercase) suffix :)</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2048722,
                                "reputation": 809,
                                "user_id": 1828193,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Pepedou"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1559931839,
                            "post_id": 25527639,
                            "comment_id": 99588084,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/25527639#comment99588084_25527639",
                            "body": "One downside to this for me is that it uses GB instead of GiB even though it&#39;s dividing by 1024."
                        },
                        {
                            "owner": {
                                "account_id": 6694112,
                                "reputation": 2144,
                                "user_id": 5506400,
                                "user_type": "registered",
                                "display_name": "run_the_race"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1642170442,
                            "post_id": 25527639,
                            "comment_id": 125006532,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/25527639#comment125006532_25527639",
                            "body": "Never heard of GiB before, its seems silly. Does anyone every uses memory storay in real powers of 10^3 for anything useful? No-one says <code>Mebibyte</code>, we all say <code>MegaByte</code>"
                        },
                        {
                            "owner": {
                                "account_id": 7967204,
                                "reputation": 770,
                                "user_id": 6013091,
                                "user_type": "registered",
                                "display_name": "Ignat Loskutov"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1649337290,
                            "post_id": 25527639,
                            "comment_id": 126853784,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/25527639#comment126853784_25527639",
                            "body": "Yes, that&#39;s quite popular nowadays. For instance, Nautilus and Finder use SI-style prefixes."
                        },
                        {
                            "owner": {
                                "account_id": 24885,
                                "reputation": 31173,
                                "user_id": 63550,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "Peter Mortensen"
                            },
                            "reply_to_user": {
                                "account_id": 6694112,
                                "reputation": 2144,
                                "user_id": 5506400,
                                "user_type": "registered",
                                "display_name": "run_the_race"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1715088638,
                            "post_id": 25527639,
                            "comment_id": 138292755,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/25527639#comment138292755_25527639",
                            "body": "@run_the_race: It was Apple that started that craze. I don&#39;t know what the excuse was, but it has created a lot <a href=\"https://pmortensen.eu/world2/2023/03/13/arcolinux-23-02-installation-blues#Unit_confusion\" rel=\"nofollow noreferrer\">of confusion</a>."
                        }
                    ],
                    "owner": {
                        "account_id": 42844,
                        "reputation": 4820,
                        "user_id": 124974,
                        "user_type": "registered",
                        "accept_rate": 69,
                        "display_name": "Jon Tirsen"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 26,
                    "last_activity_date": 1715088438,
                    "last_edit_date": 1715088438,
                    "creation_date": 1409143648,
                    "answer_id": 25527639,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/25527639#25527639",
                    "body": "<p>If you're using Django, you can also try <a href=\"https://docs.djangoproject.com/en/dev/ref/templates/builtins/#filesizeformat\" rel=\"nofollow noreferrer\">filesizeformat</a>:</p>\n<pre><code>from django.template.defaultfilters import filesizeformat\nfilesizeformat(1073741824)\n\n=&gt;\n\n&quot;1.0 GB&quot;\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2480721,
                                "reputation": 783,
                                "user_id": 2160256,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Marti Nito"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1421338831,
                            "post_id": 25613067,
                            "comment_id": 44328719,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/25613067#comment44328719_25613067",
                            "body": "While I like the log2 thing, you should handle size == 0!"
                        },
                        {
                            "owner": {
                                "account_id": 19910,
                                "reputation": 5791,
                                "user_id": 47078,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "Harvey"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1422371939,
                            "post_id": 25613067,
                            "comment_id": 44716783,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/25613067#comment44716783_25613067",
                            "body": "You need to wrap either <code>size</code> or <code>(1 &lt;&lt; (order * 10)</code> in <code>float()</code> in the last line (for python 2)."
                        }
                    ],
                    "owner": {
                        "account_id": 135093,
                        "reputation": 9211,
                        "user_id": 337678,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "akaIDIOT"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 31,
                    "last_activity_date": 1715090164,
                    "last_edit_date": 1715090164,
                    "creation_date": 1409606628,
                    "answer_id": 25613067,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/25613067#25613067",
                    "body": "<p>I recently came up with a version that avoids loops, using <code>log2</code> to determine the size order which doubles as a shift and an index into the suffix list:</p>\n<pre><code>from math import log2\n\n_suffixes = ['bytes', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']\n\ndef file_size(size):\n    # Determine binary order in steps of size 10\n    # (coerce to int, // still returns a float)\n    order = int(log2(size) / 10) if size else 0\n\n    # Format file size\n    # (.4g results in rounded numbers for exact matches\n    # and maximum 3 decimals, and should never resort\n    # to exponent values)\n    return '{:.4g} {}'.format(size / (1 &lt;&lt; (order * 10)), _suffixes[order])\n</code></pre>\n<p>It could well be considered unpythonic for its readability, though.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 448572,
                        "reputation": 17392,
                        "user_id": 842837,
                        "user_type": "registered",
                        "accept_rate": 82,
                        "display_name": "jerrymouse"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1490264030,
                    "last_edit_date": 1492086734,
                    "creation_date": 1416778773,
                    "answer_id": 27094657,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/27094657#27094657",
                    "body": "<p>How about a simple 2 liner:</p>\n\n<pre><code>def humanizeFileSize(filesize):\n    p = int(math.floor(math.log(filesize, 2)/10))\n    return \"%.3f%s\" % (filesize/math.pow(1024,p), ['B','KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'][p])\n</code></pre>\n\n<p>Here is how it works under the hood:</p>\n\n<ol>\n<li>Calculates log<sub>2</sub>(filesize)</li>\n<li>Divides it by 10 to get the closest unit. (eg if size is 5000 bytes, the closest unit is <code>Kb</code>, so the answer should be X KiB)</li>\n<li>Returns <code>file_size/value_of_closest_unit</code> along with unit.</li>\n</ol>\n\n<p>It however doesn't work if filesize is 0 or negative (because log is undefined for 0 and -ve numbers). You can add extra checks for them:</p>\n\n<pre><code>def humanizeFileSize(filesize):\n    filesize = abs(filesize)\n    if (filesize==0):\n        return \"0 Bytes\"\n    p = int(math.floor(math.log(filesize, 2)/10))\n    return \"%0.2f %s\" % (filesize/math.pow(1024,p), ['Bytes','KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'][p])\n</code></pre>\n\n<p><strong>Examples:</strong></p>\n\n<pre><code>&gt;&gt;&gt; humanizeFileSize(538244835492574234)\n'478.06 PiB'\n&gt;&gt;&gt; humanizeFileSize(-924372537)\n'881.55 MiB'\n&gt;&gt;&gt; humanizeFileSize(0)\n'0 Bytes'\n</code></pre>\n\n<hr>\n\n<p><strong>NOTE</strong> - There is a difference between Kb and KiB. KB means 1000 bytes, whereas KiB means 1024 bytes. KB,MB,GB are all multiples of 1000, whereas KiB, MiB, GiB etc are all multiples of 1024. <a href=\"https://ux.stackexchange.com/questions/13815/files-size-units-kib-vs-kb-vs-kb\">More about it here</a> </p>\n"
                },
                {
                    "owner": {
                        "account_id": 44392,
                        "reputation": 53455,
                        "user_id": 130288,
                        "user_type": "registered",
                        "accept_rate": 64,
                        "display_name": "gojomo"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1435826684,
                    "last_edit_date": 1435826684,
                    "creation_date": 1435823610,
                    "answer_id": 31178618,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/31178618#31178618",
                    "body": "<p>This will do what you need in almost any situation, is customizable with optional arguments, and as you can see, is <em>pretty</em> much self-documenting:</p>\n\n<pre><code>from math import log\ndef pretty_size(n,pow=0,b=1024,u='B',pre=['']+[p+'i'for p in'KMGTPEZY']):\n    pow,n=min(int(log(max(n*b**pow,1),b)),len(pre)-1),n*b**pow\n    return \"%%.%if %%s%%s\"%abs(pow%(-pow-1))%(n/b**float(pow),pre[pow],u)\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>&gt;&gt;&gt; pretty_size(42)\n'42 B'\n\n&gt;&gt;&gt; pretty_size(2015)\n'2.0 KiB'\n\n&gt;&gt;&gt; pretty_size(987654321)\n'941.9 MiB'\n\n&gt;&gt;&gt; pretty_size(9876543210)\n'9.2 GiB'\n\n&gt;&gt;&gt; pretty_size(0.5,pow=1)\n'512 B'\n\n&gt;&gt;&gt; pretty_size(0)\n'0 B'\n</code></pre>\n\n<p>Advanced customizations:</p>\n\n<pre><code>&gt;&gt;&gt; pretty_size(987654321,b=1000,u='bytes',pre=['','kilo','mega','giga'])\n'987.7 megabytes'\n\n&gt;&gt;&gt; pretty_size(9876543210,b=1000,u='bytes',pre=['','kilo','mega','giga'])\n'9.9 gigabytes'\n</code></pre>\n\n<p>This code is both Python 2 and Python 3 compatible. PEP8 compliance is an exercise for the reader. Remember, it's the <em>output</em> that's pretty.</p>\n\n<p><strong>Update:</strong> </p>\n\n<p>If you need thousands commas, just apply the obvious extension:</p>\n\n<pre><code>def prettier_size(n,pow=0,b=1024,u='B',pre=['']+[p+'i'for p in'KMGTPEZY']):\n    r,f=min(int(log(max(n*b**pow,1),b)),len(pre)-1),'{:,.%if} %s%s'\n    return (f%(abs(r%(-r-1)),pre[r],u)).format(n*b**pow/b**float(r))\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; pretty_units(987654321098765432109876543210)\n'816,968.5 YiB'\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 387540,
                                "reputation": 6623,
                                "user_id": 5449364,
                                "user_type": "registered",
                                "display_name": "Javier Buzzi"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1601973518,
                            "post_id": 42317307,
                            "comment_id": 113565305,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/42317307#comment113565305_42317307",
                            "body": "<code>from django.template.defaultfilters import filesizeformat; filesizeformat(1024*400)</code> this was super useful, thank you!"
                        },
                        {
                            "owner": {
                                "account_id": 6694112,
                                "reputation": 2144,
                                "user_id": 5506400,
                                "user_type": "registered",
                                "display_name": "run_the_race"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1686844085,
                            "post_id": 42317307,
                            "comment_id": 134857023,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/42317307#comment134857023_42317307",
                            "body": "Unfortunately it formats 200*1024 as &quot;200.0 KB&quot;, why the &quot;.0&quot;??"
                        }
                    ],
                    "owner": {
                        "account_id": 1154668,
                        "reputation": 381,
                        "user_id": 2020443,
                        "user_type": "registered",
                        "display_name": "METAJIJI"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1487433184,
                    "creation_date": 1487433184,
                    "answer_id": 42317307,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/42317307#42317307",
                    "body": "<p>Modern Django have self template tag <code>filesizeformat</code>:</p>\n\n<p>Formats the value like a <code>human-readable</code> file size (i.e. '13 KB', '4.1 MB', '102 bytes', etc.).</p>\n\n<p>For example:</p>\n\n<pre><code>{{ value|filesizeformat }}\n</code></pre>\n\n<p>If value is 123456789, the output would be 117.7 MB.</p>\n\n<p>More info: <a href=\"https://docs.djangoproject.com/en/1.10/ref/templates/builtins/#filesizeformat\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/1.10/ref/templates/builtins/#filesizeformat</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1798454,
                                "reputation": 858,
                                "user_id": 1637331,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "teekkari"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1628745334,
                            "post_id": 43690506,
                            "comment_id": 121504130,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/43690506#comment121504130_43690506",
                            "body": "I like this one, but add the abs() function in the if condition for negative values."
                        }
                    ],
                    "owner": {
                        "account_id": 413135,
                        "reputation": 9137,
                        "user_id": 786593,
                        "user_type": "registered",
                        "display_name": "hostingutilities.com"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 49,
                    "last_activity_date": 1594946963,
                    "last_edit_date": 1594946963,
                    "creation_date": 1493424804,
                    "answer_id": 43690506,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/43690506#43690506",
                    "body": "<p>The following works in Python 3.6+, is, in my opinion, the easiest to understand answer on here, and lets you customize the amount of decimal places used.</p>\n<pre><code>def human_readable_size(size, decimal_places=2):\n    for unit in ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB']:\n        if size &lt; 1024.0 or unit == 'PiB':\n            break\n        size /= 1024.0\n    return f&quot;{size:.{decimal_places}f} {unit}&quot;\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 413135,
                                "reputation": 9137,
                                "user_id": 786593,
                                "user_type": "registered",
                                "display_name": "hostingutilities.com"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1493781059,
                            "post_id": 43750422,
                            "comment_id": 74543239,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/43750422#comment74543239_43750422",
                            "body": "FYI, the output will always be rounded down."
                        },
                        {
                            "owner": {
                                "account_id": 111545,
                                "reputation": 680,
                                "user_id": 294625,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Ima"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1511193727,
                            "post_id": 43750422,
                            "comment_id": 81745412,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/43750422#comment81745412_43750422",
                            "body": "wouldn&#39;t it be better to assign the default list for units inside the method to avoid using a list as a default argument? (and using <code>units=None</code> instead)"
                        },
                        {
                            "owner": {
                                "account_id": 413135,
                                "reputation": 9137,
                                "user_id": 786593,
                                "user_type": "registered",
                                "display_name": "hostingutilities.com"
                            },
                            "reply_to_user": {
                                "account_id": 111545,
                                "reputation": 680,
                                "user_id": 294625,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Ima"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1511216085,
                            "post_id": 43750422,
                            "comment_id": 81757772,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/43750422#comment81757772_43750422",
                            "body": "@ImanolEizaguirre Best practices would state that it&#39;s a good idea to do as you suggested, so you don&#39;t inadvertently introduce bugs into a program. However, this function as it is written is safe because the units list is never manipulated. If it was manipulated, the changes would be permanent, and any subsequent function calls would receive a manipulated version of the  list as the default argument for the units argument."
                        },
                        {
                            "owner": {
                                "account_id": 416187,
                                "reputation": 2954,
                                "user_id": 791430,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Omer Tuchfeld"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1563696789,
                            "post_id": 43750422,
                            "comment_id": 100779022,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/43750422#comment100779022_43750422",
                            "body": "For Python 3, if you want a decimal point, use this instead: ``` def human_size(fsize, units=[&#39; bytes&#39;,&#39;KB&#39;,&#39;MB&#39;,&#39;GB&#39;,&#39;TB&#39;, &#39;PB&#39;, &#39;EB&#39;]):     return &quot;{:.2f}{}&quot;.format(float(fsize), units[0]) if fsize &lt; 1024 else human_size(fsize / 1024, units[1:]) ```"
                        },
                        {
                            "owner": {
                                "account_id": 8620600,
                                "reputation": 413,
                                "user_id": 6455667,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Anchith Acharya"
                            },
                            "reply_to_user": {
                                "account_id": 416187,
                                "reputation": 2954,
                                "user_id": 791430,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Omer Tuchfeld"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1605782917,
                            "post_id": 43750422,
                            "comment_id": 114760254,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/43750422#comment114760254_43750422",
                            "body": "@OmerTuchfeld +1 because this way the resulting size is more accurate. Also, I&#39;m divided on whether the units should be called KiB, MiB, etc. or not."
                        },
                        {
                            "owner": {
                                "account_id": 416187,
                                "reputation": 2954,
                                "user_id": 791430,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "Omer Tuchfeld"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1605790780,
                            "post_id": 43750422,
                            "comment_id": 114763806,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/43750422#comment114763806_43750422",
                            "body": "If the constant used is 1024 then KiB, Mib, etc is the correct naming. Otherwise if the constant is 1000 then the correct naming is KB, MB, etc"
                        },
                        {
                            "owner": {
                                "account_id": 223552,
                                "reputation": 7290,
                                "user_id": 482828,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Ed Randall"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1614874094,
                            "post_id": 43750422,
                            "comment_id": 117524364,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/43750422#comment117524364_43750422",
                            "body": "avoid the gnarly ZB if...else with <code>... if bytes &lt; 1024 or len(units)==1 else human_size(...</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 413135,
                        "reputation": 9137,
                        "user_id": 786593,
                        "user_type": "registered",
                        "display_name": "hostingutilities.com"
                    },
                    "comment_count": 7,
                    "is_accepted": false,
                    "score": 46,
                    "last_activity_date": 1595071800,
                    "last_edit_date": 1595071800,
                    "creation_date": 1493780962,
                    "answer_id": 43750422,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/43750422#43750422",
                    "body": "<p>There's always got to be one of those guys. Well today it's me. Here's a one-liner -- or two lines if you count the function signature.</p>\n<pre><code>def human_size(bytes, units=[' bytes','KB','MB','GB','TB', 'PB', 'EB']):\n    &quot;&quot;&quot; Returns a human readable string representation of bytes &quot;&quot;&quot;\n    return str(bytes) + units[0] if bytes &lt; 1024 else human_size(bytes&gt;&gt;10, units[1:])\n</code></pre>\n<p>\u2003</p>\n<pre><code>&gt;&gt;&gt; human_size(123)\n123 bytes\n&gt;&gt;&gt; human_size(123456789)\n117GB\n</code></pre>\n<br/>\n<p>If you need sizes bigger than an Exabyte, it's a little bit more gnarly:</p>\n<pre><code>def human_size(bytes, units=[' bytes','KB','MB','GB','TB', 'PB', 'EB']):\n    return str(bytes) + units[0] if bytes &lt; 1024 else human_size(bytes&gt;&gt;10, units[1:]) if units[1:] else f'{bytes&gt;&gt;10}ZB'\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 11727430,
                        "reputation": 1202,
                        "user_id": 8584198,
                        "user_type": "registered",
                        "display_name": "Saeed Zahedian Abroodi"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 15,
                    "last_activity_date": 1536209794,
                    "creation_date": 1536209794,
                    "answer_id": 52196764,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/52196764#52196764",
                    "body": "<p>You should use \"humanize\".</p>\n\n<pre><code>&gt;&gt;&gt; humanize.naturalsize(1000000)\n'1.0 MB'\n&gt;&gt;&gt; humanize.naturalsize(1000000, binary=True)\n'976.6 KiB'\n&gt;&gt;&gt; humanize.naturalsize(1000000, gnu=True)\n'976.6K'\n</code></pre>\n\n<blockquote>\n  <p>Reference:</p>\n  \n  <p><a href=\"https://pypi.org/project/humanize/\" rel=\"noreferrer\">https://pypi.org/project/humanize/</a></p>\n</blockquote>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 559008,
                                "reputation": 2049,
                                "user_id": 921383,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Carles Sala"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1595005885,
                            "post_id": 53109283,
                            "comment_id": 111335680,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/53109283#comment111335680_53109283",
                            "body": "I feel that this and the humanize below are the only real answers to the OP"
                        }
                    ],
                    "owner": {
                        "account_id": 1415031,
                        "reputation": 111,
                        "user_id": 1340854,
                        "user_type": "registered",
                        "display_name": "arumuga abinesh"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1715090232,
                    "last_edit_date": 1715090232,
                    "creation_date": 1541106024,
                    "answer_id": 53109283,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/53109283#53109283",
                    "body": "<p>The HumanFriendly project helps <a href=\"https://pypi.org/project/humanfriendly/#description\" rel=\"nofollow noreferrer\">with this</a>.</p>\n<pre><code>import humanfriendly\nhumanfriendly.format_size(1024)\n</code></pre>\n<p>The above code will give 1KB as the answer.<br />\nExamples <a href=\"https://www.programcreek.com/python/example/100280/humanfriendly.format_size\" rel=\"nofollow noreferrer\">can be found here</a>.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 1771599,
                        "reputation": 13826,
                        "user_id": 1616263,
                        "user_type": "registered",
                        "display_name": "crifan"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1715090332,
                    "last_edit_date": 1715090332,
                    "creation_date": 1543629738,
                    "answer_id": 53567149,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/53567149#53567149",
                    "body": "<p>Referencing <a href=\"https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094845#1094845\">Sridhar Ratnakumar's answer</a>, updated to:</p>\n<pre><code>def formatSize(sizeInBytes, decimalNum=1, isUnitWithI=False, sizeUnitSeperator=&quot;&quot;):\n  &quot;&quot;&quot;format size to human readable string&quot;&quot;&quot;\n  # https://en.wikipedia.org/wiki/Binary_prefix#Specific_units_of_IEC_60027-2_A.2_and_ISO.2FIEC_80000\n  # K=kilo, M=mega, G=giga, T=tera, P=peta, E=exa, Z=zetta, Y=yotta\n  sizeUnitList = ['','K','M','G','T','P','E','Z']\n  largestUnit = 'Y'\n\n  if isUnitWithI:\n    sizeUnitListWithI = []\n    for curIdx, eachUnit in enumerate(sizeUnitList):\n      unitWithI = eachUnit\n      if curIdx &gt;= 1:\n        unitWithI += 'i'\n      sizeUnitListWithI.append(unitWithI)\n\n    # sizeUnitListWithI = ['','Ki','Mi','Gi','Ti','Pi','Ei','Zi']\n    sizeUnitList = sizeUnitListWithI\n\n    largestUnit += 'i'\n\n  suffix = &quot;B&quot;\n  decimalFormat = &quot;.&quot; + str(decimalNum) + &quot;f&quot; # &quot;.1f&quot;\n  finalFormat = &quot;%&quot; + decimalFormat + sizeUnitSeperator + &quot;%s%s&quot; # &quot;%.1f%s%s&quot;\n  sizeNum = sizeInBytes\n  for sizeUnit in sizeUnitList:\n      if abs(sizeNum) &lt; 1024.0:\n        return finalFormat % (sizeNum, sizeUnit, suffix)\n      sizeNum /= 1024.0\n  return finalFormat % (sizeNum, largestUnit, suffix)\n</code></pre>\n<p>and example output is:</p>\n<pre><code>def testKb():\n  kbSize = 3746\n  kbStr = formatSize(kbSize)\n  print(&quot;%s -&gt; %s&quot; % (kbSize, kbStr))\n\ndef testI():\n  iSize = 87533\n  iStr = formatSize(iSize, isUnitWithI=True)\n  print(&quot;%s -&gt; %s&quot; % (iSize, iStr))\n\ndef testSeparator():\n  seperatorSize = 98654\n  seperatorStr = formatSize(seperatorSize, sizeUnitSeperator=&quot; &quot;)\n  print(&quot;%s -&gt; %s&quot; % (seperatorSize, seperatorStr))\n\ndef testBytes():\n  bytesSize = 352\n  bytesStr = formatSize(bytesSize)\n  print(&quot;%s -&gt; %s&quot; % (bytesSize, bytesStr))\n\ndef testMb():\n  mbSize = 76383285\n  mbStr = formatSize(mbSize, decimalNum=2)\n  print(&quot;%s -&gt; %s&quot; % (mbSize, mbStr))\n\ndef testTb():\n  tbSize = 763832854988542\n  tbStr = formatSize(tbSize, decimalNum=2)\n  print(&quot;%s -&gt; %s&quot; % (tbSize, tbStr))\n\ndef testPb():\n  pbSize = 763832854988542665\n  pbStr = formatSize(pbSize, decimalNum=4)\n  print(&quot;%s -&gt; %s&quot; % (pbSize, pbStr))\n\n\ndef demoFormatSize():\n  testKb()\n  testI()\n  testSeparator()\n  testBytes()\n  testMb()\n  testTb()\n  testPb()\n\n  # 3746 -&gt; 3.7KB\n  # 87533 -&gt; 85.5KiB\n  # 98654 -&gt; 96.3 KB\n  # 352 -&gt; 352.0B\n  # 76383285 -&gt; 72.84MB\n  # 763832854988542 -&gt; 694.70TB\n  # 763832854988542665 -&gt; 678.4199PB\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 12155295,
                                "reputation": 4081,
                                "user_id": 8874388,
                                "user_type": "registered",
                                "display_name": "Mitch McMabers"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1599788932,
                            "post_id": 55680772,
                            "comment_id": 112889550,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/55680772#comment112889550_55680772",
                            "body": "That was a very good read, and it was fun to see your mathematical algorithm. Unfortunately it&#39;s slow, as you pointed out. I have previously solved this issue in a high-performance way in the following post: <a href=\"https://stackoverflow.com/a/63839503/8874388\">stackoverflow.com/a/63839503/8874388</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 6094154,
                        "reputation": 3822,
                        "user_id": 4755520,
                        "user_type": "registered",
                        "display_name": "ayorgo"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1555282621,
                    "creation_date": 1555282621,
                    "answer_id": 55680772,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/55680772#55680772",
                    "body": "<p>What you're about to find below is by no means the most performant or shortest solution among the ones already posted. Instead, it focuses on <strong>one particular issue</strong> that many of the other answers miss.</p>\n\n<p>Namely the case when input like <code>999_995</code> is given:</p>\n\n<pre><code>Python 3.6.1 ...\n...\n&gt;&gt;&gt; value = 999_995\n&gt;&gt;&gt; base = 1000\n&gt;&gt;&gt; math.log(value, base)\n1.999999276174054\n</code></pre>\n\n<p>which, being truncated to the nearest integer and applied back to the input gives</p>\n\n<pre><code>&gt;&gt;&gt; order = int(math.log(value, base))\n&gt;&gt;&gt; value/base**order\n999.995\n</code></pre>\n\n<p>This seems to be exactly what we'd expect until we're required to control <strong>output precision</strong>. And this is when things start to get a bit difficult.</p>\n\n<p>With the precision set to 2 digits we get:</p>\n\n<pre><code>&gt;&gt;&gt; round(value/base**order, 2)\n1000 # K\n</code></pre>\n\n<p>instead of <code>1M</code>.</p>\n\n<p><strong>How can we counter that?</strong></p>\n\n<p>Of course, we can check for it explicitly:</p>\n\n<pre><code>if round(value/base**order, 2) == base:\n    order += 1\n</code></pre>\n\n<p>But can we do better? Can we get to know which way the <code>order</code> should be cut before we do the final step?</p>\n\n<p><strong>It turns out we can.</strong></p>\n\n<p>Assuming 0.5 decimal rounding rule, the above <code>if</code> condition translates into:</p>\n\n<p><a href=\"https://i.stack.imgur.com/x9B5Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x9B5Q.png\" alt=\"enter image description here\"></a></p>\n\n<p>resulting in</p>\n\n<pre><code>def abbreviate(value, base=1000, precision=2, suffixes=None):\n    if suffixes is None:\n        suffixes = ['', 'K', 'M', 'B', 'T']\n\n    if value == 0:\n        return f'{0}{suffixes[0]}'\n\n    order_max = len(suffixes) - 1\n    order = log(abs(value), base)\n    order_corr = order - int(order) &gt;= log(base - 0.5/10**precision, base)\n    order = min(int(order) + order_corr, order_max)\n\n    factored = round(value/base**order, precision)\n\n    return f'{factored:,g}{suffixes[order]}'\n</code></pre>\n\n<p>giving</p>\n\n<pre><code>&gt;&gt;&gt; abbreviate(999_994)\n'999.99K'\n&gt;&gt;&gt; abbreviate(999_995)\n'1M'\n&gt;&gt;&gt; abbreviate(999_995, precision=3)\n'999.995K'\n&gt;&gt;&gt; abbreviate(2042, base=1024)\n'1.99K'\n&gt;&gt;&gt; abbreviate(2043, base=1024)\n'2K'\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 24885,
                                "reputation": 31173,
                                "user_id": 63550,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "Peter Mortensen"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1715090383,
                            "post_id": 56244718,
                            "comment_id": 138293107,
                            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/56244718#comment138293107_56244718",
                            "body": "Appeal in what way? Works in what way? Can you elaborate?"
                        }
                    ],
                    "owner": {
                        "account_id": 10839978,
                        "reputation": 813,
                        "user_id": 7971585,
                        "user_type": "registered",
                        "display_name": "Peter F"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": -2,
                    "last_activity_date": 1558464716,
                    "creation_date": 1558464716,
                    "answer_id": 56244718,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/56244718#56244718",
                    "body": "<p>This solution might also appeal to you, depending on how your mind works:</p>\n\n<pre><code>from pathlib import Path    \n\ndef get_size(path = Path('.')):\n    \"\"\" Gets file size, or total directory size \"\"\"\n    if path.is_file():\n        size = path.stat().st_size\n    elif path.is_dir():\n        size = sum(file.stat().st_size for file in path.glob('*.*'))\n    return size\n\ndef format_size(path, unit=\"MB\"):\n    \"\"\" Converts integers to common size units used in computing \"\"\"\n    bit_shift = {\"B\": 0,\n            \"kb\": 7,\n            \"KB\": 10,\n            \"mb\": 17,\n            \"MB\": 20,\n            \"gb\": 27,\n            \"GB\": 30,\n            \"TB\": 40,}\n    return \"{:,.0f}\".format(get_size(path) / float(1 &lt;&lt; bit_shift[unit])) + \" \" + unit\n\n# Tests and test results\n&gt;&gt;&gt; get_size(\"d:\\\\media\\\\bags of fun.avi\")\n'38 MB'\n&gt;&gt;&gt; get_size(\"d:\\\\media\\\\bags of fun.avi\",\"KB\")\n'38,763 KB'\n&gt;&gt;&gt; get_size(\"d:\\\\media\\\\bags of fun.avi\",\"kb\")\n'310,104 kb'\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 25114,
                        "reputation": 115357,
                        "user_id": 64313,
                        "user_type": "registered",
                        "accept_rate": 64,
                        "display_name": "cmcginty"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1603311351,
                    "creation_date": 1603311351,
                    "answer_id": 64471137,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/64471137#64471137",
                    "body": "<p>This feature if available in <a href=\"https://boltons.readthedocs.io/en/latest/strutils.html#boltons.strutils.bytes2human\" rel=\"nofollow noreferrer\">Boltons</a> which is a very handy library to have for most projects.</p>\n<pre><code>&gt;&gt;&gt; bytes2human(128991)\n'126K'\n&gt;&gt;&gt; bytes2human(100001221)\n'95M'\n&gt;&gt;&gt; bytes2human(0, 2)\n'0.00B'\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 501236,
                        "reputation": 1,
                        "user_id": 1002260,
                        "user_type": "registered",
                        "accept_rate": 96,
                        "display_name": "Zombo"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1605668265,
                    "last_edit_date": 1605668265,
                    "creation_date": 1605641455,
                    "answer_id": 64882050,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/64882050#64882050",
                    "body": "<p>Here is an option using <code>while</code>:</p>\n<pre><code>def number_format(n):\n   n2, n3 = n, 0\n   while n2 &gt;= 1e3:\n      n2 /= 1e3\n      n3 += 1\n   return '%.3f' % n2 + ('', ' k', ' M', ' G')[n3]\n\ns = number_format(9012345678)\nprint(s == '9.012 G')\n</code></pre>\n<p><a href=\"https://docs.python.org/reference/compound_stmts.html#while\" rel=\"nofollow noreferrer\">https://docs.python.org/reference/compound_stmts.html#while</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 23919401,
                        "reputation": 472,
                        "user_id": 17915481,
                        "user_type": "registered",
                        "display_name": "jak bin"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1669642003,
                    "last_edit_date": 1669642003,
                    "creation_date": 1641996456,
                    "answer_id": 70683007,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/70683007#70683007",
                    "body": "<p>To get the file size in a human readable form, I created this function:</p>\n<pre><code>import os\n\ndef get_size(path):\n    size = os.path.getsize(path)\n    if size &lt; 1024:\n        return f&quot;{size} bytes&quot;\n    elif size &lt; pow(1024,2):\n        return f&quot;{round(size/1024, 2)} KB&quot;\n    elif size &lt; pow(1024,3):\n        return f&quot;{round(size/(pow(1024,2)), 2)} MB&quot;\n    elif size &lt; pow(1024,4):\n        return f&quot;{round(size/(pow(1024,3)), 2)} GB&quot;\n</code></pre>\n<pre><code>&gt;&gt;&gt; get_size(&quot;a.txt&quot;)\n1.4KB\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 11706935,
                        "reputation": 551,
                        "user_id": 9560908,
                        "user_type": "registered",
                        "display_name": "Terry Davis"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1666046483,
                    "creation_date": 1666046483,
                    "answer_id": 74103977,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/74103977#74103977",
                    "body": "<p>Here's something I wrote for a <a href=\"https://stackoverflow.com/a/55659577/9560908\">different question</a>...</p>\n<p>Much like <a href=\"https://stackoverflow.com/users/287297/xapple\">xApple</a>'s <a href=\"https://stackoverflow.com/a/10194541/9560908\">answer</a>, this object will always print in a human-readable format. The difference is that it's also a proper <code>int</code>, so you can do math with it!\nIt passes the format specifier straight through to the number format and tacks on the suffix, so it's pretty much guaranteed that the requested length will be exceeded by two or three characters. I've never had a use for this code, so I haven't bothered to fix it!</p>\n<pre class=\"lang-py prettyprint-override\"><code>\nclass ByteSize(int):\n\n    _KB = 1024\n    _suffixes = 'B', 'KB', 'MB', 'GB', 'PB'\n\n    def __new__(cls, *args, **kwargs):\n        return super().__new__(cls, *args, **kwargs)\n\n    def __init__(self, *args, **kwargs):\n        self.bytes = self.B = int(self)\n        self.kilobytes = self.KB = self / self._KB**1\n        self.megabytes = self.MB = self / self._KB**2\n        self.gigabytes = self.GB = self / self._KB**3\n        self.petabytes = self.PB = self / self._KB**4\n        *suffixes, last = self._suffixes\n        suffix = next((\n            suffix\n            for suffix in suffixes\n            if 1 &lt; getattr(self, suffix) &lt; self._KB\n        ), last)\n        self.readable = suffix, getattr(self, suffix)\n\n        super().__init__()\n\n    def __str__(self):\n        return self.__format__('.2f')\n\n    def __repr__(self):\n        return '{}({})'.format(self.__class__.__name__, super().__repr__())\n\n    def __format__(self, format_spec):\n        suffix, val = self.readable\n        return '{val:{fmt}} {suf}'.format(val=val, fmt=format_spec, suf=suffix)\n\n    def __sub__(self, other):\n        return self.__class__(super().__sub__(other))\n\n    def __add__(self, other):\n        return self.__class__(super().__add__(other))\n    \n    def __mul__(self, other):\n        return self.__class__(super().__mul__(other))\n\n    def __rsub__(self, other):\n        return self.__class__(super().__sub__(other))\n\n    def __radd__(self, other):\n        return self.__class__(super().__add__(other))\n    \n    def __rmul__(self, other):\n        return self.__class__(super().__rmul__(other))   \n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; size = 6239397620\n&gt;&gt;&gt; print(size)\n5.81 GB\n&gt;&gt;&gt; size.GB\n5.810891855508089\n&gt;&gt;&gt; size.gigabytes\n5.810891855508089\n&gt;&gt;&gt; size.PB\n0.005674699077644618\n&gt;&gt;&gt; size.MB\n5950.353260040283\n&gt;&gt;&gt; size\nByteSize(6239397620)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 5276175,
                        "reputation": 999,
                        "user_id": 4212870,
                        "user_type": "registered",
                        "display_name": "Vin&#237;cius Queiroz"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1715090485,
                    "last_edit_date": 1715090485,
                    "creation_date": 1675134492,
                    "answer_id": 75292332,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/75292332#75292332",
                    "body": "<p>In case someone is wondering, to convert <a href=\"https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/1094845#1094845\">Sridhar Ratnakumar's answer</a> back to bytes you could do the following:</p>\n<pre><code>import math\n\ndef format_back_to_bytes(value):\n    for power, unit in enumerate([&quot;&quot;, &quot;Ki&quot;, &quot;Mi&quot;, &quot;Gi&quot;, &quot;Ti&quot;, &quot;Pi&quot;, &quot;Ei&quot;, &quot;Zi&quot;]):\n        if value[-3:-1] == unit:\n            return round(float(value[:-3])*math.pow(2, 10*power))\n</code></pre>\n<p>Usage:</p>\n<pre><code>&gt;&gt;&gt; format_back_to_bytes('212.4GiB')\n228062763418\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1688052,
                        "reputation": 346,
                        "user_id": 1550940,
                        "user_type": "registered",
                        "display_name": "lxkarthi"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1675404654,
                    "creation_date": 1675404654,
                    "answer_id": 75332100,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/75332100#75332100",
                    "body": "<p>Here is an <strong>oneliner</strong> lambda without any imports to convert to human readable filesize. Pass the value in bytes.</p>\n<pre><code>to_human = lambda v : str(v &gt;&gt; ((max(v.bit_length()-1, 0)//10)*10)) +[&quot;&quot;, &quot;K&quot;, &quot;M&quot;, &quot;G&quot;, &quot;T&quot;, &quot;P&quot;, &quot;E&quot;][max(v.bit_length()-1, 0)//10]\n&gt;&gt;&gt; to_human(1024)\n'1K'\n&gt;&gt;&gt; to_human(1024*1024*3)\n'3M'\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 18750601,
                        "reputation": 123,
                        "user_id": 13671784,
                        "user_type": "registered",
                        "display_name": "roundabout"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1697275451,
                    "creation_date": 1697275451,
                    "answer_id": 77292274,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/77292274#77292274",
                    "body": "<p>Here you have it:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def humanSize(value, decimals=2, scale=1024, units=(&quot;B&quot;, &quot;kiB&quot;, &quot;MiB&quot;, &quot;GiB&quot;, &quot;TiB&quot;, &quot;PiB&quot;, &quot;EiB&quot;, &quot;ZiB&quot;, &quot;YiB&quot;, &quot;RiB&quot;, &quot;QiB&quot;)):\n    for unit in units:\n        if value &lt; scale:\n            break\n        value /= scale\n    if int(value) == value:\n        # do not return decimals, if the value is already round\n        return int(value), unit\n    return round(value * 10**decimals) / 10**decimals, unit\n</code></pre>\n<p>Most correct format:</p>\n<pre class=\"lang-py prettyprint-override\"><code>f&quot;{humanSize(os.path.getsize(path))[0]}\\u202f{humanSize(os.path.getsize(path))[1]}&quot;\n</code></pre>\n<p>Examples:</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; humanSize(42)\n(42, 'B')\n&gt;&gt;&gt; humanSize(9137017301)\n(8.51, 'GiB')\n&gt;&gt;&gt; humanSize(4096)\n(4, 'kiB')\n&gt;&gt;&gt; humanSize(1267650600228229401496703205376)\n(1, 'QiB')\n&gt;&gt;&gt; humanSize(543864)\n(531.12, 'kiB')\n&gt;&gt;&gt; humanSize(500000000000)\n(465.66, 'GiB')\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1653200,
                        "reputation": 31,
                        "user_id": 1523367,
                        "user_type": "registered",
                        "display_name": "Odin Kroeger"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1698592823,
                    "last_edit_date": 1698592823,
                    "creation_date": 1698592363,
                    "answer_id": 77383909,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/77383909#77383909",
                    "body": "<p>Here is a class-based variant of <a href=\"https://web.archive.org/web/20111010015624/http://blogmag.net/blog/read/38/Print_human_readable_file_size\" rel=\"nofollow noreferrer\">Fred Cirera's answer</a>, for those of us who prefer strong typing:</p>\n<pre><code>class Unit(int):\n    multiplier = 1000\n    precision = 2\n    prefixes = ('', 'k')\n    unit = '?'\n\n    def __str__(self):\n        number = self\n        for prefix in self.prefixes:\n            if number &lt; self.multiplier or prefix == self.prefixes[-1]:\n                break\n            number /= float(self.multiplier)\n        if prefix:\n            return f'{number:.{self.precision}f}{prefix}{self.unit}'\n        return f'{int(number)}{self.unit}'\n\n\nclass Filesize(Unit):\n    multiplier = 1024\n    prefixes = ('', 'Ki', 'Mi', 'Gi', 'Ti', 'Pi', 'Ei', 'Zi', 'Yi')\n    unit = 'B'\n\nclass Distance(Unit):\n    unit = 'm'\n\n\n# Prints 123m\nprint(Distance(123))\n\n# Prints 123456.8km\nprint(Distance(123456789))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 29984660,
                        "reputation": 1,
                        "user_id": 22978908,
                        "user_type": "unregistered",
                        "display_name": "user22978908"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1700841635,
                    "creation_date": 1700841635,
                    "answer_id": 77544376,
                    "question_id": 1094841,
                    "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size/77544376#77544376",
                    "body": "<p>Use</p>\n<pre><code>from naturalsize import *\nnsize(500)\n</code></pre>\n<p>from the naturalsize module.</p>\n"
                }
            ],
            "owner": {
                "account_id": 22422,
                "reputation": 83464,
                "user_id": 55246,
                "user_type": "registered",
                "accept_rate": 69,
                "display_name": "Sridhar Ratnakumar"
            },
            "comment_count": 5,
            "is_answered": true,
            "accepted_answer_id": 1094933,
            "answer_count": 30,
            "score": 350,
            "last_activity_date": 1715090485,
            "creation_date": 1247000372,
            "last_edit_date": 1715086590,
            "question_id": 1094841,
            "link": "https://stackoverflow.com/questions/1094841/get-a-human-readable-version-of-a-file-size",
            "title": "Get a human-readable version of a file size",
            "body": "<p>A function to return a human-readable size from the bytes size:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;&gt; human_readable(2048)\n'2 kilobytes'\n</code></pre>\n<p>How can I do this?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 8535
}