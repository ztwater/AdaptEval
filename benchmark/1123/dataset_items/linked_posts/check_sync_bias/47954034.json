{
    "items": [
        {
            "tags": [
                "python",
                "audio",
                "tensorflow",
                "neural-network",
                "spectrogram"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 12040188,
                        "reputation": 644,
                        "user_id": 8807405,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "jdoe"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1514048416,
                    "post_id": 47954034,
                    "comment_id": 82877846,
                    "link": "https://stackoverflow.com/questions/47954034/plotting-spectrogram-in-audio-analysis#comment82877846_47954034",
                    "body": "See this python module: <a href=\"https://github.com/Uberi/speech_recognition\" rel=\"nofollow noreferrer\">Speech Recognition</a>"
                },
                {
                    "owner": {
                        "account_id": 1481103,
                        "reputation": 3199,
                        "user_id": 3043335,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Oleg Melnikov"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1514058072,
                    "post_id": 47954034,
                    "comment_id": 82880313,
                    "link": "https://stackoverflow.com/questions/47954034/plotting-spectrogram-in-audio-analysis#comment82880313_47954034",
                    "body": "@kks, has my answer helped you?"
                },
                {
                    "owner": {
                        "account_id": 12130050,
                        "reputation": 196,
                        "user_id": 8857387,
                        "user_type": "registered",
                        "display_name": "kks"
                    },
                    "reply_to_user": {
                        "account_id": 1481103,
                        "reputation": 3199,
                        "user_id": 3043335,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Oleg Melnikov"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1514293442,
                    "post_id": 47954034,
                    "comment_id": 82926643,
                    "link": "https://stackoverflow.com/questions/47954034/plotting-spectrogram-in-audio-analysis#comment82926643_47954034",
                    "body": "Yeah ... got some good resources from your answer.  @Oleg Meknikov"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 12130050,
                                "reputation": 196,
                                "user_id": 8857387,
                                "user_type": "registered",
                                "display_name": "kks"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1514127145,
                            "post_id": 47954408,
                            "comment_id": 82892317,
                            "link": "https://stackoverflow.com/questions/47954034/plotting-spectrogram-in-audio-analysis/47954408#comment82892317_47954408",
                            "body": "can you help what is returned by freqs , times and spec ?? I have seen the documentation but still confused . @Oleg Melnikov"
                        },
                        {
                            "owner": {
                                "account_id": 1481103,
                                "reputation": 3199,
                                "user_id": 3043335,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Oleg Melnikov"
                            },
                            "reply_to_user": {
                                "account_id": 12130050,
                                "reputation": 196,
                                "user_id": 8857387,
                                "user_type": "registered",
                                "display_name": "kks"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1514149141,
                            "post_id": 47954408,
                            "comment_id": 82897364,
                            "link": "https://stackoverflow.com/questions/47954034/plotting-spectrogram-in-audio-analysis/47954408#comment82897364_47954408",
                            "body": "@kks: see the additional explanation for the output :) I hope it helps."
                        },
                        {
                            "owner": {
                                "account_id": 188195,
                                "reputation": 5026,
                                "user_id": 426790,
                                "user_type": "registered",
                                "display_name": "Greg Sadetsky"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1594734637,
                            "post_id": 47954408,
                            "comment_id": 111225541,
                            "link": "https://stackoverflow.com/questions/47954034/plotting-spectrogram-in-audio-analysis/47954408#comment111225541_47954408",
                            "body": "Thank you very much! Just to add a small point that if the loaded .wav file is stereo, you will see a &quot;noverlap must be less than nperseg&quot; error, which is a red herring. You can get the first channel&#39;s audio signal by doing <code>audio = audio[:, 0]</code> and then your <code>log_specgram</code> will work great. :-) Thanks again!"
                        }
                    ],
                    "owner": {
                        "account_id": 1481103,
                        "reputation": 3199,
                        "user_id": 3043335,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Oleg Melnikov"
                    },
                    "comment_count": 3,
                    "is_accepted": true,
                    "score": 9,
                    "last_activity_date": 1514149116,
                    "last_edit_date": 1514149116,
                    "creation_date": 1514049210,
                    "answer_id": 47954408,
                    "question_id": 47954034,
                    "link": "https://stackoverflow.com/questions/47954034/plotting-spectrogram-in-audio-analysis/47954408#47954408",
                    "body": "<p>There are numerous ways to do so. The easiest is to check out the methods proposed in <a href=\"https://www.kaggle.com/c/tensorflow-speech-recognition-challenge/kernels?sortBy=votes&amp;group=everyone&amp;pageSize=20&amp;competitionId=7634\" rel=\"noreferrer\">Kernels</a> on Kaggle competition <a href=\"https://www.kaggle.com/c/tensorflow-speech-recognition-challenge\" rel=\"noreferrer\">TensorFlow Speech Recognition Challenge</a> (just sort by most voted). <a href=\"https://www.kaggle.com/alphasis/light-weight-cnn-lb-0-74\" rel=\"noreferrer\">This one</a> is particularly clear and simple and contains the following function. The input is a numeric vector of samples extracted from the wav file, the sample rate, the size of the frame in milliseconds, the step (stride or skip) size in milliseconds and a small offset.</p>\n\n<pre><code>from scipy.io import wavfile\nfrom scipy import signal\nimport numpy as np\n\nsample_rate, audio = wavfile.read(path_to_wav_file)\n\ndef log_specgram(audio, sample_rate, window_size=20,\n                 step_size=10, eps=1e-10):\n    nperseg = int(round(window_size * sample_rate / 1e3))\n    noverlap = int(round(step_size * sample_rate / 1e3))\n    freqs, times, spec = signal.spectrogram(audio,\n                                    fs=sample_rate,\n                                    window='hann',\n                                    nperseg=nperseg,\n                                    noverlap=noverlap,\n                                    detrend=False)\n    return freqs, times, np.log(spec.T.astype(np.float32) + eps)\n</code></pre>\n\n<p>Outputs are defined in the <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.spectrogram.html\" rel=\"noreferrer\">SciPy manual</a>, with an exception that the spectrogram is rescaled with a monotonic function (Log()), which depresses larger values much more than smaller values, while leaving the larger values still larger than the smaller values. This way no extreme value in spec will dominate the computation. Alternatively, one can cap the values at some quantile, but log (or even square root) are preferred. There are many other ways to normalize the heights of the spectrogram, i.e. to prevent extreme values from \"bullying\" the output :)</p>\n\n<pre><code>freq (f) : ndarray, Array of sample frequencies.\ntimes (t) : ndarray, Array of segment times.\nspec (Sxx) : ndarray, Spectrogram of x. By default, the last axis of Sxx corresponds to the segment times.\n</code></pre>\n\n<p>Alternatively, you can check the train.py and models.py code on <a href=\"https://github.com/tensorflow/tensorflow/tree/v1.4.0/tensorflow/examples/speech_commands\" rel=\"noreferrer\">github repo</a> from the <a href=\"https://www.tensorflow.org/tutorials/audio_recognition\" rel=\"noreferrer\">Tensorflow example on audio recognition</a>. </p>\n\n<p><a href=\"https://www.kaggle.com/timolee/audio-data-conversion-to-images-eda\" rel=\"noreferrer\">Here is another thread</a> that explains and gives code on building spectrograms in Python.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 5533253,
                        "reputation": 1065,
                        "user_id": 4831011,
                        "user_type": "registered",
                        "display_name": "Lasith Niroshan"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1514049277,
                    "creation_date": 1514049277,
                    "answer_id": 47954417,
                    "question_id": 47954034,
                    "link": "https://stackoverflow.com/questions/47954034/plotting-spectrogram-in-audio-analysis/47954417#47954417",
                    "body": "<p>You can use <strong>NumPy</strong>, <strong>SciPy</strong> and <strong>matplotlib</strong> packages to make spectrograms. See this following post.\n<a href=\"http://www.frank-zalkow.de/en/code-snippets/create-audio-spectrograms-with-python.html\" rel=\"nofollow noreferrer\">http://www.frank-zalkow.de/en/code-snippets/create-audio-spectrograms-with-python.html</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 8761323,
                        "reputation": 1754,
                        "user_id": 6573817,
                        "user_type": "registered",
                        "accept_rate": 67,
                        "display_name": "Saranraj Nambusubramaniyan"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1694729044,
                    "last_edit_date": 1694729044,
                    "creation_date": 1514049862,
                    "answer_id": 47954489,
                    "question_id": 47954034,
                    "link": "https://stackoverflow.com/questions/47954034/plotting-spectrogram-in-audio-analysis/47954489#47954489",
                    "body": "<p>Scipy serve this purpose.</p>\n<pre><code>import scipy\n# Read the .wav file\nsample_rate, data = scipy.io.wavfile.read('directory_path/file_name.wav')\n\n# Spectrogram of .wav file\nsample_freq, segment_time, spec_data = scipy.signal.spectrogram(data, sample_rate)  \n# Note sample_rate and sampling frequency values are same but theoretically they are different measures\n</code></pre>\n<p>Use matplot library to visualize the spectrogram</p>\n<pre><code>import matplotlib.pyplot as plt\nplt.pcolormesh(segment_time, sample_freq, spec_data )\nplt.ylabel('Frequency [Hz]')\nplt.xlabel('Time [sec]')\nplt.show()  \n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 12130050,
                "reputation": 196,
                "user_id": 8857387,
                "user_type": "registered",
                "display_name": "kks"
            },
            "comment_count": 3,
            "is_answered": true,
            "accepted_answer_id": 47954408,
            "answer_count": 3,
            "score": 5,
            "last_activity_date": 1694729044,
            "creation_date": 1514045763,
            "last_edit_date": 1514050338,
            "question_id": 47954034,
            "link": "https://stackoverflow.com/questions/47954034/plotting-spectrogram-in-audio-analysis",
            "title": "plotting spectrogram in audio analysis",
            "body": "<p>I am working on speech recognition using neural network. To do so I need to get the spectrograms of those training audio files (.wav) . How to get those spectrograms in python ?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 7888
}