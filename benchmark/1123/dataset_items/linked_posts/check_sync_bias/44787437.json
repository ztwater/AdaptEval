{
    "items": [
        {
            "tags": [
                "python",
                "numpy",
                "audio",
                "matplotlib",
                "spectrogram"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 49433,
                        "reputation": 27774,
                        "user_id": 147175,
                        "user_type": "registered",
                        "accept_rate": 93,
                        "display_name": "Scott Stensland"
                    },
                    "edited": false,
                    "score": 5,
                    "creation_date": 1498601925,
                    "post_id": 44787437,
                    "comment_id": 76562472,
                    "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3#comment76562472_44787437",
                    "body": "Audacity is an excellent audio application which can show a real time spectrogram of your input audio file ... sonic-visualiser is another essential audio tool for this purpose ... they will confirm what a proper spectrogram of your audio should look like ... to understand how to code up one I suggest you invest time understanding the notion of a fourier transform ... just slogging on some library will not give you the appreciation of transforming data from time domain to frequency domain ... have fun and welcome to SO"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3475280,
                                "reputation": 1210,
                                "user_id": 2908653,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Davidjb"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1510206581,
                            "post_id": 44800492,
                            "comment_id": 81338384,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/44800492#comment81338384_44800492",
                            "body": "for me this just showed a blank graph. I moved <code>plt.imshow(spectrogram)</code> to after <code>plt.pcolormesh(...)</code> and then it worked. Any idea why?"
                        },
                        {
                            "owner": {
                                "account_id": 3932738,
                                "reputation": 3966,
                                "user_id": 3638768,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "cgnorthcutt"
                            },
                            "edited": false,
                            "score": 17,
                            "creation_date": 1533324971,
                            "post_id": 44800492,
                            "comment_id": 90321334,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/44800492#comment90321334_44800492",
                            "body": "If you&#39;re having trouble getting this to work, try two things: (1) remove <code>plt.imshow(..)</code> and (2) Try <code>plt.pcolormesh</code> on <code>np.log(spectrogram)</code> instead."
                        },
                        {
                            "owner": {
                                "account_id": 271958,
                                "reputation": 131576,
                                "user_id": 562769,
                                "user_type": "registered",
                                "accept_rate": 61,
                                "display_name": "Martin Thoma"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1547326190,
                            "post_id": 44800492,
                            "comment_id": 95157252,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/44800492#comment95157252_44800492",
                            "body": "I get <code>ValueError: too many values to unpack (expected 2)</code> for <code>plt.pcolormesh</code>"
                        },
                        {
                            "owner": {
                                "account_id": 8556,
                                "reputation": 18343,
                                "user_id": 15485,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "Alessandro Jacopson"
                            },
                            "reply_to_user": {
                                "account_id": 271958,
                                "reputation": 131576,
                                "user_id": 562769,
                                "user_type": "registered",
                                "accept_rate": 61,
                                "display_name": "Martin Thoma"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1562513492,
                            "post_id": 44800492,
                            "comment_id": 100389221,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/44800492#comment100389221_44800492",
                            "body": "@MartinThoma did you check your <code>samples.shape</code>?"
                        },
                        {
                            "owner": {
                                "account_id": 3430095,
                                "reputation": 7264,
                                "user_id": 2874789,
                                "user_type": "registered",
                                "accept_rate": 38,
                                "display_name": "Christopher Shroba"
                            },
                            "reply_to_user": {
                                "account_id": 271958,
                                "reputation": 131576,
                                "user_id": 562769,
                                "user_type": "registered",
                                "accept_rate": 61,
                                "display_name": "Martin Thoma"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1562787000,
                            "post_id": 44800492,
                            "comment_id": 100490991,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/44800492#comment100490991_44800492",
                            "body": "@MartinThoma, I just had the same issue; my problem was that I was using a stereo wav file instead of a mono."
                        },
                        {
                            "owner": {
                                "account_id": 3433210,
                                "reputation": 4022,
                                "user_id": 2876990,
                                "user_type": "registered",
                                "accept_rate": 44,
                                "display_name": "Andi Giga"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1568931094,
                            "post_id": 44800492,
                            "comment_id": 102442377,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/44800492#comment102442377_44800492",
                            "body": "I converted the file to mono: <a href=\"https://stackoverflow.com/questions/5120555/how-can-i-convert-a-wav-from-stereo-to-mono-in-python#answer-13384150\" title=\"how can i convert a wav from stereo to mono in python%23answer 13384150\">stackoverflow.com/questions/5120555/&hellip;</a> and used the script but I basically get a very flat square with one color for a kickdrum which has many frequencies and changes over time."
                        },
                        {
                            "owner": {
                                "account_id": 8579767,
                                "reputation": 348,
                                "user_id": 12870515,
                                "user_type": "registered",
                                "display_name": "TheSprinter"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1594290265,
                            "post_id": 44800492,
                            "comment_id": 111077105,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/44800492#comment111077105_44800492",
                            "body": "@Tom Wyllie Why doesn&#39;t this work with stereo audio? I see that, for two files (mono and stereo) extracted from the same video, the arrays <code>samples</code>, <code>frequencies</code>, <code>times</code>, and <code>spectrogram</code> are equal (compared them with <code>==</code>). Well, the <code>times</code> and <code>spectrogram</code> arrays don&#39;t return just a <code>True</code> or <code>False</code> value, actually an array, but they seem equal."
                        },
                        {
                            "owner": {
                                "account_id": 2123624,
                                "reputation": 7683,
                                "user_id": 1886357,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "eric"
                            },
                            "reply_to_user": {
                                "account_id": 8579767,
                                "reputation": 348,
                                "user_id": 12870515,
                                "user_type": "registered",
                                "display_name": "TheSprinter"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1594849352,
                            "post_id": 44800492,
                            "comment_id": 111275170,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/44800492#comment111275170_44800492",
                            "body": "@TheSprinter spectrograms are only defined for 1d signals. Stereo signals are two 1d arrays, one for each mic. You need to decide which of the two channels you want to use (or combine them into mono -- there are SO threads on this). Or you could throw a party and plot both spectrograms."
                        },
                        {
                            "owner": {
                                "account_id": 8579767,
                                "reputation": 348,
                                "user_id": 12870515,
                                "user_type": "registered",
                                "display_name": "TheSprinter"
                            },
                            "reply_to_user": {
                                "account_id": 2123624,
                                "reputation": 7683,
                                "user_id": 1886357,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "eric"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1594858848,
                            "post_id": 44800492,
                            "comment_id": 111277574,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/44800492#comment111277574_44800492",
                            "body": "@eric Well, now that I read your explanation and remember how I always have to choose which channel I want to show in audio software when the file is stereo, that sounds kind of like a dumb question. Plotting both spectrograms doesn&#39;t really work in my case. I found a few threads about this, but I&#39;m not sure if using the <code>-ac 1</code> option with the <code>ffmpeg</code> command will mix them into one mono or if it will get rid of one and output the other."
                        },
                        {
                            "owner": {
                                "account_id": 10763349,
                                "reputation": 2050,
                                "user_id": 7919125,
                                "user_type": "registered",
                                "display_name": "Tom Wyllie"
                            },
                            "reply_to_user": {
                                "account_id": 8579767,
                                "reputation": 348,
                                "user_id": 12870515,
                                "user_type": "registered",
                                "display_name": "TheSprinter"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1594860007,
                            "post_id": 44800492,
                            "comment_id": 111277808,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/44800492#comment111277808_44800492",
                            "body": "@TheSprinter, @eric is right - the spectrogram of a stereo audio file would just be two spectrograms, one for each channel. In your case with audio from the same video the shape of samples will be different, the stereo one will have an extra dimension. You can use <code>-ac 1</code> which does <a href=\"https://trac.ffmpeg.org/wiki/AudioChannelManipulation\" rel=\"nofollow noreferrer\">mix the channels</a>, or something like <code>samples.mean(axis=1)</code> (note this will convert your <code>dtype</code> from <code>int32</code> to <code>float64</code> so be careful if writing the averaged array back out)."
                        }
                    ],
                    "owner": {
                        "account_id": 10763349,
                        "reputation": 2050,
                        "user_id": 7919125,
                        "user_type": "registered",
                        "display_name": "Tom Wyllie"
                    },
                    "comment_count": 10,
                    "is_accepted": true,
                    "score": 54,
                    "last_activity_date": 1706076217,
                    "last_edit_date": 1706076217,
                    "creation_date": 1498647273,
                    "answer_id": 44800492,
                    "question_id": 44787437,
                    "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/44800492#44800492",
                    "body": "<p>Use <code>scipy.signal.spectrogram</code>.</p>\n<pre><code>import matplotlib.pyplot as plt\nfrom scipy import signal\nfrom scipy.io import wavfile\n\nsample_rate, samples = wavfile.read('path-to-mono-audio-file.wav')\nfrequencies, times, spectrogram = signal.spectrogram(samples, sample_rate)\n\nplt.pcolormesh(times, frequencies, spectrogram)\nplt.imshow(spectrogram)\nplt.ylabel('Frequency [Hz]')\nplt.xlabel('Time [sec]')\nplt.show()\n</code></pre>\n<p>Be sure that your wav file is mono (single channel) and not stereo (dual channel) before trying to do this. I highly recommend reading the scipy documentation at <a href=\"https://docs.scipy.org/doc/scipy-0.19.0/reference/generated/scipy.signal.spectrogram.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/scipy-\n0.19.0/reference/generated/scipy.signal.spectrogram.html</a>.</p>\n<p>Putting <code>plt.pcolormesh</code> before <code>plt.imshow</code> seems to fix some issues, as pointed out by @Davidjb, and if unpacking error occurs, follow the steps by @cgnorthcutt below.</p>\n<p><strong>Alternate graph</strong>: Note that we log spectogram values, so that the frequency spectrum is clearer to see. Also we don't need plt.imshow call ( thanks to @cgnorthcutt )</p>\n<pre class=\"lang-py prettyprint-override\"><code>plt.pcolormesh(times, frequencies, np.log(spectrogram))\n#plt.imshow(spectrogram)\nplt.ylabel('Frequency [Hz]')\nplt.xlabel('Time [sec]')\nplt.show()\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 271958,
                                "reputation": 131576,
                                "user_id": 562769,
                                "user_type": "registered",
                                "accept_rate": 61,
                                "display_name": "Martin Thoma"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1547326904,
                            "post_id": 48127125,
                            "comment_id": 95157441,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/48127125#comment95157441_48127125",
                            "body": "Could you please add some notes how to interpret the image? What are the axes? What do the colors mean?"
                        },
                        {
                            "owner": {
                                "account_id": 11736130,
                                "reputation": 820,
                                "user_id": 8589823,
                                "user_type": "registered",
                                "display_name": "Rajan saha Raju"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1568956749,
                            "post_id": 48127125,
                            "comment_id": 102447094,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/48127125#comment102447094_48127125",
                            "body": "<code>sound_info = pylab.fromstring(frames, &#39;int16&#39;)</code> this should be replaced with <code>sound_info = pylab.frombuffer(frames, &#39;int16&#39;)</code>"
                        },
                        {
                            "owner": {
                                "account_id": 2123624,
                                "reputation": 7683,
                                "user_id": 1886357,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "eric"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1594848009,
                            "post_id": 48127125,
                            "comment_id": 111274680,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/48127125#comment111274680_48127125",
                            "body": "Would redo without pylab b/c pylab is evil"
                        },
                        {
                            "owner": {
                                "account_id": 1413892,
                                "reputation": 2093,
                                "user_id": 1339950,
                                "user_type": "registered",
                                "accept_rate": 84,
                                "display_name": "philologon"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1633143686,
                            "post_id": 48127125,
                            "comment_id": 122688702,
                            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/48127125#comment122688702_48127125",
                            "body": "The pylab approach (this) worked for me. The scipy approach of a different answer looked odd."
                        }
                    ],
                    "owner": {
                        "account_id": 9627977,
                        "reputation": 384,
                        "user_id": 7146967,
                        "user_type": "registered",
                        "display_name": "Mudit Verma"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 13,
                    "last_activity_date": 1560316662,
                    "last_edit_date": 1560316662,
                    "creation_date": 1515239897,
                    "answer_id": 48127125,
                    "question_id": 44787437,
                    "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/48127125#48127125",
                    "body": "<pre><code>import os\nimport wave\n\nimport pylab\ndef graph_spectrogram(wav_file):\n    sound_info, frame_rate = get_wav_info(wav_file)\n    pylab.figure(num=None, figsize=(19, 12))\n    pylab.subplot(111)\n    pylab.title('spectrogram of %r' % wav_file)\n    pylab.specgram(sound_info, Fs=frame_rate)\n    pylab.savefig('spectrogram.png')\ndef get_wav_info(wav_file):\n    wav = wave.open(wav_file, 'r')\n    frames = wav.readframes(-1)\n    sound_info = pylab.fromstring(frames, 'int16')\n    frame_rate = wav.getframerate()\n    wav.close()\n    return sound_info, frame_rate\n</code></pre>\n\n<p>for <a href=\"https://www.youtube.com/watch?v=2rjbtsX7twc\" rel=\"noreferrer\">A Capella Science - Bohemian Gravity!</a> this gives:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cesPo.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/cesPo.png\" alt=\"enter image description here\"></a></p>\n\n<p>Use <code>graph_spectrogram(path_to_your_wav_file)</code>.\nI don't remember the blog from where I took this snippet. I will add the link whenever I see it again.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 10077159,
                        "reputation": 1212,
                        "user_id": 7448860,
                        "user_type": "registered",
                        "accept_rate": 65,
                        "display_name": "Beginner"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 15,
                    "last_activity_date": 1520442104,
                    "creation_date": 1520442104,
                    "answer_id": 49157454,
                    "question_id": 44787437,
                    "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/49157454#49157454",
                    "body": "<p>I have fixed the errors you are facing for <a href=\"http://www.frank-zalkow.de/en/code-snippets/create-audio-spectrograms-with-python.html\" rel=\"noreferrer\">http://www.frank-zalkow.de/en/code-snippets/create-audio-spectrograms-with-python.html</a> <br>\nThis implementation is better because you can change the <code>binsize</code> (e.g. <code>binsize=2**8</code>)</p>\n\n<pre><code>import numpy as np\nfrom matplotlib import pyplot as plt\nimport scipy.io.wavfile as wav\nfrom numpy.lib import stride_tricks\n\n\"\"\" short time fourier transform of audio signal \"\"\"\ndef stft(sig, frameSize, overlapFac=0.5, window=np.hanning):\n    win = window(frameSize)\n    hopSize = int(frameSize - np.floor(overlapFac * frameSize))\n\n    # zeros at beginning (thus center of 1st window should be for sample nr. 0)   \n    samples = np.append(np.zeros(int(np.floor(frameSize/2.0))), sig)    \n    # cols for windowing\n    cols = np.ceil( (len(samples) - frameSize) / float(hopSize)) + 1\n    # zeros at end (thus samples can be fully covered by frames)\n    samples = np.append(samples, np.zeros(frameSize))\n\n    frames = stride_tricks.as_strided(samples, shape=(int(cols), frameSize), strides=(samples.strides[0]*hopSize, samples.strides[0])).copy()\n    frames *= win\n\n    return np.fft.rfft(frames)    \n\n\"\"\" scale frequency axis logarithmically \"\"\"    \ndef logscale_spec(spec, sr=44100, factor=20.):\n    timebins, freqbins = np.shape(spec)\n\n    scale = np.linspace(0, 1, freqbins) ** factor\n    scale *= (freqbins-1)/max(scale)\n    scale = np.unique(np.round(scale))\n\n    # create spectrogram with new freq bins\n    newspec = np.complex128(np.zeros([timebins, len(scale)]))\n    for i in range(0, len(scale)):        \n        if i == len(scale)-1:\n            newspec[:,i] = np.sum(spec[:,int(scale[i]):], axis=1)\n        else:        \n            newspec[:,i] = np.sum(spec[:,int(scale[i]):int(scale[i+1])], axis=1)\n\n    # list center freq of bins\n    allfreqs = np.abs(np.fft.fftfreq(freqbins*2, 1./sr)[:freqbins+1])\n    freqs = []\n    for i in range(0, len(scale)):\n        if i == len(scale)-1:\n            freqs += [np.mean(allfreqs[int(scale[i]):])]\n        else:\n            freqs += [np.mean(allfreqs[int(scale[i]):int(scale[i+1])])]\n\n    return newspec, freqs\n\n\"\"\" plot spectrogram\"\"\"\ndef plotstft(audiopath, binsize=2**10, plotpath=None, colormap=\"jet\"):\n    samplerate, samples = wav.read(audiopath)\n\n    s = stft(samples, binsize)\n\n    sshow, freq = logscale_spec(s, factor=1.0, sr=samplerate)\n\n    ims = 20.*np.log10(np.abs(sshow)/10e-6) # amplitude to decibel\n\n    timebins, freqbins = np.shape(ims)\n\n    print(\"timebins: \", timebins)\n    print(\"freqbins: \", freqbins)\n\n    plt.figure(figsize=(15, 7.5))\n    plt.imshow(np.transpose(ims), origin=\"lower\", aspect=\"auto\", cmap=colormap, interpolation=\"none\")\n    plt.colorbar()\n\n    plt.xlabel(\"time (s)\")\n    plt.ylabel(\"frequency (hz)\")\n    plt.xlim([0, timebins-1])\n    plt.ylim([0, freqbins])\n\n    xlocs = np.float32(np.linspace(0, timebins-1, 5))\n    plt.xticks(xlocs, [\"%.02f\" % l for l in ((xlocs*len(samples)/timebins)+(0.5*binsize))/samplerate])\n    ylocs = np.int16(np.round(np.linspace(0, freqbins-1, 10)))\n    plt.yticks(ylocs, [\"%.02f\" % freq[i] for i in ylocs])\n\n    if plotpath:\n        plt.savefig(plotpath, bbox_inches=\"tight\")\n    else:\n        plt.show()\n\n    plt.clf()\n\n    return ims\n\nims = plotstft(filepath)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 14644240,
                        "reputation": 375,
                        "user_id": 10576072,
                        "user_type": "registered",
                        "display_name": "Saif Ul Islam"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1626937947,
                    "last_edit_date": 1626937947,
                    "creation_date": 1598369034,
                    "answer_id": 63582115,
                    "question_id": 44787437,
                    "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/63582115#63582115",
                    "body": "<p>You can use <code>librosa</code> for your mp3 spectogram needs. Here is some code I found, thanks to <a href=\"https://towardsdatascience.com/music-genre-classification-with-python-c714d032f0d8\" rel=\"nofollow noreferrer\">Parul Pandey from medium</a>. The code I used is this,</p>\n<pre class=\"lang-py prettyprint-override\"><code># Method described here https://stackoverflow.com/questions/15311853/plot-spectogram-from-mp3\n\nimport librosa\nimport librosa.display\nfrom pydub import AudioSegment\nimport matplotlib.pyplot as plt\nfrom scipy.io import wavfile\nfrom tempfile import mktemp\n\ndef plot_mp3_matplot(filename):\n    &quot;&quot;&quot;\n    plot_mp3_matplot -- using matplotlib to simply plot time vs amplitude waveplot\n    \n    Arguments:\n    filename -- filepath to the file that you want to see the waveplot for\n    \n    Returns -- None\n    &quot;&quot;&quot;\n    \n    # sr is for 'sampling rate'\n    # Feel free to adjust it\n    x, sr = librosa.load(filename, sr=44100)\n    plt.figure(figsize=(14, 5))\n    librosa.display.waveplot(x, sr=sr)\n\ndef convert_audio_to_spectogram(filename):\n    &quot;&quot;&quot;\n    convert_audio_to_spectogram -- using librosa to simply plot a spectogram\n    \n    Arguments:\n    filename -- filepath to the file that you want to see the waveplot for\n    \n    Returns -- None\n    &quot;&quot;&quot;\n    \n    # sr == sampling rate \n    x, sr = librosa.load(filename, sr=44100)\n    \n    # stft is short time fourier transform\n    X = librosa.stft(x)\n    \n    # convert the slices to amplitude\n    Xdb = librosa.amplitude_to_db(abs(X))\n    \n    # ... and plot, magic!\n    plt.figure(figsize=(14, 5))\n    librosa.display.specshow(Xdb, sr = sr, x_axis = 'time', y_axis = 'hz')\n    plt.colorbar()\n    \n# same as above, just changed the y_axis from hz to log in the display func    \ndef convert_audio_to_spectogram_log(filename):\n    x, sr = librosa.load(filename, sr=44100)\n    X = librosa.stft(x)\n    Xdb = librosa.amplitude_to_db(abs(X))\n    plt.figure(figsize=(14, 5))\n    librosa.display.specshow(Xdb, sr = sr, x_axis = 'time', y_axis = 'log')\n    plt.colorbar()    \n</code></pre>\n<p>Cheers!</p>\n"
                },
                {
                    "owner": {
                        "account_id": 3213288,
                        "reputation": 43,
                        "user_id": 2712749,
                        "user_type": "registered",
                        "display_name": "tmbouman"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1615757216,
                    "creation_date": 1615757216,
                    "answer_id": 66629743,
                    "question_id": 44787437,
                    "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3/66629743#66629743",
                    "body": "<p>Beginner's answer above is excellent. I dont have 50 rep so I can't comment on it, but if you want the correct amplitude in the frequency domain the stft function should look like this:</p>\n<pre><code>import numpy as np\nfrom matplotlib import pyplot as plt\nimport scipy.io.wavfile as wav\nfrom numpy.lib import stride_tricks\n\n&quot;&quot;&quot; short time fourier transform of audio signal &quot;&quot;&quot;\ndef stft(sig, frameSize, overlapFac=0, window=np.hanning):\n    win = window(frameSize)\n    hopSize = int(frameSize - np.floor(overlapFac * frameSize))\n\n    # zeros at beginning (thus center of 1st window should be for sample nr. 0)   \n    samples = np.append(np.zeros(int(np.floor(frameSize/2.0))), sig)    \n    # cols for windowing\n    cols = np.ceil( (len(samples) - frameSize) / float(hopSize)) + 1\n    # zeros at end (thus samples can be fully covered by frames)\n    samples = np.append(samples, np.zeros(frameSize))\n\n    frames = stride_tricks.as_strided(samples, shape=(int(cols), frameSize), strides=(samples.strides[0]*hopSize, samples.strides[0])).copy()\n    frames *= win\n    \n    fftResults = np.fft.rfft(frames)\n    windowCorrection = 1/(np.sum(np.hanning(frameSize))/frameSize) #This is amplitude correct (1/mean(window)). Energy correction is 1/rms(window)\n    FFTcorrection = 2/frameSize\n    scaledFftResults = fftResults*windowCorrection*FFTcorrection\n\n    return scaledFftResults\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 9638572,
                "reputation": 969,
                "user_id": 7153699,
                "user_type": "registered",
                "accept_rate": 100,
                "display_name": "Sreehari R"
            },
            "comment_count": 1,
            "is_answered": true,
            "accepted_answer_id": 44800492,
            "answer_count": 5,
            "score": 33,
            "last_activity_date": 1706076217,
            "creation_date": 1498588202,
            "last_edit_date": 1498776941,
            "question_id": 44787437,
            "link": "https://stackoverflow.com/questions/44787437/how-to-convert-a-wav-file-to-a-spectrogram-in-python3",
            "title": "How to convert a .wav file to a spectrogram in python3",
            "body": "<p>I am trying to create a spectrogram from a .wav file in python3. </p>\n\n<p>I want the final saved image to look similar to this image: </p>\n\n<p><a href=\"https://i.stack.imgur.com/IpI0g.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FeSwi.jpg\" title=\"source: imgur.com\" /></a></p>\n\n<p>I have tried the following:</p>\n\n<p>This stack overflow post: \n<a href=\"https://stackoverflow.com/questions/43284049/spectrogram-of-a-wave-file\">Spectrogram of a wave file</a></p>\n\n<p>This post worked, somewhat. After running it, I got</p>\n\n<p><a href=\"https://i.stack.imgur.com/zRFh2.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/NOddD.png\" title=\"source: imgur.com\" /></a></p>\n\n<p>However, This graph does not contain the colors that I need. I need a spectrogram that has colors. I tried to tinker with this code to try and add the colors however after spending significant time and effort on this, I couldn't figure it out!</p>\n\n<p>I then tried <a href=\"http://www.frank-zalkow.de/en/code-snippets/create-audio-spectrograms-with-python.html\" rel=\"noreferrer\">this</a> tutorial.</p>\n\n<p>This code crashed(on line 17) when I tried to run it with the error TypeError: 'numpy.float64' object cannot be interpreted as an integer.</p>\n\n<p>line 17: </p>\n\n<pre><code>samples = np.append(np.zeros(np.floor(frameSize/2.0)), sig)\n</code></pre>\n\n<p>I tried to fix it by casting </p>\n\n<pre><code>samples = int(np.append(np.zeros(np.floor(frameSize/2.0)), sig))\n</code></pre>\n\n<p>and I also tried</p>\n\n<pre><code>samples = np.append(np.zeros(int(np.floor(frameSize/2.0)), sig))    \n</code></pre>\n\n<p>However neither of these worked in the end.</p>\n\n<p>I would really like to know how to convert my .wav files to spectrograms with color so that I can analyze them! Any help would be appreciated!!!!!</p>\n\n<p>Please tell me if you want me to provide any more information about my version of python, what I tried, or what I want to achieve. </p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 7889
}