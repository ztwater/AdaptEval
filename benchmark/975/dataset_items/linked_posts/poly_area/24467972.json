{
    "items": [
        {
            "tags": [
                "python",
                "coordinates",
                "polygon",
                "area"
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3060440,
                                "reputation": 16737,
                                "user_id": 2593236,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "pbreach"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1403967705,
                            "post_id": 24468019,
                            "comment_id": 37868325,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/24468019#comment37868325_24468019",
                            "body": "Mine might be very complex polygons. The points are utm coordinates selected from a shapefile under a set of boundaries"
                        },
                        {
                            "owner": {
                                "account_id": 100551,
                                "reputation": 29857,
                                "user_id": 270986,
                                "user_type": "registered",
                                "display_name": "Mark Dickinson"
                            },
                            "reply_to_user": {
                                "account_id": 3060440,
                                "reputation": 16737,
                                "user_id": 2593236,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "pbreach"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1403967900,
                            "post_id": 24468019,
                            "comment_id": 37868376,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/24468019#comment37868376_24468019",
                            "body": "@user2593236: So long as your polygon boundary doesn&#39;t cross itself (which is what &quot;simple&quot; means in this context), you should be fine."
                        },
                        {
                            "owner": {
                                "account_id": 1070168,
                                "reputation": 30831,
                                "user_id": 2567683,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Nikos Athanasiou"
                            },
                            "reply_to_user": {
                                "account_id": 3060440,
                                "reputation": 16737,
                                "user_id": 2593236,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "pbreach"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1403967916,
                            "post_id": 24468019,
                            "comment_id": 37868379,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/24468019#comment37868379_24468019",
                            "body": "@user2593236 <a href=\"http://en.wikipedia.org/wiki/Simple_polygon\" rel=\"nofollow noreferrer\">Simple</a> means concave or convex without holes or self intersections."
                        },
                        {
                            "owner": {
                                "account_id": 4351511,
                                "reputation": 457,
                                "user_id": 3551690,
                                "user_type": "registered",
                                "display_name": "diegopso"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1491512025,
                            "post_id": 24468019,
                            "comment_id": 73599690,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/24468019#comment73599690_24468019",
                            "body": "I tried with very simple coordinates <code>[(0.0, 0.0), (1.0, 0.0), (0.0, 1.0), (1.0, 1.0)]</code> and it gave 0.0 area. Are there any limitations that you know? Also tried to shift it out of the origin, getting the same result."
                        },
                        {
                            "owner": {
                                "account_id": 218311,
                                "reputation": 19721,
                                "user_id": 474563,
                                "user_type": "registered",
                                "accept_rate": 48,
                                "display_name": "Pithikos"
                            },
                            "reply_to_user": {
                                "account_id": 4351511,
                                "reputation": 457,
                                "user_id": 3551690,
                                "user_type": "registered",
                                "display_name": "diegopso"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1552513161,
                            "post_id": 24468019,
                            "comment_id": 97043599,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/24468019#comment97043599_24468019",
                            "body": "@diegopso seems that it works only if the points are in a series of drawing. So it will work for <code>[(0, 0), (0, 1), (1, 1), (1, 0)]</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 1070168,
                        "reputation": 30831,
                        "user_id": 2567683,
                        "user_type": "registered",
                        "accept_rate": 88,
                        "display_name": "Nikos Athanasiou"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 64,
                    "last_activity_date": 1621176714,
                    "last_edit_date": 1621176714,
                    "creation_date": 1403967302,
                    "answer_id": 24468019,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/24468019#24468019",
                    "body": "<p>The most optimized solution that covers all possible cases, would be to use a geometry package, like <a href=\"https://pypi.org/project/Shapely/\" rel=\"noreferrer\">shapely</a>, <a href=\"https://github.com/scikit-geometry/scikit-geometry\" rel=\"noreferrer\">scikit-geometry</a> or <a href=\"https://github.com/pygeos/pygeos\" rel=\"noreferrer\">pygeos</a>. All of them use C++ geometry packages under the hood. The first one is easy to install via pip:</p>\n<pre><code>pip install shapely\n</code></pre>\n<p>and simple to use:</p>\n<pre><code>from shapely.geometry import Polygon\npgon = Polygon(zip(x, y)) # Assuming the OP's x,y coordinates\n\nprint(pgon.area)\n</code></pre>\n<hr />\n<p>To build it from scratch or understand how the underlying algorithm works, check the <a href=\"http://en.wikipedia.org/wiki/Shoelace_formula\" rel=\"noreferrer\">shoelace formula</a>:</p>\n<pre><code># e.g. corners = [(2.0, 1.0), (4.0, 5.0), (7.0, 8.0)]\ndef Area(corners):\n    n = len(corners) # of corners\n    area = 0.0\n    for i in range(n):\n        j = (i + 1) % n\n        area += corners[i][0] * corners[j][1]\n        area -= corners[j][0] * corners[i][1]\n    area = abs(area) / 2.0\n    return area\n</code></pre>\n<p>Since this works for simple polygons:</p>\n<ul>\n<li><p>If you have a <strong>polygon with holes</strong> : Calculate the area of the outer ring and subtrack the areas of the inner rings</p>\n</li>\n<li><p>If you have <strong>self-intersecting rings</strong> : You have to decompose them into simple sectors</p>\n</li>\n</ul>\n"
                },
                {
                    "owner": {
                        "account_id": 2440690,
                        "reputation": 151,
                        "user_id": 4778430,
                        "user_type": "registered",
                        "display_name": "Chris Judge"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1428850144,
                    "creation_date": 1428850144,
                    "answer_id": 29590740,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/29590740#29590740",
                    "body": "<p>There's an error in the code above as it doesn't take absolute values on each iteration. The above code will always return zero. (Mathematically, it's the difference between taking signed area or wedge product and the actual area\n<a href=\"http://en.wikipedia.org/wiki/Exterior_algebra\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/Exterior_algebra</a>.) Here's some alternate code. </p>\n\n<pre><code>def area(vertices):\n    n = len(vertices) # of corners\n    a = 0.0\n    for i in range(n):\n        j = (i + 1) % n\n        a += abs(vertices[i][0] * vertices[j][1]-vertices[j][0] * vertices[i][1])\n    result = a / 2.0\n    return result\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 966394,
                                "reputation": 1696,
                                "user_id": 989762,
                                "user_type": "registered",
                                "accept_rate": 33,
                                "display_name": "user989762"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1434700109,
                            "post_id": 30408825,
                            "comment_id": 49900745,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/30408825#comment49900745_30408825",
                            "body": "Great solution. I&#39;m not sure why, but the &quot;top&quot; answer by @Nikos Athanasiou does not work when some of the coordinates are negative. Also another solution listed <a href=\"http://stackoverflow.com/questions/451426/how-do-i-calculate-the-surface-area-of-a-2d-polygon\">here</a> had that issue. Your solution is the only one that worked. Just check with <code>xxx = np.array([[-100,0],[100,0],[100,150],[-100,150],[-100,0]])</code>"
                        },
                        {
                            "owner": {
                                "account_id": 4078403,
                                "reputation": 3238,
                                "user_id": 3349443,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Mahdi"
                            },
                            "reply_to_user": {
                                "account_id": 966394,
                                "reputation": 1696,
                                "user_id": 989762,
                                "user_type": "registered",
                                "accept_rate": 33,
                                "display_name": "user989762"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1434780268,
                            "post_id": 30408825,
                            "comment_id": 49935372,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/30408825#comment49935372_30408825",
                            "body": "@user989762: But I am getting the same answer using both methods!"
                        },
                        {
                            "owner": {
                                "account_id": 31723,
                                "reputation": 126,
                                "user_id": 87359,
                                "user_type": "registered",
                                "display_name": "emredog"
                            },
                            "edited": false,
                            "score": 10,
                            "creation_date": 1532523320,
                            "post_id": 30408825,
                            "comment_id": 90007569,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/30408825#comment90007569_30408825",
                            "body": "rookie mistake: not providing the points in an ordered (clockwise/counter clockwise) manner would yield faulty results."
                        },
                        {
                            "owner": {
                                "account_id": 9051618,
                                "reputation": 3778,
                                "user_id": 6741482,
                                "user_type": "registered",
                                "accept_rate": 95,
                                "display_name": "pstatix"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1576264137,
                            "post_id": 30408825,
                            "comment_id": 104856396,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/30408825#comment104856396_30408825",
                            "body": "Can you explain how you used the dot product instead of the cross product as the shoelace forumla states?"
                        },
                        {
                            "owner": {
                                "account_id": 4078403,
                                "reputation": 3238,
                                "user_id": 3349443,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Mahdi"
                            },
                            "reply_to_user": {
                                "account_id": 9051618,
                                "reputation": 3778,
                                "user_id": 6741482,
                                "user_type": "registered",
                                "accept_rate": 95,
                                "display_name": "pstatix"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1576357076,
                            "post_id": 30408825,
                            "comment_id": 104875838,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/30408825#comment104875838_30408825",
                            "body": "@pstatix: Indeed the shoelace formula can be written in terms of the exterior product but you can expand the product, and you&#39;ll see there are two types of terms: positive terms and negative terms. If you separate them into two terms, you&#39;d see they are the product of x and y then you can write those x&#39;s and y&#39;s as two vectors with a dot product between them. Look at the <code>proof for a triangle</code> section here: <a href=\"https://en.wikipedia.org/wiki/Shoelace_formula\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Shoelace_formula</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 4078403,
                        "reputation": 3238,
                        "user_id": 3349443,
                        "user_type": "registered",
                        "accept_rate": 67,
                        "display_name": "Mahdi"
                    },
                    "comment_count": 5,
                    "is_accepted": true,
                    "score": 154,
                    "last_activity_date": 1508306456,
                    "last_edit_date": 1508306456,
                    "creation_date": 1432354434,
                    "answer_id": 30408825,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/30408825#30408825",
                    "body": "<p>Implementation of <a href=\"https://en.wikipedia.org/wiki/Shoelace_formula\" rel=\"noreferrer\">Shoelace formula</a> could be done in <code>Numpy</code>. Assuming these vertices:</p>\n\n<pre><code>import numpy as np\nx = np.arange(0,1,0.001)\ny = np.sqrt(1-x**2)\n</code></pre>\n\n<p>We can redefine the function in numpy to find the area:</p>\n\n<pre><code>def PolyArea(x,y):\n    return 0.5*np.abs(np.dot(x,np.roll(y,1))-np.dot(y,np.roll(x,1)))\n</code></pre>\n\n<p>And getting results:</p>\n\n<pre><code>print PolyArea(x,y)\n# 0.26353377782163534\n</code></pre>\n\n<p>Avoiding <code>for</code> loop makes this function ~50X faster than <code>PolygonArea</code>:</p>\n\n<pre><code>%timeit PolyArea(x,y)\n# 10000 loops, best of 3: 42 \u00b5s per loop\n%timeit PolygonArea(zip(x,y))\n# 100 loops, best of 3: 2.09 ms per loop.\n</code></pre>\n\n<p>Timing is done in Jupyter notebook.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3060440,
                                "reputation": 16737,
                                "user_id": 2593236,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "pbreach"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1453398994,
                            "post_id": 34916426,
                            "comment_id": 57594797,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/34916426#comment57594797_34916426",
                            "body": "Interesting. Seems like this would be fast and easy to jit compile with numba. Do you have a reference for this?"
                        },
                        {
                            "owner": {
                                "account_id": 7375912,
                                "reputation": 135,
                                "user_id": 5614539,
                                "user_type": "registered",
                                "accept_rate": 57,
                                "display_name": "DrSocket"
                            },
                            "reply_to_user": {
                                "account_id": 3060440,
                                "reputation": 16737,
                                "user_id": 2593236,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "pbreach"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1453453936,
                            "post_id": 34916426,
                            "comment_id": 57617319,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/34916426#comment57617319_34916426",
                            "body": "# Given the number of sides, n, and the length of each side, s, the polygon&#39;s area is  # 1/4 n s2 / tan( pi/n) Interactive Python (Rice University, Coursera)  again here:  Area of a Polygon (<a href=\"http://www.academia.edu/5179705/Exercise_1_How_to_design_programs\" rel=\"nofollow noreferrer\">academia.edu/5179705/Exercise_1_How_to_design_programs</a>)  I did the function from that..."
                        },
                        {
                            "owner": {
                                "account_id": 3060440,
                                "reputation": 16737,
                                "user_id": 2593236,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "pbreach"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1453481777,
                            "post_id": 34916426,
                            "comment_id": 57635599,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/34916426#comment57635599_34916426",
                            "body": "This is for a <i>regular</i> polygon which is a special but very limited case of this problem. All sides must be the same length (which would need to be calculated as well). If you explained what <code>n</code> and <code>s</code> are then maybe it would be more apparent..."
                        }
                    ],
                    "owner": {
                        "account_id": 7375912,
                        "reputation": 135,
                        "user_id": 5614539,
                        "user_type": "registered",
                        "accept_rate": 57,
                        "display_name": "DrSocket"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1453520396,
                    "last_edit_date": 1453520396,
                    "creation_date": 1453356135,
                    "answer_id": 34916426,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/34916426#34916426",
                    "body": "<p>This is much simpler, for regular polygons: </p>\n\n<pre><code>import math\n\ndef area_polygon(n, s):\n    return 0.25 * n * s**2 / math.tan(math.pi/n)\n</code></pre>\n\n<p>since the formula is \u00bc n s2 / tan(\u03c0/n).\nGiven the number of sides, n, and the length of each side, s</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2692638,
                                "reputation": 495,
                                "user_id": 2325554,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Edip Ahmet"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1560758795,
                            "post_id": 43659322,
                            "comment_id": 99826478,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/43659322#comment99826478_43659322",
                            "body": "It gave wrong result when I tried more complex area with 15 vertices."
                        },
                        {
                            "owner": {
                                "account_id": 4071451,
                                "reputation": 9,
                                "user_id": 6999367,
                                "user_type": "registered",
                                "display_name": "Takis Tsiberis"
                            },
                            "reply_to_user": {
                                "account_id": 2692638,
                                "reputation": 495,
                                "user_id": 2325554,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Edip Ahmet"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1560856869,
                            "post_id": 43659322,
                            "comment_id": 99865540,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/43659322#comment99865540_43659322",
                            "body": "can you please provide the coordinates?"
                        },
                        {
                            "owner": {
                                "account_id": 2692638,
                                "reputation": 495,
                                "user_id": 2325554,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Edip Ahmet"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1560860087,
                            "post_id": 43659322,
                            "comment_id": 99867450,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/43659322#comment99867450_43659322",
                            "body": "Sorry it is my fault. I tested your code a few times and compared the results with CAD software, I tested coords=[(1141.784,893.124), (1521.933,893.124), (1521.933,999.127), (1989.809,999.127), (1989.809,622.633),    (2125.054,622.633), (2125.054,326.556), (1372.067,326.556), (1372.067,-60.903), (1872.84,-60.903),    (1872.84,52.41), (2015.396,52.41), (2015.396,-455.673), (1090.611,-455.673), (1086.955,436.214), (1141.784,893.124)] Yesterday I got wrong result maybe I missed something, today it works great like PolygonArea function."
                        },
                        {
                            "owner": {
                                "account_id": 2692638,
                                "reputation": 495,
                                "user_id": 2325554,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Edip Ahmet"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1560860232,
                            "post_id": 43659322,
                            "comment_id": 99867546,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/43659322#comment99867546_43659322",
                            "body": "I think I comment it by mistake, maybe I tried another function here yesterday."
                        },
                        {
                            "owner": {
                                "account_id": 4071451,
                                "reputation": 9,
                                "user_id": 6999367,
                                "user_type": "registered",
                                "display_name": "Takis Tsiberis"
                            },
                            "reply_to_user": {
                                "account_id": 2692638,
                                "reputation": 495,
                                "user_id": 2325554,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Edip Ahmet"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1560957941,
                            "post_id": 43659322,
                            "comment_id": 99909865,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/43659322#comment99909865_43659322",
                            "body": "Glad I could help"
                        }
                    ],
                    "owner": {
                        "account_id": 4071451,
                        "reputation": 9,
                        "user_id": 6999367,
                        "user_type": "registered",
                        "display_name": "Takis Tsiberis"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1493299734,
                    "creation_date": 1493299734,
                    "answer_id": 43659322,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/43659322#43659322",
                    "body": "<p>Based on</p>\n\n<p><a href=\"https://www.mathsisfun.com/geometry/area-irregular-polygons.html\" rel=\"nofollow noreferrer\">https://www.mathsisfun.com/geometry/area-irregular-polygons.html</a></p>\n\n<pre><code>def _area_(coords):\n    t=0\n    for count in range(len(coords)-1):\n        y = coords[count+1][1] + coords[count][1]\n        x = coords[count+1][0] - coords[count][0]\n        z = y * x\n        t += z\n    return abs(t/2.0)\n\na=[(5.09,5.8), (1.68,4.9), (1.48,1.38), (4.76,0.1), (7.0,2.83), (5.09,5.8)]\nprint _area_(a)\n</code></pre>\n\n<p>The trick is that the first coordinate should also be last.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6104749,
                                "reputation": 3549,
                                "user_id": 4762738,
                                "user_type": "registered",
                                "display_name": "Eskapp"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1538065404,
                            "post_id": 49129646,
                            "comment_id": 92022506,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/49129646#comment92022506_49129646",
                            "body": "I get a difference between this approach and the one of Mahdi when I define <code>x</code> and <code>y</code> such as <code>x_{n+1} = x_1 and x_0 = x_n, as well as y_{n+1} = y_1 and y_0 = y_n</code> as required to apply the shoelace formula (see <a href=\"https://en.wikipedia.org/wiki/Shoelace_formula#Definition\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Shoelace_formula#Definition</a>) The difference is slight because the points are the vertices are so close to each other but exists and may be magnified when working with polygons with longer sides."
                        },
                        {
                            "owner": {
                                "account_id": 3837795,
                                "reputation": 655,
                                "user_id": 3181725,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "maxb"
                            },
                            "reply_to_user": {
                                "account_id": 6104749,
                                "reputation": 3549,
                                "user_id": 4762738,
                                "user_type": "registered",
                                "display_name": "Eskapp"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1538066745,
                            "post_id": 49129646,
                            "comment_id": 92023173,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/49129646#comment92023173_49129646",
                            "body": "Of course there are floating point errors, as with any implementation. Could you provide a full example of the difference? If you need more precision, you could use arbitrary precision arithmetics."
                        },
                        {
                            "owner": {
                                "account_id": 6104749,
                                "reputation": 3549,
                                "user_id": 4762738,
                                "user_type": "registered",
                                "display_name": "Eskapp"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1538070854,
                            "post_id": 49129646,
                            "comment_id": 92025097,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/49129646#comment92025097_49129646",
                            "body": "My bad, I was confused about the correction term and thought that some difference I could observe could come from there while tracking a bug in my code. Seems to work perfectly after many more tests comparing different implementations for computing the area of polygons. Your solution has the speed advantage as well as being easy to read!"
                        },
                        {
                            "owner": {
                                "account_id": 3837795,
                                "reputation": 655,
                                "user_id": 3181725,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "maxb"
                            },
                            "reply_to_user": {
                                "account_id": 6104749,
                                "reputation": 3549,
                                "user_id": 4762738,
                                "user_type": "registered",
                                "display_name": "Eskapp"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1538077963,
                            "post_id": 49129646,
                            "comment_id": 92028200,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/49129646#comment92028200_49129646",
                            "body": "@Eskapp glad to hear everything is working correctly!"
                        },
                        {
                            "owner": {
                                "account_id": 9051618,
                                "reputation": 3778,
                                "user_id": 6741482,
                                "user_type": "registered",
                                "accept_rate": 95,
                                "display_name": "pstatix"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1576262543,
                            "post_id": 49129646,
                            "comment_id": 104855752,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/49129646#comment104855752_49129646",
                            "body": "Can you explain how the dot product is used instead of cross products?"
                        },
                        {
                            "owner": {
                                "account_id": 3837795,
                                "reputation": 655,
                                "user_id": 3181725,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "maxb"
                            },
                            "reply_to_user": {
                                "account_id": 9051618,
                                "reputation": 3778,
                                "user_id": 6741482,
                                "user_type": "registered",
                                "accept_rate": 95,
                                "display_name": "pstatix"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1576358357,
                            "post_id": 49129646,
                            "comment_id": 104876146,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/49129646#comment104876146_49129646",
                            "body": "@pstatix if you look at the Wikipedia article for the <a href=\"https://en.wikipedia.org/wiki/Shoelace_formula#Statement\" rel=\"nofollow noreferrer\">Shoelace formula</a>, it can be visualized as a shifted dot product. I didn&#39;t come up with the formula myself, but I did realize that the pattern of calculation used directly matched using the dot product (or rather two dot products), with one vector in each product shifted around. For more info I&#39;d just read the article, the only thing I did for this answer was to improve the performance of the algorithm."
                        }
                    ],
                    "owner": {
                        "account_id": 3837795,
                        "reputation": 655,
                        "user_id": 3181725,
                        "user_type": "registered",
                        "accept_rate": 60,
                        "display_name": "maxb"
                    },
                    "comment_count": 6,
                    "is_accepted": false,
                    "score": 21,
                    "last_activity_date": 1520335283,
                    "creation_date": 1520335283,
                    "answer_id": 49129646,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/49129646#49129646",
                    "body": "<p>By analysis of Mahdi's answer, I concluded that the majority of time was spent doing <code>np.roll()</code>. By removing the need of the roll, and still using numpy, I got the execution time down to 4-5\u00b5s per loop compared to Mahdi's 41\u00b5s (for comparison Mahdi's function took an average of 37\u00b5s on my machine). </p>\n\n<pre><code>def polygon_area(x,y):\n    correction = x[-1] * y[0] - y[-1]* x[0]\n    main_area = np.dot(x[:-1], y[1:]) - np.dot(y[:-1], x[1:])\n    return 0.5*np.abs(main_area + correction)\n</code></pre>\n\n<p>By calculating the correctional term, and then slicing the arrays, there is no need to roll or create a new array.</p>\n\n<p>Benchmarks:</p>\n\n<pre><code>10000 iterations\nPolyArea(x,y): 37.075\u00b5s per loop\npolygon_area(x,y): 4.665\u00b5s per loop\n</code></pre>\n\n<p>Timing was done using the <code>time</code> module and <code>time.clock()</code></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 13730228,
                                "reputation": 1353,
                                "user_id": 9907909,
                                "user_type": "registered",
                                "display_name": "HumbleBee"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1603190774,
                            "post_id": 53864271,
                            "comment_id": 113951801,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/53864271#comment113951801_53864271",
                            "body": "The only solution that offered the correct result! Kudos! See my answer for an slightly modified version that takes a list of tuples."
                        }
                    ],
                    "owner": {
                        "account_id": 5330735,
                        "reputation": 341,
                        "user_id": 4251343,
                        "user_type": "registered",
                        "display_name": "Trenton"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 13,
                    "last_activity_date": 1545291728,
                    "last_edit_date": 1545291728,
                    "creation_date": 1545291424,
                    "answer_id": 53864271,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/53864271#53864271",
                    "body": "<p>maxb's answer gives good performance but can easily lead to loss of precision when coordinate values or the number of points are large. This can be mitigated with a simple coordinate shift:</p>\n\n<pre><code>def polygon_area(x,y):\n    # coordinate shift\n    x_ = x - x.mean()\n    y_ = y - y.mean()\n    # everything else is the same as maxb's code\n    correction = x_[-1] * y_[0] - y_[-1]* x_[0]\n    main_area = np.dot(x_[:-1], y_[1:]) - np.dot(y_[:-1], x_[1:])\n    return 0.5*np.abs(main_area + correction)\n</code></pre>\n\n<p>For example, a common geographic reference system is UTM, which might have (x,y) coordinates of <code>(488685.984, 7133035.984)</code>. The product of those two values is <code>3485814708748.448</code>. You can see that this single product is already at the edge of precision (it has the same number of decimal places as the inputs). Adding just a few of these products, let alone thousands, will result in loss of precision.</p>\n\n<p>A simple way to mitigate this is to shift the polygon from large positive coordinates to something closer to (0,0), for example by subtracting the centroid as in the code above. This helps in two ways:</p>\n\n<ol>\n<li>It eliminates a factor of <code>x.mean() * y.mean()</code> from each product</li>\n<li>It produces a mix of positive and negative values within each dot product, which will largely cancel.</li>\n</ol>\n\n<p>The coordinate shift does not alter the total area, it just makes the calculation more numerically stable.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 19219462,
                        "reputation": 51,
                        "user_id": 14043618,
                        "user_type": "unregistered",
                        "display_name": "Alex Jiang"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1596484416,
                    "last_edit_date": 1596484416,
                    "creation_date": 1596476487,
                    "answer_id": 63234396,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/63234396#63234396",
                    "body": "<p>a bit late here, but have you considered simply using <a href=\"https://docs.sympy.org/latest/modules/geometry/polygons.html\" rel=\"noreferrer\">sympy</a>?</p>\n<p>a simple code is :</p>\n<pre><code>from sympy import Polygon\na = Polygon((0, 0), (2, 0), (2, 2), (0, 2)).area\nprint(a)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7732487,
                                "reputation": 1982,
                                "user_id": 5855131,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Jiadong"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1602297684,
                            "post_id": 63302726,
                            "comment_id": 113684098,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/63302726#comment113684098_63302726",
                            "body": "numpy is quite standard, but shapely is abit faster"
                        }
                    ],
                    "owner": {
                        "account_id": 14108533,
                        "reputation": 1510,
                        "user_id": 10191971,
                        "user_type": "registered",
                        "display_name": "C.K."
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1596806474,
                    "creation_date": 1596806474,
                    "answer_id": 63302726,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/63302726#63302726",
                    "body": "<p>It's faster to use <code>shapely.geometry.Polygon</code> rather than to calculate yourself.</p>\n<pre><code>from shapely.geometry import Polygon\nimport numpy as np\ndef PolyArea(x,y):\n    return 0.5*np.abs(np.dot(x,np.roll(y,1))-np.dot(y,np.roll(x,1)))\ncoords = np.random.rand(6, 2)\nx, y = coords[:, 0], coords[:, 1]\n</code></pre>\n<p>With those codes, and do <code>%timeit</code>\uff1a</p>\n<pre><code>%timeit PolyArea(x,y)\n46.4 \u00b5s \u00b1 2.24 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n%timeit Polygon(coords).area\n20.2 \u00b5s \u00b1 414 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 13730228,
                        "reputation": 1353,
                        "user_id": 9907909,
                        "user_type": "registered",
                        "display_name": "HumbleBee"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1603190701,
                    "last_edit_date": 1603190701,
                    "creation_date": 1603189879,
                    "answer_id": 64443317,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/64443317#64443317",
                    "body": "<p>I compared every solutions offered here to Shapely's area method result, they had the right integer part but the decimal numbers differed. Only @Trenton's solution provided the the correct result.</p>\n<p>Now improving on @Trenton's answer to process coordinates as a list of tuples, I came up with the following:</p>\n<pre><code>import numpy as np\n\ndef polygon_area(coords):\n    # get x and y in vectors\n    x = [point[0] for point in coords]\n    y = [point[1] for point in coords]\n    # shift coordinates\n    x_ = x - np.mean(x)\n    y_ = y - np.mean(y)\n    # calculate area\n    correction = x_[-1] * y_[0] - y_[-1] * x_[0]\n    main_area = np.dot(x_[:-1], y_[1:]) - np.dot(y_[:-1], x_[1:])\n    return 0.5 * np.abs(main_area + correction)\n\n#### Example output\ncoords = [(385495.19520441635, 6466826.196947694), (385496.1951836388, 6466826.196947694), (385496.1951836388, 6466825.196929455), (385495.19520441635, 6466825.196929455), (385495.19520441635, 6466826.196947694)]\n\nShapely's area method:  0.9999974610685296\n@Trenton's area method: 0.9999974610685296\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 9707841,
                                "reputation": 386,
                                "user_id": 7200745,
                                "user_type": "registered",
                                "display_name": "Eugene W."
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1608654150,
                            "post_id": 65141602,
                            "comment_id": 115646051,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/65141602#comment115646051_65141602",
                            "body": "You did not mention here that it works for integer arrays"
                        },
                        {
                            "owner": {
                                "account_id": 2158504,
                                "reputation": 535,
                                "user_id": 1913199,
                                "user_type": "registered",
                                "accept_rate": 57,
                                "display_name": "crazjo"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1621602293,
                            "post_id": 65141602,
                            "comment_id": 119552209,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/65141602#comment119552209_65141602",
                            "body": "This actually seems the fastest, at least for the simple polygons I tested"
                        },
                        {
                            "owner": {
                                "account_id": 12003714,
                                "reputation": 556,
                                "user_id": 8782672,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Coddy"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1690557640,
                            "post_id": 65141602,
                            "comment_id": 135375164,
                            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/65141602#comment135375164_65141602",
                            "body": "you could use <code>cv2.contourArea(np.around(np.array([[pt] for pt in points])).astype(np.int32))</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 16918546,
                        "reputation": 372,
                        "user_id": 12679588,
                        "user_type": "registered",
                        "display_name": "Toru Kikuchi"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1613537376,
                    "last_edit_date": 1613537376,
                    "creation_date": 1607076474,
                    "answer_id": 65141602,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/65141602#65141602",
                    "body": "<p>cv2.contourArea() in OpenCV gives an alternative method.</p>\n<p>example:</p>\n<pre><code>points = np.array([[0,0],[10,0],[10,10],[0,10]])\narea = cv2.contourArea(points)\nprint(area) # 100.0\n</code></pre>\n<p>The argument (points, in the above example) is a numpy array with dtype int, representing the vertices of a polygon:  [[x1,y1],[x2,y2], ...]</p>\n"
                },
                {
                    "owner": {
                        "account_id": 18821830,
                        "reputation": 63,
                        "user_id": 13727635,
                        "user_type": "registered",
                        "display_name": "Muhammad-Ali"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1653130604,
                    "creation_date": 1653130604,
                    "answer_id": 72328910,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/72328910#72328910",
                    "body": "<pre><code>def find_int_coordinates(n: int, coords: list[list[int]]) -&gt; float:\n    rez = 0\n    x, y = coords[n - 1]\n    for coord in coords:\n        rez += (x + coord[0]) * (y - coord[1])\n        x, y = coord\n    return abs(rez / 2)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 186427,
                        "reputation": 4521,
                        "user_id": 423805,
                        "user_type": "registered",
                        "accept_rate": 92,
                        "display_name": "BBSysDyn"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1688827277,
                    "creation_date": 1688827277,
                    "answer_id": 76643478,
                    "question_id": 24467972,
                    "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates/76643478#76643478",
                    "body": "<p>Shoelace formula comes from computing internal triangles based on consecutive points around the polygon. It could be more informative to base the code on this explanation. The area of polygon is simply length of cross product (determinant) of its two neighboring vectors divided by two, all added up,</p>\n<p><a href=\"https://youtu.be/0KjG8Pg6LGk?t=213\" rel=\"nofollow noreferrer\">https://youtu.be/0KjG8Pg6LGk?t=213</a></p>\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np, numpy.linalg as lin\n\ndef area(pts):\n    ps = np.array([0.5 * lin.det(np.vstack((pts[i], pts[i+1]))) for i in range(len(pts)-1)])\n    s = np.sum(ps)\n    p1,p2 = pts[-1],pts[0] # cycle back, last pt with the first \n    s += 0.5 * lin.det(np.vstack((p1,p2)))\n    return np.abs(s)\n\npoints = np.array([[0,0],[10,0],[10,10],[0,10]])\narea(points) # 100\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 3060440,
                "reputation": 16737,
                "user_id": 2593236,
                "user_type": "registered",
                "accept_rate": 81,
                "display_name": "pbreach"
            },
            "comment_count": 0,
            "is_answered": true,
            "accepted_answer_id": 30408825,
            "answer_count": 13,
            "score": 88,
            "last_activity_date": 1688827277,
            "creation_date": 1403966943,
            "last_edit_date": 1403967843,
            "question_id": 24467972,
            "link": "https://stackoverflow.com/questions/24467972/calculate-area-of-polygon-given-x-y-coordinates",
            "title": "Calculate area of polygon given (x,y) coordinates",
            "body": "<p>I have a set of points and would like to know if there is a function (for the sake of convenience and probably speed) that can calculate the area enclosed by a set of points.</p>\n\n<p>for example:</p>\n\n<pre><code>x = np.arange(0,1,0.001)\ny = np.sqrt(1-x**2)\n\npoints = zip(x,y)\n</code></pre>\n\n<p>given <code>points</code> the area should be approximately equal to <code>(pi-2)/4</code>. Maybe there is something from scipy, matplotlib, numpy, shapely, etc. to do this? I won't be encountering any negative values for either the x or y coordinates... and they will be polygons without any defined function.</p>\n\n<p>EDIT:</p>\n\n<p>points will most likely not be in any specified order (clockwise or counterclockwise) and may be quite complex as they are a set of utm coordinates from a shapefile under a set of boundaries</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 8165
}