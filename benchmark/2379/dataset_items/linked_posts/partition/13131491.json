{
    "items": [
        {
            "tags": [
                "python",
                "combinatorics"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 367729,
                        "reputation": 576,
                        "user_id": 714087,
                        "user_type": "registered",
                        "display_name": "Ronan Lamy"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1351607033,
                    "post_id": 13131491,
                    "comment_id": 17873436,
                    "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily#comment17873436_13131491",
                    "body": "What do you mean by &quot;where order matters&quot;? You seem to treat the items as indistinguishable in that case."
                },
                {
                    "owner": {
                        "account_id": 306077,
                        "reputation": 56561,
                        "user_id": 616616,
                        "user_type": "registered",
                        "accept_rate": 53,
                        "display_name": "MRocklin"
                    },
                    "reply_to_user": {
                        "account_id": 367729,
                        "reputation": 576,
                        "user_id": 714087,
                        "user_type": "registered",
                        "display_name": "Ronan Lamy"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1351608959,
                    "post_id": 13131491,
                    "comment_id": 17874563,
                    "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily#comment17874563_13131491",
                    "body": "Good question. &quot;Where order matters&quot; could mean several things, If the partition were flattened the items should be in the same order as the input (notice how [[1], [2], [3, 4]] is in the order [1, 2, 3, 4]). The items are distinguishable. So for example the solution [[2], [1], [3, 4]] would not be valid."
                },
                {
                    "owner": {
                        "account_id": 367729,
                        "reputation": 576,
                        "user_id": 714087,
                        "user_type": "registered",
                        "display_name": "Ronan Lamy"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1351619929,
                    "post_id": 13131491,
                    "comment_id": 17879811,
                    "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily#comment17879811_13131491",
                    "body": "In that case, you can decompose the problem into finding the numbers of items, and then generating the lists - for both cases."
                },
                {
                    "owner": {
                        "account_id": 367729,
                        "reputation": 576,
                        "user_id": 714087,
                        "user_type": "registered",
                        "display_name": "Ronan Lamy"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1351620625,
                    "post_id": 13131491,
                    "comment_id": 17880097,
                    "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily#comment17880097_13131491",
                    "body": "In the ordered case, you&#39;re looking for <a href=\"https://en.wikipedia.org/wiki/Composition_%28number_theory%29\" rel=\"nofollow noreferrer\">integer compositions</a>, and in the unordered one, for <a href=\"https://en.wikipedia.org/wiki/Integer_partition\" rel=\"nofollow noreferrer\">integer partitions</a>. I&#39;m not sure what the optimal algorithms are for either, but they&#39;re both classical problems."
                },
                {
                    "owner": {
                        "account_id": 54090,
                        "reputation": 89434,
                        "user_id": 161801,
                        "user_type": "registered",
                        "accept_rate": 69,
                        "display_name": "asmeurer"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1351621790,
                    "post_id": 13131491,
                    "comment_id": 17880585,
                    "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily#comment17880585_13131491",
                    "body": "If you allow empty bins, for your application, those would represent the identities."
                },
                {
                    "owner": {
                        "account_id": 306077,
                        "reputation": 56561,
                        "user_id": 616616,
                        "user_type": "registered",
                        "accept_rate": 53,
                        "display_name": "MRocklin"
                    },
                    "reply_to_user": {
                        "account_id": 367729,
                        "reputation": 576,
                        "user_id": 714087,
                        "user_type": "registered",
                        "display_name": "Ronan Lamy"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1351629823,
                    "post_id": 13131491,
                    "comment_id": 17883834,
                    "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily#comment17883834_13131491",
                    "body": "Thanks for the links @RonanLamy. I&#39;m checking them out now."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 54090,
                                "reputation": 89434,
                                "user_id": 161801,
                                "user_type": "registered",
                                "accept_rate": 69,
                                "display_name": "asmeurer"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1351621517,
                            "post_id": 13131924,
                            "comment_id": 17880460,
                            "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily/13131924#comment17880460_13131924",
                            "body": "This doesn&#39;t include the partition [[1, 3], [2, 4]]."
                        },
                        {
                            "owner": {
                                "account_id": 54090,
                                "reputation": 89434,
                                "user_id": 161801,
                                "user_type": "registered",
                                "accept_rate": 69,
                                "display_name": "asmeurer"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1351621599,
                            "post_id": 13131924,
                            "comment_id": 17880500,
                            "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily/13131924#comment17880500_13131924",
                            "body": "Ah, so you&#39;re just solving the first part then."
                        },
                        {
                            "owner": {
                                "account_id": 2128842,
                                "reputation": 4017,
                                "user_id": 2415524,
                                "user_type": "registered",
                                "accept_rate": 87,
                                "display_name": "mbomb007"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1495119232,
                            "post_id": 13131924,
                            "comment_id": 75127673,
                            "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily/13131924#comment75127673_13131924",
                            "body": "<a href=\"https://stackoverflow.com/questions/19368375/set-partitions-in-python/30134039#30134039\">Similar / Related</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 1989859,
                        "reputation": 6035,
                        "user_id": 1784138,
                        "user_type": "registered",
                        "display_name": "EnricoGiampieri"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1351564829,
                    "creation_date": 1351564829,
                    "answer_id": 13131924,
                    "question_id": 13131491,
                    "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily/13131924#13131924",
                    "body": "<p>you need a recursive function to solve this kind of problem: you take the list, take a subportion of it of increasing length and apply the same procedure to the remaining tail of the list in n-1 pieces.</p>\n\n<p>here is my take to the ordered combination</p>\n\n<pre><code>def partition(lista,bins):\n    if len(lista)==1 or bins==1:\n        yield [lista]\n    elif len(lista)&gt;1 and bins&gt;1:\n        for i in range(1,len(lista)):\n            for part in partition(lista[i:],bins-1):\n                if len([lista[:i]]+part)==bins:\n                    yield [lista[:i]]+part\n\nfor i in partition(range(1,5),1): \n    print i\n#[[1, 2, 3, 4]]\n\nfor i in partition(range(1,5),2): \n    print i\n#[[1], [2, 3, 4]]\n#[[1, 2], [3, 4]]\n#[[1, 2, 3], [4]]\n\nfor i in partition(range(1,5),3):\n    print i\n#[[1], [2], [3, 4]]\n#[[1], [2, 3], [4]]\n#[[1, 2], [3], [4]] \n\nfor i in partition(range(1,5),4):\n    print i\n#[[1], [2], [3], [4]]\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1982036,
                        "reputation": 56,
                        "user_id": 1778390,
                        "user_type": "unregistered",
                        "display_name": "Chris Smith"
                    },
                    "comment_count": 0,
                    "is_accepted": true,
                    "score": 3,
                    "last_activity_date": 1351892772,
                    "last_edit_date": 1351892772,
                    "creation_date": 1351797489,
                    "answer_id": 13184004,
                    "question_id": 13131491,
                    "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily/13184004#13184004",
                    "body": "<p>Enrico's algorithm, Knuth's, and only my glue are needed to paste together something that returns the list of lists or set of sets (returned as lists of lists in case elements are not hashable).</p>\n\n<pre><code>def kbin(l, k, ordered=True):\n    \"\"\"\n    Return sequence ``l`` partitioned into ``k`` bins.\n\n    Examples\n    ========\n\n    The default is to give the items in the same order, but grouped\n    into k partitions:\n\n    &gt;&gt;&gt; for p in kbin(range(5), 2):\n    ...     print p\n    ...\n    [[0], [1, 2, 3, 4]]\n    [[0, 1], [2, 3, 4]]\n    [[0, 1, 2], [3, 4]]\n    [[0, 1, 2, 3], [4]]\n\n    Setting ``ordered`` to None means that the order of the elements in\n    the bins is irrelevant and the order of the bins is irrelevant. Though\n    they are returned in a canonical order as lists of lists, all lists\n    can be thought of as sets.\n\n    &gt;&gt;&gt; for p in kbin(range(3), 2, ordered=None):\n    ...     print p\n    ...\n    [[0, 1], [2]]\n    [[0], [1, 2]]\n    [[0, 2], [1]]\n\n    \"\"\"\n    from sympy.utilities.iterables import (\n        permutations, multiset_partitions, partitions)\n\n    def partition(lista, bins):\n        #  EnricoGiampieri's partition generator from\n        #  http://stackoverflow.com/questions/13131491/\n        #  partition-n-items-into-k-bins-in-python-lazily\n        if len(lista) == 1 or bins == 1:\n            yield [lista]\n        elif len(lista) &gt; 1 and bins &gt; 1:\n            for i in range(1, len(lista)):\n                for part in partition(lista[i:], bins - 1):\n                    if len([lista[:i]] + part) == bins:\n                        yield [lista[:i]] + part\n    if ordered:\n        for p in partition(l, k):\n            yield p\n    else:\n        for p in multiset_partitions(l, k):\n            yield p\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 306077,
                "reputation": 56561,
                "user_id": 616616,
                "user_type": "registered",
                "accept_rate": 53,
                "display_name": "MRocklin"
            },
            "comment_count": 6,
            "is_answered": true,
            "accepted_answer_id": 13184004,
            "answer_count": 2,
            "score": 4,
            "last_activity_date": 1479501668,
            "creation_date": 1351555948,
            "question_id": 13131491,
            "link": "https://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily",
            "title": "Partition N items into K bins in Python lazily",
            "body": "<p>Give an algorithm (or straight Python code) that yields all partitions of a collection of N items into K bins such that each bin has at least one item. I need this in both the case where order matters and where order does not matter. </p>\n\n<p>Example where order matters</p>\n\n<pre><code>&gt;&gt;&gt; list(partition_n_in_k_bins_ordered((1,2,3,4), 2))\n[([1], [2,3,4]), ([1,2], [3,4]), ([1,2,3], [4])]\n\n&gt;&gt;&gt; list(partition_n_in_k_bins_ordered((1,2,3,4), 3))\n[([1], [2], [3,4]), ([1], [2,3], [4]), ([1,2], [3], [4])]\n\n&gt;&gt;&gt; list(partition_n_in_k_bins_ordered((1,2,3,4), 4))\n[([1], [2], [3], [4])]\n</code></pre>\n\n<p>Example where order does not matter</p>\n\n<pre><code>&gt;&gt;&gt; list(partition_n_in_k_bins_unordered({1,2,3,4}, 2))\n[{{1}, {2,3,4}}, {{2}, {1,3,4}}, {{3}, {1,2,4}}, {{4}, {1,2,3}},\n {{1,2}, {3,4}}, {{1,3}, {2,4}}, {{1,4}, {2,3}}]\n</code></pre>\n\n<p>These functions should produce lazy iterators/generators, not lists. Ideally they would use primitives found in <code>itertools</code>. I suspect that there is a clever solution that is eluding me. </p>\n\n<p>While I've asked for this in Python I'm also willing to translate a clear algorithm. </p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 5401
}