{
    "items": [
        {
            "tags": [
                "python",
                "algorithm",
                "sorting",
                "coordinates",
                "geospatial"
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 19390,
                                "reputation": 116368,
                                "user_id": 45433,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Crescent Fresh"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1257872344,
                            "post_id": 1709306,
                            "comment_id": 1586308,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709306#comment1586308_1709306",
                            "body": "I need more than the direction, I need the list sorted in the order posted for further operations."
                        },
                        {
                            "owner": {
                                "account_id": 70127,
                                "reputation": 9163,
                                "user_id": 203661,
                                "user_type": "registered",
                                "display_name": "Aaron"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257873805,
                            "post_id": 1709306,
                            "comment_id": 1586495,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709306#comment1586495_1709306",
                            "body": "@Crescent Fresh - Knowing the direction is the first step to sorting it properly, isn&#39;t it?  If you need it in counter-clockwise order and the list as is is in clockwise order then you reverse the list and - ta da - you have it in counter-clockwise order."
                        },
                        {
                            "owner": {
                                "account_id": 19390,
                                "reputation": 116368,
                                "user_id": 45433,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Crescent Fresh"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257874276,
                            "post_id": 1709306,
                            "comment_id": 1586572,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709306#comment1586572_1709306",
                            "body": "Sorry, I&#39;m not making myself very clear: I need the list sorted starting with the <i>north-east</i> corner. Simply knowing the direction does not tell me which item in the list is north-east."
                        }
                    ],
                    "owner": {
                        "account_id": 70127,
                        "reputation": 9163,
                        "user_id": 203661,
                        "user_type": "registered",
                        "display_name": "Aaron"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1257870966,
                    "creation_date": 1257870966,
                    "answer_id": 1709306,
                    "question_id": 1709283,
                    "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709306#1709306",
                    "body": "<p>If you take the cross-product of two vectors from a corner then the sign of the result will tell you if it's clockwise or counterclockwise.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 19390,
                                "reputation": 116368,
                                "user_id": 45433,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Crescent Fresh"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257871398,
                            "post_id": 1709344,
                            "comment_id": 1586166,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709344#comment1586166_1709344",
                            "body": "I <i>don&#39;t</i> know if the list starts at NW. Sorry if that was unclear."
                        }
                    ],
                    "owner": {
                        "account_id": 7795,
                        "reputation": 117361,
                        "user_id": 13663,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Will Hartung"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1257871208,
                    "creation_date": 1257871208,
                    "answer_id": 1709344,
                    "question_id": 1709283,
                    "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709344#1709344",
                    "body": "<p>So, you have 4 points.</p>\n\n<p>You always start with the NW point.</p>\n\n<p>You know that the points are sorted, just not in which direction.</p>\n\n<p>It's a simple test of the first two points whether the list is clockwise or counter clockwise.</p>\n\n<p>if (pt1.y != pt2.y) then direction = clockwise.</p>\n\n<p>If you detect that the points are clockwise, simple reverse the last 3 points in the list.</p>\n\n<p>So.</p>\n\n<p>Counter clockwise points: (0,1), (0,0), (1,0), (1,1)</p>\n\n<p>Clockwise points: (0,1), (1,1), (1,0), (0,0)</p>\n\n<p>You can see if you reverse pts2-4 your clockwise list becomes counterclockwise.</p>\n\n<p>EDIT: I had my points starting from the NE, fixt.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 19390,
                                "reputation": 116368,
                                "user_id": 45433,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Crescent Fresh"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257873159,
                            "post_id": 1709347,
                            "comment_id": 1586431,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709347#comment1586431_1709347",
                            "body": "&quot;Rebuilding&quot; the list from two opposing corners is equivalent to sorting the entire list I suppose, albeit a bit unorthodox."
                        }
                    ],
                    "owner": {
                        "account_id": 34982,
                        "reputation": 46498,
                        "user_id": 1386054,
                        "user_type": "registered",
                        "accept_rate": 96,
                        "display_name": "Adrian McCarthy"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1257871218,
                    "creation_date": 1257871218,
                    "answer_id": 1709347,
                    "question_id": 1709283,
                    "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709347#1709347",
                    "body": "<p>Rather than sorting, you can just \"rebuild\" the rectangle in any order you desire.</p>\n\n<p>From the original set, collect the min and max latitude and min and max longitude.  Then construct the rectangle in any order you want.</p>\n\n<p>Northwest corner is max latitude and min longitude.  Southwest corner is min latitude and min longitude.  Etc.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 35980,
                        "reputation": 68276,
                        "user_id": 102302,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "tom10"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1257875514,
                    "last_edit_date": 1257875514,
                    "creation_date": 1257871224,
                    "answer_id": 1709349,
                    "question_id": 1709283,
                    "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709349#1709349",
                    "body": "<p>Associate an angle with each point (relative to an interior point), and then moving around is trivial.</p>\n\n<p>To calculate the angle, find a point in the middle of the shape, for example, <code>(average_lat, average_lng)</code> will be in the center.  Then, <code>atan2(lng - average_lng, lat - average_lat)</code> will be the angle of that point.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 19390,
                                "reputation": 116368,
                                "user_id": 45433,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Crescent Fresh"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257874742,
                            "post_id": 1709546,
                            "comment_id": 1586629,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709546#comment1586629_1709546",
                            "body": "Nice. This looks similar to what @tom10 was trying to convey (without the mapping to <code>[0, 2pi]</code>), is that right?"
                        },
                        {
                            "owner": {
                                "account_id": 7405,
                                "reputation": 313805,
                                "user_id": 12855,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "SilentGhost"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257875108,
                            "post_id": 1709546,
                            "comment_id": 1586675,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709546#comment1586675_1709546",
                            "body": "yeah, haven&#39;t seen his reply before I&#39;ve implemented my code. the only difference indeed is obtaining this order. and I&#39;ve tested my code too :)"
                        },
                        {
                            "owner": {
                                "account_id": 19390,
                                "reputation": 116368,
                                "user_id": 45433,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Crescent Fresh"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257875351,
                            "post_id": 1709546,
                            "comment_id": 1586710,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709546#comment1586710_1709546",
                            "body": "@SilentGhost: you say in your answer the list will be sorted clockwise, but doesn&#39;t this actually sort it counterclockwise as I asked for?"
                        },
                        {
                            "owner": {
                                "account_id": 7405,
                                "reputation": 313805,
                                "user_id": 12855,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "SilentGhost"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257880824,
                            "post_id": 1709546,
                            "comment_id": 1587467,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709546#comment1587467_1709546",
                            "body": "@Crescent Fresh: sure, it sorts counter-clockwise, it was just a typo."
                        }
                    ],
                    "owner": {
                        "account_id": 7405,
                        "reputation": 313805,
                        "user_id": 12855,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "SilentGhost"
                    },
                    "comment_count": 4,
                    "is_accepted": true,
                    "score": 12,
                    "last_activity_date": 1428010718,
                    "last_edit_date": 1428010718,
                    "creation_date": 1257872763,
                    "answer_id": 1709546,
                    "question_id": 1709283,
                    "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709546#1709546",
                    "body": "<p>solution seems pretty straightforward:</p>\n\n<pre><code>&gt;&gt;&gt; import math\n&gt;&gt;&gt; mlat = sum(x['lat'] for x in l) / len(l)\n&gt;&gt;&gt; mlng = sum(x['lng'] for x in l) / len(l)\n&gt;&gt;&gt; def algo(x):\n    return (math.atan2(x['lat'] - mlat, x['lng'] - mlng) + 2 * math.pi) % (2*math.pi)\n\n&gt;&gt;&gt; l.sort(key=algo)\n</code></pre>\n\n<p>basically, <code>algo</code> normalises the input into the <code>[0, 2pi]</code> space and it would be naturally sorted \"counter-clockwise\". Note that the % operator and the * operator have the same precedence so the parenthesis around (2*math.pi) are important to get a valid result.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 34982,
                                "reputation": 46498,
                                "user_id": 1386054,
                                "user_type": "registered",
                                "accept_rate": 96,
                                "display_name": "Adrian McCarthy"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257873847,
                            "post_id": 1709577,
                            "comment_id": 1586505,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709577#comment1586505_1709577",
                            "body": "+1 because this explanation is clearer than mine and makes the assumption explicit"
                        },
                        {
                            "owner": {
                                "account_id": 19390,
                                "reputation": 116368,
                                "user_id": 45433,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Crescent Fresh"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257874158,
                            "post_id": 1709577,
                            "comment_id": 1586557,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709577#comment1586557_1709577",
                            "body": "@Curd: the footnote at the bottom of the question was trying to convey what you stated (didn&#39;t want to get into Lines of Lat/Lng in the question). Anyway, finding the opposing corners <code>(lat0, lat1)</code> and <code>(lng0, lng1)</code> is <i>itself</i> a search for minimum and maximum points (yielding SW and NE corners respectively), correct?"
                        },
                        {
                            "owner": {
                                "account_id": 46216,
                                "reputation": 12317,
                                "user_id": 136452,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Curd"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257945756,
                            "post_id": 1709577,
                            "comment_id": 1592601,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709577#comment1592601_1709577",
                            "body": "@Crescent Fresh: in your question above I don&#39;t understand what you mean by &quot;opposing corners...&quot;. With &quot;(lat0, lat1)&quot; I just meant the list of your two latitude values. The order doesn&#39;t matter."
                        },
                        {
                            "owner": {
                                "account_id": 19390,
                                "reputation": 116368,
                                "user_id": 45433,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Crescent Fresh"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1258339927,
                            "post_id": 1709577,
                            "comment_id": 1620568,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709577#comment1620568_1709577",
                            "body": "@Curd: in my scenario I have 4 coordinates, not 2. Finding the 2 that you speak of is an effort to find 2 out of the 4 that are opposite to each other."
                        }
                    ],
                    "owner": {
                        "account_id": 46216,
                        "reputation": 12317,
                        "user_id": 136452,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Curd"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1257873379,
                    "last_edit_date": 1257873379,
                    "creation_date": 1257873040,
                    "answer_id": 1709577,
                    "question_id": 1709283,
                    "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709577#1709577",
                    "body": "<p>Assuming that your \"rectangles\" are always parallel to the equator and meridians (that's what your example implies, but it's not stated explicitely), i.e. you have just two pairs of different lat and lng values: (lat0, lat1) and (lng0, lng1).</p>\n\n<p>You get following 4 corners:</p>\n\n<pre><code>NE: (lat = max(lat0, lat1), lng = max(lng0, lng1))\nNW: (lat = max(lat0, lat1), lng = min(lng0, lng1))\nSW: (lat = min(lat0, lat1), lng = min(lng0, lng1))\nSE: (lat = min(lat0, lat1), lng = max(lng0, lng1))\n</code></pre>\n\n<p>(this is not supposed to be python code)</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 19390,
                                "reputation": 116368,
                                "user_id": 45433,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Crescent Fresh"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257878543,
                            "post_id": 1709994,
                            "comment_id": 1587125,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709994#comment1587125_1709994",
                            "body": "I wonder if this works crossing the equator or prime meridian (where lat/lng flips from <code>-</code> to <code>+</code>)..."
                        },
                        {
                            "owner": {
                                "account_id": 19390,
                                "reputation": 116368,
                                "user_id": 45433,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Crescent Fresh"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257878980,
                            "post_id": 1709994,
                            "comment_id": 1587197,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709994#comment1587197_1709994",
                            "body": "Should work fine actually. Would have liked it better without the swapping though ;) +1"
                        },
                        {
                            "owner": {
                                "account_id": 46465,
                                "reputation": 48929,
                                "user_id": 137317,
                                "user_type": "registered",
                                "accept_rate": 92,
                                "display_name": "u0b34a0f6ae"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1257879440,
                            "post_id": 1709994,
                            "comment_id": 1587262,
                            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709994#comment1587262_1709994",
                            "body": "it is not possible without swapping: we need to sort north before south before we know which points are the southernmost, which we then sort reversely wrt east-west."
                        }
                    ],
                    "owner": {
                        "account_id": 46465,
                        "reputation": 48929,
                        "user_id": 137317,
                        "user_type": "registered",
                        "accept_rate": 92,
                        "display_name": "u0b34a0f6ae"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1257878002,
                    "last_edit_date": 1257878002,
                    "creation_date": 1257876426,
                    "answer_id": 1709994,
                    "question_id": 1709283,
                    "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise/1709994#1709994",
                    "body": "<p>It is easy. First, we sort the coordinates so we know in which order we have them, then we simply pick them out:</p>\n\n<p>Sort them first by lat then by lng, biggest first. Then we swap the last two:</p>\n\n<pre><code>L = [\n  { \"lat\": 34.495239, \"lng\": -118.127747 }, # north-west\n  { \"lat\": 34.495239, \"lng\": -117.147217 }, # north-east\n  { \"lat\": 34.095174, \"lng\": -117.147217 }, # south-east\n  { \"lat\": 34.095174, \"lng\": -118.127747 }  # south-west\n]\n\n\nL = sorted(L, key=lambda k: (-k[\"lat\"], -k[\"lng\"]))\n\nL[-2], L[-1] = L[-1], L[-2]\nimport pprint\npprint.pprint(L)\n</code></pre>\n\n<p>output</p>\n\n<pre><code>[{'lat': 34.495238999999998, 'lng': -117.147217},\n {'lat': 34.495238999999998, 'lng': -118.127747},\n {'lat': 34.095174, 'lng': -118.127747},\n {'lat': 34.095174, 'lng': -117.147217}]\n</code></pre>\n\n<p>(The minuses in the key function are there so that bigger values sort before smaller values. By sorting we put north before south, then east before west; to get the desired order we simply swap the two last (southern) values.)</p>\n"
                }
            ],
            "owner": {
                "account_id": 19390,
                "reputation": 116368,
                "user_id": 45433,
                "user_type": "registered",
                "accept_rate": 83,
                "display_name": "Crescent Fresh"
            },
            "comment_count": 0,
            "is_answered": true,
            "accepted_answer_id": 1709546,
            "answer_count": 7,
            "score": 10,
            "last_activity_date": 1428010718,
            "creation_date": 1257870766,
            "last_edit_date": 1257872234,
            "question_id": 1709283,
            "link": "https://stackoverflow.com/questions/1709283/how-can-i-sort-a-coordinate-list-for-a-rectangle-counterclockwise",
            "title": "How can I sort a coordinate list for a rectangle counterclockwise?",
            "body": "<p>I need to sort a coordinate list for a rectangle counterclockwise, and make the north-east corner the first coordinate. These are geographic coordinates (i.e. Longitude, Latitude) in decimal form.<sup>1</sup></p>\n\n<p>For example, here are the 4 corners of a rectangle, starting with the north-west corner and moving clockwise:</p>\n\n<pre><code>[\n  { \"lat\": 34.495239, \"lng\": -118.127747 }, # north-west\n  { \"lat\": 34.495239, \"lng\": -117.147217 }, # north-east\n  { \"lat\": 34.095174, \"lng\": -117.147217 }, # south-east\n  { \"lat\": 34.095174, \"lng\": -118.127747 }  # south-west\n]\n</code></pre>\n\n<p>I need to sort these counterclockwise and change the \"anchor\"/starting point to be north-east:</p>\n\n<pre><code>[\n  { \"lat\": 34.495239, \"lng\": -117.147217 }, # north-east\n  { \"lat\": 34.495239, \"lng\": -118.127747 }, # north-west\n  { \"lat\": 34.095174, \"lng\": -118.127747 }, # south-west\n  { \"lat\": 34.095174, \"lng\": -117.147217 }  # south-east\n]\n</code></pre>\n\n<p>I do not know what order the list will be in initially (i.e. clockwise or counterclockwise). I do not know which corner the first coordinate in the list represents.</p>\n\n<hr>\n\n<p><sup>1</sup><sub>This is not a true rectangle when mapped to the surface of the earth, however since I do have 2 opposing corners I am calling it a rectangle for readability. Shapes that wrap +180/-180 longitude or +90/-90 latitude are not an issue.</sub></p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 7957
}