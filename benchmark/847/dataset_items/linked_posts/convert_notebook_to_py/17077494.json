{
    "items": [
        {
            "tags": [
                "python",
                "jupyter-notebook",
                "ipython"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 542393,
                        "reputation": 25081,
                        "user_id": 992005,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "theta"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1371085388,
                    "post_id": 17077494,
                    "comment_id": 24699601,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline#comment24699601_17077494",
                    "body": "What do you mean by &quot;source of truth&quot;? IPython notebooks are just json files. You can load them and manipulate as Python dictionaries. For source code you should be iterating <code>input</code> keys where <code>cell_type</code> equals &#39;code&#39;. Have a look at this <a href=\"http://i.imgur.com/Z0jSc.png\" rel=\"nofollow noreferrer\">scheme</a>"
                },
                {
                    "owner": {
                        "account_id": 1407623,
                        "reputation": 4313,
                        "user_id": 1334909,
                        "user_type": "registered",
                        "display_name": "Stefan Krawczyk"
                    },
                    "reply_to_user": {
                        "account_id": 542393,
                        "reputation": 25081,
                        "user_id": 992005,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "theta"
                    },
                    "edited": false,
                    "score": 2,
                    "creation_date": 1371086246,
                    "post_id": 17077494,
                    "comment_id": 24699767,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline#comment24699767_17077494",
                    "body": "Well I want to store the .ipynb in a repository and not the .py files. So then as a &#39;build step&#39; I would convert the .ipynb to .py files for actual use by the automated system.  You&#39;re right, I could just load the json and output only the code cells, but I was wondering whether there was something out there already that did that for me :)"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 5835242,
                                "reputation": 2713,
                                "user_id": 4598520,
                                "user_type": "registered",
                                "accept_rate": 40,
                                "display_name": "jaimedash"
                            },
                            "edited": false,
                            "score": 12,
                            "creation_date": 1462293350,
                            "post_id": 19779226,
                            "comment_id": 61571415,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment61571415_19779226",
                            "body": "If you DO want one every save, in <code>jupyter</code> you can trigger <code>nbconvert</code> via pre- or post-save hooks: <code>ContentsManager.pre_save_hook</code> abd <code>FileContentsManager.post_save_hook</code>. You would add a post-save hook <code>jupyter nbconvert --to script [notebook]</code>"
                        },
                        {
                            "owner": {
                                "account_id": 3200124,
                                "reputation": 270,
                                "user_id": 2702341,
                                "user_type": "registered",
                                "display_name": "Sujen Shah"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1484674859,
                            "post_id": 19779226,
                            "comment_id": 70602976,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment70602976_19779226",
                            "body": "Is there a way to do the reverse i.e convert from a python script to a notebook. For ex - having some specialized docstrings that are parsed into cells ?"
                        },
                        {
                            "owner": {
                                "account_id": 5343587,
                                "reputation": 14829,
                                "user_id": 4259761,
                                "user_type": "registered",
                                "display_name": "openwonk"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1500681651,
                            "post_id": 19779226,
                            "comment_id": 77462630,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment77462630_19779226",
                            "body": "convert all notebooks in a folder <code>jupyter nbconvert --to script &#47;path&#47;to&#47;notebooks&#47;*.ipynb</code>"
                        },
                        {
                            "owner": {
                                "account_id": 233550,
                                "reputation": 14424,
                                "user_id": 499125,
                                "user_type": "registered",
                                "accept_rate": 74,
                                "display_name": "Some Noob Student"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1505871751,
                            "post_id": 19779226,
                            "comment_id": 79585883,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment79585883_19779226",
                            "body": "Does anyone know how to provide <a href=\"https://nbconvert.readthedocs.io/en/latest/config_options.html\" rel=\"nofollow noreferrer\">TemplateExporter</a> options to nbconvert? I&#39;m using <code>!jupyter nbconvert --to python &#39;jupi_demo.ipynb&#39; --stdout --TemplateExporter.exclude_markdown=True</code> on Jupyter 4.1.0 but it&#39;s complaining <code>Config option exclude_markdown not recognized by PythonExporter.</code>"
                        },
                        {
                            "owner": {
                                "account_id": 8392377,
                                "reputation": 3617,
                                "user_id": 6300703,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Rishabh Agrahari"
                            },
                            "edited": false,
                            "score": 13,
                            "creation_date": 1517395728,
                            "post_id": 19779226,
                            "comment_id": 84075585,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment84075585_19779226",
                            "body": "Thanks, it works!, but what if I don&#39;t want the <code># In[ ]:</code> type stuff in the script, I want it to be clean. Is there any way to do that?"
                        },
                        {
                            "owner": {
                                "account_id": 1636318,
                                "reputation": 14131,
                                "user_id": 1509695,
                                "user_type": "registered",
                                "accept_rate": 38,
                                "display_name": "matanox"
                            },
                            "reply_to_user": {
                                "account_id": 8392377,
                                "reputation": 3617,
                                "user_id": 6300703,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Rishabh Agrahari"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1533635847,
                            "post_id": 19779226,
                            "comment_id": 90408137,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment90408137_19779226",
                            "body": "@RishabhAgrahari did you find a way for that?"
                        },
                        {
                            "owner": {
                                "account_id": 511595,
                                "reputation": 34305,
                                "user_id": 3576984,
                                "user_type": "registered",
                                "accept_rate": 90,
                                "display_name": "MichaelChirico"
                            },
                            "reply_to_user": {
                                "account_id": 8392377,
                                "reputation": 3617,
                                "user_id": 6300703,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Rishabh Agrahari"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1536737695,
                            "post_id": 19779226,
                            "comment_id": 91527407,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment91527407_19779226",
                            "body": "@RishabhAgrahari check out here, you can just customize the linter <a href=\"https://jupyter-notebook.readthedocs.io/en/stable/extending/savehooks.html\" rel=\"nofollow noreferrer\">jupyter-notebook.readthedocs.io/en/stable/extending/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 3064540,
                                "reputation": 1501,
                                "user_id": 2713198,
                                "user_type": "registered",
                                "accept_rate": 76,
                                "display_name": "bytestorm"
                            },
                            "reply_to_user": {
                                "account_id": 8392377,
                                "reputation": 3617,
                                "user_id": 6300703,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Rishabh Agrahari"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1558940964,
                            "post_id": 19779226,
                            "comment_id": 99250699,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment99250699_19779226",
                            "body": "@RishabhAgrahari Following seems to work for me. <code>!jupyter nbconvert --to script --no-prompt notebook.ipynb</code>"
                        },
                        {
                            "owner": {
                                "account_id": 4163020,
                                "reputation": 2840,
                                "user_id": 3412660,
                                "user_type": "registered",
                                "display_name": "Rich Lysakowski PhD"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1563346686,
                            "post_id": 19779226,
                            "comment_id": 100664128,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment100664128_19779226",
                            "body": "Thanks to openwonk for the suggestion.  It worked like a charm:   convert all notebooks in a folder <code>jupyter nbconvert --to script &#47;path&#47;to&#47;notebooks&#47;*.ipynb</code>"
                        },
                        {
                            "owner": {
                                "account_id": 1342740,
                                "reputation": 476,
                                "user_id": 1472770,
                                "user_type": "registered",
                                "display_name": "alancalvitti"
                            },
                            "reply_to_user": {
                                "account_id": 3064540,
                                "reputation": 1501,
                                "user_id": 2713198,
                                "user_type": "registered",
                                "accept_rate": 76,
                                "display_name": "bytestorm"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1564756827,
                            "post_id": 19779226,
                            "comment_id": 101147426,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment101147426_19779226",
                            "body": "@bytestorm, <code>--no-prompt</code> didn&#39;t work for me via command line (<code># In[ ]:</code> still there)"
                        },
                        {
                            "owner": {
                                "account_id": 1342740,
                                "reputation": 476,
                                "user_id": 1472770,
                                "user_type": "registered",
                                "display_name": "alancalvitti"
                            },
                            "reply_to_user": {
                                "account_id": 3064540,
                                "reputation": 1501,
                                "user_id": 2713198,
                                "user_type": "registered",
                                "accept_rate": 76,
                                "display_name": "bytestorm"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1564776938,
                            "post_id": 19779226,
                            "comment_id": 101155794,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment101155794_19779226",
                            "body": "@bytestorm, also it is possible to convert the very notebook from which <code>nbconvert</code> is called?"
                        },
                        {
                            "owner": {
                                "account_id": 4163356,
                                "reputation": 490,
                                "user_id": 5265615,
                                "user_type": "registered",
                                "display_name": "naman"
                            },
                            "reply_to_user": {
                                "account_id": 1342740,
                                "reputation": 476,
                                "user_id": 1472770,
                                "user_type": "registered",
                                "display_name": "alancalvitti"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1566216925,
                            "post_id": 19779226,
                            "comment_id": 101574733,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment101574733_19779226",
                            "body": "@alancalvitti @RishabhAgrahari have you found a way to generate the python script of jupyter notebook without <code># In[ ]:</code>?"
                        },
                        {
                            "owner": {
                                "account_id": 1342740,
                                "reputation": 476,
                                "user_id": 1472770,
                                "user_type": "registered",
                                "display_name": "alancalvitti"
                            },
                            "reply_to_user": {
                                "account_id": 4163356,
                                "reputation": 490,
                                "user_id": 5265615,
                                "user_type": "registered",
                                "display_name": "naman"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1566222403,
                            "post_id": 19779226,
                            "comment_id": 101578007,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment101578007_19779226",
                            "body": "@naman, not yet. Also default auto-convert in JupyterLab similarly retains prompts."
                        },
                        {
                            "owner": {
                                "account_id": 11614889,
                                "reputation": 8084,
                                "user_id": 8508004,
                                "user_type": "registered",
                                "display_name": "Wayne"
                            },
                            "reply_to_user": {
                                "account_id": 3200124,
                                "reputation": 270,
                                "user_id": 2702341,
                                "user_type": "registered",
                                "display_name": "Sujen Shah"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1577991106,
                            "post_id": 19779226,
                            "comment_id": 105304817,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment105304817_19779226",
                            "body": "@Sujen Shah, see <a href=\"https://github.com/mwouts/jupytext#command-line-conversion\" rel=\"nofollow noreferrer\">Jupytext</a> for the reverse conversion."
                        },
                        {
                            "owner": {
                                "account_id": 2251893,
                                "reputation": 2405,
                                "user_id": 1983957,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Greg Hilston"
                            },
                            "reply_to_user": {
                                "account_id": 1342740,
                                "reputation": 476,
                                "user_id": 1472770,
                                "user_type": "registered",
                                "display_name": "alancalvitti"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1635212189,
                            "post_id": 19779226,
                            "comment_id": 123230237,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment123230237_19779226",
                            "body": "@alancalvitti @bytestorm the <code>--no-prompt</code> worked for me as expected, removing the <code># In[ ]:</code>... using <code>nbconvert==6.0.7</code>"
                        },
                        {
                            "owner": {
                                "account_id": 8917422,
                                "reputation": 152,
                                "user_id": 6655465,
                                "user_type": "registered",
                                "accept_rate": 25,
                                "display_name": "Eduardo Pignatelli"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1638807035,
                            "post_id": 19779226,
                            "comment_id": 124179960,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#comment124179960_19779226",
                            "body": "Can I rename the python file it is going to be saved into?"
                        }
                    ],
                    "owner": {
                        "account_id": 110536,
                        "reputation": 9372,
                        "user_id": 292461,
                        "user_type": "registered",
                        "accept_rate": 82,
                        "display_name": "wwwilliam"
                    },
                    "comment_count": 16,
                    "is_accepted": false,
                    "score": 628,
                    "last_activity_date": 1468083565,
                    "last_edit_date": 1468083565,
                    "creation_date": 1383607497,
                    "answer_id": 19779226,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/19779226#19779226",
                    "body": "<p>If you don't want to output a Python script every time you save, or you don't want to restart the IPython kernel:</p>\n\n<p>On the <strong>command line</strong>, you can use <a href=\"http://nbconvert.readthedocs.io/en/stable/usage.html\" rel=\"noreferrer\"><code>nbconvert</code></a>:</p>\n\n<pre><code>$ jupyter nbconvert --to script [YOUR_NOTEBOOK].ipynb\n</code></pre>\n\n<p>As a bit of a hack, <strong>you can even call the above command <em>in</em> an IPython notebook</strong> by pre-pending <code>!</code> (used for any command line argument). Inside a notebook:</p>\n\n<pre><code>!jupyter nbconvert --to script config_template.ipynb\n</code></pre>\n\n<p>Before <code>--to script</code> was <a href=\"https://github.com/ipython/ipython/commit/b28ec91e43c9ec34f8a09124706189a72be6652d\" rel=\"noreferrer\">added</a>, the option was <code>--to python</code> or <code>--to=python</code>, but it was <a href=\"https://github.com/ipython/ipython/commit/b98d516ba65c\" rel=\"noreferrer\">renamed</a> in the move toward a language-agnostic notebook system.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 4051448,
                        "reputation": 720,
                        "user_id": 3330853,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "justanr"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1424850018,
                    "last_edit_date": 1424850018,
                    "creation_date": 1412387726,
                    "answer_id": 26188879,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/26188879#26188879",
                    "body": "<p>You can do this from the IPython API.</p>\n\n<pre><code>from IPython.nbformat import current as nbformat\nfrom IPython.nbconvert import PythonExporter\n\nfilepath = 'path/to/my_notebook.ipynb'\nexport_path = 'path/to/my_notebook.py'\n\nwith open(filepath) as fh:\n    nb = nbformat.reads_json(fh.read())\n\nexporter = PythonExporter()\n\n# source is a tuple of python source code\n# meta contains metadata\nsource, meta = exporter.from_notebook_node(nb)\n\nwith open(export_path, 'w+') as fh:\n    fh.writelines(source)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7908,
                                "reputation": 22132,
                                "user_id": 13930,
                                "user_type": "registered",
                                "accept_rate": 43,
                                "display_name": "dacracot"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1475505520,
                            "post_id": 30776383,
                            "comment_id": 66957863,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/30776383#comment66957863_30776383",
                            "body": "Best answer if you do not want to install any of the Jupyter tools."
                        },
                        {
                            "owner": {
                                "account_id": 875948,
                                "reputation": 4067,
                                "user_id": 925592,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "RufusVS"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1559243995,
                            "post_id": 30776383,
                            "comment_id": 99368908,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/30776383#comment99368908_30776383",
                            "body": "I like this.  But I found out when I download .py  format from Jupyter notebooks, it uses UNIX line endings even though I&#39;m on windows.  To generate the same, add the <code>newlines=&#39;\\n&#39;</code> as a third argument in the open output file call. (Python 3.x)"
                        },
                        {
                            "owner": {
                                "account_id": 1732090,
                                "reputation": 618,
                                "user_id": 1585486,
                                "user_type": "registered",
                                "display_name": "Pablo Adames"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1597017424,
                            "post_id": 30776383,
                            "comment_id": 111989172,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/30776383#comment111989172_30776383",
                            "body": "This answer opens the possibility to read tags and extract only those cells that have it. Harder to do via the command line alone."
                        }
                    ],
                    "owner": {
                        "account_id": 2739652,
                        "reputation": 2123,
                        "user_id": 2361465,
                        "user_type": "registered",
                        "display_name": "Valentas"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 27,
                    "last_activity_date": 1434013820,
                    "creation_date": 1434013820,
                    "answer_id": 30776383,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/30776383#30776383",
                    "body": "<p>Here is a quick and dirty way to extract the code from V3 or V4 ipynb without using ipython. It does not check cell types, etc.</p>\n\n<pre><code>import sys,json\n\nf = open(sys.argv[1], 'r') #input.ipynb\nj = json.load(f)\nof = open(sys.argv[2], 'w') #output.py\nif j[\"nbformat\"] &gt;=4:\n        for i,cell in enumerate(j[\"cells\"]):\n                of.write(\"#cell \"+str(i)+\"\\n\")\n                for line in cell[\"source\"]:\n                        of.write(line)\n                of.write('\\n\\n')\nelse:\n        for i,cell in enumerate(j[\"worksheets\"][0][\"cells\"]):\n                of.write(\"#cell \"+str(i)+\"\\n\")\n                for line in cell[\"input\"]:\n                        of.write(line)\n                of.write('\\n\\n')\n\nof.close()\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 9460864,
                                "reputation": 81,
                                "user_id": 7034616,
                                "user_type": "registered",
                                "display_name": "BarryC"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1476769383,
                            "post_id": 38248141,
                            "comment_id": 106096771,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/38248141#comment106096771_38248141",
                            "body": "&#39;s last line of code, fh.writelines(source.encode(&#39;utf-8&#39;)) gives &#39;TypeError: write() argument must be str, not int&#39; fh.writelines(source) works though."
                        },
                        {
                            "owner": {
                                "account_id": 2372182,
                                "reputation": 283,
                                "user_id": 2076544,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "LFoos24"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1624900704,
                            "post_id": 38248141,
                            "comment_id": 120478341,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/38248141#comment120478341_38248141",
                            "body": "Had the same issue, fixed by dropping the <code>.encode(&#39;utf-8&#39;)</code> piece on the last line."
                        },
                        {
                            "owner": {
                                "account_id": 19238201,
                                "reputation": 6077,
                                "user_id": 14058726,
                                "user_type": "registered",
                                "display_name": "mosc9575"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1637764385,
                            "post_id": 38248141,
                            "comment_id": 123913609,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/38248141#comment123913609_38248141",
                            "body": "I solved the last line problem writing <code>fh.write(source)</code> instead of <code>fh.writelines(...)</code>."
                        },
                        {
                            "owner": {
                                "account_id": 7057525,
                                "reputation": 7785,
                                "user_id": 5404226,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Ahx"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1709050853,
                            "post_id": 38248141,
                            "comment_id": 137629658,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/38248141#comment137629658_38248141",
                            "body": "How do we understand when we need to use &#39;utf-8&#39;?"
                        }
                    ],
                    "owner": {
                        "account_id": 1058766,
                        "reputation": 1747,
                        "user_id": 1060851,
                        "user_type": "registered",
                        "accept_rate": 81,
                        "display_name": "Spawnrider"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 21,
                    "last_activity_date": 1467901801,
                    "creation_date": 1467901801,
                    "answer_id": 38248141,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/38248141#38248141",
                    "body": "<p>Following the previous example but with the <strong>new nbformat lib version</strong> : </p>\n\n<pre><code>import nbformat\nfrom nbconvert import PythonExporter\n\ndef convertNotebook(notebookPath, modulePath):\n\n  with open(notebookPath) as fh:\n    nb = nbformat.reads(fh.read(), nbformat.NO_CONVERT)\n\n  exporter = PythonExporter()\n  source, meta = exporter.from_notebook_node(nb)\n\n  with open(modulePath, 'w+') as fh:\n    fh.writelines(source.encode('utf-8'))\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1742196,
                                "reputation": 639,
                                "user_id": 1593286,
                                "user_type": "registered",
                                "display_name": "trojjer"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1511272313,
                            "post_id": 40198778,
                            "comment_id": 81782996,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/40198778#comment81782996_40198778",
                            "body": "I had to add the <code>--to script</code> argument to avoid the default HTML output in Jupiter 4.4.0."
                        }
                    ],
                    "owner": {
                        "account_id": 2654550,
                        "reputation": 9544,
                        "user_id": 2295516,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "Don Smythe"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1477187608,
                    "last_edit_date": 1477187608,
                    "creation_date": 1477187202,
                    "answer_id": 40198778,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/40198778#40198778",
                    "body": "<p>For converting all *.ipynb format files in current directory to python scripts recursively:</p>\n\n<pre><code>for i in *.ipynb **/*.ipynb; do \n    echo \"$i\"\n    jupyter nbconvert  \"$i\" \"$i\"\ndone\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 4255796,
                                "reputation": 1576,
                                "user_id": 3481534,
                                "user_type": "registered",
                                "display_name": "Andrey"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1608722916,
                            "post_id": 49965478,
                            "comment_id": 115665766,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/49965478#comment115665766_49965478",
                            "body": "Or you can run:  ipython nbconvert --to script *.ipynb"
                        },
                        {
                            "owner": {
                                "account_id": 21020495,
                                "reputation": 187,
                                "user_id": 15446959,
                                "user_type": "registered",
                                "display_name": "user15420598"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1640717340,
                            "post_id": 49965478,
                            "comment_id": 124642094,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/49965478#comment124642094_49965478",
                            "body": "to convert programmatically as in a function use this syntax  : subprocess.run([&#39;jupyter&#39;, &#39;nbconvert&#39;,ipynb_file,&quot;--to&quot;, &quot;script&quot;,&quot;--output&quot;,r&#39;temp_converted_py&#39;],shell=True)  note that ipynb_file is a variable"
                        }
                    ],
                    "owner": {
                        "account_id": 8842478,
                        "reputation": 3376,
                        "user_id": 6604502,
                        "user_type": "registered",
                        "display_name": "B\u0159etislav H&#225;jek"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 148,
                    "last_activity_date": 1524398848,
                    "last_edit_date": 1524398848,
                    "creation_date": 1524397005,
                    "answer_id": 49965478,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/49965478#49965478",
                    "body": "<p>If you want to convert all <code>*.ipynb</code> files from current directory to python script, you can run the command like this:</p>\n\n<pre><code>jupyter nbconvert --to script *.ipynb\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1732090,
                                "reputation": 618,
                                "user_id": 1585486,
                                "user_type": "registered",
                                "display_name": "Pablo Adames"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1597018859,
                            "post_id": 52256248,
                            "comment_id": 111989382,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/52256248#comment111989382_52256248",
                            "body": "The link is broken"
                        }
                    ],
                    "owner": {
                        "account_id": 4323885,
                        "reputation": 377,
                        "user_id": 3531215,
                        "user_type": "registered",
                        "display_name": "Jiren Jin"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1597108338,
                    "last_edit_date": 1597108338,
                    "creation_date": 1536576813,
                    "answer_id": 52256248,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/52256248#52256248",
                    "body": "<p>I had this problem and tried to find the solution online. Though I found some solutions, they still have some problems, e.g., the annoying <code>Untitled.txt</code> auto-creation when you start a new notebook from the dashboard.</p>\n<p>So eventually I wrote <a href=\"https://gist.github.com/jirenjin/29244faa896ac788357a46338f78b580\" rel=\"nofollow noreferrer\">my own solution</a>:</p>\n<pre><code>import io\nimport os\nimport re\nfrom nbconvert.exporters.script import ScriptExporter\nfrom notebook.utils import to_api_path\n\n\ndef script_post_save(model, os_path, contents_manager, **kwargs):\n    &quot;&quot;&quot;Save a copy of notebook to the corresponding language source script.\n\n    For example, when you save a `foo.ipynb` file, a corresponding `foo.py`\n    python script will also be saved in the same directory.\n\n    However, existing config files I found online (including the one written in\n    the official documentation), will also create an `Untitile.txt` file when\n    you create a new notebook, even if you have not pressed the &quot;save&quot; button.\n    This is annoying because we usually will rename the notebook with a more\n    meaningful name later, and now we have to rename the generated script file,\n    too!\n\n    Therefore we make a change here to filter out the newly created notebooks\n    by checking their names. For a notebook which has not been given a name,\n    i.e., its name is `Untitled.*`, the corresponding source script will not be\n    saved. Note that the behavior also applies even if you manually save an\n    &quot;Untitled&quot; notebook. The rationale is that we usually do not want to save\n    scripts with the useless &quot;Untitled&quot; names.\n    &quot;&quot;&quot;\n    # only process for notebooks\n    if model[&quot;type&quot;] != &quot;notebook&quot;:\n        return\n\n    script_exporter = ScriptExporter(parent=contents_manager)\n    base, __ = os.path.splitext(os_path)\n\n    # do nothing if the notebook name ends with `Untitled[0-9]*`\n    regex = re.compile(r&quot;Untitled[0-9]*$&quot;)\n    if regex.search(base):\n        return\n\n    script, resources = script_exporter.from_filename(os_path)\n    script_fname = base + resources.get('output_extension', '.txt')\n\n    log = contents_manager.log\n    log.info(&quot;Saving script at /%s&quot;,\n             to_api_path(script_fname, contents_manager.root_dir))\n\n    with io.open(script_fname, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:\n        f.write(script)\n\nc.FileContentsManager.post_save_hook = script_post_save\n</code></pre>\n<p>To use this script, you can add it to <code>~/.jupyter/jupyter_notebook_config.py</code> :)</p>\n<p>Note that you may need to restart the jupyter notebook / lab for it to work.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 11614889,
                                "reputation": 8084,
                                "user_id": 8508004,
                                "user_type": "registered",
                                "display_name": "Wayne"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1578681297,
                            "post_id": 59568527,
                            "comment_id": 105531159,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/59568527#comment105531159_59568527",
                            "body": "Apparently there is also ipynb-py-convert, see <a href=\"https://stackoverflow.com/a/59685825/8508004\">here</a>."
                        },
                        {
                            "owner": {
                                "account_id": 14532638,
                                "reputation": 1820,
                                "user_id": 11512643,
                                "user_type": "registered",
                                "display_name": "mac179"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1585670026,
                            "post_id": 59568527,
                            "comment_id": 107840682,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/59568527#comment107840682_59568527",
                            "body": "&#39;jupytext&#39; is not recognized as an internal or external command, operable program or batch file.???"
                        },
                        {
                            "owner": {
                                "account_id": 11614889,
                                "reputation": 8084,
                                "user_id": 8508004,
                                "user_type": "registered",
                                "display_name": "Wayne"
                            },
                            "reply_to_user": {
                                "account_id": 14532638,
                                "reputation": 1820,
                                "user_id": 11512643,
                                "user_type": "registered",
                                "display_name": "mac179"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1585685795,
                            "post_id": 59568527,
                            "comment_id": 107848517,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/59568527#comment107848517_59568527",
                            "body": "Have you installed it @AmineChadi . See <a href=\"https://github.com/mwouts/jupytext#installation\" rel=\"nofollow noreferrer\">here</a> for how to do that. If you are using it via a notebook as your command line interface, you can just run <code>%pip install jupytext</code> in your notebook."
                        }
                    ],
                    "owner": {
                        "account_id": 11614889,
                        "reputation": 8084,
                        "user_id": 8508004,
                        "user_type": "registered",
                        "display_name": "Wayne"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 24,
                    "last_activity_date": 1605887820,
                    "last_edit_date": 1605887820,
                    "creation_date": 1577991031,
                    "answer_id": 59568527,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/59568527#59568527",
                    "body": "<p><a href=\"https://jupytext.readthedocs.io/en/latest/using-cli.html\" rel=\"noreferrer\">Jupytext</a> is nice to have in your toolchain for such conversions. It allows not only conversion from a notebook to a script, but you can go back again from the script to notebook as well. And even have that notebook produced in executed form.</p>\n<pre><code>jupytext --to py notebook.ipynb                 # convert notebook.ipynb to a .py file\njupytext --to notebook notebook.py              # convert notebook.py to an .ipynb file with no outputs\njupytext --to notebook --execute notebook.py    # convert notebook.py to an .ipynb file and run it \n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 3193310,
                        "reputation": 1080,
                        "user_id": 3091286,
                        "user_type": "registered",
                        "display_name": "John"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1592354306,
                    "creation_date": 1592354306,
                    "answer_id": 62419684,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/62419684#62419684",
                    "body": "<p>There's a very nice package called <a href=\"https://nbdev.fast.ai\" rel=\"nofollow noreferrer\">nb_dev</a> which is designed for authoring Python packages in Jupyter Notebooks.  Like <code>nbconvert,</code> it can turn a notebook into a .py file, but it is more flexible and powerful because it has a lot of nice additional authoring features to help you develop tests, documentation, and register packages on PyPI.  It was developed by the fast.ai folks.  </p>\n\n<p>It has a bit of a learning curve, but the documentation is good and it is not difficult overall.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 1732090,
                        "reputation": 618,
                        "user_id": 1585486,
                        "user_type": "registered",
                        "display_name": "Pablo Adames"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1614724381,
                    "last_edit_date": 1614724381,
                    "creation_date": 1597021086,
                    "answer_id": 63332815,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/63332815#63332815",
                    "body": "<p>The following example turns an Iron Python Notebook called <code>a_notebook.ipynb</code> into a python script called <code>a_python_script.py</code> leaving out the cells tagged with the keyword <code>remove</code>, which I add manually to the cells that I don't want to end up in the script, leaving out visualizations and other steps that once I am done with the notebook I don't need to be executed by the script.</p>\n<pre><code>import nbformat as nbf\nfrom nbconvert.exporters import PythonExporter\nfrom nbconvert.preprocessors import TagRemovePreprocessor\n\nwith open(&quot;a_notebook.ipynb&quot;, 'r', encoding='utf-8') as f:\n    the_notebook_nodes = nbf.read(f, as_version = 4)\n\ntrp = TagRemovePreprocessor()\n\ntrp.remove_cell_tags = (&quot;remove&quot;,)\n\npexp = PythonExporter()\n\npexp.register_preprocessor(trp, enabled= True)\n\nthe_python_script, meta = pexp.from_notebook_node(the_notebook_nodes)\n\nwith open(&quot;a_python_script.py&quot;, 'w', encoding='utf-8') as f:\n    f.writelines(the_python_script)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7810736,
                                "reputation": 85,
                                "user_id": 5906999,
                                "user_type": "registered",
                                "display_name": "Manjit P."
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1704332951,
                            "post_id": 65751034,
                            "comment_id": 137080086,
                            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/65751034#comment137080086_65751034",
                            "body": "I updated to notebook 7 few days back and was surprised not to find the download as .py option. Hard to understand why this default option is removed to convert notebook to a .py file, it was so handy. After spending good amount of time, found that only this option is working for me to convert a notebook to a .py file."
                        }
                    ],
                    "owner": {
                        "account_id": 8659671,
                        "reputation": 451,
                        "user_id": 6482617,
                        "user_type": "registered",
                        "display_name": "Sachin Hatikankan"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 12,
                    "last_activity_date": 1610809245,
                    "creation_date": 1610809245,
                    "answer_id": 65751034,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/65751034#65751034",
                    "body": "<p>I understand this is an old thread. I have faced the same issue and wanted to convert the .pynb file to .py file via command line.</p>\n<p>My search took me to <a href=\"https://pypi.org/project/ipynb-py-convert/\" rel=\"noreferrer\">ipynb-py-convert</a></p>\n<p>By following below steps I was able to get .py file</p>\n<ol>\n<li>Install &quot;pip install ipynb-py-convert&quot;</li>\n<li>Go to the directory where the ipynb file is saved via command prompt</li>\n<li>Enter the command</li>\n</ol>\n<p><code>&gt; ipynb-py-convert YourFileName.ipynb YourFilename.py</code></p>\n<p>Eg:. ipynb-py-convert getting-started-with-kaggle-titanic-problem.ipynb getting-started-with-kaggle-titanic-problem.py</p>\n<p>Above command will create a python script with the name &quot;YourFileName.py&quot; and as per our example it will create <code>getting-started-with-kaggle-titanic-problem.py</code> file</p>\n"
                },
                {
                    "owner": {
                        "account_id": 8049062,
                        "reputation": 7619,
                        "user_id": 6068294,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "ClimateUnboxed"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1665047357,
                    "last_edit_date": 1665047357,
                    "creation_date": 1623412237,
                    "answer_id": 67936520,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/67936520#67936520",
                    "body": "<p><strong>no file/directory error</strong></p>\n<p>On my mint [ubuntu] system at work, even though jupyter was already installed and notebooks worked, <code>jupyter nbconvert --to script</code> gave the error <em>no file/directory</em> until I did a separate</p>\n<pre><code>sudo apt-get install jupyter-nbconvert\n</code></pre>\n<p>Then all was fine with the conversion.  I just wanted to add this in case anyone hits the same error (for me it was confusing as I thought the no file error referred to the notebook, which was definitely there in the local directory, took me a while to realize the subcommand was not installed).</p>\n"
                },
                {
                    "owner": {
                        "account_id": 2247617,
                        "reputation": 748,
                        "user_id": 1980630,
                        "user_type": "registered",
                        "display_name": "Robert Vanden Eynde"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": -2,
                    "last_activity_date": 1623983118,
                    "creation_date": 1623983118,
                    "answer_id": 68028557,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/68028557#68028557",
                    "body": "<p>The <code>%notebook foo.ipynb</code> magic command will export the current IPython to &quot;foo.ipynb&quot;.</p>\n<p>More info by typing <code>%notebook?</code></p>\n"
                },
                {
                    "owner": {
                        "account_id": 12608504,
                        "reputation": 434,
                        "user_id": 9168533,
                        "user_type": "registered",
                        "display_name": "yaach"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1635167169,
                    "creation_date": 1635167169,
                    "answer_id": 69708610,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/69708610#69708610",
                    "body": "<p>Using nbconvert 6.07 and jupyter client 6.1.12:</p>\n<p>Convert jupyter notebook to python script</p>\n<pre><code>$ jupyter nbconvert mynotebook.ipynb --to python\n</code></pre>\n<p>Convert jupyter notebook to python script specifying output filename</p>\n<pre><code>$ jupyter nbconvert mynotebook.ipnb --to python --output myscript.py\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 16453115,
                        "reputation": 610,
                        "user_id": 11886045,
                        "user_type": "registered",
                        "display_name": "YazanGhafir"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1668608892,
                    "last_edit_date": 1668608892,
                    "creation_date": 1658149812,
                    "answer_id": 73022847,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/73022847#73022847",
                    "body": "<p>The given solution works only for converting a single .py file. Here is a solution that converts all .py files in a directory and sub-directories.</p>\n<p>First, you need to install the tool that convert only one file at a time like ipynb-py-convert</p>\n<blockquote>\n<p>pip install ipynb-py-convert</p>\n</blockquote>\n<p>Then cd into the place of your folder having the .py files and directories. Then we run the tool recursively on all files in the directory and subdirectories:</p>\n<p>In powershell:</p>\n<blockquote>\n<p>foreach ($f in Get-ChildItem &quot;.&quot; -Filter *.ipynb -Recurse){ ipynb-py-convert $f.FullName &quot;$($f.FullName.Substring(0,$f.FullName.Length-6)).py&quot;}</p>\n</blockquote>\n<p>Now if you would like to convert the otherway around from .ipynb to .py also with batch convert, you can run:</p>\n<blockquote>\n<p>foreach ($f in Get-ChildItem &quot;.&quot; -Filter *.py -Recurse){ ipynb-py-convert $f.FullName &quot;$($f.FullName.Substring(0,$f.FullName.Length-3)).ipynb&quot;}</p>\n</blockquote>\n<p>This helped me a lot while exploring .py files. I make a copy of the project, run this code and quickly in Jupiter test different parts of the code as cells and so on. I hope it helps more people.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 921596,
                        "reputation": 9567,
                        "user_id": 986793,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Neal Fultz"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1664383406,
                    "creation_date": 1664383406,
                    "answer_id": 73885069,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/73885069#73885069",
                    "body": "<p>Here is a <code>jq</code> solution that could be situationally useful. Remember, notebooks are just json.</p>\n<pre><code>jq -r '.cells[] | select(.cell_type  == &quot;code&quot;) | .source[] | rtrimstr(&quot;\\n&quot;)' $filename\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2453488,
                        "reputation": 5529,
                        "user_id": 5605919,
                        "user_type": "registered",
                        "display_name": "pplonski"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1668684692,
                    "creation_date": 1668684692,
                    "answer_id": 74474731,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/74474731#74474731",
                    "body": "<p>I found that there are 2 ways to <a href=\"https://mljar.com/blog/convert-jupyter-notebook-python/\" rel=\"nofollow noreferrer\">convert Jupyter Notebook to plain Python script</a> with command line. Below is the example Jupyter notebook and output from both tools.</p>\n<p><a href=\"https://i.stack.imgur.com/A3MPR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A3MPR.png\" alt=\"enter image description here\" /></a></p>\n<h2>1. Use nbconvert</h2>\n<p>The <code>nbconvert</code> is tool that is used in Jupyter Notebook User Interface in <code>Download as</code> functionality. It can be used as command line tool:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>jupyter nbconvert --to python notebook.ipynb\n</code></pre>\n<p>Example Python script:\n<a href=\"https://i.stack.imgur.com/teo8B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/teo8B.png\" alt=\"enter image description here\" /></a></p>\n<h2>2. Use jupytext</h2>\n<p>The <a href=\"https://github.com/mwouts/jupytext\" rel=\"nofollow noreferrer\"><code>jupytext</code></a> is a package to keep <code>.ipynb</code> file synchronized with <code>.py</code> file. It can be also used to convert <code>.ipynb</code> files in command line. It supports several types of conversion:</p>\n<p>Convert to Python script with light format</p>\n<pre class=\"lang-bash prettyprint-override\"><code>jupytext --to py notebook.ipynb             \n</code></pre>\n<p>Example python script:</p>\n<p><a href=\"https://i.stack.imgur.com/LIx0Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LIx0Z.png\" alt=\"enter image description here\" /></a></p>\n<p>Convert to Python script with percent format</p>\n<pre><code>jupytext --to py:percent notebook.ipynb \n</code></pre>\n<p>Example Python script:</p>\n<p><a href=\"https://i.stack.imgur.com/f2s8U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f2s8U.png\" alt=\"enter image description here\" /></a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 13654328,
                        "reputation": 856,
                        "user_id": 9851307,
                        "user_type": "registered",
                        "display_name": "Jeremy"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1673627831,
                    "creation_date": 1673627831,
                    "answer_id": 75112007,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/75112007#75112007",
                    "body": "<p>I have built a function to achieve this. The user does not have to install anything to use it.</p>\n<pre><code>#!/usr/bin/python\n\n\n# A short routine to convert a Jupyter Notebook to a Python file\n\nimport json\n\ndef ipynb_to_py(input_ipynb_file,output_py_file=None):\n    &quot;&quot;&quot;\n    Generate a Python script (.py) that includes all source code from the input Jupyter notebook (.ipynb).\n    \n    The user can input a Jupyter Notebook file from the current working directory or from a path.\n    \n    If the name for output Python file is not specified, \n    the output file name will copy the file name of the input Jupyter Notebook, \n    but the file exention will be changed from &quot;.ipynb&quot; chanegd to &quot;.py&quot;.\n    And the output Python file will be saved at the same directory of the input Jupyter Notebook.\n    For example:\n    ipynb_to_py(&quot;test-jupyternotebook.ipynb&quot;)\n    ipynb_to_py(&quot;./test-input-dir/test-jupyternotebook.ipynb&quot;)\n    \n    The user can also specify an output file name that ends with &quot;.py&quot;.\n    If the output file name is provided, but no path to output file is added, \n    the file will be saved at the current working directory.\n    For example:\n    ipynb_to_py(&quot;test-jupyternotebook.ipynb&quot;,&quot;test1.py&quot;)\n    ipynb_to_py(&quot;./test-input-dir/test-jupyternotebook.ipynb&quot;,&quot;test2.py&quot;)\n        \n    The user can save out the file at a target directory by adding a path to the output file.\n    For example: \n    ipynb_to_py(&quot;test-jupyternotebook.ipynb&quot;,&quot;./test-outputdir/test3.py&quot;)\n    ipynb_to_py(&quot;./test-input-dir/test-jupyternotebook.ipynb&quot;,&quot;./test-output-dir/test4.py&quot;)\n    \n    This function does not edit or delete the original input Jupyter Notebook file.\n    \n    Args:\n    -----\n        input_ipynb_file: The file name string for the Jupyter Notebook (ends with &quot;.ipynb&quot;)\n        output_py_file (optional): The file name for Python file to be created (ends with &quot;.py&quot;). \n    \n    Returns:\n    --------\n        A Python file containing all source code in the Jupyter Notebook.\n        \n    Example usages:\n    ---------------\n        ipynb_to_py(&quot;test-jupyternotebook.ipynb&quot;)\n        ipynb_to_py(&quot;./test-input-dir/test-jupyternotebook.ipynb&quot;)\n        ipynb_to_py(&quot;test-jupyternotebook.ipynb&quot;,&quot;test1.py&quot;)\n        ipynb_to_py(&quot;test-jupyternotebook.ipynb&quot;,&quot;./test-outputdir/test2.py&quot;)\n        ipynb_to_py(&quot;test-jupyternotebook.ipynb&quot;,&quot;./test-outputdir/test3.py&quot;)\n        ipynb_to_py(&quot;./test-input-dir/test-jupyternotebook.ipynb&quot;,&quot;./test-output-dir/test4.py&quot;)\n             \n    &quot;&quot;&quot;\n    # Check if the input file is a Jupyter Notebook\n    if input_ipynb_file.endswith(&quot;.ipynb&quot;):\n        \n        # Open the input Jupyter Notebook file\n        notebook = open(input_ipynb_file)\n        \n        # Read its content in the json format\n        notebook_content = json.load(notebook)\n\n        # Only extract the source code snippet from each cell in the input Jupyter Notebook\n        source_code_snippets = [cell['source'] for cell in notebook_content['cells']]\n        \n        # If the name for output Python file is not specified,\n        # The name of input Jupyter Notebook will be used after changing &quot;.ipynb&quot; to &quot;.py&quot;.\n        if output_py_file == None:\n            output_py_file = input_ipynb_file.split('.ipynb')[0]+&quot;.py&quot;\n        else:\n            pass\n\n        # Create a Python script to save out all the extracted source code snippets\n        output_file = open(output_py_file,'w')\n\n        # Print out each line in each source code snippet to the output file\n        for snippet in source_code_snippets:\n            for line in snippet:\n                # Use end='' to avoid creating unwanted gaps between lines\n                print(line,end = '',file = output_file)\n            # At end of each snippet, move to the next line before printing the next one\n            print('',sep = '\\n',file=output_file)\n\n        # Close the output file\n        output_file.close()\n        print(&quot;The path to output file:&quot;,output_py_file)\n        \n    else:\n        print(&quot;The input file must be a Jupyter Notebook (in .ipynb format)!&quot;)\n        \ndef main():\n    pass\n\nif __name__ == &quot;__main__&quot;:\n    main()\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 17934506,
                        "reputation": 348,
                        "user_id": 13031105,
                        "user_type": "registered",
                        "display_name": "abdelrahman aboneda"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1680611713,
                    "creation_date": 1680611713,
                    "answer_id": 75929458,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/75929458#75929458",
                    "body": "<pre><code>jupyter nbconvert main.ipynb --to python\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1817378,
                        "reputation": 3554,
                        "user_id": 1652219,
                        "user_type": "registered",
                        "accept_rate": 87,
                        "display_name": "Esben Eickhardt"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1705998832,
                    "creation_date": 1705998832,
                    "answer_id": 77864903,
                    "question_id": 17077494,
                    "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline/77864903#77864903",
                    "body": "<h3>Common unflexible way</h3>\n<p>Most would suggest the <strong>nbconvert</strong> method, but the output is also kinda ugly containing tons of comments:</p>\n<pre><code>jupyter nbconvert --to script [YOUR_NOTEBOOK].ipynb\n</code></pre>\n<h3>Cell level extractions</h3>\n<p>As notebooks are basically JSON, then you can write your own module extracting specific cells of your notebooks using tags like &quot;###EXTRACT###&quot; as the first line of the cells you want to extract.</p>\n<p>Here is how to use the module I wrote:</p>\n<pre><code># Importing Custom Module\nfrom ipynb_exporter import NotebookModuleBuilder as nmb\n\n# Exporting labeled cells\nnmb().ipynb_to_file(ipynb_path=&quot;mynotebook.ipynb&quot;,\n                    label=&quot;###EXTRACT###&quot;,\n                    py_path=&quot;mynotebookcells.py&quot;)\n</code></pre>\n<p>Here is the module:</p>\n<pre><code>import json\n\nclass NotebookModuleBuilder():\n    &quot;&quot;&quot; Class helps you extract code cells from ipynb-files by using tags &quot;&quot;&quot;\n    \n    @staticmethod\n    def _read_json(path: str) -&gt; dict:\n        &quot;&quot;&quot; Reads a json-file and returns a dictionary\n            \n        Args:\n            path: Path to jupyter notebook (.ipynb)\n            \n        Returns:\n            dictionary representation of notebook\n        &quot;&quot;&quot;\n        file = open(path, mode= &quot;r&quot;, encoding= &quot;utf-8&quot;)\n        myfile = file.read()\n        myjson = json.loads(myfile)\n        file.close()\n        return myjson\n\n    @staticmethod\n    def _get_code_cells(dictionary: dict) -&gt; list:\n        &quot;&quot;&quot; Finds cells of ipynb with code\n        \n        Args:\n            dictionary: Dictionary from importing a ipynb notebook\n            \n        Returns:\n            List of code cells\n        &quot;&quot;&quot;\n        code_cells = [cell for cell in dictionary['cells'] if cell['cell_type']=='code']\n        return code_cells\n\n    @staticmethod\n    def _get_labeled_cells(code_cells: dict, label=&quot;###EXPORT###&quot;) -&gt; dict:\n        &quot;&quot;&quot; Gets cells with the specified label\n        \n        Args:\n            code_cells: Dictionary with code cells\n            \n        Returns:\n            Dictionary with labeled cells\n        &quot;&quot;&quot;\n        label = label + &quot;\\n&quot;\n        sourced_cells = [cell for cell in code_cells if len(cell['source']) &gt; 0]\n        labeled_cells = [cell['source'] for cell in sourced_cells if cell['source'][0]==label]\n        return labeled_cells\n\n    @staticmethod\n    def _write_to_file(labeled_cells: dict, output_file: str) -&gt; None:\n        &quot;&quot;&quot; Writes the labeled cells to a file\n        \n        Args:\n            labeled_cells: Dictionary with cells that should be written to a file\n        &quot;&quot;&quot;\n        flattened_lists = '\\n\\n'.join([''.join(labeled_cell[1:]) for labeled_cell in labeled_cells])\n        file = open(output_file, 'w')\n        file.write(flattened_lists)\n        file.close()\n    \n    def ipynb_to_file(self, ipynb_path: str, py_path: str, label: str = '###EXTRACT###') -&gt; None:\n        &quot;&quot;&quot; Writes cells labeled with ###EXTRACT### in ipynb into a py-file\n        \n        Args:\n            label: Lable that in first line of a cell to match\n            ipynb_path: Input path to ipynb-notebook\n            py_path: Output path to py-file\n        &quot;&quot;&quot;\n        json_file = self._read_json(ipynb_path)\n        code_cells = self._get_code_cells(json_file)\n        labeled_cells = self._get_labeled_cells(code_cells,label)\n        self._write_to_file(labeled_cells, py_path)\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 1407623,
                "reputation": 4313,
                "user_id": 1334909,
                "user_type": "registered",
                "display_name": "Stefan Krawczyk"
            },
            "comment_count": 2,
            "is_answered": true,
            "answer_count": 20,
            "score": 428,
            "last_activity_date": 1705998832,
            "creation_date": 1371082982,
            "last_edit_date": 1682853287,
            "question_id": 17077494,
            "link": "https://stackoverflow.com/questions/17077494/how-do-i-convert-a-ipython-notebook-into-a-python-file-via-commandline",
            "title": "How do I convert a IPython Notebook into a Python file via commandline?",
            "body": "<p>I'm looking at using the <strong>*.ipynb</strong> files as the source of truth and programmatically 'compiling' them into .py files for scheduled jobs/tasks. </p>\n\n<p>The only way I understand to do this is via the GUI. Is there a way to do it via command line?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 8389
}