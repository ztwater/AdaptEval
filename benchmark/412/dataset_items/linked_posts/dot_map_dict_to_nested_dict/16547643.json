{
    "items": [
        {
            "tags": [
                "python",
                "dictionary",
                "pyside",
                "defaultdict"
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2761663,
                                "reputation": 105,
                                "user_id": 2378440,
                                "user_type": "registered",
                                "display_name": "python_head"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1368547602,
                            "post_id": 16547685,
                            "comment_id": 23769472,
                            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#comment23769472_16547685",
                            "body": "Yay, that&#39;s gorgeous! Thanks for your quick response.Now I just gotta teach it to slice the dict of dicts."
                        },
                        {
                            "owner": {
                                "account_id": 2761663,
                                "reputation": 105,
                                "user_id": 2378440,
                                "user_type": "registered",
                                "display_name": "python_head"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1368548324,
                            "post_id": 16547685,
                            "comment_id": 23769881,
                            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#comment23769881_16547685",
                            "body": "Could you advice the slicing code (getting a set of keys depending on a chosen higher level key) as easy? It seems I tend to put the recursion in odd places, while your code has just shocked me with its simplicity."
                        },
                        {
                            "owner": {
                                "account_id": 965649,
                                "reputation": 213496,
                                "user_id": 989121,
                                "user_type": "registered",
                                "accept_rate": 93,
                                "display_name": "georg"
                            },
                            "reply_to_user": {
                                "account_id": 2761663,
                                "reputation": 105,
                                "user_id": 2378440,
                                "user_type": "registered",
                                "display_name": "python_head"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1368548462,
                            "post_id": 16547685,
                            "comment_id": 23769953,
                            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#comment23769953_16547685",
                            "body": "@python_head: I&#39;m not entirely sure what you mean... Given the above struct the and key <code>one</code> - what should the slicing code return?"
                        },
                        {
                            "owner": {
                                "account_id": 2761663,
                                "reputation": 105,
                                "user_id": 2378440,
                                "user_type": "registered",
                                "display_name": "python_head"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1368548786,
                            "post_id": 16547685,
                            "comment_id": 23770132,
                            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#comment23770132_16547685",
                            "body": "kind of getting the levels of the dict: level1 = [one,five,twelve]; if chosen level1=one, then level2 = [two,six]; if level2=two, then level3=[three], and so on. If empty, return empty list/dict."
                        },
                        {
                            "owner": {
                                "account_id": 965649,
                                "reputation": 213496,
                                "user_id": 989121,
                                "user_type": "registered",
                                "accept_rate": 93,
                                "display_name": "georg"
                            },
                            "reply_to_user": {
                                "account_id": 2761663,
                                "reputation": 105,
                                "user_id": 2378440,
                                "user_type": "registered",
                                "display_name": "python_head"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1368550633,
                            "post_id": 16547685,
                            "comment_id": 23771145,
                            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#comment23771145_16547685",
                            "body": "@python_head: looks like you need <code>dict.keys()</code>: <code>tree[&#39;one&#39;].keys()</code> returns <code>[&#39;six&#39;, &#39;two&#39;]</code> (the order is not guaranteed though)."
                        },
                        {
                            "owner": {
                                "account_id": 2761663,
                                "reputation": 105,
                                "user_id": 2378440,
                                "user_type": "registered",
                                "display_name": "python_head"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1368607766,
                            "post_id": 16547685,
                            "comment_id": 23792293,
                            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#comment23792293_16547685",
                            "body": "The expected result should be a list [two, six]. But my problem is to go further, e.g. for the level tree[&#39;one&#39;][&#39;two&#39;] the result is [&#39;three&#39;]. And keep going deeper as long as there&#39;re non-empty keys, I believe. As I&#39;ve mentioned, I wonder if recursive calls are adequate here, or I am gonna overkill it again :) Thanks for your attention."
                        },
                        {
                            "owner": {
                                "account_id": 165044,
                                "reputation": 4286,
                                "user_id": 388185,
                                "user_type": "registered",
                                "accept_rate": 84,
                                "display_name": "Alkanshel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1416806940,
                            "post_id": 16547685,
                            "comment_id": 42701658,
                            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#comment42701658_16547685",
                            "body": "After running this code, &quot;tree&quot; is totally empty. I don&#39;t understand how this is supposed to work."
                        },
                        {
                            "owner": {
                                "account_id": 965649,
                                "reputation": 213496,
                                "user_id": 989121,
                                "user_type": "registered",
                                "accept_rate": 93,
                                "display_name": "georg"
                            },
                            "reply_to_user": {
                                "account_id": 165044,
                                "reputation": 4286,
                                "user_id": 388185,
                                "user_type": "registered",
                                "accept_rate": 84,
                                "display_name": "Alkanshel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1416818422,
                            "post_id": 16547685,
                            "comment_id": 42705736,
                            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#comment42705736_16547685",
                            "body": "@Amalgovinus: make sure you run the code exactly as is, without any changes."
                        },
                        {
                            "owner": {
                                "account_id": 5608179,
                                "reputation": 699,
                                "user_id": 5406956,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "ConanG"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1503434571,
                            "post_id": 16547685,
                            "comment_id": 78611308,
                            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#comment78611308_16547685",
                            "body": "I find it hard to understand this code, could you explain? How should I change this so that the end are strings instead of empty dicts?"
                        },
                        {
                            "owner": {
                                "account_id": 965649,
                                "reputation": 213496,
                                "user_id": 989121,
                                "user_type": "registered",
                                "accept_rate": 93,
                                "display_name": "georg"
                            },
                            "reply_to_user": {
                                "account_id": 5608179,
                                "reputation": 699,
                                "user_id": 5406956,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "ConanG"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1503446051,
                            "post_id": 16547685,
                            "comment_id": 78615046,
                            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#comment78615046_16547685",
                            "body": "@ConanG: this code basically creates a &quot;key-only&quot; structure. if we bring values in play, it will be more complicated."
                        },
                        {
                            "owner": {
                                "account_id": 5608179,
                                "reputation": 699,
                                "user_id": 5406956,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "ConanG"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1503473492,
                            "post_id": 16547685,
                            "comment_id": 78623762,
                            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#comment78623762_16547685",
                            "body": "@georg: Thanks. I will look into other ways of doing that."
                        }
                    ],
                    "owner": {
                        "account_id": 965649,
                        "reputation": 213496,
                        "user_id": 989121,
                        "user_type": "registered",
                        "accept_rate": 93,
                        "display_name": "georg"
                    },
                    "comment_count": 11,
                    "is_accepted": true,
                    "score": 29,
                    "last_activity_date": 1368546921,
                    "creation_date": 1368546921,
                    "answer_id": 16547685,
                    "question_id": 16547643,
                    "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/16547685#16547685",
                    "body": "<pre><code>ls = ['one.two.three.four', 'one.six.seven.eight', 'five.nine.ten', 'twelve.zero']\ntree = {}\n\nfor item in ls:\n    t = tree\n    for part in item.split('.'):\n        t = t.setdefault(part, {})\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>{\n \"twelve\": {\n  \"zero\": {}\n }, \n \"five\": {\n  \"nine\": {\n   \"ten\": {}\n  }\n }, \n \"one\": {\n  \"six\": {\n   \"seven\": {\n    \"eight\": {}\n   }\n  }, \n  \"two\": {\n   \"three\": {\n    \"four\": {}\n   }\n  }\n }\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 6943717,
                        "reputation": 337,
                        "user_id": 5329070,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Lucas Niewohner"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1623785126,
                    "creation_date": 1623785126,
                    "answer_id": 67992332,
                    "question_id": 16547643,
                    "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python/67992332#67992332",
                    "body": "<p>While this is beyond the reach of the original question, some comments mentioned a form of this algorithm that incorporates values. I came up with this to that end:</p>\n<pre><code>def dictionaryafy(self, in_dict):\n    tree = {}\n    for key, value in in_dict.items():\n        t = tree\n        parts = key.split(&quot;.&quot;)\n        for part in parts[:-1]:\n            t = t.setdefault(part, {})\n        t[parts[-1]] = value\n    return tree\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 2761663,
                "reputation": 105,
                "user_id": 2378440,
                "user_type": "registered",
                "display_name": "python_head"
            },
            "comment_count": 0,
            "is_answered": true,
            "accepted_answer_id": 16547685,
            "answer_count": 2,
            "score": 10,
            "last_activity_date": 1623785126,
            "creation_date": 1368546769,
            "question_id": 16547643,
            "link": "https://stackoverflow.com/questions/16547643/convert-a-list-of-delimited-strings-to-a-tree-nested-dict-using-python",
            "title": "convert a list of delimited strings to a tree/nested dict, using python",
            "body": "<p>I am trying to convert a list of dot-separated strings, e.g.</p>\n\n<pre><code>['one.two.three.four', 'one.six.seven.eight', 'five.nine.ten', 'twelve.zero']\n</code></pre>\n\n<p>into a tree (nested lists or dicts - anything that is easy to walk through).\nThe real data happens to have 1 to 4 dot-separated parts  of different length and has 2200 records in total.\nMy actual goal is to fill in the set of 4 QComboBox'es with this data, in manner that the 1st QComboBox is filled with first set items ['one', 'five', 'twelve'] (no duplicates). Then depending on the chosen item, the 2nd QComboBox is filled with its related items: for 'one' it would be: ['two', 'six'], and so on, if there's another nested level.</p>\n\n<p>So far I've got a working list -> nested dicts solution, but it's horribly slow, since I use regular dict(). And I seem to have a trouble to redesign it to a defaultdict in a way to easily work out filling the ComboBoxes properly.</p>\n\n<p>My current code:</p>\n\n<pre><code>def list2tree(m):\n    tmp = {}\n    for i in range(len(m)):\n        if m.count('.') == 0:\n            return m\n        a = m.split('.', 1)\n        try:\n            tmp[a[0]].append(list2tree(a[1]))\n        except (KeyError, AttributeError):\n            tmp[a[0]] = list2tree(a[1])\n    return tmp\n\nmain_dict = {}\ni = 0\nfor m in methods:\n    main_dict = list2tree(m)\n    i += 1\n    if (i % 100) == 0: print i, len(methods)\nprint main_dict, i, len(methods)\n</code></pre>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 9366
}