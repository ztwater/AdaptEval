{
    "items": [
        {
            "tags": [
                "python",
                "uri",
                "filepath"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 10930,
                        "reputation": 788903,
                        "user_id": 20862,
                        "user_type": "registered",
                        "accept_rate": 50,
                        "display_name": "Ignacio Vazquez-Abrams"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1305201641,
                    "post_id": 5977576,
                    "comment_id": 6898334,
                    "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path#comment6898334_5977576",
                    "body": "Are you going to be doing more than just reading from it?"
                },
                {
                    "owner": {
                        "account_id": 114350,
                        "reputation": 11986,
                        "user_id": 300745,
                        "user_type": "registered",
                        "accept_rate": 93,
                        "display_name": "Gearoid Murphy"
                    },
                    "reply_to_user": {
                        "account_id": 10930,
                        "reputation": 788903,
                        "user_id": 20862,
                        "user_type": "registered",
                        "accept_rate": 50,
                        "display_name": "Ignacio Vazquez-Abrams"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1305207048,
                    "post_id": 5977576,
                    "comment_id": 6900116,
                    "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path#comment6900116_5977576",
                    "body": "No, I want to pass that uri or equivalent form into the python modules for path manipulation"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 516916,
                                "reputation": 3033,
                                "user_id": 1626229,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "fossfreedom"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1353889685,
                            "post_id": 5977628,
                            "comment_id": 18571878,
                            "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/5977628#comment18571878_5977628",
                            "body": "@JakobBowyer - the .path in the second line should be removed otherwise you are just returning a string to variable p instead of the tuple that you need to process in the third line."
                        },
                        {
                            "owner": {
                                "account_id": 1748411,
                                "reputation": 1598,
                                "user_id": 1598080,
                                "user_type": "registered",
                                "display_name": "Iwan Aucamp"
                            },
                            "edited": false,
                            "score": 13,
                            "creation_date": 1565611792,
                            "post_id": 5977628,
                            "comment_id": 101395125,
                            "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/5977628#comment101395125_5977628",
                            "body": "The valid file URI for <code>C:\\test\\doc.txt</code> is <code>file:&#47;&#47;&#47;C:&#47;test&#47;doc.txt</code> not <code>file:&#47;&#47;C:&#47;test&#47;doc.txt</code> - see <a href=\"https://tools.ietf.org/html/rfc8089#section-2\" rel=\"nofollow noreferrer\">IETF RFC 8089: The &quot;file&quot; URI Scheme / 2. Syntax</a> and run this in recent python 3 <code>import pathlib; print(pathlib.PureWindowsPath(&quot;C:\\\\test\\\\doc.txt&quot;).as_uri())</code> so this answer is not accurate."
                        }
                    ],
                    "owner": {
                        "account_id": 210792,
                        "reputation": 34318,
                        "user_id": 462604,
                        "user_type": "registered",
                        "accept_rate": 68,
                        "display_name": "Jakob Bowyer"
                    },
                    "comment_count": 2,
                    "is_accepted": true,
                    "score": 26,
                    "last_activity_date": 1576084324,
                    "last_edit_date": 1576084324,
                    "creation_date": 1305201625,
                    "answer_id": 5977628,
                    "question_id": 5977576,
                    "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/5977628#5977628",
                    "body": "<p>Use <a href=\"https://docs.python.org/library/urllib.parse.html#urllib.parse.urlparse\" rel=\"noreferrer\"><code>urllib.parse.urlparse</code></a> to get the path from the URI:</p>\n\n<pre><code>import os\nfrom urllib.parse import urlparse\np = urlparse('file://C:/test/doc.txt')\nfinal_path = os.path.abspath(os.path.join(p.netloc, p.path))\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "user_type": "does_not_exist",
                                "display_name": "user3064538"
                            },
                            "reply_to_user": {
                                "account_id": 1748411,
                                "reputation": 1598,
                                "user_id": 1598080,
                                "user_type": "registered",
                                "display_name": "Iwan Aucamp"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1576085044,
                            "post_id": 15048213,
                            "comment_id": 104786862,
                            "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/15048213#comment104786862_15048213",
                            "body": "@IwanAucamp can you explain why?"
                        },
                        {
                            "owner": {
                                "user_type": "does_not_exist",
                                "display_name": "user3064538"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1576085346,
                            "post_id": 15048213,
                            "comment_id": 104787004,
                            "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/15048213#comment104787004_15048213",
                            "body": "Consider using <a href=\"https://docs.python.org/library/urllib.parse.html#urllib.parse.unquote_plus\" rel=\"nofollow noreferrer\"><code>urllib.parse.unquote_plus</code></a> which is &quot;like <code>unquote()</code>, but also replace plus signs with spaces&quot;."
                        },
                        {
                            "owner": {
                                "account_id": 1748411,
                                "reputation": 1598,
                                "user_id": 1598080,
                                "user_type": "registered",
                                "display_name": "Iwan Aucamp"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1576137257,
                            "post_id": 15048213,
                            "comment_id": 104803065,
                            "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/15048213#comment104803065_15048213",
                            "body": "@Boris because the path returned for windows file URIs starts with a slash <code>unquote(urlparse(&#39;file:&#47;&#47;&#47;C:&#47;Program Files&#47;Steam&#47;&#39;).path)</code> -&gt; <code>&#39;&#47;C:&#47;Program Files&#47;Steam&#47;&#39;</code>"
                        },
                        {
                            "owner": {
                                "account_id": 13231734,
                                "reputation": 931,
                                "user_id": 9555168,
                                "user_type": "registered",
                                "display_name": "fsevenm"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1596477085,
                            "post_id": 15048213,
                            "comment_id": 111817554,
                            "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/15048213#comment111817554_15048213",
                            "body": "Perfect for my linux environment"
                        }
                    ],
                    "owner": {
                        "account_id": 964221,
                        "reputation": 914,
                        "user_id": 987968,
                        "user_type": "registered",
                        "display_name": "colton7909"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 30,
                    "last_activity_date": 1576084873,
                    "last_edit_date": 1576084873,
                    "creation_date": 1361675044,
                    "answer_id": 15048213,
                    "question_id": 5977576,
                    "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/15048213#15048213",
                    "body": "<p>The solution from @Jakob Bowyer doesn't convert <a href=\"https://en.wikipedia.org/wiki/Percent-encoding\" rel=\"noreferrer\">URL encoded characters</a> to regular UTF-8 characters. For that you need to use <a href=\"https://docs.python.org/library/urllib.parse.html#urllib.parse.unquote\" rel=\"noreferrer\"><code>urllib.parse.unquote</code></a>.</p>\n\n<pre><code>&gt;&gt;&gt; from urllib.parse import unquote, urlparse\n&gt;&gt;&gt; unquote(urlparse('file:///home/user/some%20file.txt').path)\n'/home/user/some file.txt'\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1298433,
                        "reputation": 115,
                        "user_id": 1248852,
                        "user_type": "registered",
                        "display_name": "Mike"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1557010725,
                    "creation_date": 1557010725,
                    "answer_id": 55987489,
                    "question_id": 5977576,
                    "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/55987489#55987489",
                    "body": "<p>The solution from @colton7909 is mostly correct and helped me get to this answer, but has some import errors with Python 3. That and I think this is a better way to deal with the <code>'file://'</code> part of the URL than simply chopping off the first 7 characters. So I feel this is the most idiomatic way to do this using the standard library:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import urllib.parse\nurl_data = urllib.parse.urlparse('file:///home/user/some%20file.txt')\npath = urllib.parse.unquote(url_data.path)\n</code></pre>\n\n<p>This example should produce the string <code>'/home/user/some file.txt'</code></p>\n"
                },
                {
                    "owner": {
                        "account_id": 1748411,
                        "reputation": 1598,
                        "user_id": 1598080,
                        "user_type": "registered",
                        "display_name": "Iwan Aucamp"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1568057144,
                    "last_edit_date": 1633597028,
                    "creation_date": 1565620256,
                    "answer_id": 57463161,
                    "question_id": 5977576,
                    "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/57463161#57463161",
                    "body": "<p>To convert a file uri to a path with python (specific to 3, I can make for python 2 if someone really wants it):</p>\n<ol>\n<li><p>Parse the uri with <code>urllib.parse.urlparse</code></p>\n</li>\n<li><p>Unquote the path component of the parsed uri with <code>urllib.parse.unquote</code></p>\n</li>\n<li><p>then ...</p>\n</li>\n</ol>\n<p>a. If path is a windows path and starts with <code>/</code>: strip the first character of unquoted path component (path component of <code>file:///C:/some/file.txt</code> is <code>/C:/some/file.txt</code> which is not interpreted to be equivalent to <code>C:\\some\\file.txt</code> by <code>pathlib.PureWindowsPath</code>)</p>\n<p>b. Otherwise just use the unquoted path component as is.</p>\n<p>Here is a function that does this:</p>\n<pre class=\"lang-python prettyprint-override\"><code>import urllib\nimport pathlib\n\ndef file_uri_to_path(file_uri, path_class=pathlib.PurePath):\n    &quot;&quot;&quot;\n    This function returns a pathlib.PurePath object for the supplied file URI.\n\n    :param str file_uri: The file URI ...\n    :param class path_class: The type of path in the file_uri. By default it uses\n        the system specific path pathlib.PurePath, to force a specific type of path\n        pass pathlib.PureWindowsPath or pathlib.PurePosixPath\n    :returns: the pathlib.PurePath object\n    :rtype: pathlib.PurePath\n    &quot;&quot;&quot;\n    windows_path = isinstance(path_class(),pathlib.PureWindowsPath)\n    file_uri_parsed = urllib.parse.urlparse(file_uri)\n    file_uri_path_unquoted = urllib.parse.unquote(file_uri_parsed.path)\n    if windows_path and file_uri_path_unquoted.startswith(&quot;/&quot;):\n        result = path_class(file_uri_path_unquoted[1:])\n    else:\n        result = path_class(file_uri_path_unquoted)\n    if result.is_absolute() == False:\n        raise ValueError(&quot;Invalid file uri {} : resulting path {} not absolute&quot;.format(\n            file_uri, result))\n    return result\n</code></pre>\n<p>Usage examples (ran on linux):</p>\n<pre class=\"lang-python prettyprint-override\"><code>&gt;&gt;&gt; file_uri_to_path(&quot;file:///etc/hosts&quot;)\nPurePosixPath('/etc/hosts')\n\n&gt;&gt;&gt; file_uri_to_path(&quot;file:///etc/hosts&quot;, pathlib.PurePosixPath)\nPurePosixPath('/etc/hosts')\n\n&gt;&gt;&gt; file_uri_to_path(&quot;file:///C:/Program Files/Steam/&quot;, pathlib.PureWindowsPath)\nPureWindowsPath('C:/Program Files/Steam')\n\n&gt;&gt;&gt; file_uri_to_path(&quot;file:/proc/cpuinfo&quot;, pathlib.PurePosixPath)\nPurePosixPath('/proc/cpuinfo')\n\n&gt;&gt;&gt; file_uri_to_path(&quot;file:c:/system32/etc/hosts&quot;, pathlib.PureWindowsPath)\nPureWindowsPath('c:/system32/etc/hosts')\n</code></pre>\n<p>This function works for windows and posix file URIs and it will handle file URIs without an authority section. It will however NOT do validation of the URI's authority so this will not be honoured:</p>\n<p><a href=\"https://www.rfc-editor.org/rfc/rfc8089#section-2\" rel=\"nofollow noreferrer\">IETF RFC 8089: The &quot;file&quot; URI Scheme / 2. Syntax</a></p>\n<blockquote>\n<p>The &quot;host&quot; is the fully qualified domain name of the system on which\nthe file is accessible.  This allows a client on another system to\nknow that it cannot access the file system, or perhaps that it needs\nto use some other local mechanism to access the file.</p>\n</blockquote>\n<p>Validation (pytest) for the function:</p>\n<pre class=\"lang-python prettyprint-override\"><code>import os\nimport pytest\n\ndef validate(file_uri, expected_windows_path, expected_posix_path):\n    if expected_windows_path is not None:\n        expected_windows_path_object = pathlib.PureWindowsPath(expected_windows_path)\n    if expected_posix_path is not None:\n        expected_posix_path_object = pathlib.PurePosixPath(expected_posix_path)\n\n    if expected_windows_path is not None:\n        if os.name == &quot;nt&quot;:\n            assert file_uri_to_path(file_uri) == expected_windows_path_object\n        assert file_uri_to_path(file_uri, pathlib.PureWindowsPath) == expected_windows_path_object\n\n    if expected_posix_path is not None:\n        if os.name != &quot;nt&quot;:\n            assert file_uri_to_path(file_uri) == expected_posix_path_object\n        assert file_uri_to_path(file_uri, pathlib.PurePosixPath) == expected_posix_path_object\n\n\ndef test_some_paths():\n    validate(pathlib.PureWindowsPath(r&quot;C:\\Windows\\System32\\Drivers\\etc\\hosts&quot;).as_uri(),\n        expected_windows_path=r&quot;C:\\Windows\\System32\\Drivers\\etc\\hosts&quot;,\n        expected_posix_path=r&quot;/C:/Windows/System32/Drivers/etc/hosts&quot;)\n\n    validate(pathlib.PurePosixPath(r&quot;/C:/Windows/System32/Drivers/etc/hosts&quot;).as_uri(),\n        expected_windows_path=r&quot;C:\\Windows\\System32\\Drivers\\etc\\hosts&quot;,\n        expected_posix_path=r&quot;/C:/Windows/System32/Drivers/etc/hosts&quot;)\n\n    validate(pathlib.PureWindowsPath(r&quot;C:\\some dir\\some file&quot;).as_uri(),\n        expected_windows_path=r&quot;C:\\some dir\\some file&quot;,\n        expected_posix_path=r&quot;/C:/some dir/some file&quot;)\n\n    validate(pathlib.PurePosixPath(r&quot;/C:/some dir/some file&quot;).as_uri(),\n        expected_windows_path=r&quot;C:\\some dir\\some file&quot;,\n        expected_posix_path=r&quot;/C:/some dir/some file&quot;)\n\ndef test_invalid_url():\n    with pytest.raises(ValueError) as excinfo:\n        validate(r&quot;file://C:/test/doc.txt&quot;,\n            expected_windows_path=r&quot;test\\doc.txt&quot;,\n            expected_posix_path=r&quot;/test/doc.txt&quot;)\n        assert &quot;is not absolute&quot; in str(excinfo.value)\n\ndef test_escaped():\n    validate(r&quot;file:///home/user/some%20file.txt&quot;,\n        expected_windows_path=None,\n        expected_posix_path=r&quot;/home/user/some file.txt&quot;)\n    validate(r&quot;file:///C:/some%20dir/some%20file.txt&quot;,\n        expected_windows_path=&quot;C:\\some dir\\some file.txt&quot;,\n        expected_posix_path=r&quot;/C:/some dir/some file.txt&quot;)\n\ndef test_no_authority():\n    validate(r&quot;file:c:/path/to/file&quot;,\n        expected_windows_path=r&quot;c:\\path\\to\\file&quot;,\n        expected_posix_path=None)\n    validate(r&quot;file:/path/to/file&quot;,\n        expected_windows_path=None,\n        expected_posix_path=r&quot;/path/to/file&quot;)\n</code></pre>\n<hr />\n<p>This contribution is licensed (in addition to any other licenses which may apply) under the <a href=\"https://opensource.org/licenses/0BSD\" rel=\"nofollow noreferrer\">Zero-Clause BSD License (0BSD)</a> license</p>\n<p>Permission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.</p>\n<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES\nWITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\nMERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\nANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\nWHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\nACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\nOR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</p>\n<hr />\n<p><a href=\"http://creativecommons.org/publicdomain/zero/1.0/\" rel=\"nofollow noreferrer\"><img src=\"https://licensebuttons.net/p/zero/1.0/88x31.png\" alt=\"Public Domain\" /></a></p>\n<p>To the extent possible under law, Iwan Aucamp has waived all copyright and related or neighboring rights to this stackexchange contribution. This work is published from: Norway.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 11911203,
                                "reputation": 734,
                                "user_id": 8716401,
                                "user_type": "registered",
                                "display_name": "dshanahan"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1609870023,
                            "post_id": 61922504,
                            "comment_id": 115954930,
                            "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/61922504#comment115954930_61922504",
                            "body": "according to the <a href=\"https://docs.python.org/3/library/urllib.request.html#urllib.request.url2pathname\" rel=\"nofollow noreferrer\">documentation</a> <code>url2pathname</code> uses <code>unquote</code> so <code>url2pathname(parsed.path)</code> should be sufficient"
                        },
                        {
                            "owner": {
                                "account_id": 6886024,
                                "reputation": 841,
                                "user_id": 5553928,
                                "user_type": "registered",
                                "display_name": "Vader B"
                            },
                            "reply_to_user": {
                                "account_id": 11911203,
                                "reputation": 734,
                                "user_id": 8716401,
                                "user_type": "registered",
                                "display_name": "dshanahan"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1622239393,
                            "post_id": 61922504,
                            "comment_id": 119744928,
                            "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/61922504#comment119744928_61922504",
                            "body": "Your solution breaks when the encoded pathname includes urlencode-like characters. E.g. the filename <code>foo%20bar.baz</code> will be correctly encoded by your solution to <code>foo%2520bar.baz</code>, but incorrectly decoded to <code>foo bar.baz</code>. This happens because of the unmatched <code>unquote</code> inside <code>url2pathname</code>, as pointed out by @dshanahan"
                        }
                    ],
                    "owner": {
                        "account_id": 5994175,
                        "reputation": 1305,
                        "user_id": 4709363,
                        "user_type": "registered",
                        "accept_rate": 0,
                        "display_name": "Ryan de Kleer"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 13,
                    "last_activity_date": 1590007286,
                    "creation_date": 1590007286,
                    "answer_id": 61922504,
                    "question_id": 5977576,
                    "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/61922504#61922504",
                    "body": "<p>Of all the answers so far, I found none that catch edge cases, doesn't require branching, are both 2/3 compatible, <em>and</em> cross-platform.</p>\n\n<p>In short, this does the job, using only builtins:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>try:\n    from urllib.parse import urlparse, unquote\n    from urllib.request import url2pathname\nexcept ImportError:\n    # backwards compatability\n    from urlparse import urlparse\n    from urllib import unquote, url2pathname\n\n\ndef uri_to_path(uri):\n    parsed = urlparse(uri)\n    host = \"{0}{0}{mnt}{0}\".format(os.path.sep, mnt=parsed.netloc)\n    return os.path.normpath(\n        os.path.join(host, url2pathname(unquote(parsed.path)))\n    )\n</code></pre>\n\n<p>The tricky bit (I found) was when working in Windows with paths specifying a host.  This is a non-issue outside of Windows: network locations in *NIX can only be reached via paths <em>after</em> being mounted to the root of the filesystem.</p>\n\n<p>From <a href=\"https://en.wikipedia.org/wiki/File_URI_scheme\" rel=\"noreferrer\">Wikipedia</a>: \nA file URI takes the form of <code>file://host/path</code> , where host is the fully qualified domain name of the system on which the path is accessible [...]. If host is omitted, it is taken to be \"localhost\".</p>\n\n<p>With that in mind, I make it a rule to ALWAYS prefix the path with the <code>netloc</code> provided by <code>urlparse</code>, before passing it to <code>os.path.abspath</code>, which is <strong>necessary</strong> as it removes any resulting redundant slashes (<code>os.path.normpath</code>, which also claims to fix the slashes, <strong>can get a little over-zealous in Windows</strong>, hence the use of <code>abspath</code>).</p>\n\n<p>The other crucial component in the conversion is using <code>unquote</code> to escape/decode the URL percent-encoding, which your filesystem won't otherwise understand.  Again, this might be a bigger issue on Windows, which allows things like <code>$</code> and <em>spaces</em> in paths, which will have been encoded in the file URI.</p>\n\n<p>For a demo:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\nfrom pathlib import Path   # This demo requires pip install for Python &lt; 3.4\nimport sys\ntry:\n    from urllib.parse import urlparse, unquote\n    from urllib.request import url2pathname\nexcept ImportError:  # backwards compatability:\n    from urlparse import urlparse\n    from urllib import unquote, url2pathname\n\nDIVIDER = \"-\" * 30\n\nif sys.platform == \"win32\":  # WINDOWS\n    filepaths = [\n        r\"C:\\Python27\\Scripts\\pip.exe\",\n        r\"C:\\yikes\\paths with spaces.txt\",\n        r\"\\\\localhost\\c$\\WINDOWS\\clock.avi\",\n        r\"\\\\networkstorage\\homes\\rdekleer\",\n    ]\nelse:  # *NIX\n    filepaths = [\n        os.path.expanduser(\"~/.profile\"),\n        \"/usr/share/python3/py3versions.py\",\n    ]\n\nfor path in filepaths:\n    uri = Path(path).as_uri()\n    parsed = urlparse(uri)\n    host = \"{0}{0}{mnt}{0}\".format(os.path.sep, mnt=parsed.netloc)\n    normpath = os.path.normpath(\n        os.path.join(host, url2pathname(unquote(parsed.path)))\n    )\n    absolutized = os.path.abspath(\n        os.path.join(host, url2pathname(unquote(parsed.path)))\n    )\n    result = (\"{DIVIDER}\"\n              \"\\norig path:       \\t{path}\"\n              \"\\nconverted to URI:\\t{uri}\"\n              \"\\nrebuilt normpath:\\t{normpath}\"\n              \"\\nrebuilt abspath:\\t{absolutized}\").format(**locals())\n    print(result)\n    assert path == absolutized\n</code></pre>\n\n<p>Results (WINDOWS):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>------------------------------\norig path:              C:\\Python27\\Scripts\\pip.exe\nconverted to URI:       file:///C:/Python27/Scripts/pip.exe\nrebuilt normpath:       C:\\Python27\\Scripts\\pip.exe\nrebuilt abspath:        C:\\Python27\\Scripts\\pip.exe\n------------------------------\norig path:              C:\\yikes\\paths with spaces.txt\nconverted to URI:       file:///C:/yikes/paths%20with%20spaces.txt\nrebuilt normpath:       C:\\yikes\\paths with spaces.txt\nrebuilt abspath:        C:\\yikes\\paths with spaces.txt\n------------------------------\norig path:              \\\\localhost\\c$\\WINDOWS\\clock.avi\nconverted to URI:       file://localhost/c%24/WINDOWS/clock.avi\nrebuilt normpath:       \\localhost\\c$\\WINDOWS\\clock.avi\nrebuilt abspath:        \\\\localhost\\c$\\WINDOWS\\clock.avi\n------------------------------\norig path:              \\\\networkstorage\\homes\\rdekleer\nconverted to URI:       file://networkstorage/homes/rdekleer\nrebuilt normpath:       \\networkstorage\\homes\\rdekleer\nrebuilt abspath:        \\\\networkstorage\\homes\\rdekleer\n</code></pre>\n\n<p>Results (*NIX):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>------------------------------\norig path:              /home/rdekleer/.profile\nconverted to URI:       file:///home/rdekleer/.profile\nrebuilt normpath:       /home/rdekleer/.profile\nrebuilt abspath:        /home/rdekleer/.profile\n------------------------------\norig path:              /usr/share/python3/py3versions.py\nconverted to URI:       file:///usr/share/python3/py3versions.py\nrebuilt normpath:       /usr/share/python3/py3versions.py\nrebuilt abspath:        /usr/share/python3/py3versions.py\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 6893414,
                        "reputation": 15149,
                        "user_id": 5296106,
                        "user_type": "registered",
                        "display_name": "Riccardo Bucco"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1709120678,
                    "creation_date": 1709120678,
                    "answer_id": 78074125,
                    "question_id": 5977576,
                    "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path/78074125#78074125",
                    "body": "<p>Starting from python 3.13, you can use the <a href=\"https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.from_uri\" rel=\"nofollow noreferrer\"><code>pathlib.Path.from_uri()</code></a> method, a new constructor to create a <code>pathlib.Path</code> object from a \u2018file\u2019 URI (file://).</p>\n<p>For example:</p>\n<pre><code>&gt;&gt;&gt; p = Path.from_uri('file:////server/share')\nWindowsPath('//server/share')\n&gt;&gt;&gt; p = Path.from_uri('file://///server/share')\nWindowsPath('//server/share')\n&gt;&gt;&gt; p = Path.from_uri('file:c:/windows')\nWindowsPath('c:/windows')\n&gt;&gt;&gt; p = Path.from_uri('file:/c|/windows')\nWindowsPath('c:/windows')\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 114350,
                "reputation": 11986,
                "user_id": 300745,
                "user_type": "registered",
                "accept_rate": 93,
                "display_name": "Gearoid Murphy"
            },
            "comment_count": 2,
            "is_answered": true,
            "accepted_answer_id": 5977628,
            "answer_count": 6,
            "score": 37,
            "last_activity_date": 1709120678,
            "creation_date": 1305201370,
            "question_id": 5977576,
            "link": "https://stackoverflow.com/questions/5977576/is-there-a-convenient-way-to-map-a-file-uri-to-os-path",
            "title": "Is there a convenient way to map a file uri to os.path?",
            "body": "<p>A subsystem which I have no control over insists on providing filesystem paths in the form of a uri. Is there a python module/function which can convert this path into the appropriate form expected by the filesystem in a platform independent manner?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 6225
}