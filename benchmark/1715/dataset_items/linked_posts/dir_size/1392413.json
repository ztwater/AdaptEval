{
    "items": [
        {
            "tags": [
                "python",
                "directory"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 30816,
                        "reputation": 82403,
                        "user_id": 84270,
                        "user_type": "registered",
                        "display_name": "John Machin"
                    },
                    "edited": false,
                    "score": 17,
                    "creation_date": 1266201428,
                    "post_id": 1392413,
                    "comment_id": 2225066,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python#comment2225066_1392413",
                    "body": "It would NOT be very nice. You should have one function to calculate the size and a quite independent function (that could be used also with memory sizes, for example) to &quot;format the size nicely in Mb/Gb etc&quot;."
                },
                {
                    "owner": {
                        "account_id": 7589,
                        "reputation": 51734,
                        "user_id": 13227,
                        "user_type": "registered",
                        "accept_rate": 91,
                        "display_name": "Gary Willoughby"
                    },
                    "edited": false,
                    "score": 21,
                    "creation_date": 1266264368,
                    "post_id": 1392413,
                    "comment_id": 2230189,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python#comment2230189_1392413",
                    "body": "Yes i know but this saves asking two question."
                },
                {
                    "owner": {
                        "account_id": 1627055,
                        "reputation": 2863,
                        "user_id": 1502378,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "meh"
                    },
                    "edited": false,
                    "score": 3,
                    "creation_date": 1501006021,
                    "post_id": 1392413,
                    "comment_id": 77583463,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python#comment77583463_1392413",
                    "body": "The <code>tree</code> command on *nix systems does all of this for free. <code>tree -h -d --du &#47;path&#47;to&#47;dir</code>."
                },
                {
                    "owner": {
                        "account_id": 1211489,
                        "reputation": 20913,
                        "user_id": 1179925,
                        "user_type": "registered",
                        "accept_rate": 47,
                        "display_name": "mrgloom"
                    },
                    "reply_to_user": {
                        "account_id": 1627055,
                        "reputation": 2863,
                        "user_id": 1502378,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "meh"
                    },
                    "edited": false,
                    "score": 2,
                    "creation_date": 1561116288,
                    "post_id": 1392413,
                    "comment_id": 99968329,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python#comment99968329_1392413",
                    "body": "@meh <code>du -sh &#47;path&#47;to&#47;dir&#47;*</code>"
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 40410,
                                "reputation": 42676,
                                "user_id": 117092,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "luc"
                            },
                            "edited": false,
                            "score": 19,
                            "creation_date": 1252405152,
                            "post_id": 1392549,
                            "comment_id": 1233899,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment1233899_1392549",
                            "body": "+1 but the oneliner doesn&#39;t return a valid result because it is not recursive"
                        },
                        {
                            "owner": {
                                "account_id": 12525,
                                "reputation": 43167,
                                "user_id": 24718,
                                "user_type": "registered",
                                "accept_rate": 76,
                                "display_name": "monkut"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1252405388,
                            "post_id": 1392549,
                            "comment_id": 1233914,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment1233914_1392549",
                            "body": "Yeah, it&#39;s just for the flat directory case."
                        },
                        {
                            "owner": {
                                "account_id": 27443,
                                "reputation": 2588,
                                "user_id": 72476,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "driax"
                            },
                            "edited": false,
                            "score": 43,
                            "creation_date": 1283112159,
                            "post_id": 1392549,
                            "comment_id": 3774878,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment3774878_1392549",
                            "body": "For real fun you can do a recursive size in one line:      sum( os.path.getsize(os.path.join(dirpath,filename))       for dirpath, dirnames, filenames in os.walk( PATH )       for filename in filenames )"
                        },
                        {
                            "owner": {
                                "account_id": 54090,
                                "reputation": 89434,
                                "user_id": 161801,
                                "user_type": "registered",
                                "accept_rate": 69,
                                "display_name": "asmeurer"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1395175609,
                            "post_id": 1392549,
                            "comment_id": 34215992,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment34215992_1392549",
                            "body": "But you have to use <code>st_size</code> if you want to not follow symlinks, as you should then use <code>lstat</code>."
                        },
                        {
                            "owner": {
                                "account_id": 260725,
                                "reputation": 13983,
                                "user_id": 544463,
                                "user_type": "registered",
                                "accept_rate": 64,
                                "display_name": "Yauhen Yakimovich"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1422018555,
                            "post_id": 1392549,
                            "comment_id": 44594965,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment44594965_1392549",
                            "body": "Warning! this is not the same as &#39;du -sb&#39;. See the answer by Samuel Lampa! Your code ignores the size of the folder used to store FAT."
                        },
                        {
                            "owner": {
                                "account_id": 64038,
                                "reputation": 19754,
                                "user_id": 189247,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "Gaslight Deceive Subvert"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1444693425,
                            "post_id": 1392549,
                            "comment_id": 53999734,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment53999734_1392549",
                            "body": "The code will give incorrect or at least unexpected results in many situations. E.g <code>os.path.getsize(&#39;&#47;proc&#47;kcore&#39;)</code>. It returns 128Tb on my system. So is the size of my <code>&#47;proc</code> directory &gt;128Tb? It depends. :)"
                        },
                        {
                            "owner": {
                                "account_id": 180631,
                                "reputation": 4968,
                                "user_id": 414075,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "white_gecko"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1501067167,
                            "post_id": 1392549,
                            "comment_id": 77611764,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment77611764_1392549",
                            "body": "The values calculated are slightly different to the values calculated by <code>du</code>. As it seems the size of directories is not included. But just adding <code>total_size += os.path.getsize(dirpath)</code> doesn&#39;t bring the same result as <code>du</code> \u2026 For the same directory <code>du -s .</code> gives <code>143428</code>, while <code>get_size</code> returns <code>146849731</code> (<code>146849731&#47;1024 = 143407.94</code>)."
                        },
                        {
                            "owner": {
                                "account_id": 1614556,
                                "reputation": 7738,
                                "user_id": 1492613,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Wang"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1502270046,
                            "post_id": 1392549,
                            "comment_id": 78131547,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment78131547_1392549",
                            "body": "This will not give same number as du does. And it is too slow, when there are many files."
                        },
                        {
                            "owner": {
                                "account_id": 1025327,
                                "reputation": 987,
                                "user_id": 1034759,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "freethebees"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1519724490,
                            "post_id": 1392549,
                            "comment_id": 85015457,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment85015457_1392549",
                            "body": "This method will include files that are symbolically linked (<code>ln -s</code>). If you want to exclude them, as they don&#39;t really exist in the directory, then you can add an <code>if not os.path.islink(fp)</code> check before adding to <code>total_size</code>."
                        },
                        {
                            "owner": {
                                "account_id": 1025327,
                                "reputation": 987,
                                "user_id": 1034759,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "freethebees"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1519725165,
                            "post_id": 1392549,
                            "comment_id": 85015893,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment85015893_1392549",
                            "body": "One liner than excludes symlinks <code>sum([os.path.getsize(fp) for fp in (os.path.join(dirpath, f) for dirpath, dirnames, filenames in os.walk(START_PATH) for f in filenames) if not os.path.islink(fp)])</code> ... pretty hard to read!"
                        },
                        {
                            "owner": {
                                "account_id": 10712475,
                                "reputation": 62611,
                                "user_id": 7884305,
                                "user_type": "registered",
                                "display_name": "Chayim Friedman"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1569471854,
                            "post_id": 1392549,
                            "comment_id": 102608993,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment102608993_1392549",
                            "body": "Why do you exclude link?"
                        },
                        {
                            "owner": {
                                "account_id": 12525,
                                "reputation": 43167,
                                "user_id": 24718,
                                "user_type": "registered",
                                "accept_rate": 76,
                                "display_name": "monkut"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1569475232,
                            "post_id": 1392549,
                            "comment_id": 102609920,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment102609920_1392549",
                            "body": "You can include it if you want, but I would say that a <i>link</i> to a file is not necessarily contained in the target directory."
                        },
                        {
                            "owner": {
                                "account_id": 441885,
                                "reputation": 60711,
                                "user_id": 832230,
                                "user_type": "registered",
                                "display_name": "Asclepius"
                            },
                            "reply_to_user": {
                                "account_id": 7627256,
                                "reputation": 464,
                                "user_id": 7843746,
                                "user_type": "registered",
                                "display_name": "LMB"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1590250081,
                            "post_id": 1392549,
                            "comment_id": 109612763,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment109612763_1392549",
                            "body": "@LMB No. That gives you the stats for the whole disk corresponding to that directory, not of that directory alone."
                        },
                        {
                            "owner": {
                                "account_id": 1985736,
                                "reputation": 614,
                                "user_id": 1781025,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Splaty"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1592229400,
                            "post_id": 1392549,
                            "comment_id": 110342424,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#comment110342424_1392549",
                            "body": "This solution is incomplete and will not work for hard links! For example if two files file1 and file2 are hard linked to same inode, this code will double count. To avoid double counting hard link, you&#39;ll need to keep track of file inodes and skip files with inodes already passed."
                        }
                    ],
                    "owner": {
                        "account_id": 12525,
                        "reputation": 43167,
                        "user_id": 24718,
                        "user_type": "registered",
                        "accept_rate": 76,
                        "display_name": "monkut"
                    },
                    "comment_count": 14,
                    "is_accepted": true,
                    "score": 402,
                    "last_activity_date": 1602897852,
                    "last_edit_date": 1602897852,
                    "creation_date": 1252396095,
                    "answer_id": 1392549,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1392549#1392549",
                    "body": "<p>This walks all sub-directories; summing file sizes:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import os\n\ndef get_size(start_path = '.'):\n    total_size = 0\n    for dirpath, dirnames, filenames in os.walk(start_path):\n        for f in filenames:\n            fp = os.path.join(dirpath, f)\n            # skip if it is symbolic link\n            if not os.path.islink(fp):\n                total_size += os.path.getsize(fp)\n\n    return total_size\n\nprint(get_size(), 'bytes')\n</code></pre>\n<p>And a oneliner for fun using <a href=\"http://docs.python.org/library/os.html?highlight=shutil#os.listdir\" rel=\"noreferrer\">os.listdir</a> (<em>Does not include sub-directories</em>):</p>\n<pre><code>import os\nsum(os.path.getsize(f) for f in os.listdir('.') if os.path.isfile(f))\n</code></pre>\n<p>Reference:</p>\n<ul>\n<li><a href=\"http://docs.python.org/library/os.path.html#os.path.getsize\" rel=\"noreferrer\">os.path.getsize</a> - Gives the size in bytes</li>\n<li><a href=\"http://docs.python.org/library/os.html?highlight=shutil#os.walk\" rel=\"noreferrer\">os.walk</a></li>\n<li><a href=\"https://docs.python.org/3/library/os.path.html#os.path.islink\" rel=\"noreferrer\">os.path.islink</a></li>\n</ul>\n<p><strong>Updated</strong>\nTo use <em>os.path.getsize</em>, this is clearer than using the os.stat().st_size method.</p>\n<p><em>Thanks to ghostdog74 for pointing this out!</em></p>\n<p><a href=\"http://docs.python.org/library/os.html?highlight=shutil#os.stat\" rel=\"noreferrer\">os.stat</a> - <em>st_size</em> Gives the size in bytes.  Can also be used to get file size and other file related information.</p>\n<pre class=\"lang-py prettyprint-override\"><code>import os\n\nnbytes = sum(d.stat().st_size for d in os.scandir('.') if d.is_file())\n</code></pre>\n<p><strong>Update 2018</strong></p>\n<p>If you use Python 3.4 or previous then you may consider using the more efficient <code>walk</code> method provided by the third-party <a href=\"https://pypi.org/project/scandir/\" rel=\"noreferrer\"><code>scandir</code></a> package. In Python 3.5 and later, this package has been incorporated into the standard library and <code>os.walk</code> has received the corresponding increase in performance.</p>\n<p><strong>Update 2019</strong></p>\n<p>Recently I've been using <code>pathlib</code> more and more, here's a <code>pathlib</code> solution:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from pathlib import Path\n\nroot_directory = Path('.')\nsum(f.stat().st_size for f in root_directory.glob('**/*') if f.is_file())\n\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 54090,
                                "reputation": 89434,
                                "user_id": 161801,
                                "user_type": "registered",
                                "accept_rate": 69,
                                "display_name": "asmeurer"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1395175447,
                            "post_id": 1776987,
                            "comment_id": 34215896,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1776987#comment34215896_1776987",
                            "body": "You probably don&#39;t want to follow symlinks. You should use <code>lstat</code>."
                        }
                    ],
                    "owner": {
                        "account_id": 75378,
                        "reputation": 1090,
                        "user_id": 216254,
                        "user_type": "registered",
                        "display_name": "troex"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 12,
                    "last_activity_date": 1265954553,
                    "last_edit_date": 1265954553,
                    "creation_date": 1258842266,
                    "answer_id": 1776987,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1776987#1776987",
                    "body": "<p>monknut answer is good but it fails on broken symlink, so you also have to check if this path really exists</p>\n\n<pre><code>if os.path.exists(fp):\n    total_size += os.stat(fp).st_size\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 44762,
                        "reputation": 335363,
                        "user_id": 131527,
                        "user_type": "registered",
                        "accept_rate": 83,
                        "display_name": "ghostdog74"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1258847832,
                    "creation_date": 1258847832,
                    "answer_id": 1777225,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/1777225#1777225",
                    "body": "<p>for getting the size of one file, there is os.path.getsize()</p>\n\n<pre><code>&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.path.getsize(\"/path/file\")\n35L\n</code></pre>\n\n<p>its reported in bytes.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1270359,
                                "reputation": 6065,
                                "user_id": 1226807,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "airween"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1440356554,
                            "post_id": 4368431,
                            "comment_id": 52227344,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/4368431#comment52227344_4368431",
                            "body": "This function calculates the symlink&#39;s size too - if you want to skip the symlinks, you have to check that&#39;s not that:  if os.path.isfile(itempath) and os.path.islink(itempath)  and  elif os.path.isdir(itempath) and os.path.islink(itempath)."
                        },
                        {
                            "owner": {
                                "account_id": 2795130,
                                "reputation": 951,
                                "user_id": 2404492,
                                "user_type": "registered",
                                "accept_rate": 64,
                                "display_name": "Alexandr Zarubkin"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680700264,
                            "post_id": 4368431,
                            "comment_id": 133942323,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/4368431#comment133942323_4368431",
                            "body": "It doesn&#39;t take cluster size into account (I used it on the SD card formatted in FAT32 with cluster size 32K)."
                        }
                    ],
                    "owner": {
                        "account_id": 136945,
                        "reputation": 4342,
                        "user_id": 340811,
                        "user_type": "registered",
                        "accept_rate": 85,
                        "display_name": "Samuel Lampa"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 28,
                    "last_activity_date": 1291652728,
                    "last_edit_date": 1291652728,
                    "creation_date": 1291651942,
                    "answer_id": 4368431,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/4368431#4368431",
                    "body": "<p>Here is a recursive function (it recursively sums up the size of all subfolders and their respective files) which returns exactly the same bytes as when running \"du -sb .\" in linux (where the \".\" means \"the current folder\"):</p>\n\n<pre><code>import os\n\ndef getFolderSize(folder):\n    total_size = os.path.getsize(folder)\n    for item in os.listdir(folder):\n        itempath = os.path.join(folder, item)\n        if os.path.isfile(itempath):\n            total_size += os.path.getsize(itempath)\n        elif os.path.isdir(itempath):\n            total_size += getFolderSize(itempath)\n    return total_size\n\nprint \"Size: \" + str(getFolderSize(\".\"))\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 282795,
                                "reputation": 126,
                                "user_id": 579925,
                                "user_type": "registered",
                                "display_name": "Peter Briggs"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1391080921,
                            "post_id": 12984676,
                            "comment_id": 32376137,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/12984676#comment32376137_12984676",
                            "body": "Consider using <code>os.lstat</code> (rather than <code>os.stat</code>), which avoids following symbolic links: <a href=\"http://docs.python.org/2/library/os.html#os.lstat\" rel=\"nofollow noreferrer\">docs.python.org/2/library/os.html#os.lstat</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 1547308,
                        "reputation": 1657,
                        "user_id": 1440562,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Chris"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 9,
                    "last_activity_date": 1350699528,
                    "creation_date": 1350699528,
                    "answer_id": 12984676,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/12984676#12984676",
                    "body": "<p>The accepted answer doesn't take into account hard or soft links, and would count those files twice.  You'd want to keep track of which inodes you've seen, and not add the size for those files.</p>\n\n<pre><code>import os\ndef get_size(start_path='.'):\n    total_size = 0\n    seen = {}\n    for dirpath, dirnames, filenames in os.walk(start_path):\n        for f in filenames:\n            fp = os.path.join(dirpath, f)\n            try:\n                stat = os.stat(fp)\n            except OSError:\n                continue\n\n            try:\n                seen[stat.st_ino]\n            except KeyError:\n                seen[stat.st_ino] = True\n            else:\n                continue\n\n            total_size += stat.st_size\n\n    return total_size\n\nprint get_size()\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1091241,
                                "reputation": 3800,
                                "user_id": 1085848,
                                "user_type": "registered",
                                "accept_rate": 47,
                                "display_name": "TomSawyer"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1567805512,
                            "post_id": 13475351,
                            "comment_id": 102087558,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/13475351#comment102087558_13475351",
                            "body": "how&#39;s the performance compared to use <code>os.walk</code> to check sub folder size recursively?"
                        }
                    ],
                    "owner": {
                        "account_id": 105018,
                        "reputation": 6614,
                        "user_id": 280485,
                        "user_type": "registered",
                        "accept_rate": 77,
                        "display_name": "Ali SAID OMAR"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1375577093,
                    "last_edit_date": 1375577093,
                    "creation_date": 1353421824,
                    "answer_id": 13475351,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/13475351#13475351",
                    "body": "<p>You can do something like this : </p>\n\n<pre><code>import commands   \nsize = commands.getoutput('du -sh /path/').split()[0]\n</code></pre>\n\n<p>in this case I have not tested the result before returning it, if you want you can check it with commands.getstatusoutput.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 298933,
                                "reputation": 493,
                                "user_id": 605222,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Creshal"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1386768083,
                            "post_id": 17936789,
                            "comment_id": 30677981,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/17936789#comment30677981_17936789",
                            "body": "Chris&#39; answer also doesn&#39;t take into account symlinks nor the sizes of directories themselves. I&#39;ve edited your answer accordingly, the output of the fixed function is now identical to <code>df -sb</code>."
                        },
                        {
                            "owner": {
                                "account_id": 7550116,
                                "reputation": 2075,
                                "user_id": 5731861,
                                "user_type": "registered",
                                "display_name": "Felipe Valdes"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1615091787,
                            "post_id": 17936789,
                            "comment_id": 117582523,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/17936789#comment117582523_17936789",
                            "body": "the function misreports / unfortunately"
                        }
                    ],
                    "owner": {
                        "account_id": 2112873,
                        "reputation": 334,
                        "user_id": 1877762,
                        "user_type": "registered",
                        "display_name": "andrewh"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1375146590,
                    "creation_date": 1375146590,
                    "answer_id": 17936789,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/17936789#17936789",
                    "body": "<p>Chris' answer is good but could be made more idiomatic by using a set to check for seen directories, which also avoids using an exception for control flow:</p>\n\n<pre><code>def directory_size(path):\n    total_size = 0\n    seen = set()\n\n    for dirpath, dirnames, filenames in os.walk(path):\n        for f in filenames:\n            fp = os.path.join(dirpath, f)\n\n            try:\n                stat = os.stat(fp)\n            except OSError:\n                continue\n\n            if stat.st_ino in seen:\n                continue\n\n            seen.add(stat.st_ino)\n\n            total_size += stat.st_size\n\n    return total_size  # size in bytes\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2843080,
                                "reputation": 3668,
                                "user_id": 2442227,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Venkatesh"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1418932661,
                            "post_id": 18763675,
                            "comment_id": 43535584,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/18763675#comment43535584_18763675",
                            "body": "It&#39;s not one liner though. However, it calculates recursively folder size(even if folder has multiple folders inside) in bytes and give correct value."
                        },
                        {
                            "owner": {
                                "account_id": 1153166,
                                "reputation": 1611,
                                "user_id": 1486332,
                                "user_type": "registered",
                                "display_name": "hum3"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1538214738,
                            "post_id": 18763675,
                            "comment_id": 92071509,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/18763675#comment92071509_18763675",
                            "body": "I went for this as easy to use and worked first time on Windows"
                        },
                        {
                            "owner": {
                                "account_id": 8012307,
                                "reputation": 554,
                                "user_id": 6043614,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Vaid&#248;tas I."
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1692120478,
                            "post_id": 18763675,
                            "comment_id": 135580292,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/18763675#comment135580292_18763675",
                            "body": "doesnt work on 2.7"
                        }
                    ],
                    "owner": {
                        "user_type": "does_not_exist",
                        "display_name": "user2772509"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1378987081,
                    "creation_date": 1378987081,
                    "answer_id": 18763675,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/18763675#18763675",
                    "body": "<p>a recursive one-liner:</p>\n\n<pre><code>def getFolderSize(p):\n   from functools import partial\n   prepend = partial(os.path.join, p)\n   return sum([(os.path.getsize(f) if os.path.isfile(f) else getFolderSize(f)) for f in map(prepend, os.listdir(p))])\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1128830,
                                "reputation": 300,
                                "user_id": 1115400,
                                "user_type": "registered",
                                "accept_rate": 33,
                                "display_name": "oferlivny"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1442415961,
                            "post_id": 23850720,
                            "comment_id": 53075378,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/23850720#comment53075378_23850720",
                            "body": "This code won&#39;t run (typos in the f/fp variables) and is not recursive."
                        },
                        {
                            "owner": {
                                "account_id": 1025327,
                                "reputation": 987,
                                "user_id": 1034759,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "freethebees"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1519726832,
                            "post_id": 23850720,
                            "comment_id": 85016962,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/23850720#comment85016962_23850720",
                            "body": "This won&#39;t run. You refer to <code>fp</code> before it is assigned. It also would return <code>total_size</code> in bytes, not megabytes."
                        }
                    ],
                    "owner": {
                        "account_id": 4518788,
                        "reputation": 1,
                        "user_id": 3672752,
                        "user_type": "unregistered",
                        "display_name": "BARSPIN"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": -3,
                    "last_activity_date": 1590252398,
                    "last_edit_date": 1590252398,
                    "creation_date": 1400975194,
                    "answer_id": 23850720,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/23850720#23850720",
                    "body": "<pre><code>import os\n\ndef get_size(path):\n    total_size = 0\n    for dirpath, dirnames, filenames in os.walk(path):\n        for f in filenames:\n            if os.path.exists(fp):\n                fp = os.path.join(dirpath, f)\n                total_size += os.path.getsize(fp)\n\n    return total_size   # in megabytes\n</code></pre>\n\n<p>Thanks monkut &amp; troex!</p>\n"
                },
                {
                    "owner": {
                        "account_id": 4643894,
                        "reputation": 21,
                        "user_id": 3762880,
                        "user_type": "registered",
                        "display_name": "user3762880"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1687879287,
                    "last_edit_date": 1687879287,
                    "creation_date": 1403355367,
                    "answer_id": 24341821,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/24341821#24341821",
                    "body": "<p>This script tells you which file is the biggest in the CWD and also tells you in which folder the file is.\nThis script works for me on win8 and python 3.3.3 shell</p>\n<pre><code>import os\n\nfolder = os.getcwd()\n\nnumber = 0\nstring = &quot;&quot;\n\nfor root, dirs, files in os.walk(folder):\n    for file in files:\n        pathname = os.path.join(root,file)\n##        print (pathname)\n##        print (os.path.getsize(pathname)/1024/1024)\n        if number &lt; os.path.getsize(pathname):\n            number = os.path.getsize(pathname)\n            string = pathname\n\nprint(string)\nprint()\nprint(number)\nprint(&quot;Number in bytes&quot;)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1866281,
                                "reputation": 6957,
                                "user_id": 1689770,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Jonathan"
                            },
                            "edited": false,
                            "score": 27,
                            "creation_date": 1442015332,
                            "post_id": 25574638,
                            "comment_id": 52925364,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/25574638#comment52925364_25574638",
                            "body": "Python, being cross-platform in nature, should probably shy away from this"
                        },
                        {
                            "owner": {
                                "account_id": 3177311,
                                "reputation": 4068,
                                "user_id": 3991164,
                                "user_type": "registered",
                                "accept_rate": 25,
                                "display_name": "flaschbier"
                            },
                            "edited": false,
                            "score": 15,
                            "creation_date": 1442551876,
                            "post_id": 25574638,
                            "comment_id": 53136089,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/25574638#comment53136089_25574638",
                            "body": "Thanks for these remarks. I added some caveat regarding platform dependency to the answer. However, much of Python code if one-off scripting. Such code should not come with functional limitations, lengthy and error-prone passages, or uncommon results in edge cases, just for the sake of a portability <i>beyond any need</i>. It&#39;s, as always, a trade-off, and it&#39;s in the responsibility of the developer to choose wisely ;)"
                        },
                        {
                            "owner": {
                                "account_id": 4117,
                                "reputation": 26278,
                                "user_id": 6093,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "Mr Shark"
                            },
                            "edited": false,
                            "score": 11,
                            "creation_date": 1483620914,
                            "post_id": 25574638,
                            "comment_id": 70176159,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/25574638#comment70176159_25574638",
                            "body": "Nitpick: not Linux but Unix/Posix specific :)"
                        },
                        {
                            "owner": {
                                "account_id": 2736581,
                                "reputation": 808,
                                "user_id": 2359145,
                                "user_type": "registered",
                                "display_name": "Keith Hanlan"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1506544520,
                            "post_id": 25574638,
                            "comment_id": 79869192,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/25574638#comment79869192_25574638",
                            "body": "It is probably wise to add the &#39;-x&#39; option to the du command in order to confine the search to the filesystem. In other words, use [&#39;du&#39;, &#39;-shx&#39;, path] instead."
                        },
                        {
                            "owner": {
                                "account_id": 13795134,
                                "reputation": 3020,
                                "user_id": 10440128,
                                "user_type": "registered",
                                "display_name": "milahu"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1715291004,
                            "post_id": 25574638,
                            "comment_id": 138317408,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/25574638#comment138317408_25574638",
                            "body": "&quot;efficient&quot;, yes, this is 3x faster than the <code>os.walk</code> + <code>os.path.islink</code> + <code>os.path.getsize</code> solution by monkut. <code>du -sb</code> gives the apparent size (stat.st_size), <code>du -s --block-size=1</code> gives the real size (stat.st_blocks)"
                        }
                    ],
                    "owner": {
                        "account_id": 3177311,
                        "reputation": 4068,
                        "user_id": 3991164,
                        "user_type": "registered",
                        "accept_rate": 25,
                        "display_name": "flaschbier"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 70,
                    "last_activity_date": 1590251445,
                    "last_edit_date": 1590251445,
                    "creation_date": 1409338848,
                    "answer_id": 25574638,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/25574638#25574638",
                    "body": "<p>Some of the approaches suggested so far implement a recursion, others employ a shell or will not produce neatly formatted results. When your code is one-off for Linux platforms, you can get formatting as usual, recursion included, as a one-liner. Except for the <code>print</code> in the last line, it will work for current versions of <code>python2</code> and <code>python3</code>: </p>\n\n<pre><code>du.py\n-----\n#!/usr/bin/python3\nimport subprocess\n\ndef du(path):\n    \"\"\"disk usage in human readable format (e.g. '2,1GB')\"\"\"\n    return subprocess.check_output(['du','-sh', path]).split()[0].decode('utf-8')\n\nif __name__ == \"__main__\":\n    print(du('.'))\n</code></pre>\n\n<p>is simple, efficient and will work for files and multilevel directories:</p>\n\n<pre><code>$ chmod 750 du.py\n$ ./du.py\n2,9M\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1787279,
                                "reputation": 589,
                                "user_id": 1628470,
                                "user_type": "registered",
                                "display_name": "ejkitchen"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1667067754,
                            "post_id": 25666231,
                            "comment_id": 131085072,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/25666231#comment131085072_25666231",
                            "body": "Just use the package humanize. this code has been re-written far too many times.  see other StackOverflow questions for all of the nuances around implementing this yourself."
                        }
                    ],
                    "owner": {
                        "account_id": 1727919,
                        "reputation": 5402,
                        "user_id": 1582182,
                        "user_type": "registered",
                        "accept_rate": 90,
                        "display_name": "Mmmh mmh"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1409835667,
                    "creation_date": 1409835667,
                    "answer_id": 25666231,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/25666231#25666231",
                    "body": "<p>For the second part of the question</p>\n\n<pre><code>def human(size):\n\n    B = \"B\"\n    KB = \"KB\" \n    MB = \"MB\"\n    GB = \"GB\"\n    TB = \"TB\"\n    UNITS = [B, KB, MB, GB, TB]\n    HUMANFMT = \"%f %s\"\n    HUMANRADIX = 1024.\n\n    for u in UNITS[:-1]:\n        if size &lt; HUMANRADIX : return HUMANFMT % (size, u)\n        size /= HUMANRADIX\n\n    return HUMANFMT % (size,  UNITS[-1])\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 6135019,
                        "reputation": 116,
                        "user_id": 4784163,
                        "user_type": "registered",
                        "display_name": "Martyn Bristow"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1428947599,
                    "last_edit_date": 1495540982,
                    "creation_date": 1428947599,
                    "answer_id": 29611830,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/29611830#29611830",
                    "body": "<p>One-liner you say...\nHere is a one liner:</p>\n\n<pre><code>sum([sum(map(lambda fname: os.path.getsize(os.path.join(directory, fname)), files)) for directory, folders, files in os.walk(path)])\n</code></pre>\n\n<p>Although I would probably split it out and it performs no checks.</p>\n\n<p>To convert to kb see <a href=\"https://stackoverflow.com/questions/1094841/reusable-library-to-get-human-readable-version-of-file-size\">Reusable library to get human readable version of file size?</a> and work it in</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2576347,
                                "reputation": 2153,
                                "user_id": 2233949,
                                "user_type": "registered",
                                "accept_rate": 0,
                                "display_name": "user2233949"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1454455613,
                            "post_id": 34580785,
                            "comment_id": 58049894,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/34580785#comment58049894_34580785",
                            "body": "Your script works well, but you need to move the null_decorator function above the &#39;if sys.version_info &gt;= ...&#39; line.  Otherwise you&#39;ll get a &#39;null_decorator&#39; is not defined exception.  Works great after that though."
                        },
                        {
                            "owner": {
                                "account_id": 7565400,
                                "reputation": 210236,
                                "user_id": 5741205,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "MaxU - stand with Ukraine"
                            },
                            "reply_to_user": {
                                "account_id": 2576347,
                                "reputation": 2153,
                                "user_id": 2233949,
                                "user_type": "registered",
                                "accept_rate": 0,
                                "display_name": "user2233949"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1454457064,
                            "post_id": 34580785,
                            "comment_id": 58050424,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/34580785#comment58050424_34580785",
                            "body": "@user2233949, thank you! I&#39;me modified the code correspondingly."
                        }
                    ],
                    "owner": {
                        "account_id": 7565400,
                        "reputation": 210236,
                        "user_id": 5741205,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "MaxU - stand with Ukraine"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1454456112,
                    "last_edit_date": 1454456112,
                    "creation_date": 1451849803,
                    "answer_id": 34580785,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/34580785#34580785",
                    "body": "<p>The following script prints directory size of all sub-directories for the specified directory. It also tries to benefit (if possible) from caching the calls of a recursive functions. If an argument is omitted, the script will work in the current directory. The output is sorted by the directory size from biggest to smallest ones. So you can adapt it for your needs.</p>\n\n<p>PS i've used recipe 578019 for showing directory size in human-friendly format (<a href=\"http://code.activestate.com/recipes/578019/\" rel=\"nofollow\">http://code.activestate.com/recipes/578019/</a>)</p>\n\n<pre><code>from __future__ import print_function\nimport os\nimport sys\nimport operator\n\ndef null_decorator(ob):\n    return ob\n\nif sys.version_info &gt;= (3,2,0):\n    import functools\n    my_cache_decorator = functools.lru_cache(maxsize=4096)\nelse:\n    my_cache_decorator = null_decorator\n\nstart_dir = os.path.normpath(os.path.abspath(sys.argv[1])) if len(sys.argv) &gt; 1 else '.'\n\n@my_cache_decorator\ndef get_dir_size(start_path = '.'):\n    total_size = 0\n    if 'scandir' in dir(os):\n        # using fast 'os.scandir' method (new in version 3.5)\n        for entry in os.scandir(start_path):\n            if entry.is_dir(follow_symlinks = False):\n                total_size += get_dir_size(entry.path)\n            elif entry.is_file(follow_symlinks = False):\n                total_size += entry.stat().st_size\n    else:\n        # using slow, but compatible 'os.listdir' method\n        for entry in os.listdir(start_path):\n            full_path = os.path.abspath(os.path.join(start_path, entry))\n            if os.path.isdir(full_path):\n                total_size += get_dir_size(full_path)\n            elif os.path.isfile(full_path):\n                total_size += os.path.getsize(full_path)\n    return total_size\n\ndef get_dir_size_walk(start_path = '.'):\n    total_size = 0\n    for dirpath, dirnames, filenames in os.walk(start_path):\n        for f in filenames:\n            fp = os.path.join(dirpath, f)\n            total_size += os.path.getsize(fp)\n    return total_size\n\ndef bytes2human(n, format='%(value).0f%(symbol)s', symbols='customary'):\n    \"\"\"\n    (c) http://code.activestate.com/recipes/578019/\n\n    Convert n bytes into a human readable string based on format.\n    symbols can be either \"customary\", \"customary_ext\", \"iec\" or \"iec_ext\",\n    see: http://goo.gl/kTQMs\n\n      &gt;&gt;&gt; bytes2human(0)\n      '0.0 B'\n      &gt;&gt;&gt; bytes2human(0.9)\n      '0.0 B'\n      &gt;&gt;&gt; bytes2human(1)\n      '1.0 B'\n      &gt;&gt;&gt; bytes2human(1.9)\n      '1.0 B'\n      &gt;&gt;&gt; bytes2human(1024)\n      '1.0 K'\n      &gt;&gt;&gt; bytes2human(1048576)\n      '1.0 M'\n      &gt;&gt;&gt; bytes2human(1099511627776127398123789121)\n      '909.5 Y'\n\n      &gt;&gt;&gt; bytes2human(9856, symbols=\"customary\")\n      '9.6 K'\n      &gt;&gt;&gt; bytes2human(9856, symbols=\"customary_ext\")\n      '9.6 kilo'\n      &gt;&gt;&gt; bytes2human(9856, symbols=\"iec\")\n      '9.6 Ki'\n      &gt;&gt;&gt; bytes2human(9856, symbols=\"iec_ext\")\n      '9.6 kibi'\n\n      &gt;&gt;&gt; bytes2human(10000, \"%(value).1f %(symbol)s/sec\")\n      '9.8 K/sec'\n\n      &gt;&gt;&gt; # precision can be adjusted by playing with %f operator\n      &gt;&gt;&gt; bytes2human(10000, format=\"%(value).5f %(symbol)s\")\n      '9.76562 K'\n    \"\"\"\n    SYMBOLS = {\n        'customary'     : ('B', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'),\n        'customary_ext' : ('byte', 'kilo', 'mega', 'giga', 'tera', 'peta', 'exa',\n                           'zetta', 'iotta'),\n        'iec'           : ('Bi', 'Ki', 'Mi', 'Gi', 'Ti', 'Pi', 'Ei', 'Zi', 'Yi'),\n        'iec_ext'       : ('byte', 'kibi', 'mebi', 'gibi', 'tebi', 'pebi', 'exbi',\n                           'zebi', 'yobi'),\n    }\n    n = int(n)\n    if n &lt; 0:\n        raise ValueError(\"n &lt; 0\")\n    symbols = SYMBOLS[symbols]\n    prefix = {}\n    for i, s in enumerate(symbols[1:]):\n        prefix[s] = 1 &lt;&lt; (i+1)*10\n    for symbol in reversed(symbols[1:]):\n        if n &gt;= prefix[symbol]:\n            value = float(n) / prefix[symbol]\n            return format % locals()\n    return format % dict(symbol=symbols[0], value=n)\n\n############################################################\n###\n###  main ()\n###\n############################################################\nif __name__ == '__main__':\n    dir_tree = {}\n    ### version, that uses 'slow' [os.walk method]\n    #get_size = get_dir_size_walk\n    ### this recursive version can benefit from caching the function calls (functools.lru_cache)\n    get_size = get_dir_size\n\n    for root, dirs, files in os.walk(start_dir):\n        for d in dirs:\n            dir_path = os.path.join(root, d)\n            if os.path.isdir(dir_path):\n                dir_tree[dir_path] = get_size(dir_path)\n\n    for d, size in sorted(dir_tree.items(), key=operator.itemgetter(1), reverse=True):\n        print('%s\\t%s' %(bytes2human(size, format='%(value).2f%(symbol)s'), d))\n\n    print('-' * 80)\n    if sys.version_info &gt;= (3,2,0):\n        print(get_dir_size.cache_info())\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>37.61M  .\\subdir_b\n2.18M   .\\subdir_a\n2.17M   .\\subdir_a\\subdir_a_2\n4.41K   .\\subdir_a\\subdir_a_1\n----------------------------------------------------------\nCacheInfo(hits=2, misses=4, maxsize=4096, currsize=4)\n</code></pre>\n\n<p>EDIT: moved null_decorator above, as user2233949 recommended</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 8852137,
                                "reputation": 487,
                                "user_id": 6611055,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "weiji14"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1509486188,
                            "post_id": 37367965,
                            "comment_id": 81037293,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/37367965#comment81037293_37367965",
                            "body": "Python 3 one-liner method if not worried about recursive-ness <code>sum([entry.stat().st_size for entry in os.scandir(file)])</code>. Note output is in bytes, /1024 to get KB and /(1024*1024) to get MB."
                        },
                        {
                            "owner": {
                                "account_id": 1836810,
                                "reputation": 3675,
                                "user_id": 1667018,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Vedran \u0160ego"
                            },
                            "reply_to_user": {
                                "account_id": 8852137,
                                "reputation": 487,
                                "user_id": 6611055,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "weiji14"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1510913799,
                            "post_id": 37367965,
                            "comment_id": 81648233,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/37367965#comment81648233_37367965",
                            "body": "@weiji14 Lose the brackets, i.e., <code>sum(entry.stat().st_size for entry in os.scandir(file))</code>. No reason to make a list, because <code>sum</code> takes iterators as well."
                        },
                        {
                            "owner": {
                                "account_id": 8505733,
                                "reputation": 1064,
                                "user_id": 6377376,
                                "user_type": "registered",
                                "display_name": "Bart Robinson"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1606177281,
                            "post_id": 37367965,
                            "comment_id": 114878255,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/37367965#comment114878255_37367965",
                            "body": "This answer is by far the most efficient on Windows, because <code>DirEntry.stat()</code> <a href=\"https://docs.python.org/3/library/os.html#os.DirEntry.stat\" rel=\"nofollow noreferrer\">does not require an additional system call per file</a>."
                        },
                        {
                            "owner": {
                                "account_id": 10024080,
                                "reputation": 174,
                                "user_id": 7412781,
                                "user_type": "registered",
                                "display_name": "Andrew Chong"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1693844272,
                            "post_id": 37367965,
                            "comment_id": 135810537,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/37367965#comment135810537_37367965",
                            "body": "In my test, this solution is about 6 times faster than os.walk approach."
                        }
                    ],
                    "owner": {
                        "account_id": 3215774,
                        "reputation": 4371,
                        "user_id": 2714534,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "blakev"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 26,
                    "last_activity_date": 1463864482,
                    "creation_date": 1463864482,
                    "answer_id": 37367965,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/37367965#37367965",
                    "body": "<p>Python 3.5 recursive folder size using <code>os.scandir</code></p>\n\n<pre><code>def folder_size(path='.'):\n    total = 0\n    for entry in os.scandir(path):\n        if entry.is_file():\n            total += entry.stat().st_size\n        elif entry.is_dir():\n            total += folder_size(entry.path)\n    return total\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2881084,
                                "reputation": 757,
                                "user_id": 2471983,
                                "user_type": "registered",
                                "display_name": "adzenith"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1541688760,
                            "post_id": 39615417,
                            "comment_id": 93308387,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/39615417#comment93308387_39615417",
                            "body": "Starting with Python 3.5, the built-in <code>glob</code> supports recursion. You can use: <code>glob.glob(&#39;&#47;var&#47;**&#39;, recursive=True)</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 82907,
                        "reputation": 17865,
                        "user_id": 232794,
                        "user_type": "registered",
                        "accept_rate": 90,
                        "display_name": "Sardathrion - against SE abuse"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1474457570,
                    "creation_date": 1474457570,
                    "answer_id": 39615417,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/39615417#39615417",
                    "body": "<p>A little late to the party but in one line provided that you have <a href=\"https://pypi.python.org/pypi/glob2\" rel=\"noreferrer\">glob2</a> and <a href=\"https://pypi.python.org/pypi/humanize\" rel=\"noreferrer\">humanize</a> installed. Note that in Python 3, the default <code>iglob</code> has a recursive mode. How to modify the code for Python 3 is left as a trivial exercise for the reader.</p>\n\n<pre><code>&gt;&gt;&gt; import os\n&gt;&gt;&gt; from humanize import naturalsize\n&gt;&gt;&gt; from glob2 import iglob\n&gt;&gt;&gt; naturalsize(sum(os.path.getsize(x) for x in iglob('/var/**'))))\n'546.2 MB'\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2490951,
                        "reputation": 884,
                        "user_id": 2168400,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "alfonso"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1489011864,
                    "creation_date": 1489011864,
                    "answer_id": 42683065,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/42683065#42683065",
                    "body": "<p>Admittedly, this is kind of hackish and only works on Unix/Linux.</p>\n\n<p>It matches <code>du -sb .</code> because in effect this is a Python bash wrapper that runs the <code>du -sb .</code> command.</p>\n\n<pre><code>import subprocess\n\ndef system_command(cmd):\n    \"\"\"\"Function executes cmd parameter as a bash command.\"\"\"\n    p = subprocess.Popen(cmd,\n                         stdout=subprocess.PIPE,\n                         stderr=subprocess.PIPE,\n                         shell=True)\n    stdout, stderr = p.communicate()\n    return stdout, stderr\n\nsize = int(system_command('du -sb . ')[0].split()[0])\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 230986,
                        "reputation": 398,
                        "user_id": 6292831,
                        "user_type": "registered",
                        "display_name": "Akarius"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1490710375,
                    "creation_date": 1490710375,
                    "answer_id": 43071932,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/43071932#43071932",
                    "body": "<p>I'm using python 2.7.13 with <a href=\"https://pypi.python.org/pypi/scandir\" rel=\"nofollow noreferrer\">scandir</a> and here's my one-liner recursive function to get the total size of a folder:</p>\n\n<pre><code>from scandir import scandir\ndef getTotFldrSize(path):\n    return sum([s.stat(follow_symlinks=False).st_size for s in scandir(path) if s.is_file(follow_symlinks=False)]) + \\\n    + sum([getTotFldrSize(s.path) for s in scandir(path) if s.is_dir(follow_symlinks=False)])\n\n&gt;&gt;&gt; print getTotFldrSize('.')\n1203245680\n</code></pre>\n\n<p><a href=\"https://pypi.python.org/pypi/scandir\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/scandir</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 10037993,
                        "reputation": 320,
                        "user_id": 7421890,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Chris"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1503746603,
                    "last_edit_date": 1503746603,
                    "creation_date": 1492701737,
                    "answer_id": 43523704,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/43523704#43523704",
                    "body": "<p>use library <a href=\"https://pypi.python.org/pypi/sh/0.107\" rel=\"nofollow noreferrer\">sh</a>: the module <code>du</code> does it: </p>\n\n<pre><code>pip install sh\n\nimport sh\nprint( sh.du(\"-s\", \".\") )\n91154728        .\n</code></pre>\n\n<p>if you want to pass asterix, use <code>glob</code> as described <a href=\"https://stackoverflow.com/questions/32923189/how-to-pass-an-asterisk-to-module-sh-in-python/32923739\">here</a>.</p>\n\n<p>to convert the values in human readables, use <a href=\"https://pypi.python.org/pypi/humanize\" rel=\"nofollow noreferrer\">humanize</a>:</p>\n\n<pre><code>pip install humanize\n\nimport humanize\nprint( humanize.naturalsize( 91157384 ) )\n91.2 MB\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2422503,
                        "reputation": 41,
                        "user_id": 2115172,
                        "user_type": "registered",
                        "display_name": "Nirvik Ghosh"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1494158284,
                    "creation_date": 1494158284,
                    "answer_id": 43831191,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/43831191#43831191",
                    "body": "<p>When size of the sub-directories is computed, it should update its parent's folder size and this will go on till it reaches the root parent.</p>\n\n<p>The following function computes the size of the folder and all its sub-folders. </p>\n\n<pre><code>import os\n\ndef folder_size(path):\n    parent = {}  # path to parent path mapper\n    folder_size = {}  # storing the size of directories\n    folder = os.path.realpath(path)\n\n    for root, _, filenames in os.walk(folder):\n        if root == folder:\n            parent[root] = -1  # the root folder will not have any parent\n            folder_size[root] = 0.0  # intializing the size to 0\n\n        elif root not in parent:\n            immediate_parent_path = os.path.dirname(root)  # extract the immediate parent of the subdirectory\n            parent[root] = immediate_parent_path  # store the parent of the subdirectory\n            folder_size[root] = 0.0  # initialize the size to 0\n\n        total_size = 0\n        for filename in filenames:\n            filepath = os.path.join(root, filename)\n            total_size += os.stat(filepath).st_size  # computing the size of the files under the directory\n        folder_size[root] = total_size  # store the updated size\n\n        temp_path = root  # for subdirectories, we need to update the size of the parent till the root parent\n        while parent[temp_path] != -1:\n            folder_size[parent[temp_path]] += total_size\n            temp_path = parent[temp_path]\n\n    return folder_size[folder]/1000000.0\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1627055,
                                "reputation": 2863,
                                "user_id": 1502378,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "meh"
                            },
                            "reply_to_user": {
                                "account_id": 14044738,
                                "reputation": 601,
                                "user_id": 11876830,
                                "user_type": "registered",
                                "display_name": "Abdur-Rahmaan Janhangeer"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1580770991,
                            "post_id": 45310585,
                            "comment_id": 106200113,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/45310585#comment106200113_45310585",
                            "body": "@Abdur-RahmaanJanhangeer, this is true. This is true."
                        }
                    ],
                    "owner": {
                        "account_id": 1627055,
                        "reputation": 2863,
                        "user_id": 1502378,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "meh"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1501005685,
                    "creation_date": 1501005685,
                    "answer_id": 45310585,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/45310585#45310585",
                    "body": "<p>For what it's worth... the tree command does all of this for free:</p>\n\n<pre><code>tree -h --du /path/to/dir  # files and dirs\ntree -h -d --du /path/to/dir  # dirs only\n</code></pre>\n\n<p>I love Python, but by far the simplest solution to the problem requires no new code.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 13180560,
                        "reputation": 1,
                        "user_id": 9520064,
                        "user_type": "registered",
                        "display_name": "Tomas Oliver Ramilison"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1521512694,
                    "creation_date": 1521512694,
                    "answer_id": 49375395,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/49375395#49375395",
                    "body": "<p>I'm a little late (and new) here but I chose to use the subprocess module and the 'du' command line with Linux to retrieve an accurate value for folder size in MB. I had to use if and elif for root folder because otherwise subprocess raises error due to non-zero value returned.</p>\n\n<pre><code>import subprocess\nimport os\n\n#\n# get folder size\n#\ndef get_size(self, path):\n    if os.path.exists(path) and path != '/':\n        cmd = str(subprocess.check_output(['sudo', 'du', '-s', path])).\\\n            replace('b\\'', '').replace('\\'', '').split('\\\\t')[0]\n        return float(cmd) / 1000000\n    elif os.path.exists(path) and path == '/':\n        cmd = str(subprocess.getoutput(['sudo du -s /'])). \\\n            replace('b\\'', '').replace('\\'', '').split('\\n')\n        val = cmd[len(cmd) - 1].replace('/', '').replace(' ', '')\n        return float(val) / 1000000\n    else: raise ValueError\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 7596399,
                        "reputation": 341,
                        "user_id": 5762474,
                        "user_type": "registered",
                        "display_name": "BR1COP"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1535023312,
                    "creation_date": 1535023312,
                    "answer_id": 51984637,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/51984637#51984637",
                    "body": "<p>If you are in Windows OS you can do:</p>\n\n<p>install the module pywin32 by launching:</p>\n\n<p>pip install pywin32</p>\n\n<p>and then coding the following:</p>\n\n<pre><code>import win32com.client as com\n\ndef get_folder_size(path):\n   try:\n       fso = com.Dispatch(\"Scripting.FileSystemObject\")\n       folder = fso.GetFolder(path)\n       size = str(round(folder.Size / 1048576))\n       print(\"Size: \" + size + \" MB\")\n   except Exception as e:\n       print(\"Error --&gt; \" + str(e))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "user_type": "does_not_exist",
                        "display_name": "user8777433"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1538256542,
                    "creation_date": 1538256542,
                    "answer_id": 52572706,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/52572706#52572706",
                    "body": "<p>It is handy:</p>\n\n<pre><code>import os\nimport stat\n\nsize = 0\npath_ = \"\"\ndef calculate(path=os.environ[\"SYSTEMROOT\"]):\n    global size, path_\n    size = 0\n    path_ = path\n\n    for x, y, z in os.walk(path):\n        for i in z:\n            size += os.path.getsize(x + os.sep + i)\n\ndef cevir(x):\n    global path_\n    print(path_, x, \"Byte\")\n    print(path_, x/1024, \"Kilobyte\")\n    print(path_, x/1048576, \"Megabyte\")\n    print(path_, x/1073741824, \"Gigabyte\")\n\ncalculate(\"C:\\Users\\Jundullah\\Desktop\")\ncevir(size)\n\nOutput:\nC:\\Users\\Jundullah\\Desktop 87874712211 Byte\nC:\\Users\\Jundullah\\Desktop 85815148.64355469 Kilobyte\nC:\\Users\\Jundullah\\Desktop 83803.85609722137 Megabyte\nC:\\Users\\Jundullah\\Desktop 81.83970321994275 Gigabyte\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 5422851,
                        "reputation": 1707,
                        "user_id": 7027346,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "delica"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1548946120,
                    "last_edit_date": 1548946120,
                    "creation_date": 1543015378,
                    "answer_id": 53453823,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/53453823#53453823",
                    "body": "<p>Here is a one liner that does it recursively (recursive option available as of Python 3.5):</p>\n\n<pre><code>import os\nimport glob\nprint(sum(os.path.getsize(f) for f in glob.glob('**', recursive=True) if os.path.isfile(f))/(1024*1024))\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 5676033,
                                "reputation": 129,
                                "user_id": 4489163,
                                "user_type": "registered",
                                "display_name": "Ankit Arora"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1648551701,
                            "post_id": 55648984,
                            "comment_id": 126647690,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/55648984#comment126647690_55648984",
                            "body": "The total_bytes calculation was what I was looking for! No other solution here calculates that. The du -sh &lt;path&gt; command infact gives me total bytes and not the apparent_total_bytes. Thanks!"
                        }
                    ],
                    "owner": {
                        "account_id": 15144075,
                        "reputation": 1637,
                        "user_id": 10928331,
                        "user_type": "registered",
                        "display_name": "Cloudomation"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1555062730,
                    "creation_date": 1555062730,
                    "answer_id": 55648984,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/55648984#55648984",
                    "body": "<h1>Get directory size</h1>\n\n<p>Properties of the solution:</p>\n\n<ul>\n<li>returns both: the apparent size (number of bytes in the file) and the actual disk space the files uses.</li>\n<li>counts hard linked files only once</li>\n<li>counts symlinks the same way <code>du</code> does</li>\n<li>does not use recursion</li>\n<li>uses <a href=\"https://docs.python.org/3/library/os.html#os.stat_result.st_blocks\" rel=\"noreferrer\"><code>st.st_blocks</code></a> for disk space used, thus works only on Unix-like systems</li>\n</ul>\n\n<p><strong>The code:</strong></p>\n\n<pre><code>import os\n\n\ndef du(path):\n    if os.path.islink(path):\n        return (os.lstat(path).st_size, 0)\n    if os.path.isfile(path):\n        st = os.lstat(path)\n        return (st.st_size, st.st_blocks * 512)\n    apparent_total_bytes = 0\n    total_bytes = 0\n    have = []\n    for dirpath, dirnames, filenames in os.walk(path):\n        apparent_total_bytes += os.lstat(dirpath).st_size\n        total_bytes += os.lstat(dirpath).st_blocks * 512\n        for f in filenames:\n            fp = os.path.join(dirpath, f)\n            if os.path.islink(fp):\n                apparent_total_bytes += os.lstat(fp).st_size\n                continue\n            st = os.lstat(fp)\n            if st.st_ino in have:\n                continue  # skip hardlinks which were already counted\n            have.append(st.st_ino)\n            apparent_total_bytes += st.st_size\n            total_bytes += st.st_blocks * 512\n        for d in dirnames:\n            dp = os.path.join(dirpath, d)\n            if os.path.islink(dp):\n                apparent_total_bytes += os.lstat(dp).st_size\n    return (apparent_total_bytes, total_bytes)\n</code></pre>\n\n<p><strong>Example usage:</strong></p>\n\n<pre><code>&gt;&gt;&gt; du('/lib')\n(236425839, 244363264)\n\n$ du -sb /lib\n236425839   /lib\n$ du -sB1 /lib\n244363264   /lib\n</code></pre>\n\n<hr>\n\n<h1>Human readable file size</h1>\n\n<p>Properties of the solution:</p>\n\n<ul>\n<li>Supports up to <a href=\"https://en.wikipedia.org/wiki/Yottabyte\" rel=\"noreferrer\">Yottabytes</a></li>\n<li>Supports <a href=\"https://en.wikipedia.org/wiki/Kilobyte\" rel=\"noreferrer\">SI Units</a> or <a href=\"https://en.wikipedia.org/wiki/Kibibyte\" rel=\"noreferrer\">IEC Units</a></li>\n<li>Support custom suffixes</li>\n</ul>\n\n<p><strong>The code:</strong></p>\n\n<pre><code>def humanized_size(num, suffix='B', si=False):\n    if si:\n        units = ['','K','M','G','T','P','E','Z']\n        last_unit = 'Y'\n        div = 1000.0\n    else:\n        units = ['','Ki','Mi','Gi','Ti','Pi','Ei','Zi']\n        last_unit = 'Yi'\n        div = 1024.0\n    for unit in units:\n        if abs(num) &lt; div:\n            return \"%3.1f%s%s\" % (num, unit, suffix)\n        num /= div\n    return \"%.1f%s%s\" % (num, last_unit, suffix)\n</code></pre>\n\n<p><strong>Example usage:</strong></p>\n\n<pre><code>&gt;&gt;&gt; humanized_size(236425839)\n'225.5MiB'\n&gt;&gt;&gt; humanized_size(236425839, si=True)\n'236.4MB'\n&gt;&gt;&gt; humanized_size(236425839, si=True, suffix='')\n'236.4M'\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7550116,
                                "reputation": 2075,
                                "user_id": 5731861,
                                "user_type": "registered",
                                "display_name": "Felipe Valdes"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1615088329,
                            "post_id": 55659577,
                            "comment_id": 117582086,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/55659577#comment117582086_55659577",
                            "body": "will fail if there are invalid symlinks: FileNotFoundError: [Errno 2] No such file or directory"
                        },
                        {
                            "owner": {
                                "account_id": 11706935,
                                "reputation": 551,
                                "user_id": 9560908,
                                "user_type": "registered",
                                "display_name": "Terry Davis"
                            },
                            "reply_to_user": {
                                "account_id": 7550116,
                                "reputation": 2075,
                                "user_id": 5731861,
                                "user_type": "registered",
                                "display_name": "Felipe Valdes"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1615238794,
                            "post_id": 55659577,
                            "comment_id": 117625072,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/55659577#comment117625072_55659577",
                            "body": "Would adding <code>if file.exists()</code> to the comprehension fix that? I guess <code>Path.lstat</code> would work too, but I think it would inflate the size of the result by double counting symlinks."
                        },
                        {
                            "owner": {
                                "account_id": 13377702,
                                "reputation": 1314,
                                "user_id": 9654083,
                                "user_type": "registered",
                                "display_name": "TheTechRobo the Nerd"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1691548536,
                            "post_id": 55659577,
                            "comment_id": 135505296,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/55659577#comment135505296_55659577",
                            "body": "I&#39;d suggest using <code>KiB</code>, <code>MiB</code>, etc. to make clearer the fact that these are base-2 units and not base-10 (i.e. 1024bytes = 1KiB, 1000bytes = 1KB)"
                        },
                        {
                            "owner": {
                                "account_id": 27003500,
                                "reputation": 128,
                                "user_id": 20564392,
                                "user_type": "registered",
                                "display_name": "Stephan Samuel"
                            },
                            "reply_to_user": {
                                "account_id": 13377702,
                                "reputation": 1314,
                                "user_id": 9654083,
                                "user_type": "registered",
                                "display_name": "TheTechRobo the Nerd"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1710348218,
                            "post_id": 55659577,
                            "comment_id": 137785317,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/55659577#comment137785317_55659577",
                            "body": "@TheTechRobotheNerd even better, just use something like <a href=\"https://pypi.org/project/humanize/\" rel=\"nofollow noreferrer\"><code>humanize</code></a>."
                        }
                    ],
                    "owner": {
                        "account_id": 11706935,
                        "reputation": 551,
                        "user_id": 9560908,
                        "user_type": "registered",
                        "display_name": "Terry Davis"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 33,
                    "last_activity_date": 1666045250,
                    "last_edit_date": 1666045250,
                    "creation_date": 1555104090,
                    "answer_id": 55659577,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/55659577#55659577",
                    "body": "<p>Using <code>pathlib</code> I came up with this one-liner to get the size of a folder:</p>\n<pre class=\"lang-py prettyprint-override\"><code>sum(file.stat().st_size for file in Path(folder).rglob('*'))\n</code></pre>\n<p>And this is what I came up with for a nicely formatted output:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from pathlib import Path\n\n\ndef get_folder_size(folder):\n    return ByteSize(sum(file.stat().st_size for file in Path(folder).rglob('*')))\n\n\nclass ByteSize(int):\n\n    _KB = 1024\n    _suffixes = 'B', 'KB', 'MB', 'GB', 'PB'\n\n    def __new__(cls, *args, **kwargs):\n        return super().__new__(cls, *args, **kwargs)\n\n    def __init__(self, *args, **kwargs):\n        self.bytes = self.B = int(self)\n        self.kilobytes = self.KB = self / self._KB**1\n        self.megabytes = self.MB = self / self._KB**2\n        self.gigabytes = self.GB = self / self._KB**3\n        self.petabytes = self.PB = self / self._KB**4\n        *suffixes, last = self._suffixes\n        suffix = next((\n            suffix\n            for suffix in suffixes\n            if 1 &lt; getattr(self, suffix) &lt; self._KB\n        ), last)\n        self.readable = suffix, getattr(self, suffix)\n\n        super().__init__()\n\n    def __str__(self):\n        return self.__format__('.2f')\n\n    def __repr__(self):\n        return '{}({})'.format(self.__class__.__name__, super().__repr__())\n\n    def __format__(self, format_spec):\n        suffix, val = self.readable\n        return '{val:{fmt}} {suf}'.format(val=val, fmt=format_spec, suf=suffix)\n\n    def __sub__(self, other):\n        return self.__class__(super().__sub__(other))\n\n    def __add__(self, other):\n        return self.__class__(super().__add__(other))\n    \n    def __mul__(self, other):\n        return self.__class__(super().__mul__(other))\n\n    def __rsub__(self, other):\n        return self.__class__(super().__sub__(other))\n\n    def __radd__(self, other):\n        return self.__class__(super().__add__(other))\n    \n    def __rmul__(self, other):\n        return self.__class__(super().__rmul__(other))   \n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; size = get_folder_size(&quot;c:/users/tdavis/downloads&quot;)\n&gt;&gt;&gt; print(size)\n5.81 GB\n&gt;&gt;&gt; size.GB\n5.810891855508089\n&gt;&gt;&gt; size.gigabytes\n5.810891855508089\n&gt;&gt;&gt; size.PB\n0.005674699077644618\n&gt;&gt;&gt; size.MB\n5950.353260040283\n&gt;&gt;&gt; size\nByteSize(6239397620)\n</code></pre>\n<p>I also came across this <a href=\"https://stackoverflow.com/questions/1094841/reusable-library-to-get-human-readable-version-of-file-size\">question</a>, which has some more compact and probably more performant strategies for printing file sizes.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 12144082,
                        "reputation": 21,
                        "user_id": 8866971,
                        "user_type": "registered",
                        "display_name": "Carlos A. Planch&#243;n"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1556239250,
                    "last_edit_date": 1556239250,
                    "creation_date": 1556235493,
                    "answer_id": 55858961,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/55858961#55858961",
                    "body": "<p>A solution that works on Python 3.6 using pathlib.</p>\n\n<pre><code>from pathlib import Path\n\nsum([f.stat().st_size for f in Path(\"path\").glob(\"**/*\")])\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1080035,
                        "reputation": 1380,
                        "user_id": 5717886,
                        "user_type": "registered",
                        "display_name": "don_vanchos"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1561397459,
                    "last_edit_date": 1561397459,
                    "creation_date": 1561397142,
                    "answer_id": 56741321,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/56741321#56741321",
                    "body": "<p><strong>Python 3.6+</strong> recursive folder/file size using <code>os.scandir</code>. As powerful as in the <a href=\"https://stackoverflow.com/a/37367965/5717886\">answer</a> by  @blakev, but shorter and in <strong><a href=\"https://docs.python.org/3.6/glossary.html#term-eafp\" rel=\"nofollow noreferrer\">EAFP</a> python style</strong>.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\n\ndef size(path, *, follow_symlinks=False):\n    try:\n        with os.scandir(path) as it:\n            return sum(size(entry, follow_symlinks=follow_symlinks) for entry in it)\n    except NotADirectoryError:\n        return os.stat(path, follow_symlinks=follow_symlinks).st_size\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1245679,
                                "reputation": 7034,
                                "user_id": 1207193,
                                "user_type": "registered",
                                "display_name": "imbr"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1616086445,
                            "post_id": 57134202,
                            "comment_id": 117899445,
                            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/57134202#comment117899445_57134202",
                            "body": "thank you I was looking for average file size calculation!"
                        }
                    ],
                    "owner": {
                        "account_id": 13277507,
                        "reputation": 5960,
                        "user_id": 9586338,
                        "user_type": "registered",
                        "display_name": "Waket Zheng"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 18,
                    "last_activity_date": 1634353627,
                    "last_edit_date": 1634353627,
                    "creation_date": 1563720054,
                    "answer_id": 57134202,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/57134202#57134202",
                    "body": "<p>for python3.5+</p>\n<pre><code>from pathlib import Path\n\ndef get_size(folder: str) -&gt; int:\n    return sum(p.stat().st_size for p in Path(folder).rglob('*'))\n</code></pre>\n<p>Usage::</p>\n<pre><code>In [6]: get_size('/etc/not-exist-path')\nOut[6]: 0\nIn [7]: get_size('.')\nOut[7]: 12038689\nIn [8]: def filesize(size: int) -&gt; str:\n   ...:     for unit in (&quot;B&quot;, &quot;K&quot;, &quot;M&quot;, &quot;G&quot;, &quot;T&quot;):\n   ...:         if size &lt; 1024:\n   ...:             break\n   ...:         size /= 1024\n   ...:     return f&quot;{size:.1f}{unit}&quot;\n   ...:\n\nIn [9]: filesize(get_size('.'))\nOut[9]: '11.5M'\n\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 7102904,
                        "reputation": 21,
                        "user_id": 5433694,
                        "user_type": "registered",
                        "display_name": "zero shubham"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1565689750,
                    "last_edit_date": 1565689750,
                    "creation_date": 1564488277,
                    "answer_id": 57271237,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/57271237#57271237",
                    "body": "<pre class=\"lang-py prettyprint-override\"><code>def recursive_dir_size(path):\n    size = 0\n\n    for x in os.listdir(path):\n        if not os.path.isdir(os.path.join(path,x)):\n            size += os.stat(os.path.join(path,x)).st_size\n        else:\n            size += recursive_dir_size(os.path.join(path,x))\n\n    return size\n</code></pre>\n\n<p>I wrote this function which gives me accurate overall size of a directory, i tried other for loop solutions with os.walk but i don't know why the end result was always less than the actual size (on ubuntu 18 env). I must have done something wrong but who cares wrote this one works perfectly fine.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 492994,
                        "reputation": 3783,
                        "user_id": 1271412,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "petertc"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1579487837,
                    "creation_date": 1579487837,
                    "answer_id": 59816348,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/59816348#59816348",
                    "body": "<p><code>du</code> does not follow symlinks by default. No answer here make use of <code>follow_symlinks=False</code>.</p>\n\n<p>Here is an implementation which follows default behavior of du:</p>\n\n<pre><code>def du(path) -&gt; int:\n    total = 0\n    for entry in os.scandir(path):\n        if entry.is_file(follow_symlinks=False):\n            total += entry.stat().st_size\n        elif entry.is_dir(follow_symlinks=False):\n            total += du(entry.path)\n    return total\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>class Test(unittest.TestCase):\n    def test_du(self):\n        root = '/tmp/du_test'\n        subprocess.run(['rm', '-rf', root])\n        test_utils.mkdir(root)\n        test_utils.create_file(root, 'A', '1M')\n        test_utils.create_file(root, 'B', '1M')\n        sub = '/'.join([root, 'sub'])\n        test_utils.mkdir(sub)\n        test_utils.create_file(sub, 'C', '1M')\n        test_utils.create_file(sub, 'D', '1M')\n        subprocess.run(['ln', '-s', '/tmp', '/'.join([root, 'link']), ])\n        self.assertEqual(4 &lt;&lt; 20, util.du(root))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 17216913,
                        "reputation": 671,
                        "user_id": 12464709,
                        "user_type": "registered",
                        "display_name": "Farhan Hai Khan"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1590402456,
                    "creation_date": 1590402456,
                    "answer_id": 62000501,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/62000501#62000501",
                    "body": "<pre><code>import os\ndef get_size(path = os.getcwd()):\n    print(\"Calculating Size: \",path)\n    total_size = 0\n    #if path is directory--\n    if os.path.isdir(path):\n      print(\"Path type : Directory/Folder\")\n      for dirpath, dirnames, filenames in os.walk(path):\n          for f in filenames:\n              fp = os.path.join(dirpath, f)\n              # skip if it is symbolic link\n              if not os.path.islink(fp):\n                  total_size += os.path.getsize(fp)\n    #if path is a file---\n    elif os.path.isfile(path):\n      print(\"Path type : File\")\n      total_size=os.path.getsize(path)\n    else:\n      print(\"Path Type : Special File (Socket, FIFO, Device File)\" )\n      total_size=0\n    bytesize=total_size\n    print(bytesize, 'bytes')\n    print(bytesize/(1024), 'kilobytes')\n    print(bytesize/(1024*1024), 'megabytes')\n    print(bytesize/(1024*1024*1024), 'gegabytes')\n    return total_size\n\n\nx=get_size(\"/content/examples\")\n</code></pre>\n\n<p>I'm sure this helps! For folders and files as well!</p>\n"
                },
                {
                    "owner": {
                        "account_id": 22830190,
                        "reputation": 67,
                        "user_id": 16978791,
                        "user_type": "registered",
                        "display_name": "JanB"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1698207622,
                    "last_edit_date": 1698207622,
                    "creation_date": 1698172230,
                    "answer_id": 77354580,
                    "question_id": 1392413,
                    "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python/77354580#77354580",
                    "body": "<p>This one returns the same number of bytes as <code>du -sb</code> command on Linux:</p>\n<ul>\n<li>It's adding file sizes for unique inodes (to handle hard links).</li>\n<li>It's using <code>os.lstat</code> that does not follow symbolic links.</li>\n<li>It's taking the top directory into account.</li>\n</ul>\n<pre class=\"lang-py prettyprint-override\"><code>import os\n\ndef du(directory):\n    # add size of the top directory (special file)\n    size=os.lstat(directory).st_size\n\n    inodes_sizes={}\n    for dirpath, dirnames, filenames in os.walk(directory):\n        # add sizes of subdirectories (special files)\n        for d in dirnames:            \n            size+=os.lstat(os.path.join(dirpath, d)).st_size\n        # get sizes for unique inodes (to include all hard links to a single file once)            \n        for f in filenames:            \n            file_stat=os.lstat(os.path.join(dirpath, f))\n            inode=file_stat.st_ino\n            inode_size=file_stat.st_size\n            inodes_sizes[inode]=inode_size   \n\n    # add sizes of files\n    size+=sum(inodes_sizes.values())\n    return(size)\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 7589,
                "reputation": 51734,
                "user_id": 13227,
                "user_type": "registered",
                "accept_rate": 91,
                "display_name": "Gary Willoughby"
            },
            "comment_count": 4,
            "is_answered": true,
            "accepted_answer_id": 1392549,
            "answer_count": 34,
            "score": 292,
            "last_activity_date": 1698207622,
            "creation_date": 1252393602,
            "last_edit_date": 1517446273,
            "question_id": 1392413,
            "link": "https://stackoverflow.com/questions/1392413/calculating-a-directorys-size-using-python",
            "title": "Calculating a directory&#39;s size using Python?",
            "body": "<p>Before I re-invent this particular wheel, has anybody got a nice routine for calculating the size of a directory using Python? It would be very nice if the routine would format the size nicely in Mb/Gb etc.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 6721
}