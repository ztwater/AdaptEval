{
    "items": [
        {
            "tags": [
                "python",
                "unit-testing",
                "pytest"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 40869,
                        "reputation": 5704,
                        "user_id": 118608,
                        "user_type": "registered",
                        "accept_rate": 62,
                        "display_name": "qff"
                    },
                    "edited": false,
                    "score": 28,
                    "creation_date": 1480531790,
                    "post_id": 33508060,
                    "comment_id": 69005761,
                    "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di#comment69005761_33508060",
                    "body": "It seems crazy that pytest discourages <code>__init__.py</code>-files but at the same time provide no alternative to sharing helper functions between tests. My hair is turning gray over this."
                },
                {
                    "owner": {
                        "account_id": 463429,
                        "reputation": 6558,
                        "user_id": 866333,
                        "user_type": "registered",
                        "accept_rate": 88,
                        "display_name": "John"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1661083715,
                    "post_id": 33508060,
                    "comment_id": 129682472,
                    "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di#comment129682472_33508060",
                    "body": "What surprised me was the lack of <code>short test summary info</code> when I import a plain, sister, file, say <code>helpers</code> containing a function that fails an <code>assert</code>. If the functions <b>aren&#39;t</b> <code>import</code>ed, I still get as helpful output as if they were inline in the <code>test_</code> function being run."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1787640,
                                "reputation": 12330,
                                "user_id": 1663942,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "Juan Carlos Coto"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1447706884,
                            "post_id": 33515264,
                            "comment_id": 55257052,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/33515264#comment55257052_33515264",
                            "body": "I really liked this solution, especially because it keeps the code&#39;s import path configuration with the tests&#39;, which, to me, makes for a simpler design.  Thanks!"
                        },
                        {
                            "owner": {
                                "account_id": 6602312,
                                "reputation": 708,
                                "user_id": 5100213,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "timekeeper"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1506915302,
                            "post_id": 33515264,
                            "comment_id": 79992361,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/33515264#comment79992361_33515264",
                            "body": "Can you add a snippet on how to import the classes in utils.py in any test_x.py?"
                        },
                        {
                            "owner": {
                                "account_id": 6090175,
                                "reputation": 5142,
                                "user_id": 4752883,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "alpha_989"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1524686944,
                            "post_id": 33515264,
                            "comment_id": 87077115,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/33515264#comment87077115_33515264",
                            "body": "@sax, what is the benefit of using this over just defining a helper function in the <code>test_module.py</code> using <code>def helper_fun():</code>. As long as the helper function doesn&#39;t start with <code>test_helper_fun</code>, it wont be collected by pytest. But it if you want to run it in a particular test function you can still call <code>helper_func</code>. Is there a reason to complicate it as such?"
                        },
                        {
                            "owner": {
                                "account_id": 6090175,
                                "reputation": 5142,
                                "user_id": 4752883,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "alpha_989"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1524687017,
                            "post_id": 33515264,
                            "comment_id": 87077145,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/33515264#comment87077145_33515264",
                            "body": "If you indeed want to keep it in a separate folder, and dont want to mix the helper functions with the <code>test_module.py</code>, cant you just use import <code>from tests.helper.util import helper_fun</code> to be able to access the helper function in the test_function?"
                        },
                        {
                            "owner": {
                                "account_id": 169167,
                                "reputation": 3766,
                                "user_id": 4300672,
                                "user_type": "registered",
                                "display_name": "sax"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1524765723,
                            "post_id": 33515264,
                            "comment_id": 87114814,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/33515264#comment87114814_33515264",
                            "body": "using pytest is reccomended do not have <code>tests</code> directory importable, so you cannot use your function from other modules"
                        },
                        {
                            "owner": {
                                "account_id": 952905,
                                "reputation": 16647,
                                "user_id": 1235929,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "Dave"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1594393654,
                            "post_id": 33515264,
                            "comment_id": 111120095,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/33515264#comment111120095_33515264",
                            "body": "When you use your helper function in a test, use &quot;from utils import function_name&quot; for the import in your test file."
                        }
                    ],
                    "owner": {
                        "account_id": 169167,
                        "reputation": 3766,
                        "user_id": 4300672,
                        "user_type": "registered",
                        "display_name": "sax"
                    },
                    "comment_count": 6,
                    "is_accepted": true,
                    "score": 63,
                    "last_activity_date": 1546950115,
                    "last_edit_date": 1546950115,
                    "creation_date": 1446619294,
                    "answer_id": 33515264,
                    "question_id": 33508060,
                    "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/33515264#33515264",
                    "body": "<p>my option is to create an extra dir in <code>tests</code> dir and add it to pythonpath in the conftest so.</p>\n\n<pre><code>tests/\n    helpers/\n      utils.py\n      ...\n    conftest.py\nsetup.cfg\n</code></pre>\n\n<p>in the <code>conftest.py</code></p>\n\n<pre><code>import sys\nimport os\nsys.path.append(os.path.join(os.path.dirname(__file__), 'helpers'))\n</code></pre>\n\n<p>in <code>setup.cfg</code></p>\n\n<pre><code>[pytest]\nnorecursedirs=tests/helpers\n</code></pre>\n\n<p>this module will be available with <code>import utils</code>, only be careful to name clashing.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1787640,
                                "reputation": 12330,
                                "user_id": 1663942,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "Juan Carlos Coto"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1459701245,
                            "post_id": 36383912,
                            "comment_id": 60392805,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/36383912#comment60392805_36383912",
                            "body": "Cool, I&#39;ll take a look. Thanks!"
                        },
                        {
                            "owner": {
                                "account_id": 32756,
                                "reputation": 9248,
                                "user_id": 91144,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "Michael Barton"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1462487200,
                            "post_id": 36383912,
                            "comment_id": 61669520,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/36383912#comment61669520_36383912",
                            "body": "I tried this, however I always get &#39;RuntimeError: The helper being called was not registred&#39; errors."
                        },
                        {
                            "owner": {
                                "account_id": 1310158,
                                "reputation": 785,
                                "user_id": 1258307,
                                "user_type": "registered",
                                "display_name": "s0undt3ch"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1462524043,
                            "post_id": 36383912,
                            "comment_id": 61681234,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/36383912#comment61681234_36383912",
                            "body": "Could you please file a ticket against the plugin with an example of how to trigger your RuntimeError. <a href=\"https://github.com/saltstack/pytest-helpers-namespace\" rel=\"nofollow noreferrer\">github.com/saltstack/pytest-helpers-namespace</a>"
                        },
                        {
                            "owner": {
                                "account_id": 266765,
                                "reputation": 641,
                                "user_id": 554521,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Ken"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1560892067,
                            "post_id": 36383912,
                            "comment_id": 99884034,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/36383912#comment99884034_36383912",
                            "body": "@s0undt3ch thanks for making this plugin. I cant seem to be able to use fixtures predefined in the conftest.py along side with help. How would I use a fixture along side with helper functions?"
                        },
                        {
                            "owner": {
                                "account_id": 1310158,
                                "reputation": 785,
                                "user_id": 1258307,
                                "user_type": "registered",
                                "display_name": "s0undt3ch"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1560925184,
                            "post_id": 36383912,
                            "comment_id": 99891244,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/36383912#comment99891244_36383912",
                            "body": "Ken, could you please file an issue against the plugins repo? Ever since pytest dropped namespace support, the plugin relies on a hack to work. Maybe that&#39;s the issue, maybe it&#39;s not."
                        }
                    ],
                    "owner": {
                        "account_id": 1310158,
                        "reputation": 785,
                        "user_id": 1258307,
                        "user_type": "registered",
                        "display_name": "s0undt3ch"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 39,
                    "last_activity_date": 1511434554,
                    "last_edit_date": 1511434554,
                    "creation_date": 1459677080,
                    "answer_id": 36383912,
                    "question_id": 33508060,
                    "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/36383912#36383912",
                    "body": "<p>While searching for a solution for this problem I came across this SO question and ended up adopting the same approach. Creating a helpers package, munging <code>sys.path</code> to make it importable and then just importing it...</p>\n\n<p>This did not seem the best approach, so, I created <a href=\"https://pypi.python.org/pypi/pytest-helpers-namespace\" rel=\"noreferrer\">pytest-helpers-namespace</a>. This plugin allows you to register helper functions on your <code>conftest.py</code>:</p>\n\n<pre><code>import pytest\n\npytest_plugins = ['helpers_namespace']\n\n@pytest.helpers.register\ndef my_custom_assert_helper(blah):\n    assert blah\n\n# One can even specify a custom name for the helper\n@pytest.helpers.register(name='assertme')\ndef my_custom_assert_helper_2(blah):\n    assert blah\n\n# And even namespace helpers\n@pytest.helpers.asserts.register(name='me')\ndef my_custom_assert_helper_3(blah):\n    assert blah\n</code></pre>\n\n<p>And then, within a test case function body just use it like </p>\n\n<pre><code>def test_this():\n    assert pytest.helpers.my_custom_assert_helper(blah) \n\ndef test_this_2():\n    assert pytest.helpers.assertme(blah)\n\ndef test_this_3():\n    assert pytest.helpers.asserts.me(blah)\n</code></pre>\n\n<p>Its pretty simple and the documentation pretty small. Take a look and tell me if it addresses your problem too.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1787640,
                                "reputation": 12330,
                                "user_id": 1663942,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "Juan Carlos Coto"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1471868166,
                            "post_id": 39073559,
                            "comment_id": 65506071,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/39073559#comment65506071_39073559",
                            "body": "I believe this is the same situation I describe in the question, where code and tests are not clearly separated. For releases and such, you would have to think about excluding <code>test_helpers</code> as well, for instance."
                        }
                    ],
                    "owner": {
                        "account_id": 536989,
                        "reputation": 4320,
                        "user_id": 905720,
                        "user_type": "registered",
                        "accept_rate": 81,
                        "display_name": "Racing Tadpole"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": -2,
                    "last_activity_date": 1508304465,
                    "last_edit_date": 1508304465,
                    "creation_date": 1471850831,
                    "answer_id": 39073559,
                    "question_id": 33508060,
                    "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/39073559#39073559",
                    "body": "<p>As another option, this directory structure worked for me:</p>\n\n<pre><code>mypkg/\n    ...\ntest_helpers/\n    __init__.py\n    utils.py  \n    ...\ntests/\n    my_test.py\n    ...\n</code></pre>\n\n<p>And then in <code>my_test.py</code> import the utilities using:\n<code>from test_helpers import utils</code></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 413927,
                                "reputation": 3593,
                                "user_id": 787842,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "cjauvin"
                            },
                            "edited": false,
                            "score": 13,
                            "creation_date": 1586567462,
                            "post_id": 42156088,
                            "comment_id": 108181817,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/42156088#comment108181817_42156088",
                            "body": "Although this pattern feels a bit hacky, it&#39;s really pytest&#39;s fault IMO (why not provide a mechanism for such an obvious requirement?) and I find it preferable than manipulating the import path (which I try to avoid as much as possible in general) as the accepted answer does."
                        },
                        {
                            "owner": {
                                "account_id": 1401732,
                                "reputation": 7860,
                                "user_id": 1330381,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "jxramos"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1608248213,
                            "post_id": 42156088,
                            "comment_id": 115533057,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/42156088#comment115533057_42156088",
                            "body": "Would this technique allow them to be used in the special pytest callbacks such as <code>pytest_collection_modifyitems</code>?"
                        },
                        {
                            "owner": {
                                "account_id": 3011136,
                                "reputation": 12666,
                                "user_id": 2572431,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "augurar"
                            },
                            "reply_to_user": {
                                "account_id": 1401732,
                                "reputation": 7860,
                                "user_id": 1330381,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "jxramos"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1608530693,
                            "post_id": 42156088,
                            "comment_id": 115602473,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/42156088#comment115602473_42156088",
                            "body": "@jxramos This approach makes the helper object available as an ordinary pytest fixture.  You could use <a href=\"https://docs.pytest.org/en/stable/reference.html#pytest-mark-usefixtures\" rel=\"nofollow noreferrer\"><code>pytest.mark.usefixtures</code></a> to dynamically add the fixture by name to a test item during the collection phase."
                        }
                    ],
                    "owner": {
                        "account_id": 3011136,
                        "reputation": 12666,
                        "user_id": 2572431,
                        "user_type": "registered",
                        "accept_rate": 71,
                        "display_name": "augurar"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 117,
                    "last_activity_date": 1486719679,
                    "creation_date": 1486719679,
                    "answer_id": 42156088,
                    "question_id": 33508060,
                    "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/42156088#42156088",
                    "body": "<p>You could define a helper class in conftest.py, then create a fixture that returns that class (or an instance of it, depending on what you need).</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pytest\n\n\nclass Helpers:\n    @staticmethod\n    def help_me():\n        return \"no\"\n\n\n@pytest.fixture\ndef helpers():\n    return Helpers\n</code></pre>\n\n<p>Then in your tests, you can use the fixture:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def test_with_help(helpers):\n    helpers.help_me()\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2271948,
                                "reputation": 1223,
                                "user_id": 1999103,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "HamsterHuey"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1614658571,
                            "post_id": 46976704,
                            "comment_id": 117445735,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/46976704#comment117445735_46976704",
                            "body": "This feels like the cleanest solution to me and works flawlessly. This should be <i>the</i> reference way imo. I&#39;m glad I kept scrolling down when viewing the answers here!"
                        },
                        {
                            "owner": {
                                "account_id": 1593789,
                                "reputation": 2801,
                                "user_id": 1476512,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "mCY"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1625060576,
                            "post_id": 46976704,
                            "comment_id": 120527043,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/46976704#comment120527043_46976704",
                            "body": "suggest to use <code>pytest.ini</code> as config file as recommended in official document."
                        },
                        {
                            "owner": {
                                "account_id": 9883159,
                                "reputation": 2228,
                                "user_id": 7391331,
                                "user_type": "registered",
                                "display_name": "trallnag"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1677324743,
                            "post_id": 46976704,
                            "comment_id": 133317821,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/46976704#comment133317821_46976704",
                            "body": "Or <code>pyproject.toml</code>"
                        },
                        {
                            "owner": {
                                "account_id": 895139,
                                "reputation": 23946,
                                "user_id": 932593,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "David Zwicker"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1706517368,
                            "post_id": 46976704,
                            "comment_id": 137330953,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/46976704#comment137330953_46976704",
                            "body": "This seems to not work anymore with version 8 of pytest."
                        }
                    ],
                    "owner": {
                        "account_id": 8873160,
                        "reputation": 2646,
                        "user_id": 6626292,
                        "user_type": "registered",
                        "display_name": "guyskk"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 32,
                    "last_activity_date": 1565875210,
                    "last_edit_date": 1565875210,
                    "creation_date": 1509112351,
                    "answer_id": 46976704,
                    "question_id": 33508060,
                    "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/46976704#46976704",
                    "body": "<p>Create a helpers package in tests folder:</p>\n\n<pre><code>tests/\n    helpers/\n      __init__.py\n      utils.py\n      ...\n    # make sure no __init__.py in here!\nsetup.cfg\n</code></pre>\n\n<p>in setup.cfg:</p>\n\n<pre><code>[pytest]\nnorecursedirs=tests/helpers\n</code></pre>\n\n<p>the helpers will be available with <code>import helpers</code>.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 284667,
                                "reputation": 6292,
                                "user_id": 582917,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "CMCDragonkai"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1541142725,
                            "post_id": 51389067,
                            "comment_id": 93122738,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/51389067#comment93122738_51389067",
                            "body": "This serves as a way to create dynamic fixtures as well!"
                        },
                        {
                            "owner": {
                                "account_id": 1374736,
                                "reputation": 6013,
                                "user_id": 1308967,
                                "user_type": "registered",
                                "accept_rate": 74,
                                "display_name": "Chris"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1560182636,
                            "post_id": 51389067,
                            "comment_id": 99642983,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/51389067#comment99642983_51389067",
                            "body": "Or <code>def _compare_test_vs_actual(): pass</code> then <code>@fixture;def compare_test_vs_actual():return _compare_test_vs_actual</code>. Clearer with less nesting, although if you want to receive a fixture in your fixture the above is probably cleaner."
                        }
                    ],
                    "owner": {
                        "account_id": 6351409,
                        "reputation": 369,
                        "user_id": 4930350,
                        "user_type": "registered",
                        "display_name": "tknightowl"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 26,
                    "last_activity_date": 1531856398,
                    "creation_date": 1531856398,
                    "answer_id": 51389067,
                    "question_id": 33508060,
                    "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/51389067#51389067",
                    "body": "<p>To access a method from different modules without creating packages, and have that function operate as a helper function I found the following helpful:</p>\n\n<p>conftest.py:</p>\n\n<pre><code>@pytest.fixture\ndef compare_test_vs_actual():\n    def a_function(test, actual):\n        print(test, actual)\n    return a_function\n</code></pre>\n\n<p>test_file.py:</p>\n\n<pre><code>def test_service_command_add(compare_test_vs_actual):\n    compare_test_vs_actual(\"hello\", \"world\")\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1787640,
                                "reputation": 12330,
                                "user_id": 1663942,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "Juan Carlos Coto"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1587949315,
                            "post_id": 61434194,
                            "comment_id": 108703046,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/61434194#comment108703046_61434194",
                            "body": "What\u2019s the difference between this approach and defining it as a fixture?"
                        },
                        {
                            "owner": {
                                "account_id": 5582372,
                                "reputation": 1866,
                                "user_id": 4423889,
                                "user_type": "registered",
                                "accept_rate": 89,
                                "display_name": "Vladyslav Sheruda"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1589437934,
                            "post_id": 61434194,
                            "comment_id": 109295033,
                            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/61434194#comment109295033_61434194",
                            "body": "This approach allows you to use helper functions outside of the test functions.For example while defining pytest.parametrization arguments"
                        }
                    ],
                    "owner": {
                        "account_id": 17038240,
                        "reputation": 549,
                        "user_id": 12326812,
                        "user_type": "registered",
                        "display_name": "Uriel"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1587859488,
                    "creation_date": 1587859488,
                    "answer_id": 61434194,
                    "question_id": 33508060,
                    "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/61434194#61434194",
                    "body": "<p>It is possible that some of you will be completely uphold by my suggestion. However, very simple way of using common function or value from other modules is to inject it directly into a common workspace. Example:<br>\n<em>conftest.py:</em></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys\n\ndef my_function():\n   return 'my_function() called'\n\nsys.modules['pytest'].common_funct = my_function\n</code></pre>\n\n<p><em>test_me.py</em></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pytest\n\ndef test_A():\n   print(pytest.common_funct())\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 17970184,
                        "reputation": 86,
                        "user_id": 15189834,
                        "user_type": "registered",
                        "display_name": "Michael Jakl"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1677931247,
                    "creation_date": 1677931247,
                    "answer_id": 75635524,
                    "question_id": 33508060,
                    "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/75635524#75635524",
                    "body": "<p>With pytest 7 (at least) the easiest way to accomplish this is to add the following configuration to you pytest.ini or pyproject.toml. This adds the <code>tests</code> directory to your <code>sys.path</code> and makes the respective modules available:</p>\n<pre class=\"lang-ini prettyprint-override\"><code>pythonpath = [&quot;tests&quot;]\n</code></pre>\n<p>Maybe it's even better to separate test-helpers from the tests, but that's a matter of style.</p>\n<p>As an example, using a separate directory, and using a <code>pyproject.toml</code> it would look like this:</p>\n<pre class=\"lang-ini prettyprint-override\"><code>[tool.pytest.ini_options]\npythonpath = [&quot;test_helpers&quot;]\ntestpaths = [&quot;tests&quot;]\naddopts = [\n    &quot;--import-mode=importlib&quot;,\n]\n</code></pre>\n<pre><code>src/\n    ...\ntests/\n    ...\ntest_helpers/\n    ...\n</code></pre>\n<p>This configures the <code>importlib</code> <a href=\"https://docs.pytest.org/en/7.1.x/explanation/goodpractices.html\" rel=\"noreferrer\">import mode recommended here</a>, designed exactly to prevent modifying the sys.path, though, if you are careful with your naming and you need to extract common test helpers, this can be a viable option.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 1174677,
                        "reputation": 9757,
                        "user_id": 1150961,
                        "user_type": "registered",
                        "accept_rate": 65,
                        "display_name": "Till Hoffmann"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1682217497,
                    "creation_date": 1682217497,
                    "answer_id": 76082875,
                    "question_id": 33508060,
                    "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di/76082875#76082875",
                    "body": "<p>Injecting a <code>shared</code> object into the <code>pytest</code> package from <code>conftest.py</code> has worked well for me.</p>\n<pre class=\"lang-py prettyprint-override\"><code># conftest.py\nimport pytest\n\n\nclass shared:\n    @staticmethod\n    def assert_a_general_property_between(x, y):\n        ...\n\npytest.shared = shared\n</code></pre>\n<pre class=\"lang-py prettyprint-override\"><code># test.py\nimport pytest\n\n\ndef test_something_with(x):\n    some_value = some_function_of_(x)\n    pytest.shared.assert_a_general_property_between(x, some_value)\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 1787640,
                "reputation": 12330,
                "user_id": 1663942,
                "user_type": "registered",
                "accept_rate": 85,
                "display_name": "Juan Carlos Coto"
            },
            "comment_count": 2,
            "is_answered": true,
            "accepted_answer_id": 33515264,
            "answer_count": 9,
            "score": 120,
            "last_activity_date": 1682217497,
            "creation_date": 1446581049,
            "last_edit_date": 1447470542,
            "question_id": 33508060,
            "link": "https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di",
            "title": "Create and import helper functions in tests without creating packages in test directory using py.test",
            "body": "<p><strong>Question</strong></p>\n\n<p>How can I import helper functions in test files without creating packages in the <code>test</code> directory?</p>\n\n<p><br />\n<strong>Context</strong></p>\n\n<p>I'd like to create a test helper function that I can import in several tests.  Say, something like this:</p>\n\n<pre><code># In common_file.py\n\ndef assert_a_general_property_between(x, y):\n    # test a specific relationship between x and y\n    assert ...\n\n\n# In test/my_test.py\n\ndef test_something_with(x):\n    some_value = some_function_of_(x)\n    assert_a_general_property_between(x, some_value)\n</code></pre>\n\n<p><em>Using Python 3.5, with py.test 2.8.2</em></p>\n\n<p><br />  </p>\n\n<p><strong>Current \"solution\"</strong></p>\n\n<p>I'm currently doing this via importing a module inside my project's <code>test</code> directory (which is now a package), but I'd like to do it with some other mechanism if possible (so that my <code>test</code> directory doesn't have packages but just tests, and the tests can be run on an installed version of the package, as is recommended <a href=\"http://pytest.org/latest/goodpractises.html#choosing-a-test-layout-import-rules\">here in the py.test documentation on good practices</a>).</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 6013
}