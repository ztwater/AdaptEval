{
    "items": [
        {
            "tags": [
                "python",
                "datetime",
                "numpy"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 1771279,
                        "reputation": 1828,
                        "user_id": 1615978,
                        "user_type": "registered",
                        "accept_rate": 56,
                        "display_name": "MikeyE"
                    },
                    "edited": false,
                    "score": 2,
                    "creation_date": 1499987976,
                    "post_id": 13648774,
                    "comment_id": 77157288,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64#comment77157288_13648774",
                    "body": "What do you mean when you write &quot;f(dates)&quot;. What does &quot;f()&quot; do?"
                },
                {
                    "owner": {
                        "account_id": 73202,
                        "reputation": 19174,
                        "user_id": 210945,
                        "user_type": "registered",
                        "accept_rate": 70,
                        "display_name": "naught101"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1560480866,
                    "post_id": 13648774,
                    "comment_id": 99758995,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64#comment99758995_13648774",
                    "body": "Added a feature request for this <a href=\"https://github.com/numpy/numpy/issues/13779\" rel=\"nofollow noreferrer\">github.com/numpy/numpy/issues/13779</a>"
                },
                {
                    "owner": {
                        "account_id": 25298386,
                        "reputation": 17587,
                        "user_id": 19123103,
                        "user_type": "registered",
                        "display_name": "cottontail"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1708069359,
                    "post_id": 13648774,
                    "comment_id": 137520060,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64#comment137520060_13648774",
                    "body": "Instead of using pandas (as the top answers here suggest), you can change the dtype and view as years/months since Unix epoch, which can be converted to the correct years/months. See <a href=\"https://stackoverflow.com/a/77248665/19123103\">this answer</a> for a demo."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2177690,
                                "reputation": 2799,
                                "user_id": 1927972,
                                "user_type": "registered",
                                "display_name": "jdr5ca"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1482889872,
                            "post_id": 13649455,
                            "comment_id": 69910581,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13649455#comment69910581_13649455",
                            "body": "Note that as of 1.9 this method does not work.  The divide is meant to convert the time span to the floating point number of years.  It does not extract they year attribute of a date."
                        }
                    ],
                    "owner": {
                        "account_id": 948860,
                        "reputation": 19399,
                        "user_id": 975477,
                        "user_type": "registered",
                        "accept_rate": 82,
                        "display_name": "Daniel"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1587729618,
                    "last_edit_date": 1587729618,
                    "creation_date": 1354294050,
                    "answer_id": 13649455,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13649455#13649455",
                    "body": "<p>If you upgrade to numpy 1.7 (where datetime is still labeled as experimental) the following should work.</p>\n\n<pre><code>dates/np.timedelta64(1,'Y')\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1597550,
                                "reputation": 15468,
                                "user_id": 1479269,
                                "user_type": "registered",
                                "accept_rate": 89,
                                "display_name": "dmvianna"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1383015535,
                            "post_id": 13652262,
                            "comment_id": 29175796,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13652262#comment29175796_13652262",
                            "body": "This is giving me wrong results for month with numpy 1.7.1 and pandas 0.12.0. However, <code>Series(dates).apply(lambda x: x.month)</code> seems to work."
                        },
                        {
                            "owner": {
                                "account_id": 1364630,
                                "reputation": 35719,
                                "user_id": 1301710,
                                "user_type": "registered",
                                "display_name": "bmu"
                            },
                            "reply_to_user": {
                                "account_id": 1597550,
                                "reputation": 15468,
                                "user_id": 1479269,
                                "user_type": "registered",
                                "accept_rate": 89,
                                "display_name": "dmvianna"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1383072890,
                            "post_id": 13652262,
                            "comment_id": 29206331,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13652262#comment29206331_13652262",
                            "body": "No problem here with the same versions. If you really get wrong results you should open a pandas issue."
                        },
                        {
                            "owner": {
                                "account_id": 1597550,
                                "reputation": 15468,
                                "user_id": 1479269,
                                "user_type": "registered",
                                "accept_rate": 89,
                                "display_name": "dmvianna"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1383084361,
                            "post_id": 13652262,
                            "comment_id": 29212413,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13652262#comment29212413_13652262",
                            "body": "Oh, I actually used <code>pd.DatetimeIndex(np.datetime64([&#39;2010-10-17&#39;, &#39;2011-05-13&#39;, &quot;2012-01-15&quot;]))</code>"
                        },
                        {
                            "owner": {
                                "account_id": 3398845,
                                "reputation": 3083,
                                "user_id": 2851664,
                                "user_type": "registered",
                                "display_name": "sebix"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1410425966,
                            "post_id": 13652262,
                            "comment_id": 40324347,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13652262#comment40324347_13652262",
                            "body": "Use <code>np.datetime_as_string</code> to convert Datetime64 objects to strings which Pandas can parse."
                        },
                        {
                            "owner": {
                                "account_id": 73202,
                                "reputation": 19174,
                                "user_id": 210945,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "naught101"
                            },
                            "reply_to_user": {
                                "account_id": 3398845,
                                "reputation": 3083,
                                "user_id": 2851664,
                                "user_type": "registered",
                                "display_name": "sebix"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1466383539,
                            "post_id": 13652262,
                            "comment_id": 63278368,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13652262#comment63278368_13652262",
                            "body": "@sebix: why? Pandas understands Datetime64."
                        },
                        {
                            "owner": {
                                "account_id": 3398845,
                                "reputation": 3083,
                                "user_id": 2851664,
                                "user_type": "registered",
                                "display_name": "sebix"
                            },
                            "reply_to_user": {
                                "account_id": 73202,
                                "reputation": 19174,
                                "user_id": 210945,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "naught101"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1466619318,
                            "post_id": 13652262,
                            "comment_id": 63397179,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13652262#comment63397179_13652262",
                            "body": "@naught101 I wrote this comment two years ago, possibly something has changed in the meantime?"
                        },
                        {
                            "owner": {
                                "account_id": 1476477,
                                "reputation": 429,
                                "user_id": 1386750,
                                "user_type": "registered",
                                "display_name": "AstroFloyd"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1617896765,
                            "post_id": 13652262,
                            "comment_id": 118443610,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13652262#comment118443610_13652262",
                            "body": "When the input is a datetime64 scalar, rather than an array, <code>pd.Timestamp(str(np.datetime_as_string(myDatetime64)))</code> seems to be needed, though converting to Pandas may be overkill in that case."
                        }
                    ],
                    "owner": {
                        "account_id": 1364630,
                        "reputation": 35719,
                        "user_id": 1301710,
                        "user_type": "registered",
                        "display_name": "bmu"
                    },
                    "comment_count": 7,
                    "is_accepted": true,
                    "score": 54,
                    "last_activity_date": 1354305934,
                    "last_edit_date": 1354305934,
                    "creation_date": 1354305542,
                    "answer_id": 13652262,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13652262#13652262",
                    "body": "<p>As datetime is not stable in numpy I would use pandas for this:</p>\n\n<pre><code>In [52]: import pandas as pd\n\nIn [53]: dates = pd.DatetimeIndex(['2010-10-17', '2011-05-13', \"2012-01-15\"])\n\nIn [54]: dates.year\nOut[54]: array([2010, 2011, 2012], dtype=int32)\n</code></pre>\n\n<p>Pandas uses numpy datetime internally, but seems to avoid the shortages, that numpy has up to now.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 73202,
                                "reputation": 19174,
                                "user_id": 210945,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "naught101"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1487290122,
                            "post_id": 13654502,
                            "comment_id": 71730664,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13654502#comment71730664_13654502",
                            "body": "This doesn&#39;t work in python 3.5, numpy 1.11, for the same reason as my comment on <a href=\"http://stackoverflow.com/a/35281829/210945\">Ncik&#39;s answer</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 426456,
                        "reputation": 35783,
                        "user_id": 807674,
                        "user_type": "registered",
                        "accept_rate": 70,
                        "display_name": "acjay"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1354316861,
                    "creation_date": 1354316861,
                    "answer_id": 13654502,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/13654502#13654502",
                    "body": "<p>There's no direct way to do it yet, unfortunately, but there are a couple indirect ways:</p>\n\n<pre><code>[dt.year for dt in dates.astype(object)]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>[datetime.datetime.strptime(repr(d), \"%Y-%m-%d %H:%M:%S\").year for d in dates]\n</code></pre>\n\n<p>both inspired by the examples <a href=\"http://mail.scipy.org/pipermail/numpy-discussion/2011-December/059383.html\" rel=\"nofollow\">here</a>.</p>\n\n<p>Both of these work for me on Numpy 1.6.1. You may need to be a bit more careful with the second one, since the repr() for the datetime64 might have a fraction part after a decimal point.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 73202,
                                "reputation": 19174,
                                "user_id": 210945,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "naught101"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1487289084,
                            "post_id": 26895491,
                            "comment_id": 71730317,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/26895491#comment71730317_26895491",
                            "body": "This is a good solution. It&#39;d be really nice if there was something simple like this in numpy."
                        },
                        {
                            "owner": {
                                "account_id": 5854412,
                                "reputation": 2606,
                                "user_id": 4970632,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "Luke Davis"
                            },
                            "edited": false,
                            "score": 13,
                            "creation_date": 1497049458,
                            "post_id": 26895491,
                            "comment_id": 75932200,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/26895491#comment75932200_26895491",
                            "body": "Thanks for actually giving an answer, instead of saying &quot;you shouldn&#39;t be using &lt;X&gt;, use &lt;Y&gt; instead&quot;."
                        },
                        {
                            "owner": {
                                "account_id": 4138288,
                                "reputation": 5545,
                                "user_id": 3394386,
                                "user_type": "registered",
                                "display_name": "Jody Klymak"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1565743446,
                            "post_id": 26895491,
                            "comment_id": 101444580,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/26895491#comment101444580_26895491",
                            "body": "This works, and actually works for dates that <code>datetime</code> can&#39;t handle:  <code>d = np.datetime64(&#39;-2000003-10-01&#39;).astype(&#39;datetime64[Y]&#39;).asty&zwnj;&#8203;pe(int) + 1970</code> yields  <code>-2000003</code>"
                        },
                        {
                            "owner": {
                                "account_id": 9393917,
                                "reputation": 425,
                                "user_id": 9959261,
                                "user_type": "registered",
                                "display_name": "flexatone"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1589032978,
                            "post_id": 26895491,
                            "comment_id": 109133390,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/26895491#comment109133390_26895491",
                            "body": "To get integers instead of <code>timedelta64[D]</code> in the example for <code>days</code> above,  use: <code>(dates - dates.astype(&#39;datetime64[M]&#39;)).astype(int) + 1</code>"
                        },
                        {
                            "owner": {
                                "account_id": 3658143,
                                "reputation": 143,
                                "user_id": 3048612,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Dmitry Borisoglebsky"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1639469955,
                            "post_id": 26895491,
                            "comment_id": 124350158,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/26895491#comment124350158_26895491",
                            "body": "A short update, because of the version updates, use the following line instead <code>years = dates.values.astype(&#39;datetime64[Y]&#39;)</code> or  <code>years = dates.values.astype(&#39;datetime64[Y]&#39;).astype(int) + 1970</code>"
                        },
                        {
                            "owner": {
                                "account_id": 10908059,
                                "reputation": 3394,
                                "user_id": 8491363,
                                "user_type": "registered",
                                "display_name": "user8491363"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1652248319,
                            "post_id": 26895491,
                            "comment_id": 127557250,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/26895491#comment127557250_26895491",
                            "body": "Probably the easiest way: Given <code>date = np.datetime64(&quot;2000-01-01&quot;)</code>, simply <code>date.astype(str).split(&#39;-&#39;)</code>. Now you have <code>[year_string, month_string, date_string]</code>. If you want int, just <code>int(month_string)</code>."
                        },
                        {
                            "owner": {
                                "account_id": 12491618,
                                "reputation": 483,
                                "user_id": 10239525,
                                "user_type": "registered",
                                "display_name": "Rens"
                            },
                            "reply_to_user": {
                                "account_id": 9393917,
                                "reputation": 425,
                                "user_id": 9959261,
                                "user_type": "registered",
                                "display_name": "flexatone"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1669037215,
                            "post_id": 26895491,
                            "comment_id": 131544839,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/26895491#comment131544839_26895491",
                            "body": "In response to @flexatone, your suggestion didn&#39;t work for me, but this did: <code>(dates.astype(&#39;datetime64[D]&#39;) - dates.astype(&#39;datetime64[M]&#39;)).astype(int) + 1</code>"
                        },
                        {
                            "owner": {
                                "account_id": 19601194,
                                "reputation": 822,
                                "user_id": 14345989,
                                "user_type": "registered",
                                "display_name": "Mandias"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1677802643,
                            "post_id": 26895491,
                            "comment_id": 133414575,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/26895491#comment133414575_26895491",
                            "body": "Just going to mention that I had trouble getting this to work because I was mistakenly using &quot;dates. <b>view</b> (&#39;datetime64[Y]&#39;).astype(int) + 1970&quot; instead of &quot;<b>astype</b>&quot;, which returned nonsense numbers."
                        }
                    ],
                    "owner": {
                        "account_id": 5322468,
                        "reputation": 901,
                        "user_id": 4245545,
                        "user_type": "unregistered",
                        "display_name": "Anon"
                    },
                    "comment_count": 8,
                    "is_accepted": false,
                    "score": 90,
                    "last_activity_date": 1632223703,
                    "last_edit_date": 1632223703,
                    "creation_date": 1415822339,
                    "answer_id": 26895491,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/26895491#26895491",
                    "body": "<p>I find the following tricks give between 2x and 4x speed increase versus the pandas method described <a href=\"https://stackoverflow.com/a/13652262\">in this answer</a> (i.e. <code>pd.DatetimeIndex(dates).year</code> etc.). The speed of <code>[dt.year for dt in dates.astype(object)]</code> I find to be similar to the pandas method. Also these tricks can be applied directly to ndarrays of any shape (2D, 3D etc.)</p>\n<pre><code>dates = np.arange(np.datetime64('2000-01-01'), np.datetime64('2010-01-01'))\nyears = dates.astype('datetime64[Y]').astype(int) + 1970\nmonths = dates.astype('datetime64[M]').astype(int) % 12 + 1\ndays = dates - dates.astype('datetime64[M]') + 1\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1368618,
                                "reputation": 3244,
                                "user_id": 1304462,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Nick"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1454977598,
                            "post_id": 35281829,
                            "comment_id": 58275186,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/35281829#comment58275186_35281829",
                            "body": "And you can do this on a whole array using list operations <a href=\"http://stackoverflow.com/a/13654502/1304462\">as outlined by @acjay</a>: <code>[dt.year for dt in dtime64Array.astype(object)]</code>"
                        },
                        {
                            "owner": {
                                "account_id": 4843321,
                                "reputation": 743,
                                "user_id": 3907762,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "Mr.WorshipMe"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1478788855,
                            "post_id": 35281829,
                            "comment_id": 68300397,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/35281829#comment68300397_35281829",
                            "body": "This code works, but if I give it a different np.datetime64 (a date from my DataFrame) it evaluates to long instead to datetime... even if I explicitly use astype(datetime.datetime) it evaluates to long... weird..."
                        },
                        {
                            "owner": {
                                "account_id": 1368618,
                                "reputation": 3244,
                                "user_id": 1304462,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Nick"
                            },
                            "reply_to_user": {
                                "account_id": 4843321,
                                "reputation": 743,
                                "user_id": 3907762,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "Mr.WorshipMe"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1478794154,
                            "post_id": 35281829,
                            "comment_id": 68304089,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/35281829#comment68304089_35281829",
                            "body": "@Mr.WorshipMe unsure about that. Might be worth writing up a more detailed version showing dual behavior example. Then submitting that as a new question with a link back here."
                        },
                        {
                            "owner": {
                                "account_id": 73202,
                                "reputation": 19174,
                                "user_id": 210945,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "naught101"
                            },
                            "edited": false,
                            "score": 11,
                            "creation_date": 1487289873,
                            "post_id": 35281829,
                            "comment_id": 71730589,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/35281829#comment71730589_35281829",
                            "body": "This does not work in python 3.5 - <code>AttributeError: &#39;int&#39; object has no attribute &#39;year&#39;</code>. I&#39;m also not sure why is should have worked in 2.7, why does <code>.astype(object)</code> convert to a <code>datetime.datetime</code>?"
                        },
                        {
                            "owner": {
                                "account_id": 8612555,
                                "reputation": 2575,
                                "user_id": 6461882,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "S.V"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1554405011,
                            "post_id": 35281829,
                            "comment_id": 97750870,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/35281829#comment97750870_35281829",
                            "body": "I have just tested it in python-3.6.3 and it works: <code>import numpy as np; print(np.datetime64(&#39;2002-07-04T02:55:41-0700&#39;).astype(objec&zwnj;&#8203;t).year)</code>"
                        },
                        {
                            "owner": {
                                "account_id": 1655785,
                                "reputation": 456,
                                "user_id": 2192272,
                                "user_type": "registered",
                                "display_name": "Mah&#233;"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1581076070,
                            "post_id": 35281829,
                            "comment_id": 106318097,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/35281829#comment106318097_35281829",
                            "body": "Excellent, though the <code>.tolist()</code> syntax is simpler than <code>.astype(object)</code> to convert any numpy array or even scalar into a native python object. See separate answer below."
                        },
                        {
                            "owner": {
                                "account_id": 13149871,
                                "reputation": 339,
                                "user_id": 9498827,
                                "user_type": "registered",
                                "display_name": "L. Francis Cong"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1655739069,
                            "post_id": 35281829,
                            "comment_id": 128397343,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/35281829#comment128397343_35281829",
                            "body": "I find this method to be faster than the high-voted answer."
                        },
                        {
                            "owner": {
                                "account_id": 13149871,
                                "reputation": 339,
                                "user_id": 9498827,
                                "user_type": "registered",
                                "display_name": "L. Francis Cong"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1655748171,
                            "post_id": 35281829,
                            "comment_id": 128400407,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/35281829#comment128400407_35281829",
                            "body": "It seems that the datetime must be of type <code>datetime[D]</code>, not <code>datetime[ns]</code>. For example, in Python 3.8.12, <code>np.datetime64(&#39;2001-01-01&#39;).astype(object)</code> gives a <code>datetime</code> object, but <code>np.datetime64(&#39;2001-01-01&#39;).astype(&#39;datetime64[ns]&#39;).astype(&zwnj;&#8203;object)</code> gives a <code>long</code>, where replacing <code>object</code> with <code>datetime</code> gives the same result."
                        }
                    ],
                    "owner": {
                        "account_id": 1368618,
                        "reputation": 3244,
                        "user_id": 1304462,
                        "user_type": "registered",
                        "accept_rate": 88,
                        "display_name": "Nick"
                    },
                    "comment_count": 8,
                    "is_accepted": false,
                    "score": 22,
                    "last_activity_date": 1554421560,
                    "last_edit_date": 1554421560,
                    "creation_date": 1454977302,
                    "answer_id": 35281829,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/35281829#35281829",
                    "body": "<p>There should be an easier way to do this, but, depending on what you're trying to do, the best route might be to convert to a regular <a href=\"https://docs.python.org/2/library/datetime.html#datetime-objects\" rel=\"noreferrer\">Python datetime object</a>:</p>\n\n<pre><code>datetime64Obj = np.datetime64('2002-07-04T02:55:41-0700')\nprint datetime64Obj.astype(object).year\n# 2002\nprint datetime64Obj.astype(object).day\n# 4\n</code></pre>\n\n<p>Based on comments below, this seems to only work in Python 2.7.x and Python 3.6+</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2736453,
                                "reputation": 396,
                                "user_id": 2359042,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Sebastian"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1585565955,
                            "post_id": 43121538,
                            "comment_id": 107795174,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/43121538#comment107795174_43121538",
                            "body": "<code>pd.to_datetime</code> can be quite slow"
                        },
                        {
                            "owner": {
                                "account_id": 25298386,
                                "reputation": 17587,
                                "user_id": 19123103,
                                "user_type": "registered",
                                "display_name": "cottontail"
                            },
                            "reply_to_user": {
                                "account_id": 2736453,
                                "reputation": 396,
                                "user_id": 2359042,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Sebastian"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1695230698,
                            "post_id": 43121538,
                            "comment_id": 135997990,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/43121538#comment135997990_43121538",
                            "body": "@Sebastian <code>pd.to_datetime</code> can be sped up substantially if the format argument is passed (see <a href=\"https://stackoverflow.com/a/75277434/19123103\">this benchmark</a> for more info)"
                        },
                        {
                            "owner": {
                                "account_id": 3781739,
                                "reputation": 5134,
                                "user_id": 3140992,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "citynorman"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1713365731,
                            "post_id": 43121538,
                            "comment_id": 138114750,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/43121538#comment138114750_43121538",
                            "body": "To get this out of a dataframe it&#39;s <code>df[&#39;date&#39;].dt.month</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 2159059,
                        "reputation": 981,
                        "user_id": 1913647,
                        "user_type": "registered",
                        "accept_rate": 25,
                        "display_name": "Steve Schulist"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 10,
                    "last_activity_date": 1490886041,
                    "creation_date": 1490886041,
                    "answer_id": 43121538,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/43121538#43121538",
                    "body": "<p>Using numpy version 1.10.4 and pandas version 0.17.1,</p>\n\n<pre><code>dates = np.array(['2010-10-17', '2011-05-13', '2012-01-15'], dtype=np.datetime64)\npd.to_datetime(dates).year\n</code></pre>\n\n<p>I get what you're looking for:</p>\n\n<pre><code>array([2010, 2011, 2012], dtype=int32)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1556213,
                                "reputation": 3076,
                                "user_id": 1447225,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "firegurafiku"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1497737222,
                            "post_id": 44609580,
                            "comment_id": 76206358,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/44609580#comment76206358_44609580",
                            "body": "This answer should probably be turned into a comment (or an edit) to the Anon&#39;s answer you&#39;ve mentioned."
                        }
                    ],
                    "owner": {
                        "account_id": 4485260,
                        "reputation": 31,
                        "user_id": 3648119,
                        "user_type": "registered",
                        "display_name": "user3648119"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1497797350,
                    "last_edit_date": 1497797350,
                    "creation_date": 1497735312,
                    "answer_id": 44609580,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/44609580#44609580",
                    "body": "<p><a href=\"https://stackoverflow.com/a/26895491/4284627\">Anon's answer</a> works great for me, but I just need to modify the statement for <code>days</code></p>\n\n<p>from:</p>\n\n<pre><code>days = <b>dates</b> - dates.astype('datetime64[M]') + 1</code></pre>\n\n<p>to:</p>\n\n<pre><code>days = <b>dates.astype('datetime64[D]')</b> - dates.astype('datetime64[M]') + 1</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 9227676,
                        "reputation": 984,
                        "user_id": 6854929,
                        "user_type": "registered",
                        "display_name": "Mark"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1500039502,
                    "creation_date": 1500039502,
                    "answer_id": 45104446,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/45104446#45104446",
                    "body": "<p>Another possibility is:</p>\n\n<pre><code>np.datetime64(dates,'Y') - returns - numpy.datetime64('2010')\n</code></pre>\n\n<p>or</p>\n\n<pre><code>np.datetime64(dates,'Y').astype(int)+1970 - returns - 2010\n</code></pre>\n\n<p>but works only on scalar values, won't take array</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 5854412,
                                "reputation": 2606,
                                "user_id": 4970632,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "Luke Davis"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1591382306,
                            "post_id": 56260054,
                            "comment_id": 110045597,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/56260054#comment110045597_56260054",
                            "body": "Excellent function. Might honestly be worth submitting a PR on the numpy github page."
                        },
                        {
                            "owner": {
                                "account_id": 3851260,
                                "reputation": 406,
                                "user_id": 3191396,
                                "user_type": "registered",
                                "accept_rate": 43,
                                "display_name": "Chang"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1591744484,
                            "post_id": 56260054,
                            "comment_id": 110171646,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/56260054#comment110171646_56260054",
                            "body": "I like the low-level solution here, clean and simple."
                        },
                        {
                            "owner": {
                                "account_id": 1364661,
                                "reputation": 4159,
                                "user_id": 1301359,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "panda-34"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1687148417,
                            "post_id": 56260054,
                            "comment_id": 134890998,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/56260054#comment134890998_56260054",
                            "body": "Why don&#39;t you simply continue the same pattern: <code>out[..., 3] = h - D; out[..., 4] = m - h; out[..., 5] = s - m...</code>, why doing an extra <code>.astype</code> when you already have it appropriately converted?"
                        }
                    ],
                    "owner": {
                        "account_id": 2711654,
                        "reputation": 2337,
                        "user_id": 3311728,
                        "user_type": "registered",
                        "accept_rate": 33,
                        "display_name": "RBF06"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 14,
                    "last_activity_date": 1558538117,
                    "creation_date": 1558538117,
                    "answer_id": 56260054,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/56260054#56260054",
                    "body": "<p>This is how I do it.</p>\n\n<pre><code>import numpy as np\n\ndef dt2cal(dt):\n    \"\"\"\n    Convert array of datetime64 to a calendar array of year, month, day, hour,\n    minute, seconds, microsecond with these quantites indexed on the last axis.\n\n    Parameters\n    ----------\n    dt : datetime64 array (...)\n        numpy.ndarray of datetimes of arbitrary shape\n\n    Returns\n    -------\n    cal : uint32 array (..., 7)\n        calendar array with last axis representing year, month, day, hour,\n        minute, second, microsecond\n    \"\"\"\n\n    # allocate output \n    out = np.empty(dt.shape + (7,), dtype=\"u4\")\n    # decompose calendar floors\n    Y, M, D, h, m, s = [dt.astype(f\"M8[{x}]\") for x in \"YMDhms\"]\n    out[..., 0] = Y + 1970 # Gregorian Year\n    out[..., 1] = (M - Y) + 1 # month\n    out[..., 2] = (D - M) + 1 # dat\n    out[..., 3] = (dt - D).astype(\"m8[h]\") # hour\n    out[..., 4] = (dt - h).astype(\"m8[m]\") # minute\n    out[..., 5] = (dt - m).astype(\"m8[s]\") # second\n    out[..., 6] = (dt - s).astype(\"m8[us]\") # microsecond\n    return out\n</code></pre>\n\n<p>It's vectorized across arbitrary input dimensions, it's fast, its intuitive, it works on numpy v1.15.4, it doesn't use pandas. </p>\n\n<p>I <em>really</em> wish numpy supported this functionality, it's required all the time in application development. I always get super nervous when I have to roll my own stuff like this, I always feel like I'm missing an edge case.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6185109,
                                "reputation": 12033,
                                "user_id": 4819449,
                                "user_type": "registered",
                                "display_name": "FHTMitchell"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680693361,
                            "post_id": 60112823,
                            "comment_id": 133940301,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/60112823#comment133940301_60112823",
                            "body": "does not work in py3.7+"
                        },
                        {
                            "owner": {
                                "account_id": 1655785,
                                "reputation": 456,
                                "user_id": 2192272,
                                "user_type": "registered",
                                "display_name": "Mah&#233;"
                            },
                            "reply_to_user": {
                                "account_id": 6185109,
                                "reputation": 12033,
                                "user_id": 4819449,
                                "user_type": "registered",
                                "display_name": "FHTMitchell"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680789748,
                            "post_id": 60112823,
                            "comment_id": 133959912,
                            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/60112823#comment133959912_60112823",
                            "body": "@FHTMitchell Your statement is not true Tested <a href=\"https://replit.com/languages/python3\" rel=\"nofollow noreferrer\">here</a> with python 3.8.12 and numpy 1.21.2"
                        }
                    ],
                    "owner": {
                        "account_id": 1655785,
                        "reputation": 456,
                        "user_id": 2192272,
                        "user_type": "registered",
                        "display_name": "Mah&#233;"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1680790488,
                    "last_edit_date": 1680790488,
                    "creation_date": 1581075849,
                    "answer_id": 60112823,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/60112823#60112823",
                    "body": "<p>Use <code>dates.tolist()</code> to convert to native datetime objects, then simply access <code>year</code>. Example:</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; dates = np.array(['2010-10-17', '2011-05-13', '2012-01-15'], dtype='datetime64')\n&gt;&gt;&gt; [x.year for x in dates.tolist()]\n[2010, 2011, 2012]\n</code></pre>\n<p>This is basically the same idea exposed in <a href=\"https://stackoverflow.com/a/35281829/2192272\">https://stackoverflow.com/a/35281829/2192272</a>, but using simpler syntax.</p>\n<p>Tested with python 3.6 / numpy 1.18.</p>\n<p>EDIT: sometimes it is necessary to convert to &quot;datetime64[D]&quot;, e g. when the array is of type &quot;datetime64[ns]&quot;. Replace <code>dates.tolist()</code> above with <code>dates.astype(&quot;datetime64[D]&quot;).tolist()</code></p>\n"
                },
                {
                    "owner": {
                        "account_id": 4662401,
                        "reputation": 10072,
                        "user_id": 7128154,
                        "user_type": "registered",
                        "accept_rate": 60,
                        "display_name": "Markus Dutschke"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1618682780,
                    "creation_date": 1618682780,
                    "answer_id": 67141421,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/67141421#67141421",
                    "body": "<h1>convert <code>np.datetime64</code> to float-year</h1>\n<p>In this solution, you can see, step-by-step, how to process <code>np.datetime64</code> datatypes.</p>\n<p>In the following dt64 is of type <code>np.datetime64</code> (or even a numpy.ndarray of that type):</p>\n<ul>\n<li><code>year = dt64.astype('M8[Y]')</code> contains just the year. If you want a float array of that, do <code>1970 + year.astype(float)</code>.</li>\n<li>the days (since January 1st) you can access by <code>days = (dt64 - year).astype('timedelta64[D]')</code></li>\n<li>You can also deduce if a year is a leap year or not (compare <code>days_of_year</code>)</li>\n</ul>\n<p><a href=\"https://numpy.org/doc/stable/reference/arrays.datetime.html#datetime-units\" rel=\"nofollow noreferrer\">See also the numpy tutorial</a></p>\n<pre><code>import numpy as np\nimport pandas as pd\n\ndef dt64_to_float(dt64):\n    &quot;&quot;&quot;Converts numpy.datetime64 to year as float.\n\n    Rounded to days\n\n    Parameters\n    ----------\n    dt64 : np.datetime64 or np.ndarray(dtype='datetime64[X]')\n        date data\n\n    Returns\n    -------\n    float or np.ndarray(dtype=float)\n        Year in floating point representation\n    &quot;&quot;&quot;\n\n    year = dt64.astype('M8[Y]')\n    # print('year:', year)\n    days = (dt64 - year).astype('timedelta64[D]')\n    # print('days:', days)\n    year_next = year + np.timedelta64(1, 'Y')\n    # print('year_next:', year_next)\n    days_of_year = (year_next.astype('M8[D]') - year.astype('M8[D]')\n                    ).astype('timedelta64[D]')\n    # print('days_of_year:', days_of_year)\n    dt_float = 1970 + year.astype(float) + days / (days_of_year)\n    # print('dt_float:', dt_float)\n    return dt_float\n\nif __name__ == &quot;__main__&quot;:\n\n    dt_str = '2011-11-11'\n    dt64 = np.datetime64(dt_str)\n    print(dt_str, 'as float:', dt64_to_float(dt64))\n    print()\n\n    dates = np.array([\n        '1970-01-01', '2014-01-01', '2020-12-31', '2019-12-31', '2010-04-28'],\n        dtype='datetime64[D]')\n    float_dates = dt64_to_float(dates)\n\n\n    print('dates:      ', dates)\n    print('float_dates:', float_dates)\n</code></pre>\n<p><strong>output</strong></p>\n<pre><code>2011-11-11 as float: 2011.8602739726027\n\ndates:       ['1970-01-01' '2014-01-01' '2020-12-31' '2019-12-31' '2010-04-28']\nfloat_dates: [1970.         2014.         2020.99726776 2019.99726027 2010.32054795]\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 14779236,
                        "reputation": 11,
                        "user_id": 10673135,
                        "user_type": "registered",
                        "display_name": "verivid"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1623218206,
                    "last_edit_date": 1623218206,
                    "creation_date": 1623217854,
                    "answer_id": 67898317,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/67898317#67898317",
                    "body": "<p>This is obviously quite late, but I benefitted from one of the answers, so sharing my bit here.</p>\n<p>The <a href=\"https://stackoverflow.com/a/26895491/10673135\">answer</a> by <a href=\"https://stackoverflow.com/users/4245545/anon\">Anon</a>\ud83e\udd14 is quite right- the speed is incredibly higher using numpy method instead of first casting them as pandas datetime series and then getting dates. Albeit the offsetting and conversion of results after numpy transformations are bit shabby, a cleaner helper for this can be written, like so:-</p>\n<pre><code>def from_numpy_datetime_extract(date: np.datetime64, extract_attribute: str = None):\n    _YEAR_OFFSET = 1970\n    _MONTH_OFFSET = 1\n    _MONTH_FACTOR = 12\n    _DAY_FACTOR = 24*60*60*1e9\n    _DAY_OFFSET = 1\n\n    if extract_attribute == 'year':\n        return date.astype('datetime64[Y]').astype(int) + _YEAR_OFFSET\n    elif extract_attribute == 'month':\n        return date.astype('datetime64[M]').astype(int)%_MONTH_FACTOR + _MONTH_OFFSET\n    elif extract_attribute == 'day':\n        return ((date - date.astype('datetime64[M]'))/_DAY_FACTOR).astype(int) + _DAY_OFFSET\n    else:\n        raise ValueError(&quot;extract_attribute should be either of 'year', 'month' or 'day'&quot;)\n</code></pre>\n<p>Solving the ask <code>dates = np.array(['2010-10-17', '2011-05-13', &quot;2012-01-15&quot;], dtype = 'datetime64')</code>:-</p>\n<ul>\n<li>Numpy method (using the helper above)</li>\n</ul>\n<pre><code>%timeit -r10 -n1000 [from_numpy_datetime_extract(x, &quot;year&quot;) for x in dates]\n# 14.3 \u00b5s \u00b1 4.03 \u00b5s per loop (mean \u00b1 std. dev. of 10 runs, 1000 loops each)\n</code></pre>\n<ul>\n<li>Pandas method</li>\n</ul>\n<pre><code>%timeit -r10 -n1000 pd.to_datetime(dates).year.tolist()\n# 304 \u00b5s \u00b1 32.2 \u00b5s per loop (mean \u00b1 std. dev. of 10 runs, 1000 loops each)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 10908059,
                        "reputation": 3394,
                        "user_id": 8491363,
                        "user_type": "registered",
                        "display_name": "user8491363"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1652248569,
                    "creation_date": 1652248569,
                    "answer_id": 72196045,
                    "question_id": 13648774,
                    "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64/72196045#72196045",
                    "body": "<p>How about simply converting to string?</p>\n<p>Probably the easiest way:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\n\ndate = np.datetime64(&quot;2000-01-01&quot;)\ndate_strings = date.astype(str).split('-'). \n# &gt;&gt; ['2000', '01', '01']\n\nyear_int = int(date_strings[0])\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 397386,
                "reputation": 3585,
                "user_id": 761492,
                "user_type": "registered",
                "accept_rate": 95,
                "display_name": "enedene"
            },
            "comment_count": 3,
            "is_answered": true,
            "accepted_answer_id": 13652262,
            "answer_count": 13,
            "score": 90,
            "last_activity_date": 1680790488,
            "creation_date": 1354291636,
            "last_edit_date": 1402495716,
            "question_id": 13648774,
            "link": "https://stackoverflow.com/questions/13648774/get-year-month-or-day-from-numpy-datetime64",
            "title": "Get year, month or day from numpy datetime64",
            "body": "<p>I have an array of datetime64 type:</p>\n\n<pre><code>dates = np.datetime64(['2010-10-17', '2011-05-13', \"2012-01-15\"])\n</code></pre>\n\n<p>Is there a better way than looping through each element just to get np.array of years:</p>\n\n<pre><code>years = f(dates)\n#output:\narray([2010, 2011, 2012], dtype=int8) #or dtype = string\n</code></pre>\n\n<p>I'm using stable numpy version 1.6.2.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 6020
}