{
    "items": [
        {
            "tags": [
                "python",
                "matplotlib"
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3688128,
                                "reputation": 1011,
                                "user_id": 3071449,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "Mac"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1476379806,
                            "post_id": 40026959,
                            "comment_id": 67332069,
                            "link": "https://stackoverflow.com/questions/40026718/different-colours-for-arrows-in-quiver-plot/40026959#comment67332069_40026959",
                            "body": "Yeah, that did what I wanted, but how does that np.(arctan2(u,v) actually works? I am not sure what it is doing there"
                        },
                        {
                            "owner": {
                                "account_id": 1794470,
                                "reputation": 18311,
                                "user_id": 1634191,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "wflynny"
                            },
                            "reply_to_user": {
                                "account_id": 3688128,
                                "reputation": 1011,
                                "user_id": 3071449,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "Mac"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1476381305,
                            "post_id": 40026959,
                            "comment_id": 67332859,
                            "link": "https://stackoverflow.com/questions/40026718/different-colours-for-arrows-in-quiver-plot/40026959#comment67332859_40026959",
                            "body": "Usually the y coordinate (<code>v</code> in this case) is passed as the first argument to <code>arctan2</code>, but that shouldn&#39;t matter much.  @Mac, arctangent computes the angle (in radians) between the arrow vector and the positive x-axis between -pi and pi."
                        },
                        {
                            "owner": {
                                "account_id": 1376552,
                                "reputation": 7817,
                                "user_id": 3025981,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Ilya V. Schurov"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1476381388,
                            "post_id": 40026959,
                            "comment_id": 67332902,
                            "link": "https://stackoverflow.com/questions/40026718/different-colours-for-arrows-in-quiver-plot/40026959#comment67332902_40026959",
                            "body": "As you need the color to depend on an angle of an arrow, you have to calculate the angle somehow. To this end I used function <i>atan2</i> (<code>numpy.arctan2</code>) which uses coordinates of a vector to calculate an angle (in radians). See <a href=\"https://en.wikipedia.org/wiki/Atan2\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Atan2</a> for details."
                        },
                        {
                            "owner": {
                                "account_id": 3688128,
                                "reputation": 1011,
                                "user_id": 3071449,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "Mac"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1476444432,
                            "post_id": 40026959,
                            "comment_id": 67359603,
                            "link": "https://stackoverflow.com/questions/40026718/different-colours-for-arrows-in-quiver-plot/40026959#comment67359603_40026959",
                            "body": "Thanks guys! That was very helpful. If its not stressing too much, is there a way to chose the colours of the arrow, rather than getting them automatically?"
                        },
                        {
                            "owner": {
                                "account_id": 1376552,
                                "reputation": 7817,
                                "user_id": 3025981,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Ilya V. Schurov"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1476449206,
                            "post_id": 40026959,
                            "comment_id": 67362741,
                            "link": "https://stackoverflow.com/questions/40026718/different-colours-for-arrows-in-quiver-plot/40026959#comment67362741_40026959",
                            "body": "If I understand you right, you are interested in a way to control the actual colors used by matplotlib. To do so, you need to use colormap (which maps numbers to colors). I expanded an answer to provide detauls. (Note that if the answer answers you question, you can &#39;accept&#39; it by clicking on green checkmark.)"
                        },
                        {
                            "owner": {
                                "account_id": 3264692,
                                "reputation": 23974,
                                "user_id": 2749397,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "gboffi"
                            },
                            "reply_to_user": {
                                "account_id": 3688128,
                                "reputation": 1011,
                                "user_id": 3071449,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "Mac"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1496239033,
                            "post_id": 40026959,
                            "comment_id": 75580293,
                            "link": "https://stackoverflow.com/questions/40026718/different-colours-for-arrows-in-quiver-plot/40026959#comment75580293_40026959",
                            "body": "@Mac Yes of course you can choose the individual colors, passing to the keyword argument <code>color=</code> a Numpy array with shape <code>(NPOINTS,4)</code>, where each individual row, corresponding to an arrow, consists of four floating number values <code>0 \u2264 v_i \u2264 1</code> indicating red, green, blue and alpha of the corresponding arrow. I think there are also other possibilities but such an array is  what <code>colormap(norm(colors))</code> returns."
                        },
                        {
                            "owner": {
                                "account_id": 3688128,
                                "reputation": 1011,
                                "user_id": 3071449,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "Mac"
                            },
                            "reply_to_user": {
                                "account_id": 3264692,
                                "reputation": 23974,
                                "user_id": 2749397,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "gboffi"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1498670168,
                            "post_id": 40026959,
                            "comment_id": 76597836,
                            "link": "https://stackoverflow.com/questions/40026718/different-colours-for-arrows-in-quiver-plot/40026959#comment76597836_40026959",
                            "body": "@gboffi sorry, but I didn&#39;t quite catch your answer. So if I see color = &#39;blue&#39;, for example, how does that makes only the arrows pointing up blue, and how do I set other colours to the other arrows? Sorry again."
                        }
                    ],
                    "owner": {
                        "account_id": 1376552,
                        "reputation": 7817,
                        "user_id": 3025981,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Ilya V. Schurov"
                    },
                    "comment_count": 7,
                    "is_accepted": true,
                    "score": 29,
                    "last_activity_date": 1476448830,
                    "last_edit_date": 1495535494,
                    "creation_date": 1476378105,
                    "answer_id": 40026959,
                    "question_id": 40026718,
                    "link": "https://stackoverflow.com/questions/40026718/different-colours-for-arrows-in-quiver-plot/40026959#40026959",
                    "body": "<p>This probably do the trick:</p>\n\n<pre><code>plt.quiver(x, y, u, v, np.arctan2(v, u), angles='xy', scale_units='xy', scale=1, pivot='mid',color='g')\n</code></pre>\n\n<p>Note that the fifth's argument of <code>plt.quiver</code> is a color.\n<a href=\"https://i.stack.imgur.com/Nc5mK.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Nc5mK.png\" alt=\"colored arrows\"></a></p>\n\n<hr>\n\n<p>UPD. If you want to control the colors, you have to use <a href=\"http://matplotlib.org/users/colormaps.html\" rel=\"noreferrer\">colormaps</a>. Here are a couple of examples:</p>\n\n<p>Use colormap with <code>colors</code> parameter:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.cm as cm\nfrom matplotlib.colors import Normalize\n\n%matplotlib inline\n\nph = np.linspace(0, 2*np.pi, 13)\nx = np.cos(ph)\ny = np.sin(ph)\nu = np.cos(ph)\nv = np.sin(ph)\ncolors = arctan2(u, v)\n\nnorm = Normalize()\nnorm.autoscale(colors)\n# we need to normalize our colors array to match it colormap domain\n# which is [0, 1]\n\ncolormap = cm.inferno\n# pick your colormap here, refer to \n# http://matplotlib.org/examples/color/colormaps_reference.html\n# and\n# http://matplotlib.org/users/colormaps.html\n# for details\nplt.figure(figsize=(6, 6))\nplt.xlim(-2, 2)\nplt.ylim(-2, 2)\nplt.quiver(x, y, u, v, color=colormap(norm(colors)),  angles='xy', \n           scale_units='xy', scale=1, pivot='mid')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/EWeAj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/EWeAj.png\" alt=\"different colormap\"></a></p>\n\n<p>You can also stick with fifth argument like in my first example (which works in a bit different way comparing with <code>colors</code>) and change default colormap to control the colors.</p>\n\n<pre><code>plt.rcParams['image.cmap'] = 'Paired'\n\nplt.figure(figsize=(6, 6))\nplt.xlim(-2, 2)\nplt.ylim(-2, 2)\n\nplt.quiver(x, y, u, v, np.arctan2(v, u), angles='xy', scale_units='xy', scale=1, pivot='mid')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9evy3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9evy3.png\" alt=\"Paired colormap\"></a></p>\n\n<p>You can also create your own colormaps, see e.g. <a href=\"https://stackoverflow.com/questions/16834861/create-own-colormap-using-matplotlib-and-plot-color-scale\">here</a>.</p>\n"
                }
            ],
            "owner": {
                "account_id": 3688128,
                "reputation": 1011,
                "user_id": 3071449,
                "user_type": "registered",
                "accept_rate": 78,
                "display_name": "Mac"
            },
            "comment_count": 0,
            "is_answered": true,
            "accepted_answer_id": 40026959,
            "answer_count": 1,
            "score": 15,
            "last_activity_date": 1684233702,
            "creation_date": 1476377282,
            "last_edit_date": 1576517452,
            "question_id": 40026718,
            "link": "https://stackoverflow.com/questions/40026718/different-colours-for-arrows-in-quiver-plot",
            "title": "Different colours for arrows in quiver plot",
            "body": "<p>I am plotting an arrow graph and my code uses an external file as follows:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib as mpl\nfrom pylab import rcParams\n\ndata=np.loadtxt(r'data.dat')\n\nx = data[:,0] \ny = data[:,1] \nu = data[:,2] \nv = data[:,3] \n\n\nplt.quiver(x, y, u, v, angles='xy', scale_units='xy', scale=1, pivot='mid',color='g')\n</code></pre>\n\n<p>The data file basically looks like :</p>\n\n<pre><code>1 1 0 0\n0 1 1 0\n0 1 1 0\n1 1 0 1\n</code></pre>\n\n<p>Is there a way to plot this with different colours for the different arrow directions?</p>\n\n<p>Ps.: I have got a lot more arrows in my data file in a not very logical sentence like the one I am using as example.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 6893
}