{
    "items": [
        {
            "tags": [
                "python",
                "matlab",
                "numpy",
                "matplotlib",
                "statistics"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 6553924,
                        "reputation": 34515,
                        "user_id": 5067311,
                        "user_type": "registered",
                        "display_name": "Andras Deak -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1445862852,
                    "post_id": 33345780,
                    "comment_id": 54487136,
                    "link": "https://stackoverflow.com/questions/33345780/empirical-cdf-in-python-similiar-to-matlabs-one#comment54487136_33345780",
                    "body": "1. I suggest adding figures to your questions in these cases, it helps a lot. 2. are you familiar with matlab&#39;s <code>loglog</code> and <code>plt.loglog</code>?"
                },
                {
                    "owner": {
                        "account_id": 4837553,
                        "reputation": 767,
                        "user_id": 3917230,
                        "user_type": "registered",
                        "accept_rate": 66,
                        "display_name": "Photon Light"
                    },
                    "reply_to_user": {
                        "account_id": 6553924,
                        "reputation": 34515,
                        "user_id": 5067311,
                        "user_type": "registered",
                        "display_name": "Andras Deak -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1445866116,
                    "post_id": 33345780,
                    "comment_id": 54489207,
                    "link": "https://stackoverflow.com/questions/33345780/empirical-cdf-in-python-similiar-to-matlabs-one#comment54489207_33345780",
                    "body": "1. Yea, I know, I need one time to learn how to attach those... 2. No,I have never used them."
                },
                {
                    "owner": {
                        "account_id": 6553924,
                        "reputation": 34515,
                        "user_id": 5067311,
                        "user_type": "registered",
                        "display_name": "Andras Deak -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1445869474,
                    "post_id": 33345780,
                    "comment_id": 54491617,
                    "link": "https://stackoverflow.com/questions/33345780/empirical-cdf-in-python-similiar-to-matlabs-one#comment54491617_33345780",
                    "body": "1. just click the little landscape icon in the editor&#39;s menu, you can then include an image from your computer or from the web through a link. 2. I suggest you check those out: they work like the respective <code>plot</code>s, with a bit more, and they take care of the <code>log</code>s for you. It&#39;s usually even better: they keep the <i>log scale</i> while preserving your original variables: if your <code>x</code> goes from 1 to 1000 then the final <code>xticklabel</code>s will not write <code>log(1000)</code>, but <code>1000</code>, and the ticks will be chosen logarithmically. This is not the same as plotting <code>log</code> vs <code>log</code>, so it&#39;s up to your needs."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 4837553,
                                "reputation": 767,
                                "user_id": 3917230,
                                "user_type": "registered",
                                "accept_rate": 66,
                                "display_name": "Photon Light"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1445866058,
                            "post_id": 33346366,
                            "comment_id": 54489178,
                            "link": "https://stackoverflow.com/questions/33345780/empirical-cdf-in-python-similiar-to-matlabs-one/33346366#comment54489178_33346366",
                            "body": "It looks quite good, thank you! I only changed &#39;return_counts=True&#39; for just &#39;True&#39;, since I&#39;ve got error in this version. BTW good luck with your thesis!"
                        },
                        {
                            "owner": {
                                "account_id": 1574306,
                                "reputation": 73298,
                                "user_id": 1461210,
                                "user_type": "registered",
                                "accept_rate": 82,
                                "display_name": "ali_m"
                            },
                            "reply_to_user": {
                                "account_id": 4837553,
                                "reputation": 767,
                                "user_id": 3917230,
                                "user_type": "registered",
                                "accept_rate": 66,
                                "display_name": "Photon Light"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1445867301,
                            "post_id": 33346366,
                            "comment_id": 54490073,
                            "link": "https://stackoverflow.com/questions/33345780/empirical-cdf-in-python-similiar-to-matlabs-one/33346366#comment54490073_33346366",
                            "body": "If you got the error <code>unexpected keyword argument &#39;return_counts&#39;</code> then you must be running an older version of numpy that doesn&#39;t support the <code>return_counts</code> argument to <code>np.unique</code> (this was added in v1.9). In that case, calling <code>np.unique(..., True)</code> would correspond to <code>np.unique(..., return_index=True)</code> which will give you the indices of the unique values rather than their counts as the second return variable, and therefore your CDF will be incorrect. See my update for a workaround."
                        }
                    ],
                    "owner": {
                        "account_id": 1574306,
                        "reputation": 73298,
                        "user_id": 1461210,
                        "user_type": "registered",
                        "accept_rate": 82,
                        "display_name": "ali_m"
                    },
                    "comment_count": 2,
                    "is_accepted": true,
                    "score": 5,
                    "last_activity_date": 1445867446,
                    "last_edit_date": 1445867446,
                    "creation_date": 1445864285,
                    "answer_id": 33346366,
                    "question_id": 33345780,
                    "link": "https://stackoverflow.com/questions/33345780/empirical-cdf-in-python-similiar-to-matlabs-one/33346366#33346366",
                    "body": "<p>Once you have your sample, you can easily compute the ECDF using a combination of <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html\" rel=\"nofollow noreferrer\"><code>np.unique</code></a>* and <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.cumsum.html\" rel=\"nofollow noreferrer\"><code>np.cumsum</code></a>:</p>\n\n<pre><code>import numpy as np\n\ndef ecdf(sample):\n\n    # convert sample to a numpy array, if it isn't already\n    sample = np.atleast_1d(sample)\n\n    # find the unique values and their corresponding counts\n    quantiles, counts = np.unique(sample, return_counts=True)\n\n    # take the cumulative sum of the counts and divide by the sample size to\n    # get the cumulative probabilities between 0 and 1\n    cumprob = np.cumsum(counts).astype(np.double) / sample.size\n\n    return quantiles, cumprob\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>from scipy import stats\nfrom matplotlib import pyplot as plt\n\n# a normal distribution with a mean of 0 and standard deviation of 1\nn = stats.norm(loc=0, scale=1)\n\n# draw some random samples from it\nsample = n.rvs(100)\n\n# compute the ECDF of the samples\nqe, pe = ecdf(sample)\n\n# evaluate the theoretical CDF over the same range\nq = np.linspace(qe[0], qe[-1], 1000)\np = n.cdf(q)\n\n# plot\nfig, ax = plt.subplots(1, 1)\nax.hold(True)\nax.plot(q, p, '-k', lw=2, label='Theoretical CDF')\nax.plot(qe, pe, '-r', lw=2, label='Empirical CDF')\nax.set_xlabel('Quantile')\nax.set_ylabel('Cumulative probability')\nax.legend(fancybox=True, loc='right')\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/92VBM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/92VBM.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>* If you're using a version of numpy older than 1.9.0 then <code>np.unique</code> won't accept the <code>return_counts</code> keyword argument, and you'll get a <code>TypeError</code>:</p>\n\n<pre><code>TypeError: unique() got an unexpected keyword argument 'return_counts'\n</code></pre>\n\n<p>In that case, a workaround would be to get the set of \"inverse\" indices and use <code>np.bincount</code> to count the occurrences:</p>\n\n<pre><code>quantiles, idx = np.unique(sample, return_inverse=True)\ncounts = np.bincount(idx)\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 4837553,
                "reputation": 767,
                "user_id": 3917230,
                "user_type": "registered",
                "accept_rate": 66,
                "display_name": "Photon Light"
            },
            "comment_count": 3,
            "is_answered": true,
            "accepted_answer_id": 33346366,
            "answer_count": 1,
            "score": 3,
            "last_activity_date": 1445867446,
            "creation_date": 1445862474,
            "last_edit_date": 1495542217,
            "question_id": 33345780,
            "link": "https://stackoverflow.com/questions/33345780/empirical-cdf-in-python-similiar-to-matlabs-one",
            "title": "Empirical cdf in python similiar to matlab&#39;s one",
            "body": "<p>I have some code in matlab, that I would like to rewrite into python. It's simple program, that computes some distribution and plot it in double-log scale.</p>\n\n<p>The problem I occured is with computing cdf. Here is matlab code:</p>\n\n<pre><code>for D = 1:10\n    delta = D / 10;\n    for k = 1:n\n        N_delta = poissrnd(delta^-alpha,1);\n        Y_k_delta = ( (1 - randn(N_delta)) / (delta.^alpha) ).^(-1/alpha);\n        Y_k_delta = Y_k_delta(Y_k_delta &gt; delta);\n        X(k) = sum(Y_k_delta);\n        %disp(X(k))\n\n    end\n    [f,x] = ecdf(X);\n\n    plot(log(x), log(1-f))\n    hold on\nend\n</code></pre>\n\n<p>In matlab one I can simply use:</p>\n\n<pre><code>[f,x] = ecdf(X);\n</code></pre>\n\n<p>to get cdf (f) at points x. <a href=\"http://www.mathworks.com/help/stats/ecdf.html\" rel=\"nofollow noreferrer\">Here</a> is documentation for it.<br>\nIn python it is more complicated:</p>\n\n<pre><code>import numpy as np\nfrom scipy.stats import norm\nimport matplotlib.pyplot as plt\nfrom statsmodels.distributions.empirical_distribution import ECDF\n\nalpha = 1.5\nn = 1000\nX = []\nfor delta in range(1,5):\n    delta = delta/10.0\n    for k in range(1,n + 1):\n        N_delta = np.random.poisson(delta**(-alpha), 1)\n        Y_k_delta = ( (1 - np.random.random(N_delta)) / (delta**alpha) )**(-1/alpha)\n        Y_k_delta = [i for i in Y_k_delta if i &gt; delta]\n        X.append(np.sum(Y_k_delta))\n\n    ecdf = ECDF(X)\n\n    x = np.linspace(min(X), max(X))\n    f = ecdf(x)\n    plt.plot(np.log(f), np.log(1-f))\n\nplt.show()\n</code></pre>\n\n<p>It makes my plot look very strange, definetly not smooth as matlab's one.<br>\nI think the problem is that I do not understand <code>ECDF</code> function or it works differently than in matlab.<br>\nI implemented <a href=\"https://stackoverflow.com/questions/3209362/how-to-plot-empirical-cdf-in-matplotlib-in-python\">this</a> solution (the most points one) for my python code, but it looks like it doesn't work correctly.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 7262
}