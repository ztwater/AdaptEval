{
    "items": [
        {
            "tags": [
                "python",
                "stdout"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 139304,
                        "reputation": 28633,
                        "user_id": 344821,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "Danica"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1340239793,
                    "post_id": 11130156,
                    "comment_id": 14586720,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions#comment14586720_11130156",
                    "body": "Does <a href=\"http://stackoverflow.com/a/978264/344821\">this approach</a> (from the related sidebar) work?"
                },
                {
                    "owner": {
                        "account_id": 1273767,
                        "reputation": 1097,
                        "user_id": 1229455,
                        "user_type": "registered",
                        "accept_rate": 89,
                        "display_name": "carmenism"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1340240173,
                    "post_id": 11130156,
                    "comment_id": 14586778,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions#comment14586778_11130156",
                    "body": "Instead of setting <code>sys.stdout</code> to <code>StringIO()</code>, have you tried setting it to a file?  i.e. <code>sys.stdout = open(&#39;log.txt&#39;,&#39;w&#39;)</code>"
                },
                {
                    "owner": {
                        "account_id": 404260,
                        "reputation": 9971,
                        "user_id": 772487,
                        "user_type": "registered",
                        "accept_rate": 60,
                        "display_name": "jeremiahbuddha"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1340242648,
                    "post_id": 11130156,
                    "comment_id": 14587186,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions#comment14587186_11130156",
                    "body": "Dougal, thanks, that looks promising, I&#39;ll try it out tomorrow. nullpointer, I tried directing it to a custom NullPointer() class, and that didn&#39;t work either."
                },
                {
                    "owner": {
                        "account_id": 404260,
                        "reputation": 9971,
                        "user_id": 772487,
                        "user_type": "registered",
                        "accept_rate": 60,
                        "display_name": "jeremiahbuddha"
                    },
                    "reply_to_user": {
                        "account_id": 139304,
                        "reputation": 28633,
                        "user_id": 344821,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "Danica"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1340297913,
                    "post_id": 11130156,
                    "comment_id": 14607457,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions#comment14607457_11130156",
                    "body": "@Dougal, thanks, that worked! If you&#39;re so inclined, post that link as an answer and I will select it."
                },
                {
                    "owner": {
                        "account_id": 74942,
                        "reputation": 775,
                        "user_id": 215104,
                        "user_type": "registered",
                        "accept_rate": 40,
                        "display_name": "Andrea"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1475782881,
                    "post_id": 11130156,
                    "comment_id": 67094132,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions#comment67094132_11130156",
                    "body": "Just wondering if there is a way to suppress <i>all</i> output, not just the output that comes from C code. I would expect that if I&#39;m in the context <b>with suppress_stdout_stderr()</b> then all output should be intercepted. Any ideas?"
                },
                {
                    "owner": {
                        "account_id": 29504,
                        "reputation": 3676,
                        "user_id": 79802,
                        "user_type": "registered",
                        "display_name": "randlet"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1504226407,
                    "post_id": 11130156,
                    "comment_id": 78943856,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions#comment78943856_11130156",
                    "body": "Just a note that I edited this snippet slightly so all file descriptors are closed in <code>__exit__</code>. Without closing the fd&#39;s in <code>self.save_fds</code> this context manager was leaking two file descriptors every time it was called leading to running out of file descriptors in long running processes."
                },
                {
                    "owner": {
                        "account_id": 9117940,
                        "reputation": 348,
                        "user_id": 6784445,
                        "user_type": "registered",
                        "display_name": "hm6"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1582741332,
                    "post_id": 11130156,
                    "comment_id": 106885177,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions#comment106885177_11130156",
                    "body": "does this solution works when &#39;rogue_function&#39; processed in parallel?"
                },
                {
                    "owner": {
                        "account_id": 6308745,
                        "reputation": 1394,
                        "user_id": 4901005,
                        "user_type": "registered",
                        "display_name": "shaneb"
                    },
                    "reply_to_user": {
                        "account_id": 29504,
                        "reputation": 3676,
                        "user_id": 79802,
                        "user_type": "registered",
                        "display_name": "randlet"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1583934608,
                    "post_id": 11130156,
                    "comment_id": 107279074,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions#comment107279074_11130156",
                    "body": "<a href=\"https://stackoverflow.com/questions/36647498/how-to-close-file-descriptors-in-python\" title=\"how to close file descriptors in python\">stackoverflow.com/questions/36647498/&hellip;</a>  -&gt; @randlet should we also edit to close the save_fds ones?"
                },
                {
                    "owner": {
                        "account_id": 29504,
                        "reputation": 3676,
                        "user_id": 79802,
                        "user_type": "registered",
                        "display_name": "randlet"
                    },
                    "reply_to_user": {
                        "account_id": 6308745,
                        "reputation": 1394,
                        "user_id": 4901005,
                        "user_type": "registered",
                        "display_name": "shaneb"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1584022531,
                    "post_id": 11130156,
                    "comment_id": 107313535,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions#comment107313535_11130156",
                    "body": "@shaneb  they&#39;re already closed as well: <code>for fd in self.null_fds + self.save_fds:</code>"
                },
                {
                    "owner": {
                        "account_id": 6308745,
                        "reputation": 1394,
                        "user_id": 4901005,
                        "user_type": "registered",
                        "display_name": "shaneb"
                    },
                    "reply_to_user": {
                        "account_id": 29504,
                        "reputation": 3676,
                        "user_id": 79802,
                        "user_type": "registered",
                        "display_name": "randlet"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1584106210,
                    "post_id": 11130156,
                    "comment_id": 107342073,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions#comment107342073_11130156",
                    "body": "@randlet - ah, sorry, missed that."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 404260,
                                "reputation": 9971,
                                "user_id": 772487,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "jeremiahbuddha"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1340297142,
                            "post_id": 11130886,
                            "comment_id": 14607113,
                            "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/11130886#comment14607113_11130886",
                            "body": "I don&#39;t want to suppress all output generated by the script, only the spurious output generated by these particular functions. Otherwise, yeah, this would be the simplest solution ..."
                        },
                        {
                            "owner": {
                                "account_id": 243245,
                                "reputation": 2516,
                                "user_id": 515288,
                                "user_type": "registered",
                                "accept_rate": 73,
                                "display_name": "GeneralBecos"
                            },
                            "reply_to_user": {
                                "account_id": 404260,
                                "reputation": 9971,
                                "user_id": 772487,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "jeremiahbuddha"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1340297325,
                            "post_id": 11130886,
                            "comment_id": 14607187,
                            "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/11130886#comment14607187_11130886",
                            "body": "Would this help: Add a print before and after those particular function. Parse the output with a regex to get rid of everything between the prints added above"
                        }
                    ],
                    "owner": {
                        "account_id": 243245,
                        "reputation": 2516,
                        "user_id": 515288,
                        "user_type": "registered",
                        "accept_rate": 73,
                        "display_name": "GeneralBecos"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": -2,
                    "last_activity_date": 1340246725,
                    "creation_date": 1340246725,
                    "answer_id": 11130886,
                    "question_id": 11130156,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/11130886#11130886",
                    "body": "<p>If you are running this script on a linux based machine, you should be able to:</p>\n\n<pre><code>$&gt; ./runscript.py &gt; output.txt\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 280356,
                                "reputation": 409,
                                "user_id": 576010,
                                "user_type": "registered",
                                "display_name": "Bob"
                            },
                            "reply_to_user": {
                                "account_id": 404260,
                                "reputation": 9971,
                                "user_id": 772487,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "jeremiahbuddha"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1340298197,
                            "post_id": 11130986,
                            "comment_id": 14607599,
                            "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/11130986#comment14607599_11130986",
                            "body": "It might be that the C code is writing directly to stdout; you probably wouldn&#39;t be able to redirect that. Sorry."
                        },
                        {
                            "owner": {
                                "account_id": 2710063,
                                "reputation": 950,
                                "user_id": 2338725,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "hola"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1546178926,
                            "post_id": 11130986,
                            "comment_id": 94794015,
                            "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/11130986#comment94794015_11130986",
                            "body": "Are these compatible with Python 3?"
                        }
                    ],
                    "owner": {
                        "account_id": 280356,
                        "reputation": 409,
                        "user_id": 576010,
                        "user_type": "registered",
                        "display_name": "Bob"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1557804205,
                    "last_edit_date": 1557804205,
                    "creation_date": 1340247771,
                    "answer_id": 11130986,
                    "question_id": 11130156,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/11130986#11130986",
                    "body": "<p>Did you try to redirect stderr too?\ne.g.</p>\n\n<pre><code>sys.stdout = StringIO()\nsys.stderr = StringIO()\nfoo(bar)\nsys.stdout = sys.__stdout__ # These are provided by python\nsys.stderr = sys.__stderr__\n</code></pre>\n\n<p>Also using StringIO might use extra memory. You can use a dummy device instead (e.g. <a href=\"http://coreygoldberg.blogspot.com/2009/05/python-redirect-or-turn-off-stdout-and.html\" rel=\"nofollow noreferrer\">http://coreygoldberg.blogspot.com/2009/05/python-redirect-or-turn-off-stdout-and.html</a>).</p>\n"
                },
                {
                    "owner": {
                        "account_id": 139304,
                        "reputation": 28633,
                        "user_id": 344821,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "Danica"
                    },
                    "comment_count": 0,
                    "is_accepted": true,
                    "score": 13,
                    "last_activity_date": 1340316012,
                    "last_edit_date": 1495539193,
                    "creation_date": 1340316012,
                    "answer_id": 11147418,
                    "question_id": 11130156,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/11147418#11147418",
                    "body": "<p><a href=\"https://stackoverflow.com/a/978264/344821\">This approach</a> (found through the related sidebar) might work. It reassigns the file descriptors rather than just the wrappers to them in sys.stdout, etc.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 320253,
                        "reputation": 3517,
                        "user_id": 638434,
                        "user_type": "registered",
                        "accept_rate": 60,
                        "display_name": "Marc Abramowitz"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1374260506,
                    "creation_date": 1374260506,
                    "answer_id": 17753620,
                    "question_id": 11130156,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/17753620#17753620",
                    "body": "<p>My solution is similar to yours but uses <code>contextlib</code> and is a little shorter and easier to understand (IMHO).</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import contextlib\n\n\n@contextlib.contextmanager\ndef stdchannel_redirected(stdchannel, dest_filename):\n    \"\"\"\n    A context manager to temporarily redirect stdout or stderr\n\n    e.g.:\n\n\n    with stdchannel_redirected(sys.stderr, os.devnull):\n        if compiler.has_function('clock_gettime', libraries=['rt']):\n            libraries.append('rt')\n    \"\"\"\n\n    try:\n        oldstdchannel = os.dup(stdchannel.fileno())\n        dest_file = open(dest_filename, 'w')\n        os.dup2(dest_file.fileno(), stdchannel.fileno())\n\n        yield\n    finally:\n        if oldstdchannel is not None:\n            os.dup2(oldstdchannel, stdchannel.fileno())\n        if dest_file is not None:\n            dest_file.close()\n</code></pre>\n\n<p>The context for why I created this is at <a href=\"http://marc-abramowitz.com/archives/2013/07/19/python-context-manager-for-redirected-stdout-and-stderr/\" rel=\"nofollow\">this blog post</a>. Similar to yours I think.</p>\n\n<p>I use it like this in a <code>setup.py</code>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>with stdchannel_redirected(sys.stderr, os.devnull):\n    if compiler.has_function('clock_gettime', libraries=['rt']):\n        libraries.append('rt')\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6009996,
                                "reputation": 854,
                                "user_id": 5584077,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "t-bltg"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1474245966,
                            "post_id": 37746526,
                            "comment_id": 66438422,
                            "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/37746526#comment66438422_37746526",
                            "body": "this should be the accepted answer for python 3 ! one could also add seld._stderr == sys.stderr; sys.stderr = self &lt;...&gt;"
                        }
                    ],
                    "owner": {
                        "account_id": 2690809,
                        "reputation": 8150,
                        "user_id": 2858145,
                        "user_type": "registered",
                        "display_name": "Pietro Battiston"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1474374461,
                    "last_edit_date": 1474374461,
                    "creation_date": 1465556327,
                    "answer_id": 37746526,
                    "question_id": 11130156,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/37746526#37746526",
                    "body": "<p>Not really requested by the OP, but I needed to hide <em>and store</em> the output, and did like follows:</p>\n\n<pre><code>from io import StringIO\nimport sys\n\nclass Hider:\n    def __init__(self, channels=('stdout',)):\n        self._stomach = StringIO()\n        self._orig = {ch : None for ch in channels}\n\n    def __enter__(self):\n        for ch in self._orig:\n            self._orig[ch] = getattr(sys, ch)\n            setattr(sys, ch, self)\n        return self\n\n    def write(self, string):\n        self._stomach.write(string)\n\n    def flush(self):\n        pass\n\n    def autopsy(self):\n        return self._stomach.getvalue()\n\n    def __exit__(self, *args):\n        for ch in self._orig:\n            setattr(sys, ch, self._orig[ch])\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>with Hider() as h:\n    spammy_function()\n    result = h.autopsy()\n</code></pre>\n\n<p>(tested only with Python 3)</p>\n\n<p><strong>EDIT:</strong> now allows to select <code>stderr</code>, <code>stdout</code> or both, as in <code>Hider([stdout, stderr])</code></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 4474052,
                                "reputation": 4870,
                                "user_id": 3639581,
                                "user_type": "registered",
                                "display_name": "Duane"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1669357894,
                            "post_id": 50438156,
                            "comment_id": 131628073,
                            "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/50438156#comment131628073_50438156",
                            "body": "I found this more reliable than the top voted answer.  The top voted answer did not suppress stdout and stderr coming from underlying c++ and c libraries.  This did."
                        }
                    ],
                    "owner": {
                        "account_id": 3044873,
                        "reputation": 485,
                        "user_id": 2580835,
                        "user_type": "registered",
                        "display_name": "iperov"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1526841144,
                    "creation_date": 1526841144,
                    "answer_id": 50438156,
                    "question_id": 11130156,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/50438156#50438156",
                    "body": "<p>python 3.6 working version, tested with million suppressions without any errors</p>\n\n<pre><code>import os\nimport sys\n\nclass suppress_stdout_stderr(object):\n    def __enter__(self):\n        self.outnull_file = open(os.devnull, 'w')\n        self.errnull_file = open(os.devnull, 'w')\n\n        self.old_stdout_fileno_undup    = sys.stdout.fileno()\n        self.old_stderr_fileno_undup    = sys.stderr.fileno()\n\n        self.old_stdout_fileno = os.dup ( sys.stdout.fileno() )\n        self.old_stderr_fileno = os.dup ( sys.stderr.fileno() )\n\n        self.old_stdout = sys.stdout\n        self.old_stderr = sys.stderr\n\n        os.dup2 ( self.outnull_file.fileno(), self.old_stdout_fileno_undup )\n        os.dup2 ( self.errnull_file.fileno(), self.old_stderr_fileno_undup )\n\n        sys.stdout = self.outnull_file        \n        sys.stderr = self.errnull_file\n        return self\n\n    def __exit__(self, *_):        \n        sys.stdout = self.old_stdout\n        sys.stderr = self.old_stderr\n\n        os.dup2 ( self.old_stdout_fileno, self.old_stdout_fileno_undup )\n        os.dup2 ( self.old_stderr_fileno, self.old_stderr_fileno_undup )\n\n        os.close ( self.old_stdout_fileno )\n        os.close ( self.old_stderr_fileno )\n\n        self.outnull_file.close()\n        self.errnull_file.close()\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1127326,
                                "reputation": 1226,
                                "user_id": 1114272,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Ethan"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1595147221,
                            "post_id": 52442331,
                            "comment_id": 111368767,
                            "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/52442331#comment111368767_52442331",
                            "body": "This was the easiest thing to get working for me, thanks!"
                        }
                    ],
                    "owner": {
                        "account_id": 6553924,
                        "reputation": 34515,
                        "user_id": 5067311,
                        "user_type": "registered",
                        "display_name": "Andras Deak -- \u0421\u043b\u0430\u0432\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0456"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 37,
                    "last_activity_date": 1537527754,
                    "creation_date": 1537527754,
                    "answer_id": 52442331,
                    "question_id": 11130156,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/52442331#52442331",
                    "body": "<p>As of python 3.5 we can do this with minimal work using built-ins in <a href=\"https://docs.python.org/3/library/contextlib.html\" rel=\"noreferrer\"><code>contextlib</code></a>, namely <a href=\"https://docs.python.org/3/library/contextlib.html#contextlib.redirect_stdout\" rel=\"noreferrer\"><code>redirect_stdout</code></a> and <a href=\"https://docs.python.org/3/library/contextlib.html#contextlib.redirect_stderr\" rel=\"noreferrer\"><code>redirect_stderr</code></a>. We only need to combine these two built-in context managers in a custom context manager of ours, which can be easily done using <a href=\"https://stackoverflow.com/a/45681273/5067311\">the nice pattern in Martijn's answer here</a>. Redirecting both outputs to <a href=\"https://docs.python.org/3/library/os.html#os.devnull\" rel=\"noreferrer\"><code>os.devnull</code></a> should be safe and portable enough.</p>\n\n<pre><code>from contextlib import contextmanager,redirect_stderr,redirect_stdout\nfrom os import devnull\n\n@contextmanager\ndef suppress_stdout_stderr():\n    \"\"\"A context manager that redirects stdout and stderr to devnull\"\"\"\n    with open(devnull, 'w') as fnull:\n        with redirect_stderr(fnull) as err, redirect_stdout(fnull) as out:\n            yield (err, out)\n</code></pre>\n\n<hr>\n\n<p>Note that suppressing <code>stderr</code> will still give you full tracebacks when something breaks, which is a good thing:</p>\n\n<pre><code>import sys\n\ndef rogue_function():\n    print('spam to stdout')\n    print('important warning', file=sys.stderr)\n    1 + 'a'\n    return 42\n\nwith suppress_stdout_stderr():\n    rogue_function()\n</code></pre>\n\n<p>When run the above only prints</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"tmp.py\", line 20, in &lt;module&gt;\n    rogue_function()\n  File \"foo.py\", line 16, in rogue_function\n    1 + 'a'\nTypeError: unsupported operand type(s) for +: 'int' and 'str'\n</code></pre>\n\n<p>to the terminal. Unhandled exceptions should never go unnoticed.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 11412121,
                        "reputation": 259,
                        "user_id": 8365967,
                        "user_type": "registered",
                        "display_name": "V&#237;tor C&#233;zar"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1552933636,
                    "creation_date": 1552933636,
                    "answer_id": 55227863,
                    "question_id": 11130156,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/55227863#55227863",
                    "body": "<p>I use a decorator for this. It saves <code>sys.stdout</code> and <code>sys.stderr</code> references and makes these variables point to null. Then, after the function execution the original references are retrieved. It is important to note the try/except block, that allows the retrieval of the original references even when an exception is raised on the function.</p>\n\n<pre><code>def suppress_std(func):\n    def wrapper(*args, **kwargs):\n        stderr_tmp = sys.stderr\n        stdout_tmp = sys.stdout\n        null = open(os.devnull, 'w')\n        sys.stdout = null\n        sys.stderr = null\n        try:\n            result = func(*args, **kwargs)\n            sys.stderr = stderr_tmp\n            sys.stdout = stdout_tmp\n            return result\n        except:\n            sys.stderr = stderr_tmp\n            sys.stdout = stdout_tmp\n            raise\n    return wrapper\n</code></pre>\n\n<p>To use:</p>\n\n<pre><code>@suppress_std\ndef function_std_suppressed():\n    # code here\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 19557232,
                                "reputation": 11124,
                                "user_id": 14311263,
                                "user_type": "registered",
                                "display_name": "Timus"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1602414580,
                            "post_id": 64299237,
                            "comment_id": 113707238,
                            "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/64299237#comment113707238_64299237",
                            "body": "Welcome to SO! If you answer to old questions (this one is over 8 year old) that have already an accepted answer (that&#39;s the case here): Please check if you really have a substantial improvement to offer. If not, don&#39;t answer. (Your answer was already given.)"
                        }
                    ],
                    "owner": {
                        "account_id": 19706682,
                        "reputation": 1,
                        "user_id": 14428198,
                        "user_type": "unregistered",
                        "display_name": "Peter"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1602382352,
                    "last_edit_date": 1602382352,
                    "creation_date": 1602372295,
                    "answer_id": 64299237,
                    "question_id": 11130156,
                    "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions/64299237#64299237",
                    "body": "<p>Just use Linux/Unix:</p>\n<pre><code>./myscript.py 2&gt;/dev/null # gets rid of stderr\n./myscript.py 2&gt;/somewhere/myerror.log\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 404260,
                "reputation": 9971,
                "user_id": 772487,
                "user_type": "registered",
                "accept_rate": 60,
                "display_name": "jeremiahbuddha"
            },
            "comment_count": 10,
            "is_answered": true,
            "accepted_answer_id": 11147418,
            "answer_count": 9,
            "score": 61,
            "last_activity_date": 1602382352,
            "creation_date": 1340239600,
            "last_edit_date": 1504226303,
            "question_id": 11130156,
            "link": "https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions",
            "title": "Suppress stdout / stderr print from Python functions",
            "body": "<p>I have a Python script that is using some closed-box Python functions (i.e. I can't edit these functions) provided by my employer. When I call these functions, they are printing output to my linux terminal that I would like to suppress. I've tried redirecting stdout / stderr via;</p>\n\n<pre><code>orig_out = sys.stdout\nsys.stdout = StringIO()\nrogue_function()\nsys.stdout = orig_out\n</code></pre>\n\n<p>but this fails to catch the output. I think the functions I'm calling via-Python (rogue_function() from above) are really wrappers for compiled C-code, which are actually doing the printing. </p>\n\n<p>Does anyone know of a way I can do a \"deep-capture\" of any print handed to stdout / stderr by a function (and any sub-functions that function calls)? </p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>I ended up taking the method outlined in the selected answer below and writing a context manager to supress stdout and stderr:</p>\n\n<pre><code># Define a context manager to suppress stdout and stderr.\nclass suppress_stdout_stderr(object):\n    '''\n    A context manager for doing a \"deep suppression\" of stdout and stderr in \n    Python, i.e. will suppress all print, even if the print originates in a \n    compiled C/Fortran sub-function.\n       This will not suppress raised exceptions, since exceptions are printed\n    to stderr just before a script exits, and after the context manager has\n    exited (at least, I think that is why it lets exceptions through).      \n\n    '''\n    def __init__(self):\n        # Open a pair of null files\n        self.null_fds =  [os.open(os.devnull,os.O_RDWR) for x in range(2)]\n        # Save the actual stdout (1) and stderr (2) file descriptors.\n        self.save_fds = [os.dup(1), os.dup(2)]\n\n    def __enter__(self):\n        # Assign the null pointers to stdout and stderr.\n        os.dup2(self.null_fds[0],1)\n        os.dup2(self.null_fds[1],2)\n\n    def __exit__(self, *_):\n        # Re-assign the real stdout/stderr back to (1) and (2)\n        os.dup2(self.save_fds[0],1)\n        os.dup2(self.save_fds[1],2)\n        # Close all file descriptors\n        for fd in self.null_fds + self.save_fds:\n            os.close(fd)\n</code></pre>\n\n<p>To use this you just:</p>\n\n<pre><code>with suppress_stdout_stderr():\n    rogue_function()\n</code></pre>\n\n<p>This works \"pretty good\". It does suppress the printout from the rogue functions that were cluttering up my script. I noticed in testing it that it lets through raised exceptions as well as some logger print, and I'm not entirely clear why. I think it has something to do with <em>when</em> these messages get sent to stdout / stderr (I think it happens after my context manager exits). If anyone can confirm this, I'd be interested in hearing the details ... </p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 7263
}