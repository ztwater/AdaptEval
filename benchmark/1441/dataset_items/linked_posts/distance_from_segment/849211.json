{
    "items": [
        {
            "tags": [
                "language-agnostic",
                "geometry",
                "distance",
                "line-segment"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 24890,
                        "reputation": 6607,
                        "user_id": 63571,
                        "user_type": "registered",
                        "display_name": "mandaleeka"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1242064250,
                    "post_id": 849211,
                    "comment_id": 90447413,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment#comment90447413_849211",
                    "body": "I don&#39;t know how you&#39;re representing lines and points, but <a href=\"http://mathworld.wolfram.com/Point-LineDistance2-Dimensional.html\" rel=\"nofollow noreferrer\">here</a> is all the mathematics you need to get started. Shouldn&#39;t be too hard to figure out what you need to do."
                },
                {
                    "owner": {
                        "account_id": 26748,
                        "reputation": 13150,
                        "user_id": 69877,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "tito"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1325028211,
                    "post_id": 849211,
                    "comment_id": 10746812,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment#comment10746812_849211",
                    "body": "Is the answer of this questions can be fixed/changed ? The current is not for the question (segment), but for a line."
                },
                {
                    "owner": {
                        "account_id": 1189401,
                        "reputation": 11174,
                        "user_id": 1162609,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "Gunther Struyf"
                    },
                    "reply_to_user": {
                        "account_id": 94827,
                        "reputation": 1647,
                        "user_id": 258663,
                        "user_type": "registered",
                        "display_name": "Arthur Kalliokoski"
                    },
                    "edited": false,
                    "score": 4,
                    "creation_date": 1349432898,
                    "post_id": 849211,
                    "comment_id": 17216004,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment#comment17216004_849211",
                    "body": "@ArthurKalliokoski: that link is dead, but I&#39;ve found a copy: <a href=\"http://paulbourke.net/geometry/pointline/\" rel=\"nofollow noreferrer\">paulbourke.net/geometry/pointline</a>"
                },
                {
                    "owner": {
                        "account_id": 205707,
                        "reputation": 1,
                        "user_id": 454597,
                        "user_type": "registered",
                        "accept_rate": 91,
                        "display_name": "TC1"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1350885194,
                    "post_id": 849211,
                    "comment_id": 17647208,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment#comment17647208_849211",
                    "body": "Had to look for this myself &amp; stumbled upon this from Google -- if anyone is looking for an implementation &amp; can go with Python, <a href=\"http://pypi.python.org/pypi/Shapely\" rel=\"nofollow noreferrer\">Shapely</a> has this. You&#39;re looking for the <code>LineString</code> class for the path."
                },
                {
                    "owner": {
                        "account_id": 260365,
                        "reputation": 9232,
                        "user_id": 543873,
                        "user_type": "registered",
                        "accept_rate": 72,
                        "display_name": "Michael"
                    },
                    "reply_to_user": {
                        "account_id": 1189401,
                        "reputation": 11174,
                        "user_id": 1162609,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "Gunther Struyf"
                    },
                    "edited": false,
                    "score": 12,
                    "creation_date": 1362782695,
                    "post_id": 849211,
                    "comment_id": 21602027,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment#comment21602027_849211",
                    "body": "@GuntherStruyf: that link is dead too, but this similar link works: <a href=\"http://paulbourke.net/geometry/pointlineplane/\" rel=\"nofollow noreferrer\">paulbourke.net/geometry/pointlineplane</a>"
                },
                {
                    "owner": {
                        "account_id": 384366,
                        "reputation": 621,
                        "user_id": 740836,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Nick Budden"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1386295289,
                    "post_id": 849211,
                    "comment_id": 30489239,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment#comment30489239_849211",
                    "body": "If someone&#39;s looking for distance between a point and a line, not a point and a line SEGMENT, check this link: <a href=\"https://gist.github.com/rhyolight/2846020\" rel=\"nofollow noreferrer\">gist.github.com/rhyolight/2846020</a>"
                },
                {
                    "owner": {
                        "account_id": 2263249,
                        "reputation": 564,
                        "user_id": 1992731,
                        "user_type": "registered",
                        "display_name": "Eric"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1526383928,
                    "post_id": 849211,
                    "comment_id": 87713907,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment#comment87713907_849211",
                    "body": "The link above is dead. Here&#39;s pseudo-code and c++ sample, explained and derived as detailed as a textbook,  <a href=\"http://geomalgorithms.com/a02-_lines.html\" rel=\"nofollow noreferrer\">geomalgorithms.com/a02-_lines.html</a>"
                },
                {
                    "owner": {
                        "account_id": 5226191,
                        "reputation": 3022,
                        "user_id": 4178170,
                        "user_type": "registered",
                        "accept_rate": 55,
                        "display_name": "Humoyun Ahmad"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1539043201,
                    "post_id": 849211,
                    "comment_id": 92349156,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment#comment92349156_849211",
                    "body": "<a href=\"https://brilliant.org/wiki/dot-product-distance-between-point-and-a-line/\" rel=\"nofollow noreferrer\">brilliant.org/wiki/&hellip;</a>"
                }
            ],
            "answers": [
                {
                    "owner": {
                        "account_id": 13858,
                        "reputation": 39259,
                        "user_id": 28053,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Paul Sonier"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1242064661,
                    "creation_date": 1242064661,
                    "answer_id": 849266,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/849266#849266",
                    "body": "<p>I'm assuming you want to find the <strong>shortest</strong> distance between the point and a line segment; to do this, you need to find the line (lineA) which is perpendicular to your line segment (lineB) which goes through your point, determine the intersection between that line (lineA) and your line which goes through your line segment (lineB); if that point is between the two points of your line segment, then the distance is the distance between your point and the point you just found  which is the intersection of lineA and lineB; if the point is not between the two points of your line segment, you need to get the distance between your point and the closer of two ends of the line segment; this can be done easily by taking the square distance (to avoid a square root) between the point and the two points of the line segment; whichever is closer, take the square root of that one.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1273,
                                "reputation": 190072,
                                "user_id": 1694,
                                "user_type": "registered",
                                "accept_rate": 95,
                                "display_name": "Eli Courtwright"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1242221483,
                            "post_id": 856127,
                            "comment_id": 665680,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/856127#comment665680_856127",
                            "body": "Thanks - this is exactly the kind of code I was looking for.  I&#39;ve posted my own answer below, since I managed to put something together that works in current-era-browser-Javascript, but I&#39;ve marked your answer as accepted because it&#39;s simple, well-written, easy-to-understand, and much appreciated."
                        },
                        {
                            "owner": {
                                "account_id": 43999,
                                "reputation": 18992,
                                "user_id": 128875,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "quano"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1265748314,
                            "post_id": 856127,
                            "comment_id": 2187767,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/856127#comment2187767_856127",
                            "body": "Isn&#39;t this missing the dot-method? In any case, it is easy to calculate: vec1.x * vec2.x + vec1.y * vec2.y"
                        }
                    ],
                    "owner": {
                        "account_id": 3443,
                        "reputation": 371,
                        "user_id": 4969,
                        "user_type": "registered",
                        "accept_rate": 71,
                        "display_name": "Matt W"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 11,
                    "last_activity_date": 1242328419,
                    "last_edit_date": 1242328419,
                    "creation_date": 1242190584,
                    "answer_id": 856127,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/856127#856127",
                    "body": "<p>Hey, I just wrote this yesterday. It's in Actionscript 3.0, which is basically Javascript, though you might not have the same Point class.</p>\n\n<pre><code>//st = start of line segment\n//b = the line segment (as in: st + b = end of line segment)\n//pt = point to test\n//Returns distance from point to line segment.  \n//Note: nearest point on the segment to the test point is right there if we ever need it\npublic static function linePointDist( st:Point, b:Point, pt:Point ):Number\n{\n    var nearestPt:Point; //closest point on seqment to pt\n\n    var keyDot:Number = dot( b, pt.subtract( st ) ); //key dot product\n    var bLenSq:Number = dot( b, b ); //Segment length squared\n\n    if( keyDot &lt;= 0 )  //pt is \"behind\" st, use st\n    {\n        nearestPt = st  \n    }\n    else if( keyDot &gt;= bLenSq ) //pt is \"past\" end of segment, use end (notice we are saving twin sqrts here cuz)\n    {\n        nearestPt = st.add(b);\n    }\n    else //pt is inside segment, reuse keyDot and bLenSq to get percent of seqment to move in to find closest point\n    {\n        var keyDotToPctOfB:Number = keyDot/bLenSq; //REM dot product comes squared\n        var partOfB:Point = new Point( b.x * keyDotToPctOfB, b.y * keyDotToPctOfB );\n        nearestPt = st.add(partOfB);\n    }\n\n    var dist:Number = (pt.subtract(nearestPt)).length;\n\n    return dist;\n}\n</code></pre>\n\n<p>Also, there's a pretty complete and readable discussion of the problem here: <a href=\"http://notejot.com/2008/09/distance-from-point-to-line-segment-in-2d/\" rel=\"noreferrer\">notejot.com</a> </p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 55915,
                                "reputation": 16807,
                                "user_id": 167531,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Grumdrig"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1256230971,
                            "post_id": 857954,
                            "comment_id": 1474197,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/857954#comment1474197_857954",
                            "body": "This code has a bug. A point near the line on which the segment lies, but far off one end of the segment, would be incorrectly judged to be near the segment."
                        },
                        {
                            "owner": {
                                "account_id": 1273,
                                "reputation": 190072,
                                "user_id": 1694,
                                "user_type": "registered",
                                "accept_rate": 95,
                                "display_name": "Eli Courtwright"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1256267886,
                            "post_id": 857954,
                            "comment_id": 1477223,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/857954#comment1477223_857954",
                            "body": "Interesting, I&#39;ll look into this the next time I&#39;m working on this codebase to confirm your assertion.  Thanks for the tip."
                        }
                    ],
                    "owner": {
                        "account_id": 1273,
                        "reputation": 190072,
                        "user_id": 1694,
                        "user_type": "registered",
                        "accept_rate": 95,
                        "display_name": "Eli Courtwright"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1242221394,
                    "creation_date": 1242221394,
                    "answer_id": 857954,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/857954#857954",
                    "body": "<p>Here's the code I ended up writing.  This code assumes that a point is defined in the form of <code>{x:5, y:7}</code>.  Note that this is not the absolute most efficient way, but it's the simplest and easiest-to-understand code that I could come up with.</p>\n\n<pre><code>// a, b, and c in the code below are all points\n\nfunction distance(a, b)\n{\n    var dx = a.x - b.x;\n    var dy = a.y - b.y;\n    return Math.sqrt(dx*dx + dy*dy);\n}\n\nfunction Segment(a, b)\n{\n    var ab = {\n        x: b.x - a.x,\n        y: b.y - a.y\n    };\n    var length = distance(a, b);\n\n    function cross(c) {\n        return ab.x * (c.y-a.y) - ab.y * (c.x-a.x);\n    };\n\n    this.distanceFrom = function(c) {\n        return Math.min(distance(a,c),\n                        distance(b,c),\n                        Math.abs(cross(c) / length));\n    };\n}\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1273,
                                "reputation": 190072,
                                "user_id": 1694,
                                "user_type": "registered",
                                "accept_rate": 95,
                                "display_name": "Eli Courtwright"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1242328754,
                            "post_id": 865080,
                            "comment_id": 672696,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/865080#comment672696_865080",
                            "body": "Hey, thanks! This would have been really helpful when I was coding my solution, and it&#39;ll be a nice reference for the next time I need to do something like this.  I&#39;m marking this accepted because your Python solution is short, explains its steps, and is a complete working example that I can copy/paste for testing."
                        },
                        {
                            "owner": {
                                "account_id": 1843,
                                "reputation": 1867,
                                "user_id": 2534,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "balint.miklos"
                            },
                            "edited": false,
                            "score": 11,
                            "creation_date": 1245313937,
                            "post_id": 865080,
                            "comment_id": 820489,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/865080#comment820489_865080",
                            "body": "isn&#39;t this computing the distance of a point to a <i>line</i> instead of the segment?"
                        },
                        {
                            "owner": {
                                "account_id": 33085,
                                "reputation": 2164,
                                "user_id": 92318,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Benji Mizrahi"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1252931580,
                            "post_id": 865080,
                            "comment_id": 1264540,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/865080#comment1264540_865080",
                            "body": "How about the projection length? What would its algorithm be?"
                        },
                        {
                            "owner": {
                                "account_id": 33085,
                                "reputation": 2164,
                                "user_id": 92318,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Benji Mizrahi"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1252931778,
                            "post_id": 865080,
                            "comment_id": 1264549,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/865080#comment1264549_865080",
                            "body": "I think I found my own answer: return fabs(ac[0]*t[0]+ac[1]*t[1])"
                        },
                        {
                            "owner": {
                                "account_id": 55915,
                                "reputation": 16807,
                                "user_id": 167531,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Grumdrig"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1256231153,
                            "post_id": 865080,
                            "comment_id": 1474216,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/865080#comment1474216_865080",
                            "body": "This is indeed the distance to the line the segment is on, not to the segment."
                        },
                        {
                            "owner": {
                                "account_id": 43999,
                                "reputation": 18992,
                                "user_id": 128875,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "quano"
                            },
                            "edited": false,
                            "score": 13,
                            "creation_date": 1265754771,
                            "post_id": 865080,
                            "comment_id": 2188574,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/865080#comment2188574_865080",
                            "body": "This doesn&#39;t seem to work. If you&#39;ve got a segment of (0,0) and (5,0), and try against point (7,0), it will return 0, which isn&#39;t true. The distance should be 2."
                        },
                        {
                            "owner": {
                                "account_id": 79224,
                                "reputation": 5697,
                                "user_id": 224848,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "phkahler"
                            },
                            "edited": false,
                            "score": 8,
                            "creation_date": 1265819542,
                            "post_id": 865080,
                            "comment_id": 2194746,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/865080#comment2194746_865080",
                            "body": "He&#39;s failed to consider the case where the projection of the point onto the segment is outside the interval from A to B. That might be what the questioner wanted, but not what he asked."
                        },
                        {
                            "owner": {
                                "account_id": 40908,
                                "reputation": 3346,
                                "user_id": 118750,
                                "user_type": "registered",
                                "accept_rate": 84,
                                "display_name": "Sambatyon"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1267019693,
                            "post_id": 865080,
                            "comment_id": 2295909,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/865080#comment2295909_865080",
                            "body": "This is not what was originally asked."
                        },
                        {
                            "owner": {
                                "account_id": 33119,
                                "reputation": 2320,
                                "user_id": 92441,
                                "user_type": "registered",
                                "accept_rate": 74,
                                "display_name": "ianmayo"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1315818806,
                            "post_id": 865080,
                            "comment_id": 8917900,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/865080#comment8917900_865080",
                            "body": "As others have said, this algorithm is for a line, not a line segment. The quano comment explains the difference."
                        }
                    ],
                    "owner": {
                        "account_id": 561722,
                        "reputation": 415,
                        "user_id": 107265,
                        "user_type": "unregistered",
                        "display_name": "cyberthanasis"
                    },
                    "comment_count": 9,
                    "is_accepted": false,
                    "score": 10,
                    "last_activity_date": 1334747837,
                    "last_edit_date": 1334747837,
                    "creation_date": 1242327369,
                    "answer_id": 865080,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/865080#865080",
                    "body": "<p>Couldn't resist coding it in python :)<br></p>\n\n<pre class=\"lang-python prettyprint-override\"><code>from math import sqrt, fabs\ndef pdis(a, b, c):\n    t = b[0]-a[0], b[1]-a[1]           # Vector ab\n    dd = sqrt(t[0]**2+t[1]**2)         # Length of ab\n    t = t[0]/dd, t[1]/dd               # unit vector of ab\n    n = -t[1], t[0]                    # normal unit vector to ab\n    ac = c[0]-a[0], c[1]-a[1]          # vector ac\n    return fabs(ac[0]*n[0]+ac[1]*n[1]) # Projection of ac to n (the minimum distance)\n\nprint pdis((1,1), (2,2), (2,0))        # Example (answer is 1.414)\n</code></pre>\n\n<p><br>\nDitto for fortran :) <br></p>\n\n<pre class=\"lang-fortran prettyprint-override\"><code>real function pdis(a, b, c)\n    real, dimension(0:1), intent(in) :: a, b, c\n    real, dimension(0:1) :: t, n, ac\n    real :: dd\n    t = b - a                          ! Vector ab\n    dd = sqrt(t(0)**2+t(1)**2)         ! Length of ab\n    t = t/dd                           ! unit vector of ab\n    n = (/-t(1), t(0)/)                ! normal unit vector to ab\n    ac = c - a                         ! vector ac\n    pdis = abs(ac(0)*n(0)+ac(1)*n(1))  ! Projection of ac to n (the minimum distance)\nend function pdis\n\n\nprogram test\n    print *, pdis((/1.0,1.0/), (/2.0,2.0/), (/2.0,0.0/))   ! Example (answer is 1.414)\nend program test\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 162898,
                                "reputation": 5286,
                                "user_id": 384670,
                                "user_type": "registered",
                                "accept_rate": 48,
                                "display_name": "M Katz"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1339193627,
                            "post_id": 1501725,
                            "comment_id": 14302639,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment14302639_1501725",
                            "body": "I&#39;ve added a fleshed-out version of this as a separate answer."
                        },
                        {
                            "owner": {
                                "account_id": 53838,
                                "reputation": 1922,
                                "user_id": 160985,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "awolf"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1346270254,
                            "post_id": 1501725,
                            "comment_id": 16314960,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment16314960_1501725",
                            "body": "Thanks @Grumdrig, your javascript solution was spot on and a huge time saver. I ported your solution to Objective-C and added it below."
                        },
                        {
                            "owner": {
                                "account_id": 1531701,
                                "reputation": 6624,
                                "user_id": 1429714,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "gongzhitaao"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1365781887,
                            "post_id": 1501725,
                            "comment_id": 22772635,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment22772635_1501725",
                            "body": "@JaredMcAteer shouldn&#39;t the float equality be determined by another function instead of directly <code>==</code>?"
                        },
                        {
                            "owner": {
                                "account_id": 55915,
                                "reputation": 16807,
                                "user_id": 167531,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Grumdrig"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1365828277,
                            "post_id": 1501725,
                            "comment_id": 22787915,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment22787915_1501725",
                            "body": "We&#39;re really just trying to avoid a divide by zero there."
                        },
                        {
                            "owner": {
                                "account_id": 329380,
                                "reputation": 1033,
                                "user_id": 652855,
                                "user_type": "registered",
                                "accept_rate": 54,
                                "display_name": "wmac"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1386533352,
                            "post_id": 1501725,
                            "comment_id": 30568471,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment30568471_1501725",
                            "body": "Excuse me for asking. If the distance is 0 does it mean the point has cut the line segment?"
                        },
                        {
                            "owner": {
                                "account_id": 55915,
                                "reputation": 16807,
                                "user_id": 167531,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Grumdrig"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1386623992,
                            "post_id": 1501725,
                            "comment_id": 30608880,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment30608880_1501725",
                            "body": "Yes, the point should be somewhere on the line segment (possibly at an endpoint) in that case."
                        },
                        {
                            "owner": {
                                "account_id": 192309,
                                "reputation": 16166,
                                "user_id": 433373,
                                "user_type": "registered",
                                "accept_rate": 95,
                                "display_name": "Nicolas Miari"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1420792800,
                            "post_id": 1501725,
                            "comment_id": 44116415,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment44116415_1501725",
                            "body": "@Grumdrig (and to the people who ported into other languages): This is a really handy, short piece of code. Have you considered making this answer into a Gist? (<a href=\"https://gist.github.com\" rel=\"nofollow noreferrer\">gist.github.com</a>)"
                        },
                        {
                            "owner": {
                                "account_id": 229855,
                                "reputation": 19542,
                                "user_id": 493106,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "xaxxon"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1463865050,
                            "post_id": 1501725,
                            "comment_id": 62248865,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment62248865_1501725",
                            "body": "Can someone give a more descriptive definition of t and projection please?  specifically how they relate to whether the projection lands on the line segment or not?"
                        },
                        {
                            "owner": {
                                "account_id": 55915,
                                "reputation": 16807,
                                "user_id": 167531,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Grumdrig"
                            },
                            "edited": false,
                            "score": 14,
                            "creation_date": 1464894111,
                            "post_id": 1501725,
                            "comment_id": 62685018,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment62685018_1501725",
                            "body": "The projection of point <code>p</code> onto a line is the point on the line closest to <code>p</code>. (And a perpendicular to the line at the projection will pass through <code>p</code>.) The number <code>t</code> is how far along the line segment from <code>v</code> to <code>w</code> that the projection falls. So if <code>t</code> is 0 the projection falls right on <code>v</code>; if it&#39;s 1, it&#39;s on <code>w</code>; if it&#39;s 0.5, for example, then it&#39;s halfway between. If <code>t</code> is less than 0 or greater than 1 it falls on the line past one end or the other of the segment. In that case the distance to the segment will be the distance to the nearer end."
                        },
                        {
                            "owner": {
                                "account_id": 501769,
                                "reputation": 9384,
                                "user_id": 1022707,
                                "user_type": "registered",
                                "accept_rate": 63,
                                "display_name": "clankill3r"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1492422815,
                            "post_id": 1501725,
                            "comment_id": 73953845,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment73953845_1501725",
                            "body": "How can I do this in 3d?"
                        },
                        {
                            "owner": {
                                "account_id": 5804727,
                                "reputation": 6139,
                                "user_id": 4577762,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "FirstOne"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1492955032,
                            "post_id": 1501725,
                            "comment_id": 74193441,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment74193441_1501725",
                            "body": "JS code converted to PHP: <a href=\"http://stackoverflow.com/a/43571942/4577762\">http://stackoverflow.com/a/43571942/4577762</a>"
                        },
                        {
                            "owner": {
                                "account_id": 182136,
                                "reputation": 26161,
                                "user_id": 416626,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "urschrei"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1502375905,
                            "post_id": 1501725,
                            "comment_id": 78192514,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment78192514_1501725",
                            "body": "@grumdrig It looks like this function returns a positive distance if the point lies on the line segment and the numbers are small; i.e. if <code>p = (0.0001, 0.0)</code>, <code>v = (0.0, 0.0)</code>, <code>w = (0.004, 0.0)</code>, it returns <code>1.3552527156068805e-20</code> (see jsfiddle: <a href=\"https://jsfiddle.net/qg0zerkc/\" rel=\"nofollow noreferrer\">jsfiddle.net/qg0zerkc</a>). Is this a floating-point stability issue?"
                        },
                        {
                            "owner": {
                                "account_id": 55915,
                                "reputation": 16807,
                                "user_id": 167531,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Grumdrig"
                            },
                            "reply_to_user": {
                                "account_id": 182136,
                                "reputation": 26161,
                                "user_id": 416626,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "urschrei"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1502426957,
                            "post_id": 1501725,
                            "comment_id": 78213561,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment78213561_1501725",
                            "body": "@urschrei That would be floating point imprecision - if you&#39;re testing for whether a point is on the line you&#39;d want to check that the distance is less than some small value adequate to your needs, rather than equality with zero."
                        },
                        {
                            "owner": {
                                "user_type": "does_not_exist",
                                "display_name": "user7271783"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1513832282,
                            "post_id": 1501725,
                            "comment_id": 82804220,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment82804220_1501725",
                            "body": "Let&#39;s say the line segment was 2 lat/lon points and the point was another lat/lon point, how could I get the distance returned in miles?"
                        },
                        {
                            "owner": {
                                "account_id": 55915,
                                "reputation": 16807,
                                "user_id": 167531,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Grumdrig"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1513934261,
                            "post_id": 1501725,
                            "comment_id": 82846675,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment82846675_1501725",
                            "body": "@RogiSolorzano That&#39;s a 3D problem (earth isn&#39;t flat) so if you want accuracy this isn&#39;t the solution for you. If you want a very rough estimate for points not too far apart there&#39;s very very roughly 60 miles per degree."
                        },
                        {
                            "owner": {
                                "account_id": 55915,
                                "reputation": 16807,
                                "user_id": 167531,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Grumdrig"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1514094168,
                            "post_id": 1501725,
                            "comment_id": 82885954,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment82885954_1501725",
                            "body": "Oops - didn&#39;t notice someone had supplied a 3D version. @RogiSolorzano, you&#39;ll need to convert the lat,long coordinates into x,y,z coordinates in 3-space first."
                        },
                        {
                            "owner": {
                                "account_id": 552332,
                                "reputation": 1298,
                                "user_id": 917432,
                                "user_type": "registered",
                                "accept_rate": 59,
                                "display_name": "Martin Asenov"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1530004711,
                            "post_id": 1501725,
                            "comment_id": 89069729,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment89069729_1501725",
                            "body": "so you are saying the last snippet is in Java, huh ?"
                        },
                        {
                            "owner": {
                                "account_id": 2419784,
                                "reputation": 2505,
                                "user_id": 3033937,
                                "user_type": "registered",
                                "display_name": "Morris Franken"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1534970604,
                            "post_id": 1501725,
                            "comment_id": 90900136,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment90900136_1501725",
                            "body": "The implementation can even be sped up by avoiding to compute the <code>projection</code>. Since the distance from <code>p</code> to line <code>v,w</code> is equal to <code>sqrt(|p-v|^2 - (|w-v|*t)^2)</code>. Thus the last 2 lines of the c++ implementation can be replaced by <code>return sqrt(length_squared(p, v) - l2 * (t * t));</code>"
                        },
                        {
                            "owner": {
                                "account_id": 5226191,
                                "reputation": 3022,
                                "user_id": 4178170,
                                "user_type": "registered",
                                "accept_rate": 55,
                                "display_name": "Humoyun Ahmad"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1539043212,
                            "post_id": 1501725,
                            "comment_id": 92349159,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment92349159_1501725",
                            "body": "<a href=\"https://brilliant.org/wiki/dot-product-distance-between-point-and-a-line/\" rel=\"nofollow noreferrer\">brilliant.org/wiki/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 43441,
                                "reputation": 21076,
                                "user_id": 126995,
                                "user_type": "registered",
                                "accept_rate": 61,
                                "display_name": "Soonts"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1545240612,
                            "post_id": 1501725,
                            "comment_id": 94560621,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment94560621_1501725",
                            "body": "It works but it\u2019s inefficient. The code will do branching anyway, for min/max. When min or max clamps <code>t</code>, there\u2019s no need to calculate the rest of the formula, you already know you need the distance between <code>p</code> and <code>v</code> or <code>w</code>."
                        },
                        {
                            "owner": {
                                "account_id": 5063932,
                                "reputation": 3620,
                                "user_id": 4441547,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "Aaron Franke"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1582762254,
                            "post_id": 1501725,
                            "comment_id": 106893038,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment106893038_1501725",
                            "body": "What about the special case where one of the points is (0, 0)?"
                        },
                        {
                            "owner": {
                                "account_id": 10770528,
                                "reputation": 179,
                                "user_id": 7924113,
                                "user_type": "registered",
                                "accept_rate": 14,
                                "display_name": "user7924113"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1587571473,
                            "post_id": 1501725,
                            "comment_id": 108565490,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment108565490_1501725",
                            "body": "anyone has 3D implementation in python?"
                        },
                        {
                            "owner": {
                                "account_id": 3911458,
                                "reputation": 582,
                                "user_id": 4309858,
                                "user_type": "registered",
                                "display_name": "fede s."
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1598321115,
                            "post_id": 1501725,
                            "comment_id": 112413729,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment112413729_1501725",
                            "body": "All these are calculating <code>t</code> with something equivalent to <code>dot(p - v, w - v) &#47; l2)</code>, which is <code>t = u.v &#47; || u ||&#178;</code>. Shouldn&#39;t they be using the square root of l2? Meaning, the segment&#39;s length, IOW the magnitude of the vector w-v, and not its square.  Am I missing something?"
                        },
                        {
                            "owner": {
                                "account_id": 1480819,
                                "reputation": 1625,
                                "user_id": 1390272,
                                "user_type": "registered",
                                "accept_rate": 87,
                                "display_name": "Goku"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1627959488,
                            "post_id": 1501725,
                            "comment_id": 121288073,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment121288073_1501725",
                            "body": "@Grumdrig Having trouble guessing what dist_sq(lx1, ly1, lz1, lx2, ly2, lz2) does. Does it find the distance between the two points (sum of sqares and then sqare root)? or does it not take a square root? I tried using the code and was getting strange results when I didnt take a square root in definitio of the dist_sq() function"
                        },
                        {
                            "owner": {
                                "account_id": 55915,
                                "reputation": 16807,
                                "user_id": 167531,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Grumdrig"
                            },
                            "reply_to_user": {
                                "account_id": 1480819,
                                "reputation": 1625,
                                "user_id": 1390272,
                                "user_type": "registered",
                                "accept_rate": 87,
                                "display_name": "Goku"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1628117366,
                            "post_id": 1501725,
                            "comment_id": 121338485,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment121338485_1501725",
                            "body": "@Goku It finds the square of the distance between two points. (Sum of squares of component differences.) I&#39;ve added some explanation to the end of the answer."
                        },
                        {
                            "owner": {
                                "account_id": 23615887,
                                "reputation": 76,
                                "user_id": 17649993,
                                "user_type": "registered",
                                "display_name": "BuyMyBeard"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1691339933,
                            "post_id": 1501725,
                            "comment_id": 135475269,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment135475269_1501725",
                            "body": "the code in c++ is wrong, because it doesn&#39;t take into account that a point can be closer to the line than to one of the line ends. for example, taking a point directly on the line segment will return the distance from the closest segment end, instead of returning length 0"
                        },
                        {
                            "owner": {
                                "account_id": 55915,
                                "reputation": 16807,
                                "user_id": 167531,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Grumdrig"
                            },
                            "reply_to_user": {
                                "account_id": 23615887,
                                "reputation": 76,
                                "user_id": 17649993,
                                "user_type": "registered",
                                "display_name": "BuyMyBeard"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1693115273,
                            "post_id": 1501725,
                            "comment_id": 135715910,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#comment135715910_1501725",
                            "body": "@BuyMyBeard Not so. In this case the projection onto the line segment would be the point itself and the distance would be zero. Work through a simple example."
                        }
                    ],
                    "owner": {
                        "account_id": 55915,
                        "reputation": 16807,
                        "user_id": 167531,
                        "user_type": "registered",
                        "accept_rate": 97,
                        "display_name": "Grumdrig"
                    },
                    "comment_count": 27,
                    "is_accepted": true,
                    "score": 523,
                    "last_activity_date": 1628117221,
                    "last_edit_date": 1628117221,
                    "creation_date": 1254367100,
                    "answer_id": 1501725,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#1501725",
                    "body": "<p><strike>Eli, the code you've settled on is incorrect. A point near the line on which the segment lies but far off one end of the segment would be incorrectly judged near the segment.</strike> <em>Update: The incorrect answer mentioned is no longer the accepted one.</em></p>\n<p>Here's some correct code, in C++. It presumes a class 2D-vector <code>class vec2 {float x,y;}</code>, essentially, with operators to add, subract, scale, etc, and a distance and dot product function (i.e. <code>x1 x2 + y1 y2</code>).</p>\n<pre class=\"lang-c++ prettyprint-override\"><code>float minimum_distance(vec2 v, vec2 w, vec2 p) {\n  // Return minimum distance between line segment vw and point p\n  const float l2 = length_squared(v, w);  // i.e. |w-v|^2 -  avoid a sqrt\n  if (l2 == 0.0) return distance(p, v);   // v == w case\n  // Consider the line extending the segment, parameterized as v + t (w - v).\n  // We find projection of point p onto the line. \n  // It falls where t = [(p-v) . (w-v)] / |w-v|^2\n  // We clamp t from [0,1] to handle points outside the segment vw.\n  const float t = max(0, min(1, dot(p - v, w - v) / l2));\n  const vec2 projection = v + t * (w - v);  // Projection falls on the segment\n  return distance(p, projection);\n}\n</code></pre>\n<p>EDIT: I needed a Javascript implementation, so here it is, with no dependencies (or comments, but it's a direct port of the above). Points are represented as objects with <code>x</code> and <code>y</code> attributes.</p>\n<pre class=\"lang-javascript prettyprint-override\"><code>function sqr(x) { return x * x }\nfunction dist2(v, w) { return sqr(v.x - w.x) + sqr(v.y - w.y) }\nfunction distToSegmentSquared(p, v, w) {\n  var l2 = dist2(v, w);\n  if (l2 == 0) return dist2(p, v);\n  var t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\n  t = Math.max(0, Math.min(1, t));\n  return dist2(p, { x: v.x + t * (w.x - v.x),\n                    y: v.y + t * (w.y - v.y) });\n}\nfunction distToSegment(p, v, w) { return Math.sqrt(distToSegmentSquared(p, v, w)); }\n</code></pre>\n<p>EDIT 2: I needed a Java version, but more important, I needed it in 3d instead of 2d.</p>\n<pre class=\"lang-java prettyprint-override\"><code>float dist_to_segment_squared(float px, float py, float pz, float lx1, float ly1, float lz1, float lx2, float ly2, float lz2) {\n  float line_dist = dist_sq(lx1, ly1, lz1, lx2, ly2, lz2);\n  if (line_dist == 0) return dist_sq(px, py, pz, lx1, ly1, lz1);\n  float t = ((px - lx1) * (lx2 - lx1) + (py - ly1) * (ly2 - ly1) + (pz - lz1) * (lz2 - lz1)) / line_dist;\n  t = constrain(t, 0, 1);\n  return dist_sq(px, py, pz, lx1 + t * (lx2 - lx1), ly1 + t * (ly2 - ly1), lz1 + t * (lz2 - lz1));\n}\n</code></pre>\n<p>Here, in the function parameters, <code>&lt;px,py,pz&gt;</code> is the point in question and the line segment has the endpoints <code>&lt;lx1,ly1,lz1&gt;</code> and <code>&lt;lx2,ly2,lz2&gt;</code>. The function <code>dist_sq</code> (which is assumed to exist) finds the square of the distance between two points.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 82192,
                                "reputation": 14356,
                                "user_id": 231298,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "Frederik"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1271949505,
                            "post_id": 2233538,
                            "comment_id": 2713372,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment2713372_2233538",
                            "body": "Sorry, but I tried this and it still gives me the results as if the line was extending into infinity. I&#39;ve found Grumdig&#39;s answer to work, though."
                        },
                        {
                            "owner": {
                                "account_id": 43999,
                                "reputation": 18992,
                                "user_id": 128875,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "quano"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1271967046,
                            "post_id": 2233538,
                            "comment_id": 2715838,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment2715838_2233538",
                            "body": "In that case you&#39;re using it wrong or meaning something else with non-infinite. See an example of this code here: <a href=\"http://boomie.se/upload/Drawdebug.swf\" rel=\"nofollow noreferrer\">boomie.se/upload/Drawdebug.swf</a>"
                        },
                        {
                            "owner": {
                                "account_id": 28943,
                                "reputation": 7329,
                                "user_id": 77764,
                                "user_type": "registered",
                                "accept_rate": 90,
                                "display_name": "Kromster"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1317993955,
                            "post_id": 2233538,
                            "comment_id": 9345740,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment9345740_2233538",
                            "body": "Looks like a mistake in code or something, I get the same result as Frederik/"
                        },
                        {
                            "owner": {
                                "account_id": 43999,
                                "reputation": 18992,
                                "user_id": 128875,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "quano"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1318085584,
                            "post_id": 2233538,
                            "comment_id": 9359247,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment9359247_2233538",
                            "body": "Strange. Well, in the swf example I use exactly this code (it&#39;s copy pasted), and if the behavior in that swf is what you&#39;re looking for, this is the code."
                        },
                        {
                            "owner": {
                                "account_id": 44189,
                                "reputation": 1253,
                                "user_id": 129553,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "miguelSantirso"
                            },
                            "edited": false,
                            "score": 35,
                            "creation_date": 1345753487,
                            "post_id": 2233538,
                            "comment_id": 16170448,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment16170448_2233538",
                            "body": "The choice of variable names is far from good (p2, something, u, ...)"
                        },
                        {
                            "owner": {
                                "account_id": 42597,
                                "reputation": 2538,
                                "user_id": 124115,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Vladimir Obrizan"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1359926445,
                            "post_id": 2233538,
                            "comment_id": 20518686,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment20518686_2233538",
                            "body": "I&#39;ve tried the Python version of the function and found that it shows incorrect results if the parameters are integers. <code>distAnother(0, 0, 4, 0, 2, 2)</code> gives 2.8284271247461903 (incorrect). <code>distAnother(0., 0., 4., 0., 2., 2.)</code> gives 2.0 (correct). Please be aware of this. I think the code can be improved to have float conversion somewhere."
                        },
                        {
                            "owner": {
                                "account_id": 102945,
                                "reputation": 791,
                                "user_id": 276014,
                                "user_type": "registered",
                                "display_name": "sean"
                            },
                            "reply_to_user": {
                                "account_id": 42597,
                                "reputation": 2538,
                                "user_id": 124115,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Vladimir Obrizan"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1684330657,
                            "post_id": 2233538,
                            "comment_id": 134502600,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment134502600_2233538",
                            "body": "@VladimirObrizan No, 2.8284 is correct. The closest point on the segment to (0,0) is (2,2), giving an answer of sqrt(8). A value of 2.0 is correct for an infinite line containing the line segment (then the closest point would be (0,4) giving an answer of sqrt(4)=2.0). Nothing to do with integers or floats."
                        },
                        {
                            "owner": {
                                "account_id": 42597,
                                "reputation": 2538,
                                "user_id": 124115,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Vladimir Obrizan"
                            },
                            "reply_to_user": {
                                "account_id": 102945,
                                "reputation": 791,
                                "user_id": 276014,
                                "user_type": "registered",
                                "display_name": "sean"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1684424203,
                            "post_id": 2233538,
                            "comment_id": 134518498,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment134518498_2233538",
                            "body": "@sean, no, 2.0 is correct. You can draw the line ((0, 0), (4, 0)) yourself , put a point at (2, 2) and see that there is no difference if the line is finite or infinite, because the closest point from (2,2) to line ((0, 0), (4, 0)) is (2, 0) and the length of ((2, 2), (2, 0)) is 2."
                        },
                        {
                            "owner": {
                                "account_id": 102945,
                                "reputation": 791,
                                "user_id": 276014,
                                "user_type": "registered",
                                "display_name": "sean"
                            },
                            "reply_to_user": {
                                "account_id": 42597,
                                "reputation": 2538,
                                "user_id": 124115,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Vladimir Obrizan"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1687264901,
                            "post_id": 2233538,
                            "comment_id": 134909776,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment134909776_2233538",
                            "body": "@VladimirObrizan I believe we are talking about two different things. I am referring to the closest point on the line between (4,0) and (2,2) from the point (0,0) which is (2,2). Of course the closest point on the line between (0,0) and (4,0) to the point (2,2) is (2,0)."
                        },
                        {
                            "owner": {
                                "account_id": 42597,
                                "reputation": 2538,
                                "user_id": 124115,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Vladimir Obrizan"
                            },
                            "reply_to_user": {
                                "account_id": 102945,
                                "reputation": 791,
                                "user_id": 276014,
                                "user_type": "registered",
                                "display_name": "sean"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1687352996,
                            "post_id": 2233538,
                            "comment_id": 134924658,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment134924658_2233538",
                            "body": "@sean in the original comment dated 10 years ago example given is between ((0,0), (4, 0)) and (2,2)."
                        },
                        {
                            "owner": {
                                "account_id": 16069654,
                                "reputation": 632,
                                "user_id": 11598389,
                                "user_type": "registered",
                                "display_name": "Tyson"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1688937988,
                            "post_id": 2233538,
                            "comment_id": 135138115,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment135138115_2233538",
                            "body": "As of the date of this comment, it seems that the problem with the Python version that Vladimir pointed out has been fixed. Passing integers gives the correct result of 2.0."
                        },
                        {
                            "owner": {
                                "account_id": 10751401,
                                "reputation": 167,
                                "user_id": 12842085,
                                "user_type": "registered",
                                "display_name": "granular_bastard"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1707162150,
                            "post_id": 2233538,
                            "comment_id": 137410149,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#comment137410149_2233538",
                            "body": "For a faster Python implementation see <a href=\"https://stackoverflow.com/q/77937862/12842085\">stackoverflow.com/q/77937862/12842085</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 43999,
                        "reputation": 18992,
                        "user_id": 128875,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "quano"
                    },
                    "comment_count": 12,
                    "is_accepted": false,
                    "score": 83,
                    "last_activity_date": 1553004551,
                    "last_edit_date": 1553004551,
                    "creation_date": 1265761210,
                    "answer_id": 2233538,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/2233538#2233538",
                    "body": "<p>This is an implementation made for FINITE LINE SEGMENTS, not infinite lines like most other functions here seem to be (that's why I made this).</p>\n\n<p><a href=\"http://paulbourke.net/geometry/pointlineplane/\" rel=\"noreferrer\">Implementation of theory by Paul Bourke</a>.</p>\n\n<p><strong>Python:</strong></p>\n\n<pre class=\"lang-python prettyprint-override\"><code>def dist(x1, y1, x2, y2, x3, y3): # x3,y3 is the point\n    px = x2-x1\n    py = y2-y1\n\n    norm = px*px + py*py\n\n    u =  ((x3 - x1) * px + (y3 - y1) * py) / float(norm)\n\n    if u &gt; 1:\n        u = 1\n    elif u &lt; 0:\n        u = 0\n\n    x = x1 + u * px\n    y = y1 + u * py\n\n    dx = x - x3\n    dy = y - y3\n\n    # Note: If the actual distance does not matter,\n    # if you only want to compare what this function\n    # returns to other results of this function, you\n    # can just return the squared distance instead\n    # (i.e. remove the sqrt) to gain a little performance\n\n    dist = (dx*dx + dy*dy)**.5\n\n    return dist\n</code></pre>\n\n<p><strong>AS3:</strong></p>\n\n<pre class=\"lang-as3 prettyprint-override\"><code>public static function segmentDistToPoint(segA:Point, segB:Point, p:Point):Number\n{\n    var p2:Point = new Point(segB.x - segA.x, segB.y - segA.y);\n    var something:Number = p2.x*p2.x + p2.y*p2.y;\n    var u:Number = ((p.x - segA.x) * p2.x + (p.y - segA.y) * p2.y) / something;\n\n    if (u &gt; 1)\n        u = 1;\n    else if (u &lt; 0)\n        u = 0;\n\n    var x:Number = segA.x + u * p2.x;\n    var y:Number = segA.y + u * p2.y;\n\n    var dx:Number = x - p.x;\n    var dy:Number = y - p.y;\n\n    var dist:Number = Math.sqrt(dx*dx + dy*dy);\n\n    return dist;\n}\n</code></pre>\n\n<p><strong>Java</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private double shortestDistance(float x1,float y1,float x2,float y2,float x3,float y3)\n    {\n        float px=x2-x1;\n        float py=y2-y1;\n        float temp=(px*px)+(py*py);\n        float u=((x3 - x1) * px + (y3 - y1) * py) / (temp);\n        if(u&gt;1){\n            u=1;\n        }\n        else if(u&lt;0){\n            u=0;\n        }\n        float x = x1 + u * px;\n        float y = y1 + u * py;\n\n        float dx = x - x3;\n        float dy = y - y3;\n        double dist = Math.sqrt(dx*dx + dy*dy);\n        return dist;\n\n    }\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 144393,
                        "reputation": 60818,
                        "user_id": 353410,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Dr. belisarius"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 21,
                    "last_activity_date": 1522541904,
                    "last_edit_date": 1522541904,
                    "creation_date": 1289573687,
                    "answer_id": 4165840,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/4165840#4165840",
                    "body": "<h2>In Mathematica</h2>  \n\n<p>It uses a parametric description of the segment, and projects the point into the line defined by the segment. As the parameter goes from 0 to 1 in the segment, if the projection is outside this bounds, we compute the distance to the corresponding enpoint, instead of the straight line normal to the segment.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>Clear[\"Global`*\"];\n distance[{start_, end_}, pt_] := \n   Module[{param},\n   param = ((pt - start).(end - start))/Norm[end - start]^2; (*parameter. the \".\"\n                                                       here means vector product*)\n\n   Which[\n    param &lt; 0, EuclideanDistance[start, pt],                 (*If outside bounds*)\n    param &gt; 1, EuclideanDistance[end, pt],\n    True, EuclideanDistance[pt, start + param (end - start)] (*Normal distance*)\n    ]\n   ];  \n</code></pre>\n\n<p>Plotting result:  </p>\n\n<pre><code>Plot3D[distance[{{0, 0}, {1, 0}}, {xp, yp}], {xp, -1, 2}, {yp, -1, 2}]\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/twl62.png\" alt=\"alt text\">  </p>\n\n<p>Plot those points nearer than a <strong>cutoff distance</strong>:  </p>\n\n<p><img src=\"https://i.stack.imgur.com/W6lDO.png\" alt=\"alt text\"></p>\n\n<p>Contour Plot:  </p>\n\n<p><img src=\"https://i.stack.imgur.com/ri01L.png\" alt=\"enter image description here\"></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 92694,
                                "reputation": 11540,
                                "user_id": 253938,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "RenniePet"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1364722069,
                            "post_id": 4447972,
                            "comment_id": 22344146,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/4447972#comment22344146_4447972",
                            "body": "Thanks for posting this. But it looks like there&#39;s an obvious optimization possible in the last method: Don&#39;t compute dist until after it&#39;s determined that it&#39;s needed."
                        },
                        {
                            "owner": {
                                "account_id": 46322,
                                "reputation": 3151,
                                "user_id": 136785,
                                "user_type": "registered",
                                "accept_rate": 83,
                                "display_name": "J23"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1485395518,
                            "post_id": 4447972,
                            "comment_id": 70913104,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/4447972#comment70913104_4447972",
                            "body": "The comment on DotProduct says it&#39;s computing AB.AC, but it&#39;s computing AB.BC."
                        },
                        {
                            "owner": {
                                "account_id": 423196,
                                "reputation": 7405,
                                "user_id": 802435,
                                "user_type": "registered",
                                "accept_rate": 52,
                                "display_name": "Steak Overflow"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1572904848,
                            "post_id": 4447972,
                            "comment_id": 103699226,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/4447972#comment103699226_4447972",
                            "body": "The cross product by definition returns a vector but returns a scalar here."
                        }
                    ],
                    "owner": {
                        "account_id": 76355,
                        "reputation": 8044,
                        "user_id": 218640,
                        "user_type": "registered",
                        "accept_rate": 67,
                        "display_name": "char m"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 23,
                    "last_activity_date": 1522541583,
                    "last_edit_date": 1522541583,
                    "creation_date": 1292401249,
                    "answer_id": 4447972,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/4447972#4447972",
                    "body": "<p>In my own question thread <a href=\"https://stackoverflow.com/questions/4438244/how-to-calculate-shortest-2d-distance-between-a-point-and-a-line-segment-in-all-c\">how to calculate shortest 2D distance between a point and a line segment in all cases in C, C# / .NET 2.0 or Java?</a> I was asked to put a C# answer here when I find one: so here it is, modified from <a href=\"http://www.topcoder.com/tc?d1=tutorials&amp;d2=geometry1&amp;module=Static\" rel=\"noreferrer\">http://www.topcoder.com/tc?d1=tutorials&amp;d2=geometry1&amp;module=Static</a> :</p>\n\n<pre class=\"lang-c# prettyprint-override\"><code>//Compute the dot product AB . BC\nprivate double DotProduct(double[] pointA, double[] pointB, double[] pointC)\n{\n    double[] AB = new double[2];\n    double[] BC = new double[2];\n    AB[0] = pointB[0] - pointA[0];\n    AB[1] = pointB[1] - pointA[1];\n    BC[0] = pointC[0] - pointB[0];\n    BC[1] = pointC[1] - pointB[1];\n    double dot = AB[0] * BC[0] + AB[1] * BC[1];\n\n    return dot;\n}\n\n//Compute the cross product AB x AC\nprivate double CrossProduct(double[] pointA, double[] pointB, double[] pointC)\n{\n    double[] AB = new double[2];\n    double[] AC = new double[2];\n    AB[0] = pointB[0] - pointA[0];\n    AB[1] = pointB[1] - pointA[1];\n    AC[0] = pointC[0] - pointA[0];\n    AC[1] = pointC[1] - pointA[1];\n    double cross = AB[0] * AC[1] - AB[1] * AC[0];\n\n    return cross;\n}\n\n//Compute the distance from A to B\ndouble Distance(double[] pointA, double[] pointB)\n{\n    double d1 = pointA[0] - pointB[0];\n    double d2 = pointA[1] - pointB[1];\n\n    return Math.Sqrt(d1 * d1 + d2 * d2);\n}\n\n//Compute the distance from AB to C\n//if isSegment is true, AB is a segment, not a line.\ndouble LineToPointDistance2D(double[] pointA, double[] pointB, double[] pointC, \n    bool isSegment)\n{\n    double dist = CrossProduct(pointA, pointB, pointC) / Distance(pointA, pointB);\n    if (isSegment)\n    {\n        double dot1 = DotProduct(pointA, pointB, pointC);\n        if (dot1 &gt; 0) \n            return Distance(pointB, pointC);\n\n        double dot2 = DotProduct(pointB, pointA, pointC);\n        if (dot2 &gt; 0) \n            return Distance(pointA, pointC);\n    }\n    return Math.Abs(dist);\n} \n</code></pre>\n\n<p>I'm @SO not to answer but ask questions so I hope I don't get million down votes for some reasons but constructing critic. I just wanted (and was encouraged) to share somebody else's ideas since the solutions in this thread are either with some exotic language (Fortran, Mathematica) or tagged as faulty by somebody. The only useful one (by Grumdrig) for me is written with C++ and nobody tagged it faulty. But it's missing the methods (dot etc.) that are called.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2031673,
                                "reputation": 463,
                                "user_id": 1815201,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "user1815201"
                            },
                            "edited": false,
                            "score": 12,
                            "creation_date": 1380271070,
                            "post_id": 6853926,
                            "comment_id": 28147130,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment28147130_6853926",
                            "body": "Of all the code I&#39;ve seen to solve this problem, I like this one the best. It is very clear and easy to read. The math behind it though, is a little bit mystical. What does the dot-product divided by the length squared really represent, for example?"
                        },
                        {
                            "owner": {
                                "account_id": 1860420,
                                "reputation": 2314,
                                "user_id": 1685098,
                                "user_type": "registered",
                                "display_name": "Logan Pickup"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1392678633,
                            "post_id": 6853926,
                            "comment_id": 33060142,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment33060142_6853926",
                            "body": "The dot product divided by length squared gives you the projection distance from (x1, y1). This is the fraction of the line that the point (x,y) is closest to. Notice the final else clause where (xx, yy) is calculated - this the projection of the point (x,y) onto the segment (x1,y1)-(x2,y2)."
                        },
                        {
                            "owner": {
                                "account_id": 153596,
                                "reputation": 3505,
                                "user_id": 368954,
                                "user_type": "registered",
                                "display_name": "Joshua"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1420745132,
                            "post_id": 6853926,
                            "comment_id": 44099646,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment44099646_6853926",
                            "body": "Updated to fix the 0 length line problem."
                        },
                        {
                            "owner": {
                                "account_id": 3070435,
                                "reputation": 179,
                                "user_id": 2601247,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "ViniBiso"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1466702265,
                            "post_id": 6853926,
                            "comment_id": 63439703,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment63439703_6853926",
                            "body": "The distance returned in this function is in what? Meters, Kilometers?"
                        },
                        {
                            "owner": {
                                "account_id": 153596,
                                "reputation": 3505,
                                "user_id": 368954,
                                "user_type": "registered",
                                "display_name": "Joshua"
                            },
                            "edited": false,
                            "score": 36,
                            "creation_date": 1466720852,
                            "post_id": 6853926,
                            "comment_id": 63449833,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment63449833_6853926",
                            "body": "Meters. It is returned in meters."
                        },
                        {
                            "owner": {
                                "account_id": 2081296,
                                "reputation": 310,
                                "user_id": 1853227,
                                "user_type": "registered",
                                "display_name": "mengg"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1475966205,
                            "post_id": 6853926,
                            "comment_id": 67157820,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment67157820_6853926",
                            "body": "I think the second condition <code>if (param &gt; 1)</code> should be <code>if(param&gt;len_sq)</code>. Any one?"
                        },
                        {
                            "owner": {
                                "user_type": "does_not_exist",
                                "display_name": "user1781626"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1506894905,
                            "post_id": 6853926,
                            "comment_id": 79988641,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment79988641_6853926",
                            "body": "What does it mean when the param &lt; 0 or &gt; 1?"
                        },
                        {
                            "owner": {
                                "user_type": "does_not_exist",
                                "display_name": "user1781626"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1506896697,
                            "post_id": 6853926,
                            "comment_id": 79989047,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment79989047_6853926",
                            "body": "Can someone who understands each step add comments or provide an explanation? I know we&#39;re calculating the projection, I&#39;m not sure why we&#39;re diving again by the norm and why we&#39;re checking of it&#39;s &lt; 0 or &gt; 1 and then finally what is dx, dy? Thanks"
                        },
                        {
                            "owner": {
                                "account_id": 320282,
                                "reputation": 335,
                                "user_id": 638474,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Sean"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1518641674,
                            "post_id": 6853926,
                            "comment_id": 84594490,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment84594490_6853926",
                            "body": "@nevermind, let&#39;s call our point p0 and the points that define the line as p1 and p2. Then you get the vectors A = p0 - p1 and B = p2 - p1. Param is the scalar value that when multiplied to B gives you the point on the line closest to p0. If param &lt;= 0, the closest point is p1. If param &gt;= 1, the closest point is p1. If it&#39;s between 0 and 1, it&#39;s somewhere between p1 and p2 so we interpolate. XX and YY is then the closest point on the line segment, dx/dy is the vector from p0 to that point, and finally we return the length that vector."
                        },
                        {
                            "owner": {
                                "account_id": 5226191,
                                "reputation": 3022,
                                "user_id": 4178170,
                                "user_type": "registered",
                                "accept_rate": 55,
                                "display_name": "Humoyun Ahmad"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1539043222,
                            "post_id": 6853926,
                            "comment_id": 92349162,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment92349162_6853926",
                            "body": "<a href=\"https://brilliant.org/wiki/dot-product-distance-between-point-and-a-line/\" rel=\"nofollow noreferrer\">brilliant.org/wiki/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 1391132,
                                "reputation": 856,
                                "user_id": 1321944,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Nolo"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1545037428,
                            "post_id": 6853926,
                            "comment_id": 94471969,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment94471969_6853926",
                            "body": "For anyone who needs an explanation for why this code works, please see this wikipedia permalink for <a href=\"https://en.wikipedia.org/w/index.php?title=Vector_projection&amp;oldid=861961162#Vector_projection_2\" rel=\"nofollow noreferrer\">vector projection</a> and refer to the image at the beginning of the article for reference."
                        },
                        {
                            "owner": {
                                "account_id": 8566752,
                                "reputation": 53694,
                                "user_id": 6419007,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Eric Duminil"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1561298095,
                            "post_id": 6853926,
                            "comment_id": 100009113,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment100009113_6853926",
                            "body": "@Joshua it doesn&#39;t necessarily return meters. It returns the same unit that is used for the input coordinates."
                        },
                        {
                            "owner": {
                                "account_id": 2645871,
                                "reputation": 3491,
                                "user_id": 2288578,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "Clonkex"
                            },
                            "reply_to_user": {
                                "account_id": 3070435,
                                "reputation": 179,
                                "user_id": 2601247,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "ViniBiso"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1568341718,
                            "post_id": 6853926,
                            "comment_id": 102251626,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment102251626_6853926",
                            "body": "@ViniBiso In case it wasn&#39;t obvious from the other comments that jokingly replied &quot;metres&quot;, the distance is returned in whatever you put in. So if you feed in metres, it will return metres. If you feed in miles, it will return miles. If you feed in shklobmorphs, it will return shklobmorphs. Same as virtually all geometric maths."
                        },
                        {
                            "owner": {
                                "user_type": "does_not_exist",
                                "display_name": "user14638116"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1606969960,
                            "post_id": 6853926,
                            "comment_id": 115126480,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment115126480_6853926",
                            "body": "How can I make it so that it can also work with lines that extend forever and lines that have one end that extends forever?"
                        },
                        {
                            "owner": {
                                "account_id": 18633519,
                                "reputation": 625,
                                "user_id": 13626874,
                                "user_type": "registered",
                                "display_name": "Savannah Madison"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1622657629,
                            "post_id": 6853926,
                            "comment_id": 119857938,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment119857938_6853926",
                            "body": "I think the sqrt can be avoided since we apply this for all points and use the return value"
                        },
                        {
                            "owner": {
                                "account_id": 1307057,
                                "reputation": 5872,
                                "user_id": 1255825,
                                "user_type": "registered",
                                "accept_rate": 74,
                                "display_name": "JasonG"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1623875620,
                            "post_id": 6853926,
                            "comment_id": 120205855,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment120205855_6853926",
                            "body": "I found something odd, where two lines will have equal distance calculations for a point in fairly complex space:      &gt; pDistance(-79.73851776123047, 43.65549087524414, -79.7388727891, 43.6549957985, -79.7388654821, 43.6549894151);     0.0006092173427681732     &gt; pDistance(-79.73851776123047, 43.65549087524414, -79.7396021293, 43.6545140287, -79.7388727891, 43.6549957985);     0.0006092173427681732  I have to try with another approach but I don&#39;t expect the same distance to appear as often as it does."
                        },
                        {
                            "owner": {
                                "account_id": 13109291,
                                "reputation": 2792,
                                "user_id": 9470914,
                                "user_type": "registered",
                                "display_name": "UdaraWanasinghe"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1668942467,
                            "post_id": 6853926,
                            "comment_id": 131524177,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment131524177_6853926",
                            "body": "There are numerous ways to solve this. But this is the best way,"
                        },
                        {
                            "owner": {
                                "account_id": 3862451,
                                "reputation": 1181,
                                "user_id": 3199861,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "onurhb"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1694878032,
                            "post_id": 6853926,
                            "comment_id": 135950686,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#comment135950686_6853926",
                            "body": "I created a jsbin out using this solution: <a href=\"https://jsbin.com/luyayijesa/edit?html,console,output\" rel=\"nofollow noreferrer\">jsbin.com/luyayijesa/edit?html,console,output</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 153596,
                        "reputation": 3505,
                        "user_id": 368954,
                        "user_type": "registered",
                        "display_name": "Joshua"
                    },
                    "comment_count": 18,
                    "is_accepted": false,
                    "score": 226,
                    "last_activity_date": 1658603849,
                    "last_edit_date": 1658603849,
                    "creation_date": 1311825259,
                    "answer_id": 6853926,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/6853926#6853926",
                    "body": "<p>Here is the simplest complete code in Javascript.</p>\n<p>x, y is your target point and x1, y1 to x2, y2 is your line segment.</p>\n<p>UPDATED: fix for 0 length line problem from comments.</p>\n<pre class=\"lang-javascript prettyprint-override\"><code>function pDistance(x, y, x1, y1, x2, y2) {\n\n  var A = x - x1;\n  var B = y - y1;\n  var C = x2 - x1;\n  var D = y2 - y1;\n\n  var dot = A * C + B * D;\n  var len_sq = C * C + D * D;\n  var param = -1;\n  if (len_sq != 0) //in case of 0 length line\n      param = dot / len_sq;\n\n  var xx, yy;\n\n  if (param &lt; 0) {\n    xx = x1;\n    yy = y1;\n  }\n  else if (param &gt; 1) {\n    xx = x2;\n    yy = y2;\n  }\n  else {\n    xx = x1 + param * C;\n    yy = y1 + param * D;\n  }\n\n  var dx = x - xx;\n  var dy = y - yy;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/sXc2j.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sXc2j.png\" alt=\"Image to help visualize the solution\" /></a></p>\n<p>UPDATED: Kotlin version</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun getDistance(x: Double, y: Double, x1: Double, y1: Double, x2: Double, y2: Double): Double {\n    val a = x - x1\n    val b = y - y1\n    val c = x2 - x1\n    val d = y2 - y1\n\n    val lenSq = c * c + d * d\n    val param = if (lenSq != .0) { //in case of 0 length line\n        val dot = a * c + b * d\n        dot / lenSq\n    } else {\n        -1.0\n    }\n\n    val (xx, yy) = when {\n        param &lt; 0 -&gt; x1 to y1\n        param &gt; 1 -&gt; x2 to y2\n        else -&gt; x1 + param * c to y1 + param * d\n    }\n\n    val dx = x - xx\n    val dy = y - yy\n    return hypot(dx, dy)\n}\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 193987,
                                "reputation": 2777,
                                "user_id": 436034,
                                "user_type": "registered",
                                "display_name": "Trinidad"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1316445474,
                            "post_id": 7252617,
                            "comment_id": 9043181,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/7252617#comment9043181_7252617",
                            "body": "Does not answer the question. This only works for lines (the ones that extend infinitely in space) not line segments (which have a finite length)."
                        },
                        {
                            "owner": {
                                "account_id": 92694,
                                "reputation": 11540,
                                "user_id": 253938,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "RenniePet"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1365142019,
                            "post_id": 7252617,
                            "comment_id": 22515280,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/7252617#comment22515280_7252617",
                            "body": "&quot;above function&quot; is an ambiguous reference. (Irritates me because sometimes this answer is shown beneath my answer.)"
                        }
                    ],
                    "owner": {
                        "account_id": 558290,
                        "reputation": 41,
                        "user_id": 920805,
                        "user_type": "registered",
                        "display_name": "Dmitry"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1327931341,
                    "last_edit_date": 1327931341,
                    "creation_date": 1314765692,
                    "answer_id": 7252617,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/7252617#7252617",
                    "body": "<p>The above function is not working on vertical lines. Here is a function that is working fine!\nLine with points p1, p2. and CheckPoint is p;</p>\n\n<pre><code>public float DistanceOfPointToLine2(PointF p1, PointF p2, PointF p)\n{\n  //          (y1-y2)x + (x2-x1)y + (x1y2-x2y1)\n  //d(P,L) = --------------------------------\n  //         sqrt( (x2-x1)pow2 + (y2-y1)pow2 )\n\n  double ch = (p1.Y - p2.Y) * p.X + (p2.X - p1.X) * p.Y + (p1.X * p2.Y - p2.X * p1.Y);\n  double del = Math.Sqrt(Math.Pow(p2.X - p1.X, 2) + Math.Pow(p2.Y - p1.Y, 2));\n  double d = ch / del;\n  return (float)d;\n}\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 732361,
                                "reputation": 1567,
                                "user_id": 971045,
                                "user_type": "registered",
                                "display_name": "Rudolf Meijering"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1332425695,
                            "post_id": 9477313,
                            "comment_id": 12515542,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/9477313#comment12515542_9477313",
                            "body": "Thanks, this Matlab code indeed calculates the shortest distance to the line <b>SEGMENT</b> and not the distance to the infinite line on which the segment lies."
                        }
                    ],
                    "owner": {
                        "account_id": 77794,
                        "reputation": 2588,
                        "user_id": 221802,
                        "user_type": "registered",
                        "accept_rate": 63,
                        "display_name": "peter karasev"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1469062627,
                    "last_edit_date": 1469062627,
                    "creation_date": 1330409845,
                    "answer_id": 9477313,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/9477313#9477313",
                    "body": "<p>Matlab code, with built-in \"self test\" if they call the function with no arguments:</p>\n\n<pre><code>function r = distPointToLineSegment( xy0, xy1, xyP )\n% r = distPointToLineSegment( xy0, xy1, xyP )\n\nif( nargin &lt; 3 )\n    selfTest();\n    r=0;\nelse\n    vx = xy0(1)-xyP(1);\n    vy = xy0(2)-xyP(2);\n    ux = xy1(1)-xy0(1);\n    uy = xy1(2)-xy0(2);\n    lenSqr= (ux*ux+uy*uy);\n    detP= -vx*ux + -vy*uy;\n\n    if( detP &lt; 0 )\n        r = norm(xy0-xyP,2);\n    elseif( detP &gt; lenSqr )\n        r = norm(xy1-xyP,2);\n    else\n        r = abs(ux*vy-uy*vx)/sqrt(lenSqr);\n    end\nend\n\n\n    function selfTest()\n        %#ok&lt;*NASGU&gt;\n        disp(['invalid args, distPointToLineSegment running (recursive)  self-test...']);\n\n        ptA = [1;1]; ptB = [-1;-1];\n        ptC = [1/2;1/2];  % on the line\n        ptD = [-2;-1.5];  % too far from line segment\n        ptE = [1/2;0];    % should be same as perpendicular distance to line\n        ptF = [1.5;1.5];      % along the A-B but outside of the segment\n\n        distCtoAB = distPointToLineSegment(ptA,ptB,ptC)\n        distDtoAB = distPointToLineSegment(ptA,ptB,ptD)\n        distEtoAB = distPointToLineSegment(ptA,ptB,ptE)\n        distFtoAB = distPointToLineSegment(ptA,ptB,ptF)\n        figure(1); clf;\n        circle = @(x, y, r, c) rectangle('Position', [x-r, y-r, 2*r, 2*r], ...\n            'Curvature', [1 1], 'EdgeColor', c);\n        plot([ptA(1) ptB(1)],[ptA(2) ptB(2)],'r-x'); hold on;\n        plot(ptC(1),ptC(2),'b+'); circle(ptC(1),ptC(2), 0.5e-1, 'b');\n        plot(ptD(1),ptD(2),'g+'); circle(ptD(1),ptD(2), distDtoAB, 'g');\n        plot(ptE(1),ptE(2),'k+'); circle(ptE(1),ptE(2), distEtoAB, 'k');\n        plot(ptF(1),ptF(2),'m+'); circle(ptF(1),ptF(2), distFtoAB, 'm');\n        hold off;\n        axis([-3 3 -3 3]); axis equal;\n    end\n\nend\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1275981,
                        "reputation": 315,
                        "user_id": 1231252,
                        "user_type": "registered",
                        "accept_rate": 25,
                        "display_name": "Lily"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1334737909,
                    "last_edit_date": 1334737909,
                    "creation_date": 1334737523,
                    "answer_id": 10205596,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/10205596#10205596",
                    "body": "<p>see the Matlab GEOMETRY toolbox in the following website:\n<a href=\"http://people.sc.fsu.edu/~jburkardt/m_src/geometry/geometry.html\" rel=\"nofollow\">http://people.sc.fsu.edu/~jburkardt/m_src/geometry/geometry.html</a></p>\n\n<p>ctrl+f and type \"segment\" to find line segment related functions. the functions \"segment_point_dist_2d.m\" and \"segment_point_dist_3d.m\" are what you need.</p>\n\n<p>The GEOMETRY codes are available in a C version and a C++ version and a FORTRAN77 version and a FORTRAN90 version and a MATLAB version.</p>\n"
                },
                {
                    "owner": {
                        "user_type": "does_not_exist",
                        "display_name": "user1397870"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1337153267,
                    "creation_date": 1337153267,
                    "answer_id": 10613872,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/10613872#10613872",
                    "body": "<p>And now my solution as well......\n(Javascript)</p>\n\n<p>It is very fast because I try to avoid any Math.pow functions.</p>\n\n<p>As you can see, at the end of the function I have the distance of the line.</p>\n\n<p><em>code is from the lib <a href=\"http://www.draw2d.org/graphiti/jsdoc/#!/example\" rel=\"noreferrer\">http://www.draw2d.org/graphiti/jsdoc/#!/example</a></em></p>\n\n<pre><code>/**\n * Static util function to determine is a point(px,py) on the line(x1,y1,x2,y2)\n * A simple hit test.\n * \n * @return {boolean}\n * @static\n * @private\n * @param {Number} coronaWidth the accepted corona for the hit test\n * @param {Number} X1 x coordinate of the start point of the line\n * @param {Number} Y1 y coordinate of the start point of the line\n * @param {Number} X2 x coordinate of the end point of the line\n * @param {Number} Y2 y coordinate of the end point of the line\n * @param {Number} px x coordinate of the point to test\n * @param {Number} py y coordinate of the point to test\n **/\ngraphiti.shape.basic.Line.hit= function( coronaWidth, X1, Y1,  X2,  Y2, px, py)\n{\n  // Adjust vectors relative to X1,Y1\n  // X2,Y2 becomes relative vector from X1,Y1 to end of segment\n  X2 -= X1;\n  Y2 -= Y1;\n  // px,py becomes relative vector from X1,Y1 to test point\n  px -= X1;\n  py -= Y1;\n  var dotprod = px * X2 + py * Y2;\n  var projlenSq;\n  if (dotprod &lt;= 0.0) {\n      // px,py is on the side of X1,Y1 away from X2,Y2\n      // distance to segment is length of px,py vector\n      // \"length of its (clipped) projection\" is now 0.0\n      projlenSq = 0.0;\n  } else {\n      // switch to backwards vectors relative to X2,Y2\n      // X2,Y2 are already the negative of X1,Y1=&gt;X2,Y2\n      // to get px,py to be the negative of px,py=&gt;X2,Y2\n      // the dot product of two negated vectors is the same\n      // as the dot product of the two normal vectors\n      px = X2 - px;\n      py = Y2 - py;\n      dotprod = px * X2 + py * Y2;\n      if (dotprod &lt;= 0.0) {\n          // px,py is on the side of X2,Y2 away from X1,Y1\n          // distance to segment is length of (backwards) px,py vector\n          // \"length of its (clipped) projection\" is now 0.0\n          projlenSq = 0.0;\n      } else {\n          // px,py is between X1,Y1 and X2,Y2\n          // dotprod is the length of the px,py vector\n          // projected on the X2,Y2=&gt;X1,Y1 vector times the\n          // length of the X2,Y2=&gt;X1,Y1 vector\n          projlenSq = dotprod * dotprod / (X2 * X2 + Y2 * Y2);\n      }\n  }\n    // Distance to line is now the length of the relative point\n    // vector minus the length of its projection onto the line\n    // (which is zero if the projection falls outside the range\n    //  of the line segment).\n    var lenSq = px * px + py * py - projlenSq;\n    if (lenSq &lt; 0) {\n        lenSq = 0;\n    }\n    return Math.sqrt(lenSq)&lt;coronaWidth;\n};\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 20767,
                                "reputation": 11062,
                                "user_id": 49925,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "dummzeuch"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1516374352,
                            "post_id": 10640089,
                            "comment_id": 83673503,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/10640089#comment83673503_10640089",
                            "body": "There are several problems with this Answer: The type PointF is not declared (maybe that&#39;s a standard type in some Pascal implementations). It&#39;s probably a record x,y: double; end; 2. the functions Distance and MPower are not declared and there is no explanation what they do (we can guess, yes). 3. The variable projection is declared but never used. Overall that makes it a rather poor answer."
                        }
                    ],
                    "owner": {
                        "user_type": "does_not_exist",
                        "display_name": "user1401452"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1337273782,
                    "creation_date": 1337273782,
                    "answer_id": 10640089,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/10640089#10640089",
                    "body": "<p>Here is same thing as the C++ answer but ported to pascal. The order of the point parameter has changed to suit my code but is the same thing.</p>\n\n<pre><code>function Dot(const p1, p2: PointF): double;\nbegin\n  Result := p1.x * p2.x + p1.y * p2.y;\nend;\nfunction SubPoint(const p1, p2: PointF): PointF;\nbegin\n  result.x := p1.x - p2.x;\n  result.y := p1.y - p2.y;\nend;\n\nfunction ShortestDistance2(const p,v,w : PointF) : double;\nvar\n  l2,t : double;\n  projection,tt: PointF;\nbegin\n  // Return minimum distance between line segment vw and point p\n  //l2 := length_squared(v, w);  // i.e. |w-v|^2 -  avoid a sqrt\n  l2 := Distance(v,w);\n  l2 := MPower(l2,2);\n  if (l2 = 0.0) then begin\n    result:= Distance(p, v);   // v == w case\n    exit;\n  end;\n  // Consider the line extending the segment, parameterized as v + t (w - v).\n  // We find projection of point p onto the line.\n  // It falls where t = [(p-v) . (w-v)] / |w-v|^2\n  t := Dot(SubPoint(p,v),SubPoint(w,v)) / l2;\n  if (t &lt; 0.0) then begin\n    result := Distance(p, v);       // Beyond the 'v' end of the segment\n    exit;\n  end\n  else if (t &gt; 1.0) then begin\n    result := Distance(p, w);  // Beyond the 'w' end of the segment\n    exit;\n  end;\n  //projection := v + t * (w - v);  // Projection falls on the segment\n  tt.x := v.x + t * (w.x - v.x);\n  tt.y := v.y + t * (w.y - v.y);\n  result := Distance(p, tt);\nend;\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 92694,
                                "reputation": 11540,
                                "user_id": 253938,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "RenniePet"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1364799637,
                            "post_id": 10956601,
                            "comment_id": 22363338,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/10956601#comment22363338_10956601",
                            "body": "Thanks for posting this. Very well structured and commented and formatted - almost made me forget how much I dislike C++. I&#39;ve used this to make a corresponding C# version, which I&#39;ve now posted here."
                        }
                    ],
                    "owner": {
                        "account_id": 162898,
                        "reputation": 5286,
                        "user_id": 384670,
                        "user_type": "registered",
                        "accept_rate": 48,
                        "display_name": "M Katz"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 10,
                    "last_activity_date": 1339193446,
                    "creation_date": 1339193446,
                    "answer_id": 10956601,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/10956601#10956601",
                    "body": "<p>Here is a more complete spelling out of Grumdrig's solution. This version also returns the closest point itself.</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"math.h\"\n\nclass Vec2\n{\npublic:\n    float _x;\n    float _y;\n\n    Vec2()\n    {\n        _x = 0;\n        _y = 0;\n    }\n\n    Vec2( const float x, const float y )\n    {\n        _x = x;\n        _y = y;\n    }\n\n    Vec2 operator+( const Vec2 &amp;v ) const\n    {\n        return Vec2( this-&gt;_x + v._x, this-&gt;_y + v._y );\n    }\n\n    Vec2 operator-( const Vec2 &amp;v ) const\n    {\n        return Vec2( this-&gt;_x - v._x, this-&gt;_y - v._y );\n    }\n\n    Vec2 operator*( const float f ) const\n    {\n        return Vec2( this-&gt;_x * f, this-&gt;_y * f );\n    }\n\n    float DistanceToSquared( const Vec2 p ) const\n    {\n        const float dX = p._x - this-&gt;_x;\n        const float dY = p._y - this-&gt;_y;\n\n        return dX * dX + dY * dY;\n    }\n\n    float DistanceTo( const Vec2 p ) const\n    {\n        return sqrt( this-&gt;DistanceToSquared( p ) );\n    }\n\n    float DotProduct( const Vec2 p ) const\n    {\n        return this-&gt;_x * p._x + this-&gt;_y * p._y;\n    }\n};\n\n// return minimum distance between line segment vw and point p, and the closest point on the line segment, q\nfloat DistanceFromLineSegmentToPoint( const Vec2 v, const Vec2 w, const Vec2 p, Vec2 * const q )\n{\n    const float distSq = v.DistanceToSquared( w ); // i.e. |w-v|^2 ... avoid a sqrt\n    if ( distSq == 0.0 )\n    {\n        // v == w case\n        (*q) = v;\n\n        return v.DistanceTo( p );\n    }\n\n    // consider the line extending the segment, parameterized as v + t (w - v)\n    // we find projection of point p onto the line\n    // it falls where t = [(p-v) . (w-v)] / |w-v|^2\n\n    const float t = ( p - v ).DotProduct( w - v ) / distSq;\n    if ( t &lt; 0.0 )\n    {\n        // beyond the v end of the segment\n        (*q) = v;\n\n        return v.DistanceTo( p );\n    }\n    else if ( t &gt; 1.0 )\n    {\n        // beyond the w end of the segment\n        (*q) = w;\n\n        return w.DistanceTo( p );\n    }\n\n    // projection falls on the segment\n    const Vec2 projection = v + ( ( w - v ) * t );\n\n    (*q) = projection;\n\n    return p.DistanceTo( projection );\n}\n\nfloat DistanceFromLineSegmentToPoint( float segmentX1, float segmentY1, float segmentX2, float segmentY2, float pX, float pY, float *qX, float *qY )\n{\n    Vec2 q;\n\n    float distance = DistanceFromLineSegmentToPoint( Vec2( segmentX1, segmentY1 ), Vec2( segmentX2, segmentY2 ), Vec2( pX, pY ), &amp;q );\n\n    (*qX) = q._x;\n    (*qY) = q._y;\n\n    return distance;\n}\n\nvoid TestDistanceFromLineSegmentToPoint( float segmentX1, float segmentY1, float segmentX2, float segmentY2, float pX, float pY )\n{\n    float qX;\n    float qY;\n    float d = DistanceFromLineSegmentToPoint( segmentX1, segmentY1, segmentX2, segmentY2, pX, pY, &amp;qX, &amp;qY );\n    printf( \"line segment = ( ( %f, %f ), ( %f, %f ) ), p = ( %f, %f ), distance = %f, q = ( %f, %f )\\n\",\n            segmentX1, segmentY1, segmentX2, segmentY2, pX, pY, d, qX, qY );\n}\n\nvoid TestDistanceFromLineSegmentToPoint()\n{\n    TestDistanceFromLineSegmentToPoint( 0, 0, 1, 1, 1, 0 );\n    TestDistanceFromLineSegmentToPoint( 0, 0, 20, 10, 5, 4 );\n    TestDistanceFromLineSegmentToPoint( 0, 0, 20, 10, 30, 15 );\n    TestDistanceFromLineSegmentToPoint( 0, 0, 20, 10, -30, 15 );\n    TestDistanceFromLineSegmentToPoint( 0, 0, 10, 0, 5, 1 );\n    TestDistanceFromLineSegmentToPoint( 0, 0, 0, 10, 1, 5 );\n}\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 261110,
                                "reputation": 1574,
                                "user_id": 545078,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Gregir"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1388553811,
                            "post_id": 11172574,
                            "comment_id": 31306498,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/11172574#comment31306498_11172574",
                            "body": "This appears to work well for me. Thanks for converting."
                        },
                        {
                            "owner": {
                                "account_id": 452911,
                                "reputation": 12582,
                                "user_id": 849616,
                                "user_type": "registered",
                                "accept_rate": 87,
                                "display_name": "Nat"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1421681261,
                            "post_id": 11172574,
                            "comment_id": 44441153,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/11172574#comment44441153_11172574",
                            "body": "It&#39;s worth noticing, that (xx, yy) is location of closest point. I&#39;ve edited a bit your code, so it return both the point and distance, refactored names so they describe what is what and provided example at: <a href=\"http://stackoverflow.com/a/28028023/849616\">stackoverflow.com/a/28028023/849616</a>."
                        }
                    ],
                    "owner": {
                        "account_id": 35439,
                        "reputation": 14895,
                        "user_id": 100363,
                        "user_type": "registered",
                        "accept_rate": 80,
                        "display_name": "Ben Gotow"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 21,
                    "last_activity_date": 1419256741,
                    "last_edit_date": 1419256741,
                    "creation_date": 1340481742,
                    "answer_id": 11172574,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/11172574#11172574",
                    "body": "<p>For anyone interested, here's a trivial conversion of Joshua's Javascript code to Objective-C:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>- (double)distanceToPoint:(CGPoint)p fromLineSegmentBetween:(CGPoint)l1 and:(CGPoint)l2\n{\n    double A = p.x - l1.x;\n    double B = p.y - l1.y;\n    double C = l2.x - l1.x;\n    double D = l2.y - l1.y;\n\n    double dot = A * C + B * D;\n    double len_sq = C * C + D * D;\n    double param = dot / len_sq;\n\n    double xx, yy;\n\n    if (param &lt; 0 || (l1.x == l2.x &amp;&amp; l1.y == l2.y)) {\n        xx = l1.x;\n        yy = l1.y;\n    }\n    else if (param &gt; 1) {\n        xx = l2.x;\n        yy = l2.y;\n    }\n    else {\n        xx = l1.x + param * C;\n        yy = l1.y + param * D;\n    }\n\n    double dx = p.x - xx;\n    double dy = p.y - yy;\n\n    return sqrtf(dx * dx + dy * dy);\n}\n</code></pre>\n\n<p>I needed this solution to work with <code>MKMapPoint</code> so I will share it in case someone else needs it. Just some minor change and this will return the distance in meters :</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>- (double)distanceToPoint:(MKMapPoint)p fromLineSegmentBetween:(MKMapPoint)l1 and:(MKMapPoint)l2\n{\n    double A = p.x - l1.x;\n    double B = p.y - l1.y;\n    double C = l2.x - l1.x;\n    double D = l2.y - l1.y;\n\n    double dot = A * C + B * D;\n    double len_sq = C * C + D * D;\n    double param = dot / len_sq;\n\n    double xx, yy;\n\n    if (param &lt; 0 || (l1.x == l2.x &amp;&amp; l1.y == l2.y)) {\n        xx = l1.x;\n        yy = l1.y;\n    }\n    else if (param &gt; 1) {\n        xx = l2.x;\n        yy = l2.y;\n    }\n    else {\n        xx = l1.x + param * C;\n        yy = l1.y + param * D;\n    }\n\n    return MKMetersBetweenMapPoints(p, MKMapPointMake(xx, yy));\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 322524,
                        "reputation": 73,
                        "user_id": 641970,
                        "user_type": "registered",
                        "display_name": "devnullicus"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1341972234,
                    "last_edit_date": 1341972234,
                    "creation_date": 1341966656,
                    "answer_id": 11423919,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/11423919#11423919",
                    "body": "<p>Consider this modification to Grumdrig's answer above.  Many times you'll find that floating point imprecision can cause problems.   I'm using doubles in the version below, but you can easily change to floats.  The important part is that it uses an epsilon to handle the \"slop\".  In addition, you'll many times want to know WHERE the intersection happened, or if it happened at all.  If the returned t is &lt; 0.0 or > 1.0, no collision occurred.  However, even if no collision occurred, many times you'll want to know where the closest point on the segment to P is, and thus I use qx and qy to return this location.</p>\n\n<pre><code>double PointSegmentDistanceSquared( double px, double py,\n                                    double p1x, double p1y,\n                                    double p2x, double p2y,\n                                    double&amp; t,\n                                    double&amp; qx, double&amp; qy)\n{\n    static const double kMinSegmentLenSquared = 0.00000001;  // adjust to suit.  If you use float, you'll probably want something like 0.000001f\n    static const double kEpsilon = 1.0E-14;  // adjust to suit.  If you use floats, you'll probably want something like 1E-7f\n    double dx = p2x - p1x;\n    double dy = p2y - p1y;\n    double dp1x = px - p1x;\n    double dp1y = py - p1y;\n    const double segLenSquared = (dx * dx) + (dy * dy);\n    if (segLenSquared &gt;= -kMinSegmentLenSquared &amp;&amp; segLenSquared &lt;= kMinSegmentLenSquared)\n    {\n        // segment is a point.\n        qx = p1x;\n        qy = p1y;\n        t = 0.0;\n        return ((dp1x * dp1x) + (dp1y * dp1y));\n    }\n    else\n    {\n        // Project a line from p to the segment [p1,p2].  By considering the line\n        // extending the segment, parameterized as p1 + (t * (p2 - p1)),\n        // we find projection of point p onto the line. \n        // It falls where t = [(p - p1) . (p2 - p1)] / |p2 - p1|^2\n        t = ((dp1x * dx) + (dp1y * dy)) / segLenSquared;\n        if (t &lt; kEpsilon)\n        {\n            // intersects at or to the \"left\" of first segment vertex (p1x, p1y).  If t is approximately 0.0, then\n            // intersection is at p1.  If t is less than that, then there is no intersection (i.e. p is not within\n            // the 'bounds' of the segment)\n            if (t &gt; -kEpsilon)\n            {\n                // intersects at 1st segment vertex\n                t = 0.0;\n            }\n            // set our 'intersection' point to p1.\n            qx = p1x;\n            qy = p1y;\n            // Note: If you wanted the ACTUAL intersection point of where the projected lines would intersect if\n            // we were doing PointLineDistanceSquared, then qx would be (p1x + (t * dx)) and qy would be (p1y + (t * dy)).\n        }\n        else if (t &gt; (1.0 - kEpsilon))\n        {\n            // intersects at or to the \"right\" of second segment vertex (p2x, p2y).  If t is approximately 1.0, then\n            // intersection is at p2.  If t is greater than that, then there is no intersection (i.e. p is not within\n            // the 'bounds' of the segment)\n            if (t &lt; (1.0 + kEpsilon))\n            {\n                // intersects at 2nd segment vertex\n                t = 1.0;\n            }\n            // set our 'intersection' point to p2.\n            qx = p2x;\n            qy = p2y;\n            // Note: If you wanted the ACTUAL intersection point of where the projected lines would intersect if\n            // we were doing PointLineDistanceSquared, then qx would be (p1x + (t * dx)) and qy would be (p1y + (t * dy)).\n        }\n        else\n        {\n            // The projection of the point to the point on the segment that is perpendicular succeeded and the point\n            // is 'within' the bounds of the segment.  Set the intersection point as that projected point.\n            qx = p1x + (t * dx);\n            qy = p1y + (t * dy);\n        }\n        // return the squared distance from p to the intersection point.  Note that we return the squared distance\n        // as an optimization because many times you just need to compare relative distances and the squared values\n        // works fine for that.  If you want the ACTUAL distance, just take the square root of this value.\n        double dpqx = px - qx;\n        double dpqy = py - qy;\n        return ((dpqx * dpqx) + (dpqy * dpqy));\n    }\n}\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 261110,
                                "reputation": 1574,
                                "user_id": 545078,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "Gregir"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1388539491,
                            "post_id": 12185597,
                            "comment_id": 31304604,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/12185597#comment31304604_12185597",
                            "body": "I get &#39;nan&#39; returned from this line. Any idea why? (Thanks for typing this up in Obj-C, by the way!)  <code>return dist2(p, CGPointMake(v.x + t * (w.x - v.x), v.y + t * (w.y - v.y)))</code>"
                        },
                        {
                            "owner": {
                                "account_id": 16422,
                                "reputation": 89684,
                                "user_id": 35690,
                                "user_type": "registered",
                                "accept_rate": 54,
                                "display_name": "Senseful"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1399273266,
                            "post_id": 12185597,
                            "comment_id": 35976765,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/12185597#comment35976765_12185597",
                            "body": "sqrtf() is squaring x, not getting its square root"
                        },
                        {
                            "owner": {
                                "account_id": 53838,
                                "reputation": 1922,
                                "user_id": 160985,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "awolf"
                            },
                            "reply_to_user": {
                                "account_id": 16422,
                                "reputation": 89684,
                                "user_id": 35690,
                                "user_type": "registered",
                                "accept_rate": 54,
                                "display_name": "Senseful"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1399931266,
                            "post_id": 12185597,
                            "comment_id": 36263155,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/12185597#comment36263155_12185597",
                            "body": "@Senseful Not sure what you mean. sqrtf is square root. <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man3/sqrtf.3.html\" rel=\"nofollow noreferrer\">developer.apple.com/library/mac/documentation/Darwin/Referen&zwnj;&#8203;ce/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 16422,
                                "reputation": 89684,
                                "user_id": 35690,
                                "user_type": "registered",
                                "accept_rate": 54,
                                "display_name": "Senseful"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1400020512,
                            "post_id": 12185597,
                            "comment_id": 36308580,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/12185597#comment36308580_12185597",
                            "body": "@awolf: Take a look at the first line of code above. It defines the method <code>sqrtf(x) = x*x</code>."
                        },
                        {
                            "owner": {
                                "account_id": 53838,
                                "reputation": 1922,
                                "user_id": 160985,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "awolf"
                            },
                            "reply_to_user": {
                                "account_id": 16422,
                                "reputation": 89684,
                                "user_id": 35690,
                                "user_type": "registered",
                                "accept_rate": 54,
                                "display_name": "Senseful"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1400029912,
                            "post_id": 12185597,
                            "comment_id": 36311253,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/12185597#comment36311253_12185597",
                            "body": "@Senseful thanks, it was misnamed rather than performing the wrong operation."
                        }
                    ],
                    "owner": {
                        "account_id": 53838,
                        "reputation": 1922,
                        "user_id": 160985,
                        "user_type": "registered",
                        "accept_rate": 67,
                        "display_name": "awolf"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 11,
                    "last_activity_date": 1400029864,
                    "last_edit_date": 1400029864,
                    "creation_date": 1346270344,
                    "answer_id": 12185597,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/12185597#12185597",
                    "body": "<p>For the lazy, here's my Objective-C port of @Grumdrig's solution above:</p>\n\n<pre><code>CGFloat sqr(CGFloat x) { return x*x; }\nCGFloat dist2(CGPoint v, CGPoint w) { return sqr(v.x - w.x) + sqr(v.y - w.y); }\nCGFloat distanceToSegmentSquared(CGPoint p, CGPoint v, CGPoint w)\n{\n    CGFloat l2 = dist2(v, w);\n    if (l2 == 0.0f) return dist2(p, v);\n\n    CGFloat t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\n    if (t &lt; 0.0f) return dist2(p, v);\n    if (t &gt; 1.0f) return dist2(p, w);\n    return dist2(p, CGPointMake(v.x + t * (w.x - v.x), v.y + t * (w.y - v.y)));\n}\nCGFloat distanceToSegment(CGPoint point, CGPoint segmentPointV, CGPoint segmentPointW)\n{\n    return sqrtf(distanceToSegmentSquared(point, segmentPointV, segmentPointW));\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1393541,
                        "reputation": 66,
                        "user_id": 1323806,
                        "user_type": "registered",
                        "display_name": "Chronocide"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1346902530,
                    "creation_date": 1346902530,
                    "answer_id": 12292618,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/12292618#12292618",
                    "body": "<p>AutoHotkeys version based on Joshua's Javascript:</p>\n\n<pre><code>plDist(x, y, x1, y1, x2, y2) {\n    A:= x - x1\n    B:= y - y1\n    C:= x2 - x1\n    D:= y2 - y1\n\n    dot:= A*C + B*D\n    sqLen:= C*C + D*D\n    param:= dot / sqLen\n\n    if (param &lt; 0 || ((x1 = x2) &amp;&amp; (y1 = y2))) {\n        xx:= x1\n        yy:= y1\n    } else if (param &gt; 1) {\n        xx:= x2\n        yy:= y2\n    } else {\n        xx:= x1 + param*C\n        yy:= y1 + param*D\n    }\n\n    dx:= x - xx\n    dy:= y - yy\n\n    return sqrt(dx*dx + dy*dy)\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1947118,
                        "reputation": 21,
                        "user_id": 1751988,
                        "user_type": "registered",
                        "display_name": "rob mcnicol"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1350449169,
                    "creation_date": 1350449169,
                    "answer_id": 12927277,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/12927277#12927277",
                    "body": "<p>coded in t-sql</p>\n\n<p>the point is (@px, @py) and the line segment runs from (@ax, @ay) to (@bx, @by)</p>\n\n<pre><code>create function fn_sqr (@NumberToSquare decimal(18,10)) \nreturns decimal(18,10)\nas \nbegin\n    declare @Result decimal(18,10)\n    set @Result = @NumberToSquare * @NumberToSquare\n    return @Result\nend\ngo\n\ncreate function fn_Distance(@ax decimal (18,10) , @ay decimal (18,10), @bx decimal(18,10),  @by decimal(18,10)) \nreturns decimal(18,10)\nas\nbegin\n    declare @Result decimal(18,10)\n    set @Result = (select dbo.fn_sqr(@ax - @bx) + dbo.fn_sqr(@ay - @by) )\n    return @Result\nend\ngo\n\ncreate function fn_DistanceToSegmentSquared(@px decimal(18,10), @py decimal(18,10), @ax decimal(18,10), @ay decimal(18,10), @bx decimal(18,10), @by decimal(18,10)) \nreturns decimal(18,10)\nas \nbegin\n    declare @l2 decimal(18,10)\n    set @l2 = (select dbo.fn_Distance(@ax, @ay, @bx, @by))\n    if @l2 = 0\n        return dbo.fn_Distance(@px, @py, @ax, @ay)\n    declare @t decimal(18,10)\n    set @t = ((@px - @ax) * (@bx - @ax) + (@py - @ay) * (@by - @ay)) / @l2\n    if (@t &lt; 0) \n        return dbo.fn_Distance(@px, @py, @ax, @ay);\n    if (@t &gt; 1) \n        return dbo.fn_Distance(@px, @py, @bx, @by);\n    return dbo.fn_Distance(@px, @py,  @ax + @t * (@bx - @ax),  @ay + @t * (@by - @ay))\nend\ngo\n\ncreate function fn_DistanceToSegment(@px decimal(18,10), @py decimal(18,10), @ax decimal(18,10), @ay decimal(18,10), @bx decimal(18,10), @by decimal(18,10)) \nreturns decimal(18,10)\nas \nbegin\n    return sqrt(dbo.fn_DistanceToSegmentSquared(@px, @py , @ax , @ay , @bx , @by ))\nend\ngo\n\n--example execution for distance from a point at (6,1) to line segment that runs from (4,2) to (2,1)\nselect dbo.fn_DistanceToSegment(6, 1, 4, 2, 2, 1) \n--result = 2.2360679775\n\n--example execution for distance from a point at (-3,-2) to line segment that runs from (0,-2) to (-2,1)\nselect dbo.fn_DistanceToSegment(-3, -2, 0, -2, -2, 1) \n--result = 2.4961508830\n\n--example execution for distance from a point at (0,-2) to line segment that runs from (0,-2) to (-2,1)\nselect dbo.fn_DistanceToSegment(0,-2, 0, -2, -2, 1) \n--result = 0.0000000000\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 92694,
                        "reputation": 11540,
                        "user_id": 253938,
                        "user_type": "registered",
                        "accept_rate": 81,
                        "display_name": "RenniePet"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1364837863,
                    "last_edit_date": 1364837863,
                    "creation_date": 1364799235,
                    "answer_id": 15738989,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/15738989#15738989",
                    "body": "<p>Looks like just about everyone else on StackOverflow has contributed an answer (23 answers so far), so here's my contribution for C#. This is mostly based on the answer by M. Katz, which in turn is based on the answer by Grumdrig.</p>\n\n<pre><code>   public struct MyVector\n   {\n      private readonly double _x, _y;\n\n\n      // Constructor\n      public MyVector(double x, double y)\n      {\n         _x = x;\n         _y = y;\n      }\n\n\n      // Distance from this point to another point, squared\n      private double DistanceSquared(MyVector otherPoint)\n      {\n         double dx = otherPoint._x - this._x;\n         double dy = otherPoint._y - this._y;\n         return dx * dx + dy * dy;\n      }\n\n\n      // Find the distance from this point to a line segment (which is not the same as from this \n      //  point to anywhere on an infinite line). Also returns the closest point.\n      public double DistanceToLineSegment(MyVector lineSegmentPoint1, MyVector lineSegmentPoint2,\n                                          out MyVector closestPoint)\n      {\n         return Math.Sqrt(DistanceToLineSegmentSquared(lineSegmentPoint1, lineSegmentPoint2, \n                          out closestPoint));\n      }\n\n\n      // Same as above, but avoid using Sqrt(), saves a new nanoseconds in cases where you only want \n      //  to compare several distances to find the smallest or largest, but don't need the distance\n      public double DistanceToLineSegmentSquared(MyVector lineSegmentPoint1, \n                                              MyVector lineSegmentPoint2, out MyVector closestPoint)\n      {\n         // Compute length of line segment (squared) and handle special case of coincident points\n         double segmentLengthSquared = lineSegmentPoint1.DistanceSquared(lineSegmentPoint2);\n         if (segmentLengthSquared &lt; 1E-7f)  // Arbitrary \"close enough for government work\" value\n         {\n            closestPoint = lineSegmentPoint1;\n            return this.DistanceSquared(closestPoint);\n         }\n\n         // Use the magic formula to compute the \"projection\" of this point on the infinite line\n         MyVector lineSegment = lineSegmentPoint2 - lineSegmentPoint1;\n         double t = (this - lineSegmentPoint1).DotProduct(lineSegment) / segmentLengthSquared;\n\n         // Handle the two cases where the projection is not on the line segment, and the case where \n         //  the projection is on the segment\n         if (t &lt;= 0)\n            closestPoint = lineSegmentPoint1;\n         else if (t &gt;= 1)\n            closestPoint = lineSegmentPoint2;\n         else \n            closestPoint = lineSegmentPoint1 + (lineSegment * t);\n         return this.DistanceSquared(closestPoint);\n      }\n\n\n      public double DotProduct(MyVector otherVector)\n      {\n         return this._x * otherVector._x + this._y * otherVector._y;\n      }\n\n      public static MyVector operator +(MyVector leftVector, MyVector rightVector)\n      {\n         return new MyVector(leftVector._x + rightVector._x, leftVector._y + rightVector._y);\n      }\n\n      public static MyVector operator -(MyVector leftVector, MyVector rightVector)\n      {\n         return new MyVector(leftVector._x - rightVector._x, leftVector._y - rightVector._y);\n      }\n\n      public static MyVector operator *(MyVector aVector, double aScalar)\n      {\n         return new MyVector(aVector._x * aScalar, aVector._y * aScalar);\n      }\n\n      // Added using ReSharper due to CodeAnalysis nagging\n\n      public bool Equals(MyVector other)\n      {\n         return _x.Equals(other._x) &amp;&amp; _y.Equals(other._y);\n      }\n\n      public override bool Equals(object obj)\n      {\n         if (ReferenceEquals(null, obj)) return false;\n         return obj is MyVector &amp;&amp; Equals((MyVector) obj);\n      }\n\n      public override int GetHashCode()\n      {\n         unchecked\n         {\n            return (_x.GetHashCode()*397) ^ _y.GetHashCode();\n         }\n      }\n\n      public static bool operator ==(MyVector left, MyVector right)\n      {\n         return left.Equals(right);\n      }\n\n      public static bool operator !=(MyVector left, MyVector right)\n      {\n         return !left.Equals(right);\n      }\n   }\n</code></pre>\n\n<p>And here's a little test program. </p>\n\n<pre><code>   public static class JustTesting\n   {\n      public static void Main()\n      {\n         Stopwatch stopwatch = new Stopwatch();\n         stopwatch.Start();\n\n         for (int i = 0; i &lt; 10000000; i++)\n         {\n            TestIt(1, 0, 0, 0, 1, 1, 0.70710678118654757);\n            TestIt(5, 4, 0, 0, 20, 10, 1.3416407864998738);\n            TestIt(30, 15, 0, 0, 20, 10, 11.180339887498949);\n            TestIt(-30, 15, 0, 0, 20, 10, 33.541019662496844);\n            TestIt(5, 1, 0, 0, 10, 0, 1.0);\n            TestIt(1, 5, 0, 0, 0, 10, 1.0);\n         }\n\n         stopwatch.Stop();\n         TimeSpan timeSpan = stopwatch.Elapsed;\n      }\n\n\n      private static void TestIt(float aPointX, float aPointY, \n                                 float lineSegmentPoint1X, float lineSegmentPoint1Y, \n                                 float lineSegmentPoint2X, float lineSegmentPoint2Y, \n                                 double expectedAnswer)\n      {\n         // Katz\n         double d1 = DistanceFromPointToLineSegment(new MyVector(aPointX, aPointY), \n                                              new MyVector(lineSegmentPoint1X, lineSegmentPoint1Y), \n                                              new MyVector(lineSegmentPoint2X, lineSegmentPoint2Y));\n         Debug.Assert(d1 == expectedAnswer);\n\n         /*\n         // Katz using squared distance\n         double d2 = DistanceFromPointToLineSegmentSquared(new MyVector(aPointX, aPointY), \n                                              new MyVector(lineSegmentPoint1X, lineSegmentPoint1Y), \n                                              new MyVector(lineSegmentPoint2X, lineSegmentPoint2Y));\n         Debug.Assert(Math.Abs(d2 - expectedAnswer * expectedAnswer) &lt; 1E-7f);\n          */\n\n         /*\n         // Matti (optimized)\n         double d3 = FloatVector.DistanceToLineSegment(new PointF(aPointX, aPointY), \n                                                new PointF(lineSegmentPoint1X, lineSegmentPoint1Y), \n                                                new PointF(lineSegmentPoint2X, lineSegmentPoint2Y));\n         Debug.Assert(Math.Abs(d3 - expectedAnswer) &lt; 1E-7f);\n          */\n      }\n\n      private static double DistanceFromPointToLineSegment(MyVector aPoint, \n                                             MyVector lineSegmentPoint1, MyVector lineSegmentPoint2)\n      {\n         MyVector closestPoint;  // Not used\n         return aPoint.DistanceToLineSegment(lineSegmentPoint1, lineSegmentPoint2, \n                                             out closestPoint);\n      }\n\n      private static double DistanceFromPointToLineSegmentSquared(MyVector aPoint, \n                                             MyVector lineSegmentPoint1, MyVector lineSegmentPoint2)\n      {\n         MyVector closestPoint;  // Not used\n         return aPoint.DistanceToLineSegmentSquared(lineSegmentPoint1, lineSegmentPoint2, \n                                                    out closestPoint);\n      }\n   }\n</code></pre>\n\n<p>As you can see, I tried to measure the difference between using the version that avoids the Sqrt() method and the normal version. My tests indicate you can maybe save about 2.5%, but I'm not even sure of that - the variations within the various test runs were of the same order of magnitude. I also tried measuring the version posted by Matti (plus an obvious optimization), and that version seems to be about 4% slower than the version based on Katz/Grumdrig code. </p>\n\n<p>Edit: Incidentally, I've also tried measuring a method that finds the distance to an infinite line (not a line segment) using a cross product (and a Sqrt()), and it's about 32% faster.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 1616324,
                        "reputation": 161,
                        "user_id": 1493905,
                        "user_type": "registered",
                        "display_name": "Richard Z"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1366738967,
                    "creation_date": 1366738967,
                    "answer_id": 16175780,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/16175780#16175780",
                    "body": "<pre><code>%Matlab solution by Tim from Cody\nfunction ans=distP2S(x0,y0,x1,y1,x2,y2)\n% Point is x0,y0\nz=complex(x0-x1,y0-y1);\ncomplex(x2-x1,y2-y1);\nabs(z-ans*min(1,max(0,real(z/ans))));\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1616324,
                        "reputation": 161,
                        "user_id": 1493905,
                        "user_type": "registered",
                        "display_name": "Richard Z"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1366744428,
                    "creation_date": 1366744428,
                    "answer_id": 16177401,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/16177401#16177401",
                    "body": "<p>Matlab direct Grumdrig implementation</p>\n\n<pre><code>function ans=distP2S(px,py,vx,vy,wx,wy)\n% [px py vx vy wx wy]\n  t=( (px-vx)*(wx-vx)+(py-vy)*(wy-vy) )/idist(vx,wx,vy,wy)^2;\n  [idist(px,vx,py,vy) idist(px,vx+t*(wx-vx),py,vy+t*(wy-vy)) idist(px,wx,py,wy) ];\n  ans(1+(t&gt;0)+(t&gt;1)); % &lt;0 0&lt;=t&lt;=1 t&gt;1     \n end\n\nfunction d=idist(a,b,c,d)\n d=abs(a-b+1i*(c-d));\nend\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1202106,
                        "reputation": 109,
                        "user_id": 1172542,
                        "user_type": "registered",
                        "display_name": "Vlad V"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1372180521,
                    "creation_date": 1372180521,
                    "answer_id": 17303523,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/17303523#17303523",
                    "body": "<p>the accepted answer does not work \n(e.g. distance between 0,0 and (-10,2,10,2) should be 2).</p>\n\n<p>here's code that works:</p>\n\n<pre><code>   def dist2line2(x,y,line):\n     x1,y1,x2,y2=line\n     vx = x1 - x\n     vy = y1 - y\n     ux = x2-x1\n     uy = y2-y1\n     length = ux * ux + uy * uy\n     det = (-vx * ux) + (-vy * uy) #//if this is &lt; 0 or &gt; length then its outside the line segment\n     if det &lt; 0:\n       return (x1 - x)**2 + (y1 - y)**2\n     if det &gt; length:\n       return (x2 - x)**2 + (y2 - y)**2\n     det = ux * vy - uy * vx\n     return det**2 / length\n   def dist2line(x,y,line): return math.sqrt(dist2line2(x,y,line))\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7906,
                                "reputation": 48393,
                                "user_id": 13924,
                                "user_type": "registered",
                                "accept_rate": 45,
                                "display_name": "J D"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1380470999,
                            "post_id": 17778990,
                            "comment_id": 28204940,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/17778990#comment28204940_17778990",
                            "body": "You haven&#39;t defined <code>mx1</code>, <code>b</code> or <code>m</code> and your solution is not for line segments."
                        }
                    ],
                    "owner": {
                        "account_id": 1333103,
                        "reputation": 39231,
                        "user_id": 1276506,
                        "user_type": "registered",
                        "accept_rate": 83,
                        "display_name": "boulder_ruby"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1374459306,
                    "creation_date": 1374459306,
                    "answer_id": 17778990,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/17778990#17778990",
                    "body": "<p>If its an infinite line, not a line segment, the simplest way is this (in ruby), where mx + b is the line and (x1, y1) is the known point</p>\n\n<pre><code>(y1 - mx1 - b).abs / Math.sqrt(m**2 + 1)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2188894,
                        "reputation": 231,
                        "user_id": 1936575,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Germanunkol"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1378726150,
                    "creation_date": 1378726150,
                    "answer_id": 18697238,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/18697238#18697238",
                    "body": "<p>Just came across this and thought I'd add a Lua implementation. It assumes that points are given as tables {x=xVal, y=yVal} and the line or segment is given by a table containing two points (see example below):</p>\n\n<pre><code>function distance( P1, P2 )\n    return math.sqrt((P1.x-P2.x)^2 + (P1.y-P2.y)^2)\nend\n\n-- Returns false if the point lies beyond the reaches of the segment\nfunction distPointToSegment( line, P )\n    if line[1].x == line[2].x and line[1].y == line[2].y then\n        print(\"Error: Not a line!\")\n        return false\n    end\n\n    local d = distance( line[1], line[2] )\n\n    local t = ((P.x - line[1].x)*(line[2].x - line[1].x) + (P.y - line[1].y)*(line[2].y - line[1].y))/(d^2)\n\n    local projection = {}\n    projection.x = line[1].x + t*(line[2].x-line[1].x)\n    projection.y = line[1].y + t*(line[2].y-line[1].y)\n\n    if t &gt;= 0 and t &lt;= 1 then   -- within line segment?\n        return distance( projection, {x=P.x, y=P.y} )\n    else\n        return false\n    end\nend\n\n-- Returns value even if point is further down the line (outside segment)\nfunction distPointToLine( line, P )\n    if line[1].x == line[2].x and line[1].y == line[2].y then\n        print(\"Error: Not a line!\")\n        return false\n    end\n\n    local d = distance( line[1], line[2] )\n\n    local t = ((P.x - line[1].x)*(line[2].x - line[1].x) + (P.y - line[1].y)*(line[2].y - line[1].y))/(d^2)\n\n    local projection = {}\n    projection.x = line[1].x + t*(line[2].x-line[1].x)\n    projection.y = line[1].y + t*(line[2].y-line[1].y)\n\n    return distance( projection, {x=P.x, y=P.y} )\nend\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>local P1 = {x = 0, y = 0}\nlocal P2 = {x = 10, y = 10}\nlocal line = { P1, P2 }\nlocal P3 = {x = 7, y = 15}\nprint(distPointToLine( line, P3 ))  -- prints 5.6568542494924\nprint(distPointToSegment( line, P3 )) -- prints false\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 81853,
                                "reputation": 16219,
                                "user_id": 230575,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Blair Holloway"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1401759407,
                            "post_id": 19080141,
                            "comment_id": 36997940,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/19080141#comment36997940_19080141",
                            "body": "I think the last line is incorrect, and should read: <code>(a + p - c).Length</code>"
                        },
                        {
                            "owner": {
                                "account_id": 3893056,
                                "reputation": 101,
                                "user_id": 3222761,
                                "user_type": "registered",
                                "display_name": "mikkoma"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1422978492,
                            "post_id": 19080141,
                            "comment_id": 44957287,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/19080141#comment44957287_19080141",
                            "body": "That still does not fully fix the issue. One way to correct the function would be to redefine <code>lambda</code> and <code>p</code> as <code>let lambda = (c - a) * d &#47; (s * s)</code> and <code>let p = a + (lambda |&gt; max 0.0 |&gt; min 1.0) * d</code>, respectively. After that the function returns correct distance e.g. for the case where <code>a = (0,1)</code>, <code>b = (1,0)</code> and <code>c = (1,1)</code>."
                        },
                        {
                            "owner": {
                                "account_id": 233371,
                                "reputation": 65,
                                "user_id": 498805,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Xelnath"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1671738893,
                            "post_id": 19080141,
                            "comment_id": 132167930,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/19080141#comment132167930_19080141",
                            "body": "Replying with code blocks sucks :/"
                        }
                    ],
                    "owner": {
                        "account_id": 7906,
                        "reputation": 48393,
                        "user_id": 13924,
                        "user_type": "registered",
                        "accept_rate": 45,
                        "display_name": "J D"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 21,
                    "last_activity_date": 1522541772,
                    "last_edit_date": 1522541772,
                    "creation_date": 1380470686,
                    "answer_id": 19080141,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/19080141#19080141",
                    "body": "<p>In F#, the distance from the point <code>c</code> to the line segment between <code>a</code> and <code>b</code> is given by:</p>\n\n<pre class=\"lang-ml prettyprint-override\"><code>let pointToLineSegmentDistance (a: Vector, b: Vector) (c: Vector) =\n  let d = b - a\n  let s = d.Length\n  let lambda = (c - a) * d / s\n  let p = (lambda |&gt; max 0.0 |&gt; min s) * d / s\n  (a + p - c).Length\n</code></pre>\n\n<p>The vector <code>d</code> points from <code>a</code> to <code>b</code> along the line segment. The dot product of <code>d/s</code> with <code>c-a</code> gives the parameter of the point of closest approach between the infinite line and the point <code>c</code>. The <code>min</code> and <code>max</code> function are used to clamp this parameter to the range <code>0..s</code> so that the point lies between <code>a</code> and <code>b</code>. Finally, the length of <code>a+p-c</code> is the distance from <code>c</code> to the closest point on the line segment.</p>\n\n<p>Example use:</p>\n\n<pre><code>pointToLineSegmentDistance (Vector(0.0, 0.0), Vector(1.0, 0.0)) (Vector(-1.0, 1.0))\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 15917719,
                                "reputation": 201,
                                "user_id": 11485791,
                                "user_type": "registered",
                                "display_name": "MaxSilvester"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1662386321,
                            "post_id": 20059470,
                            "comment_id": 129988260,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/20059470#comment129988260_20059470",
                            "body": "This only works if b is above the line segment (b.y is not negative and b.x is between between a.x and c.x) after the rotation. It will return negative values if b is below the line after the rotation and if for example the line goes from 0,0 to 10,0 and the point b is at x,y,the distance will be y no matter what y or x are, which is the distance to a (infinitely long) line going through those two points, not the distance to a line segment."
                        }
                    ],
                    "owner": {
                        "account_id": 99037,
                        "reputation": 1249,
                        "user_id": 267736,
                        "user_type": "registered",
                        "accept_rate": 40,
                        "display_name": "Alexander Selishchev"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 11,
                    "last_activity_date": 1384814278,
                    "creation_date": 1384814278,
                    "answer_id": 20059470,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/20059470#20059470",
                    "body": "<p>One line solution using arctangents:</p>\n\n<p>The idea is to move <strong>A</strong> to (0, 0) and rotate triangle clockwise to make <strong>C</strong> lay on X axis,\nwhen this happen, <strong>By</strong> will be the distance.</p>\n\n<p><img src=\"https://i.stack.imgur.com/X4FoK.png\" alt=\"\"></p>\n\n<ol>\n<li>a angle = Atan(Cy - Ay, Cx - Ax);</li>\n<li>b angle = Atan(By - Ay, Bx - Ax);</li>\n<li>AB length = Sqrt( (Bx - Ax)^2 +  (By - Ay)^2 )</li>\n<li>By = Sin ( bAngle - aAngle) * ABLength</li>\n</ol>\n\n<p>C#</p>\n\n<pre><code>public double Distance(Point a, Point b, Point c)\n{\n    // normalize points\n    Point cn = new Point(c.X - a.X, c.Y - a.Y);\n    Point bn = new Point(b.X - a.X, b.Y - a.Y);\n\n    double angle = Math.Atan2(bn.Y, bn.X) - Math.Atan2(cn.Y, cn.X);\n    double abLength = Math.Sqrt(bn.X*bn.X + bn.Y*bn.Y);\n\n    return Math.Sin(angle)*abLength;\n}\n</code></pre>\n\n<p>One line C# (to be converted to SQL)</p>\n\n<pre><code>double distance = Math.Sin(Math.Atan2(b.Y - a.Y, b.X - a.X) - Math.Atan2(c.Y - a.Y, c.X - a.X)) * Math.Sqrt((b.X - a.X) * (b.X - a.X) + (b.Y - a.Y) * (b.Y - a.Y))\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2467550,
                                "reputation": 1552,
                                "user_id": 2150289,
                                "user_type": "registered",
                                "display_name": "Alcamtar"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1526809861,
                            "post_id": 21388185,
                            "comment_id": 87881327,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/21388185#comment87881327_21388185",
                            "body": "Thank you! Needed to find the intersection in Java, and this translated perfectly!"
                        }
                    ],
                    "owner": {
                        "account_id": 2116594,
                        "reputation": 845,
                        "user_id": 2211931,
                        "user_type": "registered",
                        "accept_rate": 73,
                        "display_name": "Elvedin Hamzagic"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1526992457,
                    "last_edit_date": 1526992457,
                    "creation_date": 1390845549,
                    "answer_id": 21388185,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/21388185#21388185",
                    "body": "<p>This algorithm is based on finding the intersection between the specified line and the orthogonal line, which contains the specified point, and calculating its distance. In case of a line segment, we must check if the intersection is between points of the line segment, if that's not the case then the minimum distance is between the specified point and one of the ending points of the line segment. This is a C# implementation.</p>\n\n<pre><code>Double Distance(Point a, Point b)\n{\n    double xdiff = a.X - b.X, ydiff = a.Y - b.Y;\n    return Math.Sqrt((long)xdiff * xdiff + (long)ydiff * ydiff);\n}\n\nBoolean IsBetween(double x, double a, double b)\n{\n    return ((a &lt;= b &amp;&amp; x &gt;= a &amp;&amp; x &lt;= b) || (a &gt; b &amp;&amp; x &lt;= a &amp;&amp; x &gt;= b));\n}\n\nDouble GetDistance(Point pt, Point pt1, Point pt2, out Point intersection)\n{\n    Double a, x, y, R;\n\n    if (pt1.X != pt2.X) {\n        a = (double)(pt2.Y - pt1.Y) / (pt2.X - pt1.X);\n        x = (a * (pt.Y - pt1.Y) + a * a * pt1.X + pt.X) / (a * a + 1);\n        y = a * x + pt1.Y - a * pt1.X; }\n    else { x = pt1.X;  y = pt.Y; }\n\n    if (IsBetween(x, pt1.X, pt2.X) &amp;&amp; IsBetween(y, pt1.Y, pt2.Y)) {\n        intersection = new Point((int)x, (int)y);\n        R = Distance(intersection, pt); }\n    else {\n        double d1 = Distance(pt, pt1), d2 = Distance(pt, pt2);\n        if (d1 &lt; d2) { intersection = pt1; R = d1; }\n        else { intersection = pt2; R = d2; }}\n\n    return R;\n}\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 90318,
                                "reputation": 3084,
                                "user_id": 248700,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "Steve Johnson"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1420976110,
                            "post_id": 22618663,
                            "comment_id": 44174183,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/22618663#comment44174183_22618663",
                            "body": "Works like a charm!! Saved me countless hours. Thanks so much!!"
                        }
                    ],
                    "owner": {
                        "account_id": 1899784,
                        "reputation": 467,
                        "user_id": 1715874,
                        "user_type": "registered",
                        "display_name": "headkaze"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1395688857,
                    "creation_date": 1395688857,
                    "answer_id": 22618663,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/22618663#22618663",
                    "body": "<p>Here is devnullicus's C++ version converted to C#. For my implementation I needed to know the point of intersection and found his solution to work well.</p>\n\n<pre><code>public static bool PointSegmentDistanceSquared(PointF point, PointF lineStart, PointF lineEnd, out double distance, out PointF intersectPoint)\n{\n    const double kMinSegmentLenSquared = 0.00000001; // adjust to suit.  If you use float, you'll probably want something like 0.000001f\n    const double kEpsilon = 1.0E-14; // adjust to suit.  If you use floats, you'll probably want something like 1E-7f\n    double dX = lineEnd.X - lineStart.X;\n    double dY = lineEnd.Y - lineStart.Y;\n    double dp1X = point.X - lineStart.X;\n    double dp1Y = point.Y - lineStart.Y;\n    double segLenSquared = (dX * dX) + (dY * dY);\n    double t = 0.0;\n\n    if (segLenSquared &gt;= -kMinSegmentLenSquared &amp;&amp; segLenSquared &lt;= kMinSegmentLenSquared)\n    {\n        // segment is a point.\n        intersectPoint = lineStart;\n        t = 0.0;\n        distance = ((dp1X * dp1X) + (dp1Y * dp1Y));\n    }\n    else\n    {\n        // Project a line from p to the segment [p1,p2].  By considering the line\n        // extending the segment, parameterized as p1 + (t * (p2 - p1)),\n        // we find projection of point p onto the line. \n        // It falls where t = [(p - p1) . (p2 - p1)] / |p2 - p1|^2\n        t = ((dp1X * dX) + (dp1Y * dY)) / segLenSquared;\n        if (t &lt; kEpsilon)\n        {\n            // intersects at or to the \"left\" of first segment vertex (lineStart.X, lineStart.Y).  If t is approximately 0.0, then\n            // intersection is at p1.  If t is less than that, then there is no intersection (i.e. p is not within\n            // the 'bounds' of the segment)\n            if (t &gt; -kEpsilon)\n            {\n                // intersects at 1st segment vertex\n                t = 0.0;\n            }\n            // set our 'intersection' point to p1.\n            intersectPoint = lineStart;\n            // Note: If you wanted the ACTUAL intersection point of where the projected lines would intersect if\n            // we were doing PointLineDistanceSquared, then intersectPoint.X would be (lineStart.X + (t * dx)) and intersectPoint.Y would be (lineStart.Y + (t * dy)).\n        }\n        else if (t &gt; (1.0 - kEpsilon))\n        {\n            // intersects at or to the \"right\" of second segment vertex (lineEnd.X, lineEnd.Y).  If t is approximately 1.0, then\n            // intersection is at p2.  If t is greater than that, then there is no intersection (i.e. p is not within\n            // the 'bounds' of the segment)\n            if (t &lt; (1.0 + kEpsilon))\n            {\n                // intersects at 2nd segment vertex\n                t = 1.0;\n            }\n            // set our 'intersection' point to p2.\n            intersectPoint = lineEnd;\n            // Note: If you wanted the ACTUAL intersection point of where the projected lines would intersect if\n            // we were doing PointLineDistanceSquared, then intersectPoint.X would be (lineStart.X + (t * dx)) and intersectPoint.Y would be (lineStart.Y + (t * dy)).\n        }\n        else\n        {\n            // The projection of the point to the point on the segment that is perpendicular succeeded and the point\n            // is 'within' the bounds of the segment.  Set the intersection point as that projected point.\n            intersectPoint = new PointF((float)(lineStart.X + (t * dX)), (float)(lineStart.Y + (t * dY)));\n        }\n        // return the squared distance from p to the intersection point.  Note that we return the squared distance\n        // as an optimization because many times you just need to compare relative distances and the squared values\n        // works fine for that.  If you want the ACTUAL distance, just take the square root of this value.\n        double dpqX = point.X - intersectPoint.X;\n        double dpqY = point.Y - intersectPoint.Y;\n\n        distance = ((dpqX * dpqX) + (dpqY * dpqY));\n    }\n\n    return true;\n}\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 337664,
                                "reputation": 3111,
                                "user_id": 666057,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "Anne van Rossum"
                            },
                            "edited": false,
                            "score": 9,
                            "creation_date": 1412668568,
                            "post_id": 24913403,
                            "comment_id": 41142545,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/24913403#comment41142545_24913403",
                            "body": "Kudos for actually writing a formula down. However, this is the formula to calculate the distance to a line, not to a line segment. Picking (x0,y0)=(-10,0), (x1,y1)=(0,0), and (x2,y2)=(10,0) gives a distance of 0, while it should have been 10."
                        }
                    ],
                    "owner": {
                        "account_id": 1567369,
                        "reputation": 2520,
                        "user_id": 1506587,
                        "user_type": "registered",
                        "accept_rate": 71,
                        "display_name": "Marko Letic"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1406126068,
                    "creation_date": 1406126068,
                    "answer_id": 24913403,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/24913403#24913403",
                    "body": "<p>A little cleaner solution in JavaScript based on this <a href=\"http://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\" rel=\"nofollow noreferrer\">formula</a>:\n<img src=\"https://i.stack.imgur.com/qKwEU.png\" alt=\"enter image description here\"></p>\n\n<pre><code>distToSegment: function (point, linePointA, linePointB){\n\n    var x0 = point.X;\n    var y0 = point.Y;\n\n    var x1 = linePointA.X;\n    var y1 = linePointA.Y;\n\n    var x2 = linePointB.X;\n    var y2 = linePointB.Y;\n\n    var Dx = (x2 - x1);\n    var Dy = (y2 - y1);\n\n    var numerator = Math.abs(Dy*x0 - Dx*y0 - x1*y2 + x2*y1);\n    var denominator = Math.sqrt(Dx*Dx + Dy*Dy);\n    if (denominator == 0) {\n        return this.dist2(point, linePointA);\n    }\n\n    return numerator/denominator;\n\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1729891,
                        "reputation": 11,
                        "user_id": 1583698,
                        "user_type": "registered",
                        "display_name": "woolie"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1466073815,
                    "last_edit_date": 1466073815,
                    "creation_date": 1407717520,
                    "answer_id": 25234381,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/25234381#25234381",
                    "body": "<p>Grumdrig's C++/JavaScript implementation was very useful to me, so I have provided a Python direct port that I am using. The complete code is <a href=\"https://gist.github.com/irees/be5e56e7c9b16d78a351\" rel=\"nofollow\">here</a>.</p>\n\n<pre><code>class Point(object):\n  def __init__(self, x, y):\n    self.x = float(x)\n    self.y = float(y)\n\ndef square(x):\n  return x * x\n\ndef distance_squared(v, w):\n  return square(v.x - w.x) + square(v.y - w.y)\n\ndef distance_point_segment_squared(p, v, w):\n  # Segment length squared, |w-v|^2\n  d2 = distance_squared(v, w) \n  if d2 == 0: \n    # v == w, return distance to v\n    return distance_squared(p, v)\n  # Consider the line extending the segment, parameterized as v + t (w - v).\n  # We find projection of point p onto the line.\n  # It falls where t = [(p-v) . (w-v)] / |w-v|^2\n  t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / d2;\n  if t &lt; 0:\n    # Beyond v end of the segment\n    return distance_squared(p, v)\n  elif t &gt; 1.0:\n    # Beyond w end of the segment\n    return distance_squared(p, w)\n  else:\n    # Projection falls on the segment.\n    proj = Point(v.x + t * (w.x - v.x), v.y + t * (w.y - v.y))\n    # print proj.x, proj.y\n    return distance_squared(p, proj)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2876294,
                        "reputation": 1,
                        "user_id": 4379206,
                        "user_type": "registered",
                        "display_name": "OzRunways"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1684529271,
                    "last_edit_date": 1684529271,
                    "creation_date": 1420169587,
                    "answer_id": 27737081,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/27737081#27737081",
                    "body": "<p>Here it is using Swift</p>\n<pre><code>    /* Distance from a point (p1) to line l1 l2 */\nfunc distanceFromPoint(p: CGPoint, toLineSegment l1: CGPoint, and l2: CGPoint) -&gt; CGFloat {\n    let A = p.x - l1.x\n    let B = p.y - l1.y\n    let C = l2.x - l1.x\n    let D = l2.y - l1.y\n    \n    let dot = A * C + B * D\n    let len_sq = C * C + D * D\n    var param : CGFloat = -1\n    if len_sq != 0 {\n        param = dot / len_sq\n    }\n    \n    var xx, yy: CGFloat\n    \n    if param &lt; 0 || (l1.x == l2.x &amp;&amp; l1.y == l2.y) {\n        xx = l1.x\n        yy = l1.y\n    } else if param &gt; 1 {\n        xx = l2.x\n        yy = l2.y\n    } else {\n        xx = l1.x + param * C\n        yy = l1.y + param * D\n    }\n    \n    let dx = p.x - xx\n    let dy = p.y - yy\n    \n    return sqrt(dx * dx + dy * dy)\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 292527,
                        "reputation": 1,
                        "user_id": 4938575,
                        "user_type": "registered",
                        "display_name": "grrrwaaa"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1432607104,
                    "creation_date": 1432607104,
                    "answer_id": 30448467,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/30448467#30448467",
                    "body": "<p>Wanted to do this in GLSL, but it's better to avoid all those conditionals if possible. Using clamp() avoids the two end-point cases:</p>\n\n<pre><code>// find closest point to P on line segment AB:\nvec3 closest_point_on_line_segment(in vec3 P, in vec3 A, in vec3 B) {\n    vec3 AP = P - A, AB = B - A;\n    float l = dot(AB, AB);\n    if (l &lt;= 0.0000001) return A;    // A and B are practically the same\n    return AP - AB*clamp(dot(AP, AB)/l, 0.0, 1.0);  // do the projection\n}\n</code></pre>\n\n<p>If you can be sure that A and B are never very close to each other, this can be simplified to remove the if(). In fact, even if A and B <em>are</em> the same, my GPU still gives the right result with this condition-free version (but this is using pre-OpenGL 4.1 in which GLSL divide by zero is undefined):</p>\n\n<pre><code>// find closest point to P on line segment AB:\nvec3 closest_point_on_line_segment(in vec3 P, in vec3 A, in vec3 B) {\n    vec3 AP = P - A, AB = B - A;\n    return AP - AB*clamp(dot(AP, AB)/dot(AB, AB), 0.0, 1.0);\n}\n</code></pre>\n\n<p>To compute the distance is trivial -- GLSL provides a distance() function which you can use on this closest point and P.</p>\n\n<p>Inspired by <a href=\"http://iquilezles.org/www/articles/distfunctions/distfunctions.htm\" rel=\"nofollow\">I\u00f1igo Quilez's code for a capsule distance function</a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 5512594,
                        "reputation": 14738,
                        "user_id": 4378400,
                        "user_type": "registered",
                        "accept_rate": 92,
                        "display_name": "Yury Fedorov"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1441212500,
                    "creation_date": 1441212500,
                    "answer_id": 32358777,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/32358777#32358777",
                    "body": "<p>Didn't see a Java implementation here, so I translated the Javascript function from the accepted answer to Java code:</p>\n\n<pre><code>static double sqr(double x) {\n    return x * x;\n}\nstatic double dist2(DoublePoint v, DoublePoint w) {\n    return sqr(v.x - w.x) + sqr(v.y - w.y);\n}\nstatic double distToSegmentSquared(DoublePoint p, DoublePoint v, DoublePoint w) {\n    double l2 = dist2(v, w);\n    if (l2 == 0) return dist2(p, v);\n    double t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\n    if (t &lt; 0) return dist2(p, v);\n    if (t &gt; 1) return dist2(p, w);\n    return dist2(p, new DoublePoint(\n            v.x + t * (w.x - v.x),\n            v.y + t * (w.y - v.y)\n    ));\n}\nstatic double distToSegment(DoublePoint p, DoublePoint v, DoublePoint w) {\n    return Math.sqrt(distToSegmentSquared(p, v, w));\n}\nstatic class DoublePoint {\n    public double x;\n    public double y;\n\n    public DoublePoint(double x, double y) {\n        this.x = x;\n        this.y = y;\n    }\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 132060,
                        "reputation": 6823,
                        "user_id": 332528,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "torvin"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1443400027,
                    "last_edit_date": 1443400027,
                    "creation_date": 1443398135,
                    "answer_id": 32814053,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/32814053#32814053",
                    "body": "<p>WPF version:</p>\n\n<pre><code>public class LineSegment\n{\n    private readonly Vector _offset;\n    private readonly Vector _vector;\n\n    public LineSegment(Point start, Point end)\n    {\n        _offset = (Vector)start;\n        _vector = (Vector)(end - _offset);\n    }\n\n    public double DistanceTo(Point pt)\n    {\n        var v = (Vector)pt - _offset;\n\n        // first, find a projection point on the segment in parametric form (0..1)\n        var p = (v * _vector) / _vector.LengthSquared;\n\n        // and limit it so it lays inside the segment\n        p = Math.Min(Math.Max(p, 0), 1);\n\n        // now, find the distance from that point to our point\n        return (_vector * p - v).Length;\n    }\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 176422,
                        "reputation": 5866,
                        "user_id": 407108,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Justas"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1452022427,
                    "last_edit_date": 1495540041,
                    "creation_date": 1452022427,
                    "answer_id": 34619830,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/34619830#34619830",
                    "body": "<p>Same as <a href=\"https://stackoverflow.com/a/6853926/407108\">this answer</a>, except in Visual Basic. Makes it usable as a User Defined Function in Microsoft Excel and VBA/macros.</p>\n\n<p>The function returns the closest distance from point (x,y) to the segment defined by (x1,y1) and (x2,y2)</p>\n\n<pre><code>Function DistanceToSegment(x As Double, y As Double, x1 As Double, y1 As Double, x2 As Double, y2 As Double)\n\n  Dim A As Double\n  A = x - x1\n  Dim B As Double\n  B = y - y1\n  Dim C  As Double\n  C = x2 - x1\n  Dim D As Double\n  D = y2 - y1\n\n  Dim dot As Double\n  dot = A * C + B * D\n  Dim len_sq As Double\n  len_sq = C * C + D * D\n  Dim param As Double\n  param = -1\n\n  If (len_sq &lt;&gt; 0) Then\n      param = dot / len_sq\n  End If\n\n  Dim xx As Double\n  Dim yy As Double\n\n  If (param &lt; 0) Then\n    xx = x1\n    yy = y1\n  ElseIf (param &gt; 1) Then\n    xx = x2\n    yy = y2\n  Else\n    xx = x1 + param * C\n    yy = y1 + param * D\n  End If\n\n  Dim dx As Double\n  dx = x - xx\n  Dim dy As Double\n  dy = y - yy\n\n  DistanceToSegment = Math.Sqr(dx * dx + dy * dy)\n\nEnd Function\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 7558027,
                                "reputation": 1442,
                                "user_id": 5736835,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "WDUK"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1491631468,
                            "post_id": 35802125,
                            "comment_id": 73648911,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/35802125#comment73648911_35802125",
                            "body": "Tried this code, doesn&#39;t seem to work quite correctly. Seems to get the wrong distance some times."
                        }
                    ],
                    "owner": {
                        "account_id": 151321,
                        "reputation": 26154,
                        "user_id": 365102,
                        "user_type": "registered",
                        "accept_rate": 94,
                        "display_name": "Mateen Ulhaq"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1457111871,
                    "last_edit_date": 1495542882,
                    "creation_date": 1457111871,
                    "answer_id": 35802125,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/35802125#35802125",
                    "body": "<p><strong>C#</strong></p>\n\n<p>Adapted from <a href=\"https://stackoverflow.com/a/1501725/365102\">@Grumdrig</a></p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public static double MinimumDistanceToLineSegment(this Point p,\n    Line line)\n{\n    var v = line.StartPoint;\n    var w = line.EndPoint;\n\n    double lengthSquared = DistanceSquared(v, w);\n\n    if (lengthSquared == 0.0)\n        return Distance(p, v);\n\n    double t = Math.Max(0, Math.Min(1, DotProduct(p - v, w - v) / lengthSquared));\n    var projection = v + t * (w - v);\n\n    return Distance(p, projection);\n}\n\npublic static double Distance(Point a, Point b)\n{\n    return Math.Sqrt(DistanceSquared(a, b));\n}\n\npublic static double DistanceSquared(Point a, Point b)\n{\n    var d = a - b;\n    return DotProduct(d, d);\n}\n\npublic static double DotProduct(Point a, Point b)\n{\n    return (a.X * b.X) + (a.Y * b.Y);\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 4580847,
                        "reputation": 481,
                        "user_id": 5561391,
                        "user_type": "registered",
                        "display_name": "Singh Lalit"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1468271261,
                    "creation_date": 1468271261,
                    "answer_id": 38316246,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/38316246#38316246",
                    "body": "<p><strong>Lua:</strong>\nFinds minimum distance between a line segment(not the whole line) and a point </p>\n\n<pre><code>function solveLinearEquation(A1,B1,C1,A2,B2,C2)\n--it is the implitaion of a method of solving linear equations in x and y\n  local f1 = B1*C2 -B2*C1\n  local f2 = A2*C1-A1*C2\n  local f3 = A1*B2 -A2*B1\n  return {x= f1/f3, y= f2/f3}\nend\n\n\nfunction pointLiesOnLine(x,y,x1,y1,x2,y2)\n  local dx1 = x-x1\n  local  dy1 = y-y1\n  local dx2 = x-x2\n  local  dy2 = y-y2\n  local crossProduct = dy1*dx2 -dx1*dy2\n\nif crossProduct ~= 0  then  return  false\nelse\n  if ((x1&gt;=x) and (x&gt;=x2)) or ((x2&gt;=x) and (x&gt;=x1)) then\n    if ((y1&gt;=y) and (y&gt;=y2)) or ((y2&gt;=y) and (y&gt;=y1)) then\n      return true\n    else return false end\n  else  return false end\nend\nend\n\n\nfunction dist(x1,y1,x2,y2)\n  local dx = x1-x2\n  local dy = y1-y2\n  return math.sqrt(dx*dx + dy* dy)\n end\n\n\nfunction findMinDistBetnPointAndLine(x1,y1,x2,y2,x3,y3)\n-- finds the min  distance between (x3,y3) and line (x1,y2)--(x2,y2)\n   local A2,B2,C2,A1,B1,C1\n   local dx = y2-y1\n   local dy = x2-x1\n   if dx == 0 then A2=1 B2=0 C2=-x3 A1=0 B1=1 C1=-y1 \n   elseif dy == 0 then A2=0 B2=1 C2=-y3 A1=1 B1=0 C1=-x1\n   else\n      local m1 = dy/dx\n      local m2 = -1/m1\n      A2=m2 B2=-1 C2=y3-m2*x3 A1=m1 B1=-1 C1=y1-m1*x1\n   end\n local intsecPoint= solveLinearEquation(A1,B1,C1,A2,B2,C2)\nif pointLiesOnLine(intsecPoint.x, intsecPoint.y,x1,y1,x2,y2) then\n   return dist(intsecPoint.x, intsecPoint.y, x3,y3)\n else\n   return math.min(dist(x3,y3,x1,y1),dist(x3,y3,x2,y2))\nend\nend\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 482206,
                                "reputation": 2223,
                                "user_id": 896451,
                                "user_type": "registered",
                                "accept_rate": 64,
                                "display_name": "ChrisJJ"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1489919032,
                            "post_id": 39739872,
                            "comment_id": 72872871,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/39739872#comment72872871_39739872",
                            "body": "In the JS version, distance() is redundant, no?"
                        },
                        {
                            "owner": {
                                "account_id": 3100683,
                                "reputation": 4002,
                                "user_id": 2624876,
                                "user_type": "registered",
                                "display_name": "1j01"
                            },
                            "reply_to_user": {
                                "account_id": 482206,
                                "reputation": 2223,
                                "user_id": 896451,
                                "user_type": "registered",
                                "accept_rate": 64,
                                "display_name": "ChrisJJ"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1490084292,
                            "post_id": 39739872,
                            "comment_id": 72940909,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/39739872#comment72940909_39739872",
                            "body": "Yeah, in both versions it&#39;s unused. Feel free to remove it."
                        }
                    ],
                    "owner": {
                        "account_id": 3100683,
                        "reputation": 4002,
                        "user_id": 2624876,
                        "user_type": "registered",
                        "display_name": "1j01"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1475045050,
                    "last_edit_date": 1495541894,
                    "creation_date": 1475045050,
                    "answer_id": 39739872,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/39739872#39739872",
                    "body": "<p>This answer is based on the <a href=\"https://stackoverflow.com/a/1501725/2624876\">accepted answer</a>'s JavaScript solution.\nIt's mainly just formatted nicer, with longer function names, and of course shorter function syntax because it's in ES6 + CoffeeScript.</p>\n\n<h2>JavaScript version (ES6)</h2>\n\n<pre><code>distanceSquared = (v, w)=&gt; Math.pow(v.x - w.x, 2) + Math.pow(v.y - w.y, 2);\ndistance = (v, w)=&gt; Math.sqrt(distanceSquared(v, w));\n\ndistanceToLineSegmentSquared = (p, v, w)=&gt; {\n    l2 = distanceSquared(v, w);\n    if (l2 === 0) {\n        return distanceSquared(p, v);\n    }\n    t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\n    t = Math.max(0, Math.min(1, t));\n    return distanceSquared(p, {\n        x: v.x + t * (w.x - v.x),\n        y: v.y + t * (w.y - v.y)\n    });\n}\ndistanceToLineSegment = (p, v, w)=&gt; {\n    return Math.sqrt(distanceToLineSegmentSquared(p, v));\n}\n</code></pre>\n\n<h2>CoffeeScript version</h2>\n\n<pre><code>distanceSquared = (v, w)-&gt; (v.x - w.x) ** 2 + (v.y - w.y) ** 2\ndistance = (v, w)-&gt; Math.sqrt(distanceSquared(v, w))\n\ndistanceToLineSegmentSquared = (p, v, w)-&gt;\n    l2 = distanceSquared(v, w)\n    return distanceSquared(p, v) if l2 is 0\n    t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2\n    t = Math.max(0, Math.min(1, t))\n    distanceSquared(p, {\n        x: v.x + t * (w.x - v.x)\n        y: v.y + t * (w.y - v.y)\n    })\n\ndistanceToLineSegment = (p, v, w)-&gt;\n    Math.sqrt(distanceToLineSegmentSquared(p, v, w))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 9606796,
                        "reputation": 547,
                        "user_id": 7132587,
                        "user_type": "registered",
                        "display_name": "user7132587"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1542378805,
                    "last_edit_date": 1542378805,
                    "creation_date": 1478620395,
                    "answer_id": 40491180,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/40491180#40491180",
                    "body": "<p>I've made an interactive Desmos graph to demonstrate how to achieve this:</p>\n\n<p><a href=\"https://www.desmos.com/calculator/kswrm8ddum\" rel=\"nofollow noreferrer\">https://www.desmos.com/calculator/kswrm8ddum</a></p>\n\n<p>The red point is A, the green point is B, and the point C is blue.\nYou can drag the points in the graph to see the values change.\nOn the left, the value 's' is the parameter of the line segment (i.e. s = 0 means the point A, and s = 1 means the point B).\nThe value 'd' is the distance from the third point to the line through A and B.</p>\n\n<p>EDIT:</p>\n\n<p>Fun little insight: the coordinate (s, d) is the coordinate of the third point C in the coordinate system where AB is the unit x-axis, and the unit y-axis is perpendicular to AB.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 10164567,
                        "reputation": 1,
                        "user_id": 7506958,
                        "user_type": "registered",
                        "display_name": "Anton  Pletenev"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1486052204,
                    "last_edit_date": 1592644375,
                    "creation_date": 1486052204,
                    "answer_id": 42007145,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/42007145#42007145",
                    "body": "<h1>in R</h1>\n<pre><code>     #distance beetween segment ab and point c in 2D space\ngetDistance_ort_2 &lt;- function(a, b, c){\n  #go to complex numbers\n  A&lt;-c(a[1]+1i*a[2],b[1]+1i*b[2])\n  q=c[1]+1i*c[2]\n  \n  #function to get coefficients of line (ab)\n  getAlphaBeta &lt;- function(A)\n  { a&lt;-Re(A[2])-Re(A[1])\n    b&lt;-Im(A[2])-Im(A[1])\n    ab&lt;-as.numeric()\n    ab[1] &lt;- -Re(A[1])*b/a+Im(A[1])\n    ab[2] &lt;-b/a\n    if(Im(A[1])==Im(A[2])) ab&lt;- c(Im(A[1]),0)\n    if(Re(A[1])==Re(A[2])) ab &lt;- NA\n    return(ab)\n  }\n  \n  #function to get coefficients of line ortogonal to line (ab) which goes through point q\n  getAlphaBeta_ort&lt;-function(A,q)\n  { ab &lt;- getAlphaBeta(A) \n  coef&lt;-c(Re(q)/ab[2]+Im(q),-1/ab[2])\n  if(Re(A[1])==Re(A[2])) coef&lt;-c(Im(q),0)\n  return(coef)\n  }\n  \n  #function to get coordinates of interception point \n  #between line (ab) and its ortogonal which goes through point q\n  getIntersection_ort &lt;- function(A, q){\n    A.ab &lt;- getAlphaBeta(A)\n    q.ab &lt;- getAlphaBeta_ort(A,q)\n    if (!is.na(A.ab[1])&amp;A.ab[2]==0) {\n      x&lt;-Re(q)\n      y&lt;-Im(A[1])}\n    if (is.na(A.ab[1])) {\n      x&lt;-Re(A[1])\n      y&lt;-Im(q)\n    } \n    if (!is.na(A.ab[1])&amp;A.ab[2]!=0) {\n      x &lt;- (q.ab[1] - A.ab[1])/(A.ab[2] - q.ab[2])\n      y &lt;- q.ab[1] + q.ab[2]*x}\n    xy &lt;- x + 1i*y  \n    return(xy)\n  }\n  \n  intersect&lt;-getIntersection_ort(A,q)\n  if ((Mod(A[1]-intersect)+Mod(A[2]-intersect))&gt;Mod(A[1]-A[2])) {dist&lt;-min(Mod(A[1]-q),Mod(A[2]-q))\n  } else dist&lt;-Mod(q-intersect)\n  return(dist)\n}\n\n\n\n \n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 10064897,
                                "reputation": 432,
                                "user_id": 7440364,
                                "user_type": "registered",
                                "display_name": "yolo sora"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1504777248,
                            "post_id": 46076979,
                            "comment_id": 79147561,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/46076979#comment79147561_46076979",
                            "body": "nice idea, but height will be distance to line, in some cases distance to segment = distance to segment&#39;s start or end."
                        }
                    ],
                    "owner": {
                        "account_id": 8564688,
                        "reputation": 507,
                        "user_id": 6417537,
                        "user_type": "registered",
                        "display_name": "Giuseppe Canale"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1504705628,
                    "creation_date": 1504705628,
                    "answer_id": 46076979,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/46076979#46076979",
                    "body": "<p>In javascript using Geometry:</p>\n\n<pre><code>var a = { x:20, y:20};//start segment    \nvar b = { x:40, y:30};//end segment   \nvar c = { x:37, y:14};//point   \n\n// magnitude from a to c    \nvar ac = Math.sqrt( Math.pow( ( a.x - c.x ), 2 ) + Math.pow( ( a.y - c.y ), 2) );    \n// magnitude from b to c   \nvar bc = Math.sqrt( Math.pow( ( b.x - c.x ), 2 ) + Math.pow( ( b.y - c.y ), 2 ) );    \n// magnitude from a to b (base)     \nvar ab = Math.sqrt( Math.pow( ( a.x - b.x ), 2 ) + Math.pow( ( a.y - b.y ), 2 ) );    \n // perimeter of triangle     \nvar p = ac + bc + ab;    \n // area of the triangle    \nvar area = Math.sqrt( p/2 * ( p/2 - ac) * ( p/2 - bc ) * ( p/2 - ab ) );    \n // height of the triangle = distance    \nvar h = ( area * 2 ) / ab;    \nconsole.log (\"height: \" + h);\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 7455909,
                        "reputation": 51,
                        "user_id": 5903199,
                        "user_type": "registered",
                        "display_name": "Johannes Beutel"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1511308496,
                    "creation_date": 1511308496,
                    "answer_id": 47424696,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/47424696#47424696",
                    "body": "<p>GLSL version:</p>\n\n<pre><code>// line (a -&gt; b ) point p[enter image description here][1]\nfloat distanceToLine(vec2 a, vec2 b, vec2 p) {\n    float aside = dot((p - a),(b - a));\n    if(aside&lt; 0.0) return length(p-a);\n    float bside = dot((p - b),(a - b));\n    if(bside&lt; 0.0) return length(p-b);\n    vec2 pointOnLine = (bside*a + aside*b)/pow(length(a-b),2.0);\n    return length(p - pointOnLine);\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "user_type": "does_not_exist",
                        "display_name": "user1196549"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1518452193,
                    "creation_date": 1518452193,
                    "answer_id": 48750853,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/48750853#48750853",
                    "body": "<p><strong>A 2D and 3D solution</strong></p>\n\n<p>Consider a change of basis such that the line segment becomes <code>(0, 0, 0)-(d, 0, 0)</code> and the point <code>(u, v, 0)</code>. The shortest distance occurs in that plane and is given by</p>\n\n<pre><code>    u \u2264 0 -&gt; d(A, C)\n0 \u2264 u \u2264 d -&gt; |v|\nd \u2264 u     -&gt; d(B, C)\n</code></pre>\n\n<p>(the distance to one of the endpoints or to the supporting line, depending on the projection to the line. The iso-distance locus is made of two half-circles and two line segments.)</p>\n\n<p><a href=\"https://i.stack.imgur.com/Fz3zg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fz3zg.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the above expression, d is the length of the segment AB, and u, v are respectivey the scalar product and (modulus of the) cross product of AB/d (unit vector in the direction of AB) and AC. Hence vectorially,</p>\n\n<pre><code>AB.AC \u2264 0             -&gt; |AC|\n    0 \u2264 AB.AC \u2264 AB\u00b2   -&gt; |ABxAC|/|AB|\n          AB\u00b2 \u2264 AB.AC -&gt; |BC|\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2330041,
                        "reputation": 1,
                        "user_id": 2403031,
                        "user_type": "registered",
                        "display_name": "eshafeeqe"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1520991058,
                    "creation_date": 1520991058,
                    "answer_id": 49268449,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/49268449#49268449",
                    "body": "<p>Eigen C++ Version for 3D line segment and point</p>\n\n<pre><code>// Return minimum distance between line segment: head---&gt;tail and point\ndouble MinimumDistance(Eigen::Vector3d head, Eigen::Vector3d tail,Eigen::Vector3d point)\n{\n    double l2 = std::pow((head - tail).norm(),2);\n    if(l2 ==0.0) return (head - point).norm();// head == tail case\n\n    // Consider the line extending the segment, parameterized as head + t (tail - point).\n    // We find projection of point onto the line.\n    // It falls where t = [(point-head) . (tail-head)] / |tail-head|^2\n    // We clamp t from [0,1] to handle points outside the segment head---&gt;tail.\n\n    double t = max(0,min(1,(point-head).dot(tail-head)/l2));\n    Eigen::Vector3d projection = head + t*(tail-head);\n\n    return (point - projection).norm();\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 52432,
                        "reputation": 3436,
                        "user_id": 156671,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "GrandmasterB"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1521357330,
                    "creation_date": 1521357330,
                    "answer_id": 49345409,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/49345409#49345409",
                    "body": "<p>Here's a self contained Delphi / Pascal version of the function based on Joshua's answer up above. Uses TPoint for VCL screen graphics, but should be easy to adjust as needed.</p>\n\n<pre><code>function DistancePtToSegment( pt, pt1, pt2: TPoint): double;\nvar\n   a, b, c, d: double;\n   len_sq: double;\n   param: double;\n   xx, yy: double;\n   dx, dy: double;\nbegin\n   a := pt.x - pt1.x;\n   b := pt.y - pt1.y;\n   c := pt2.x - pt1.x;\n   d := pt2.y - pt1.y;\n\n   len_sq := (c * c) + (d * d);\n   param := -1;\n\n   if (len_sq &lt;&gt; 0) then\n   begin\n      param := ((a * c) + (b * d)) / len_sq;\n   end;\n\n   if param &lt; 0 then\n   begin\n      xx := pt1.x;\n      yy := pt1.y;\n   end\n   else if param &gt; 1 then\n   begin\n      xx := pt2.x;\n      yy := pt2.y;\n   end\n   else begin\n      xx := pt1.x + param * c;\n      yy := pt1.y + param * d;\n   end;\n\n   dx := pt.x - xx;\n   dy := pt.y - yy;\n   result := sqrt( (dx * dx) + (dy * dy))\nend;\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2773816,
                        "reputation": 526,
                        "user_id": 2387835,
                        "user_type": "registered",
                        "display_name": "n1nj4"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1575469541,
                    "last_edit_date": 1575469541,
                    "creation_date": 1541521947,
                    "answer_id": 53176074,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/53176074#53176074",
                    "body": "<p>Python Numpy implementation for 2D coordinate array:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import numpy as np\n\n\ndef dist2d(p1, p2, coords):\n    ''' Distance from points to a finite line btwn p1 -&gt; p2 '''\n    assert coords.ndim == 2 and coords.shape[1] == 2, 'coords is not 2 dim'\n    dp = p2 - p1\n    st = dp[0]**2 + dp[1]**2\n    u = ((coords[:, 0] - p1[0]) * dp[0] + (coords[:, 1] - p1[1]) * dp[1]) / st\n\n    u[u &gt; 1.] = 1.\n    u[u &lt; 0.] = 0.\n\n    dx = (p1[0] + u * dp[0]) - coords[:, 0]\n    dy = (p1[1] + u * dp[1]) - coords[:, 1]\n\n    return np.sqrt(dx**2 + dy**2)\n\n\n# Usage:\np1 = np.array([0., 0.])\np2 = np.array([0., 10.])\n\n# List of coordinates\ncoords = np.array(\n    [[0., 0.],\n     [5., 5.],\n     [10., 10.],\n     [20., 20.]\n     ])\n\nd = dist2d(p1, p2, coords)\n\n# Single coordinate\ncoord = np.array([25., 25.])\nd = dist2d(p1, p2, coord[np.newaxis, :])\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 186427,
                        "reputation": 4521,
                        "user_id": 423805,
                        "user_type": "registered",
                        "accept_rate": 92,
                        "display_name": "BBSysDyn"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1550486533,
                    "last_edit_date": 1550486533,
                    "creation_date": 1550483923,
                    "answer_id": 54744587,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/54744587#54744587",
                    "body": "<p>Here is one based on vector math; this solution will also work for higher dimensions <em>and</em> also report on the interection point (on the line segment).</p>\n\n<pre><code>def dist(x1,y1,x2,y2,px,py):\n    a = np.array([[x1,y1]]).T\n    b = np.array([[x2,y2]]).T\n    x = np.array([[px,py]]).T\n    tp = (np.dot(x.T, b) - np.dot(a.T, b)) / np.dot(b.T, b)\n    tp = tp[0][0]\n    tmp = x - (a + tp*b)\n    d = np.sqrt(np.dot(tmp.T,tmp)[0][0])\n    return d, a+tp*b\n\nx1,y1=2.,2.\nx2,y2=5.,5.\npx,py=4.,1.\n\nd, inters = dist(x1,y1, x2,y2, px,py)\nprint (d)\nprint (inters)\n</code></pre>\n\n<p>Result is</p>\n\n<pre><code>2.1213203435596424\n[[2.5]\n [2.5]]\n</code></pre>\n\n<p>The math is explained here</p>\n\n<p><a href=\"https://brilliant.org/wiki/distance-between-point-and-line/\" rel=\"nofollow noreferrer\">https://brilliant.org/wiki/distance-between-point-and-line/</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6968644,
                                "reputation": 737,
                                "user_id": 5345736,
                                "user_type": "registered",
                                "display_name": "Kamran Bashir"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1580990125,
                            "post_id": 57845643,
                            "comment_id": 106284052,
                            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/57845643#comment106284052_57845643",
                            "body": "You saved my day. Can you please tell me which equation you have used here? I had tried the shortest distance from line to a point but it didn&#39;t work for line segments."
                        }
                    ],
                    "owner": {
                        "account_id": 9629965,
                        "reputation": 2015,
                        "user_id": 9310154,
                        "user_type": "registered",
                        "display_name": "otto"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1567975613,
                    "creation_date": 1567975613,
                    "answer_id": 57845643,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/57845643#57845643",
                    "body": "<p>Solution for dart and flutter:</p>\n\n<pre><code>import 'dart:math' as math;\n class Utils {\n   static double shortestDistance(Point p1, Point p2, Point p3){\n      double px = p2.x - p1.x;\n      double py = p2.y - p1.y;\n      double temp = (px*px) + (py*py);\n      double u = ((p3.x - p1.x)*px + (p3.y - p1.y)* py) /temp;\n      if(u&gt;1){\n        u=1;\n      }\n      else if(u&lt;0){\n        u=0;\n      }\n      double x = p1.x + u*px;\n      double y = p1.y + u*py;\n      double dx = x - p3.x;\n      double dy = y - p3.y;\n      double dist = math.sqrt(dx*dx+dy*dy);\n      return dist;\n   }\n}\n\nclass Point {\n  double x;\n  double y;\n  Point(this.x, this.y);\n}\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 3600621,
                        "reputation": 4496,
                        "user_id": 3004003,
                        "user_type": "registered",
                        "accept_rate": 77,
                        "display_name": "schmidt9"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1587899191,
                    "creation_date": 1587899191,
                    "answer_id": 61439645,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/61439645#61439645",
                    "body": "<p><strong>Swift</strong> implementation of <a href=\"http://paulbourke.net/geometry/pointlineplane/source.c\" rel=\"nofollow noreferrer\">http://paulbourke.net/geometry/pointlineplane/source.c</a></p>\n\n<pre><code>    static func magnitude(p1: CGPoint, p2: CGPoint) -&gt; CGFloat {\n        let vector = CGPoint(x: p2.x - p1.x, y: p2.y - p1.y)\n        return sqrt(pow(vector.x, 2) + pow(vector.y, 2))\n    }\n\n    /// http://paulbourke.net/geometry/pointlineplane/\n    /// http://paulbourke.net/geometry/pointlineplane/source.c\n    static func pointDistanceToLine(point: CGPoint, lineStart: CGPoint, lineEnd: CGPoint) -&gt; CGFloat? {\n\n        let lineMag = magnitude(p1: lineEnd, p2: lineStart)\n        let u = (((point.x - lineStart.x) * (lineEnd.x - lineStart.x)) +\n                ((point.y - lineStart.y) * (lineEnd.y - lineStart.y))) /\n                (lineMag * lineMag)\n\n        if u &lt; 0 || u &gt; 1 {\n            // closest point does not fall within the line segment\n            return nil\n        }\n\n        let intersectionX = lineStart.x + u * (lineEnd.x - lineStart.x)\n        let intersectionY = lineStart.y + u * (lineEnd.y - lineStart.y)\n\n        return magnitude(p1: point, p2: CGPoint(x: intersectionX, y: intersectionY))\n    }\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 1144927,
                        "reputation": 2913,
                        "user_id": 1127920,
                        "user_type": "registered",
                        "accept_rate": 81,
                        "display_name": "gawi"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1599052792,
                    "creation_date": 1599052792,
                    "answer_id": 63706437,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/63706437#63706437",
                    "body": "<p>Here is SQL implementation for HSQLDB:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE FUNCTION dist_to_segment(px double, py double, vx double, vy double, wx double, wy double)\n  RETURNS double\nBEGIN atomic\n   declare l2 double;\n   declare t double;\n   declare nx double;\n   declare ny double;\n   set l2 =(vx - wx)*(vx - wx) + (vy - wy)*(vy - wy);\n   IF l2 = 0 THEN\n     RETURN sqrt((vx - px)*(vx - px) + (vy - py)*(vy - py));\n   ELSE\n     set t = ((px - vx) * (wx - vx) + (py - vy) * (wy - vy)) / l2;\n     set t = GREATEST(0, LEAST(1, t));\n     set nx=vx + t * (wx - vx);\n     set ny=vy + t * (wy - vy);\n     RETURN sqrt((nx - px)*(nx - px) + (ny - py)*(ny - py));\n   END IF;\nEND;\n</code></pre>\n<p>And implementation for Postgres:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE FUNCTION dist_to_segment(px numeric, py numeric, vx numeric, vy numeric, wx numeric, wy numeric)\n  RETURNS numeric\nAS $$\n   declare l2 numeric;\n   declare t numeric;\n   declare nx numeric;\n   declare ny numeric;\nBEGIN \n   l2 := (vx - wx)*(vx - wx) + (vy - wy)*(vy - wy);\n   IF l2 = 0 THEN\n     RETURN sqrt((vx - px)*(vx - px) + (vy - py)*(vy - py));\n   ELSE\n     t := ((px - vx) * (wx - vx) + (py - vy) * (wy - vy)) / l2;\n     t := GREATEST(0, LEAST(1, t));\n     nx := vx + t * (wx - vx);\n     ny := vy + t * (wy - vy);\n     RETURN sqrt((nx - px)*(nx - px) + (ny - py)*(ny - py));\n   END IF;\nEND;\n$$ LANGUAGE plpgsql;\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 6248692,
                        "reputation": 41,
                        "user_id": 4859595,
                        "user_type": "registered",
                        "display_name": "Tavurth"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1618700807,
                    "last_edit_date": 1618700807,
                    "creation_date": 1618686997,
                    "answer_id": 67142085,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/67142085#67142085",
                    "body": "<p>I needed a Godot (GDscript) implementation of this so I wrote one based on <a href=\"https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/1501725#1501725\">grumdrig's</a> accepted answer:</p>\n<pre><code>func minimum_distance(v: Vector2, w: Vector2, p: Vector2):\n    # Return minimum distance between line segment vw and point p\n    var l2: float = (v - w).length_squared()  # i.e. |w-v|^2 -  avoid a sqrt\n    if l2 == 0.0:\n        return p.distance_to(v) # v == w case\n\n    # Consider the line extending the segment, parameterized as v + t (w - v).\n    # We find projection of point p onto the line.\n    # It falls where t = [(p-v) . (w-v)] / |w-v|^2\n    # We clamp t from [0,1] to handle points outside the segment vw.\n    var t: float = max(0, min(1, (p - v).dot(w - v) / l2))\n    var projection: Vector2 = v + t * (w - v)  # Projection falls on the segment\n    \n    return p.distance_to(projection)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 17853592,
                        "reputation": 440,
                        "user_id": 12968803,
                        "user_type": "registered",
                        "display_name": "darkfrei"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1634486243,
                    "creation_date": 1634486243,
                    "answer_id": 69606115,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/69606115#69606115",
                    "body": "<p>The Lua solution</p>\n<pre><code>-- distance from point (px, py) to line segment (x1, y1, x2, y2)\nfunction distPointToLine(px,py,x1,y1,x2,y2) -- point, start and end of the segment\n    local dx,dy = x2-x1,y2-y1\n    local length = math.sqrt(dx*dx+dy*dy)\n    dx,dy = dx/length,dy/length -- normalization\n    local p = dx*(px-x1)+dy*(py-y1)\n    if p &lt; 0 then\n        dx,dy = px-x1,py-y1\n        return math.sqrt(dx*dx+dy*dy), x1, y1 -- distance, nearest point\n    elseif p &gt; length then\n        dx,dy = px-x2,py-y2\n        return math.sqrt(dx*dx+dy*dy), x2, y2 -- distance, nearest point\n    end\n    return math.abs(dy*(px-x1)-dx*(py-y1)), x1+dx*p, y1+dy*p -- distance, nearest point\nend\n</code></pre>\n<p>For polyline (line with more than two segments):</p>\n<pre><code>-- if the (poly-)line has several segments, just iterate through all of them:\nfunction nearest_sector_in_line (x, y, line)\n    local x1, y1, x2, y2, min_dist\n    local ax,ay = line[1], line[2]\n    for j = 3, #line-1, 2 do\n        local bx,by = line[j], line[j+1]\n        local dist = distPointToLine(x,y,ax,ay,bx,by)\n        if not min_dist or dist &lt; min_dist then\n            min_dist = dist\n            x1, y1, x2, y2 = ax,ay,bx,by\n        end\n        ax, ay = bx, by\n    end\n    return x1, y1, x2, y2\nend\n</code></pre>\n<p>Example:</p>\n<pre><code>-- call it:\nlocal x1, y1, x2, y2 = nearest_sector_in_line (7, 4, {0,0, 10,0, 10,10, 0,10})\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 952999,
                        "reputation": 71,
                        "user_id": 978798,
                        "user_type": "registered",
                        "display_name": "Crystal-R"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1665792286,
                    "last_edit_date": 1665792286,
                    "creation_date": 1665789980,
                    "answer_id": 74075645,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/74075645#74075645",
                    "body": "<p>You can try the library for PHP <a href=\"https://github.com/rkondratuk/geo-math-php\" rel=\"nofollow noreferrer\">geo-math-php</a></p>\n<pre class=\"lang-php prettyprint-override\"><code>composer require rkondratuk/geo-math-php:^1\n</code></pre>\n<p>Example:</p>\n<pre class=\"lang-php prettyprint-override\"><code>&lt;?php\n\nuse PhpGeoMath\\Model\\GeoSegment;\nuse PhpGeoMath\\Model\\Polar3dPoint;\n\n$polarPoint1 = new Polar3dPoint(\n    40.758742779050706, -73.97855507715238, Polar3dPoint::EARTH_RADIUS_IN_METERS\n);\n\n$polarPoint2 = new Polar3dPoint(\n    40.74843388072615, -73.98566565776102, Polar3dPoint::EARTH_RADIUS_IN_METERS\n);\n\n$polarPoint3 = new Polar3dPoint(\n    40.74919365249446, -73.98133456388013, Polar3dPoint::EARTH_RADIUS_IN_METERS\n);\n\n$arcSegment = new GeoSegment($polarPoint1, $polarPoint2);\n$nearestPolarPoint = $arcSegment-&gt;calcNearestPoint($polarPoint3);\n\n// Shortest distance from point-3 to segment(point-1, point-2)\n$geoDistance = $nearestPolarPoint-&gt;calcGeoDistanceToPoint($polarPoint3);\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 233371,
                        "reputation": 65,
                        "user_id": 498805,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Xelnath"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1671739171,
                    "creation_date": 1671739171,
                    "answer_id": 74893314,
                    "question_id": 849211,
                    "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment/74893314#74893314",
                    "body": "<p>C# Version</p>\n<pre><code>public static FP DistanceToLineSegment(FPVector3 a, FPVector3 b, FPVector3 point)\n{\n  var d = b - a;\n  var s = d.SqrMagnitude;\n  var ds = d / s;\n  var lambda = FPVector3.Dot(point - a, ds);\n  var p = FPMath.Clamp01(lambda) * d;\n  return (a + p - point).Magnitude;\n}\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 1273,
                "reputation": 190072,
                "user_id": 1694,
                "user_type": "registered",
                "accept_rate": 95,
                "display_name": "Eli Courtwright"
            },
            "comment_count": 8,
            "is_answered": true,
            "accepted_answer_id": 1501725,
            "answer_count": 56,
            "score": 449,
            "last_activity_date": 1684529271,
            "creation_date": 1242064072,
            "last_edit_date": 1463175064,
            "question_id": 849211,
            "link": "https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment",
            "title": "Shortest distance between a point and a line segment",
            "body": "<p>I need a basic function to find the shortest distance between a point and a line segment.  Feel free to write the solution in any language you want; I can translate it into what I'm using (Javascript).</p>\n\n<p>EDIT: My line segment is defined by two endpoints. So my line segment <code>AB</code> is defined by the two points <code>A (x1,y1)</code> and <code>B (x2,y2)</code>.  I'm trying to find the distance between this line segment and a point <code>C (x3,y3)</code>.  My geometry skills are rusty, so the examples I've seen are confusing, I'm sorry to admit.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 7258
}