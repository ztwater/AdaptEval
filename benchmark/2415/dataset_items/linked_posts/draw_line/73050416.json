{
    "items": [
        {
            "tags": [
                "python",
                "opencv",
                "image-processing",
                "shapes"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 1463487,
                        "reputation": 16507,
                        "user_id": 1377097,
                        "user_type": "registered",
                        "display_name": "beaker"
                    },
                    "edited": false,
                    "score": 2,
                    "creation_date": 1658330176,
                    "post_id": 73050416,
                    "comment_id": 129026288,
                    "link": "https://stackoverflow.com/questions/73050416/how-to-draw-a-line-line-with-rectangular-corners-with-opencv-and-python#comment129026288_73050416",
                    "body": "<i>I don&#39;t want to use opencv&#39;s rectangle for some reason</i> You mean you don&#39;t know why you don&#39;t want to use <code>rectangle()</code>? That&#39;s rather odd."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6199398,
                                "reputation": 20775,
                                "user_id": 6885902,
                                "user_type": "registered",
                                "display_name": "Jeru Luke"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1658315829,
                            "post_id": 73050613,
                            "comment_id": 129019900,
                            "link": "https://stackoverflow.com/questions/73050416/how-to-draw-a-line-line-with-rectangular-corners-with-opencv-and-python/73050613#comment129019900_73050613",
                            "body": "Yes, you are right. A thin rectangle should do the trick."
                        }
                    ],
                    "owner": {
                        "account_id": 20007061,
                        "reputation": 662,
                        "user_id": 14664861,
                        "user_type": "registered",
                        "display_name": "chubercik"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1658315467,
                    "creation_date": 1658315467,
                    "answer_id": 73050613,
                    "question_id": 73050416,
                    "link": "https://stackoverflow.com/questions/73050416/how-to-draw-a-line-line-with-rectangular-corners-with-opencv-and-python/73050613#73050613",
                    "body": "<p>According to <a href=\"https://docs.opencv.org/4.x/d6/d6e/group__imgproc__draw.html#ga7078a9fae8c7e7d13d24dac2520ae4a2\" rel=\"nofollow noreferrer\">OpenCV docs</a>, line() function will draw <strong>thick lines with <em>rounding endings</em></strong>.</p>\n<p>That being said, you cannot directly get over this issue. You could draw a line several times with <code>thickness=1</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>cv2.line(img1, (190, 55), (85, 55), (255, 0, 0), 1)\ncv2.line(img1, (190, 56), (85, 56), (255, 0, 0), 1)\ncv2.line(img1, (190, 57), (85, 57), (255, 0, 0), 1)\n...\n</code></pre>\n<p>And although you're reluctant, I would suggest simply drawing a filled rectangle instead.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6199398,
                                "reputation": 20775,
                                "user_id": 6885902,
                                "user_type": "registered",
                                "display_name": "Jeru Luke"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1658351228,
                            "post_id": 73054292,
                            "comment_id": 129033291,
                            "link": "https://stackoverflow.com/questions/73050416/how-to-draw-a-line-line-with-rectangular-corners-with-opencv-and-python/73054292#comment129033291_73054292",
                            "body": "Would this work for any kind of line? Vertical, horizontal, diagonal?"
                        },
                        {
                            "owner": {
                                "account_id": 18596616,
                                "reputation": 27328,
                                "user_id": 13552470,
                                "user_type": "registered",
                                "display_name": "Red"
                            },
                            "reply_to_user": {
                                "account_id": 6199398,
                                "reputation": 20775,
                                "user_id": 6885902,
                                "user_type": "registered",
                                "display_name": "Jeru Luke"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1658351293,
                            "post_id": 73054292,
                            "comment_id": 129033310,
                            "link": "https://stackoverflow.com/questions/73050416/how-to-draw-a-line-line-with-rectangular-corners-with-opencv-and-python/73054292#comment129033310_73054292",
                            "body": "@JeruLuke Correct. You can run the program multiple times and see the different results (due to the random)."
                        },
                        {
                            "owner": {
                                "account_id": 6199398,
                                "reputation": 20775,
                                "user_id": 6885902,
                                "user_type": "registered",
                                "display_name": "Jeru Luke"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1658351430,
                            "post_id": 73054292,
                            "comment_id": 129033360,
                            "link": "https://stackoverflow.com/questions/73050416/how-to-draw-a-line-line-with-rectangular-corners-with-opencv-and-python/73054292#comment129033360_73054292",
                            "body": "Great. I will check it out. You could raise a request on GitHub to add this function +1"
                        }
                    ],
                    "owner": {
                        "account_id": 18596616,
                        "reputation": 27328,
                        "user_id": 13552470,
                        "user_type": "registered",
                        "display_name": "Red"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1658330639,
                    "creation_date": 1658330639,
                    "answer_id": 73054292,
                    "question_id": 73050416,
                    "link": "https://stackoverflow.com/questions/73050416/how-to-draw-a-line-line-with-rectangular-corners-with-opencv-and-python/73054292#73054292",
                    "body": "<p>I can see how the <code>cv2.rectangle()</code> method wouldn't work for you if you want the lines to be able to have any <strong>rotation</strong>.</p>\n<p>So here is a function I defined that works just like the <code>cv2.line()</code> method, but will result in rectangular ends rather than circular ends:</p>\n<pre><code>def draw_line(img, pt1, pt2, color, thickness):\n    x1, y1, x2, y2 = *pt1, *pt2\n    theta = np.pi - np.arctan2(y1 - y2, x1 - x2)\n    dx = int(np.sin(theta) * thickness / 2)\n    dy = int(np.cos(theta) * thickness / 2)\n    pts = [\n        [x1 + dx, y1 + dy],\n        [x1 - dx, y1 - dy],\n        [x2 - dx, y2 - dy],\n        [x2 + dx, y2 + dy]\n    ]\n    cv2.fillPoly(img, [np.array(pts)], color)\n</code></pre>\n<p>Testing alongside the <code>cv2.line()</code> method:</p>\n<pre><code>import cv2\nimport numpy as np\n\ndef draw_line(img, pt1, pt2, color, thickness):\n    x1, y1, x2, y2 = *pt1, *pt2\n    theta = np.pi - np.arctan2(y1 - y2, x1 - x2)\n    dx = int(np.sin(theta) * thickness / 2)\n    dy = int(np.cos(theta) * thickness / 2)\n    pts = [\n        [x1 + dx, y1 + dy],\n        [x1 - dx, y1 - dy],\n        [x2 - dx, y2 - dy],\n        [x2 + dx, y2 + dy]\n    ]\n    cv2.fillPoly(img, [np.array(pts)], color)\n\nimg = np.full((600, 600, 3), 255, np.uint8)\n\npt1 = np.random.randint(0, 600, 2)\npt2 = np.random.randint(0, 600, 2)\n\ndraw_line(img, pt1, pt2, (0, 0, 0), 15)\ncv2.line(img, pt1, pt2, (255, 255, 255), 1)\n\ncv2.imshow(&quot;Image&quot;, img)\ncv2.waitKey(0)\n</code></pre>\n<p>Output (will vary because of the <code>np.random.randint()</code>):</p>\n<p><a href=\"https://i.stack.imgur.com/GkxDV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GkxDV.png\" alt=\"enter image description here\" /></a></p>\n"
                }
            ],
            "owner": {
                "account_id": 22836036,
                "reputation": 29,
                "user_id": 16983791,
                "user_type": "registered",
                "display_name": "Ankita"
            },
            "comment_count": 1,
            "is_answered": true,
            "answer_count": 2,
            "score": 2,
            "last_activity_date": 1658330686,
            "creation_date": 1658314637,
            "last_edit_date": 1658330686,
            "question_id": 73050416,
            "link": "https://stackoverflow.com/questions/73050416/how-to-draw-a-line-line-with-rectangular-corners-with-opencv-and-python",
            "title": "How to draw a line (line with rectangular corners) with OpenCV and python",
            "body": "<p>How can I draw a line with rectangular corners with OpenCV line, I don't want to use OpenCV's rectangle for some reason. I have posted my code below and output as well, In the output line is curved at the endpoint and start points, I require it as a rectangle.</p>\n<p>I searched a lot for that, but it seems no one had that problem before.</p>\n<pre><code>import cv2\nthickness = 24\nimg1 = cv2.imread(&quot;AMIR4.jpg&quot;)\ncv2.line(img1, (190,55), (85,55), (255,0,0), (thickness))\ncv2.imshow(&quot;image&quot;, img1)\ncv2.waitKey(0)\n</code></pre>\n<p>Sample:</p>\n<p><img src=\"https://i.stack.imgur.com/jDFx6.png\" alt=\"enter image description here\" /></p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 5335
}