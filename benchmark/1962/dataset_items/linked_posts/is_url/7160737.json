{
    "items": [
        {
            "tags": [
                "python",
                "url",
                "malformedurlexception"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 42616,
                        "reputation": 12383,
                        "user_id": 124178,
                        "user_type": "registered",
                        "accept_rate": 84,
                        "display_name": "carlpett"
                    },
                    "edited": false,
                    "score": 2,
                    "creation_date": 1314101232,
                    "post_id": 7160737,
                    "comment_id": 8592123,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not#comment8592123_7160737",
                    "body": "Just try to read it, if for instance httplib throws an exception, then you&#39;ll know it was invalid. <i>Not all well formed urls are valid</i>!"
                },
                {
                    "owner": {
                        "account_id": 7137814,
                        "reputation": 753,
                        "user_id": 5645153,
                        "user_type": "registered",
                        "accept_rate": 20,
                        "display_name": "Viktor Joras"
                    },
                    "edited": false,
                    "score": 25,
                    "creation_date": 1541314419,
                    "post_id": 7160737,
                    "comment_id": 93169288,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not#comment93169288_7160737",
                    "body": "<code>url=&#39;http:&#47;&#47;google&#39; </code> is not malformed. Schema + hostname is always valid."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 85655,
                                "reputation": 17369,
                                "user_id": 238671,
                                "user_type": "registered",
                                "accept_rate": 68,
                                "display_name": "Ruggero Turra"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1314102192,
                            "post_id": 7160778,
                            "comment_id": 8592372,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment8592372_7160778",
                            "body": "a curiosity... did you add the <code>ftp</code>? Or have I an old django version?"
                        },
                        {
                            "owner": {
                                "account_id": 322605,
                                "reputation": 11624,
                                "user_id": 642096,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "cetver"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1314104653,
                            "post_id": 7160778,
                            "comment_id": 8593169,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment8593169_7160778",
                            "body": "&gt;&gt;wiso: django version 1.3 ( make sure yourself: /django/core/validators.py, line:47 )  <a href=\"ftp://someftp.com\" rel=\"nofollow noreferrer\">someftp.com</a> - invalid url ? Even stackoferlow parser someftp.com makes as link )"
                        },
                        {
                            "owner": {
                                "account_id": 322605,
                                "reputation": 11624,
                                "user_id": 642096,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "cetver"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1314104789,
                            "post_id": 7160778,
                            "comment_id": 8593220,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment8593220_7160778",
                            "body": "&gt;&gt;Yugal Jindle: django developers thinks protocol is required, but you can modify this regexp if you do not think so"
                        },
                        {
                            "owner": {
                                "account_id": 378930,
                                "reputation": 44972,
                                "user_id": 731963,
                                "user_type": "registered",
                                "accept_rate": 99,
                                "display_name": "Yugal Jindle"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1314258857,
                            "post_id": 7160778,
                            "comment_id": 8629677,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment8629677_7160778",
                            "body": "Sorry, I meant url=&#39;<a href=\"http://www.google\" rel=\"nofollow noreferrer\">google</a>&#39; is malformed right ? But it matches the regex.. so can something be done for that ?"
                        },
                        {
                            "owner": {
                                "account_id": 267932,
                                "reputation": 8151,
                                "user_id": 556413,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "glarrain"
                            },
                            "reply_to_user": {
                                "account_id": 378930,
                                "reputation": 44972,
                                "user_id": 731963,
                                "user_type": "registered",
                                "accept_rate": 99,
                                "display_name": "Yugal Jindle"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1349887827,
                            "post_id": 7160778,
                            "comment_id": 17347714,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment17347714_7160778",
                            "body": "@yugal-jindle <a href=\"http://www.sitedomain\" rel=\"nofollow noreferrer\">sitedomain</a> is not a valid url. <a href=\"http://www.museum/\" rel=\"nofollow noreferrer\">museum</a> is because .museum is a top-level-domain (ICANN [1] defines them), and not a sitedomain. [1] <a href=\"http://www.icann.org/\" rel=\"nofollow noreferrer\">icann.org</a>"
                        },
                        {
                            "owner": {
                                "account_id": 81434,
                                "reputation": 1997,
                                "user_id": 229631,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Adam Baxter"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1439667090,
                            "post_id": 7160778,
                            "comment_id": 51958521,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment51958521_7160778",
                            "body": "This one doesn&#39;t seem to work with <a href=\"http://username:password@example.com\" rel=\"nofollow noreferrer\">username:password@example.com</a> style URLs"
                        },
                        {
                            "owner": {
                                "account_id": 1877929,
                                "reputation": 7843,
                                "user_id": 1698736,
                                "user_type": "registered",
                                "accept_rate": 90,
                                "display_name": "cowlinator"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1504049637,
                            "post_id": 7160778,
                            "comment_id": 78858146,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment78858146_7160778",
                            "body": "does anybody have a link to the source in its context?"
                        },
                        {
                            "owner": {
                                "account_id": 322605,
                                "reputation": 11624,
                                "user_id": 642096,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "cetver"
                            },
                            "reply_to_user": {
                                "account_id": 1877929,
                                "reputation": 7843,
                                "user_id": 1698736,
                                "user_type": "registered",
                                "accept_rate": 90,
                                "display_name": "cowlinator"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1504109615,
                            "post_id": 7160778,
                            "comment_id": 78889281,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment78889281_7160778",
                            "body": "@cowlinator <a href=\"https://github.com/django/django/blob/stable/1.3.x/django/core/validators.py#L45\" rel=\"nofollow noreferrer\">github.com/django/django/blob/stable/1.3.x/django/core/&hellip;</a>"
                        },
                        {
                            "owner": {
                                "account_id": 8382410,
                                "reputation": 6136,
                                "user_id": 6293857,
                                "user_type": "registered",
                                "accept_rate": 73,
                                "display_name": "Rob Truxal"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1515564971,
                            "post_id": 7160778,
                            "comment_id": 83342443,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment83342443_7160778",
                            "body": "I found a bug: <code>httpbin.org</code>"
                        },
                        {
                            "owner": {
                                "account_id": 57459,
                                "reputation": 4007,
                                "user_id": 172132,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "cimnine"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1517776950,
                            "post_id": 7160778,
                            "comment_id": 84222261,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment84222261_7160778",
                            "body": "This will not work for IPv6 urls, which have the form <code>http:&#47;&#47;[2001:0DB8::3]:8080&#47;index.php?valid=true#result</code>"
                        },
                        {
                            "owner": {
                                "account_id": 9189694,
                                "reputation": 169,
                                "user_id": 6830669,
                                "user_type": "registered",
                                "display_name": "user6830669"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1585665252,
                            "post_id": 7160778,
                            "comment_id": 107837721,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment107837721_7160778",
                            "body": "url=&#39;<a href=\"http://google\" rel=\"nofollow noreferrer\">google</a>&#39; is actually a valid url in most browsers. It is common to use on internal networks to allow the use of <a href=\"http://myserver/mypage\" rel=\"nofollow noreferrer\">myserver/mypage</a> instead of <a href=\"http://myserver.myoffice.mydomain.com\" rel=\"nofollow noreferrer\">myserver.myoffice.mydomain.com</a> for obvious reasons. Most people will want to allow the local short server name."
                        },
                        {
                            "owner": {
                                "account_id": 18204181,
                                "reputation": 141,
                                "user_id": 13247822,
                                "user_type": "registered",
                                "display_name": "Aska"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1602405509,
                            "post_id": 7160778,
                            "comment_id": 113705159,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#comment113705159_7160778",
                            "body": "Can you explain how this regular expression works? <code>r&#39;(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+(?:[A-Z]{2,6&zwnj;&#8203;}\\.?|[A-Z0-9-]{2,}\\.&zwnj;&#8203;?)|&#39; #domain...</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 322605,
                        "reputation": 11624,
                        "user_id": 642096,
                        "user_type": "registered",
                        "accept_rate": 85,
                        "display_name": "cetver"
                    },
                    "comment_count": 12,
                    "is_accepted": true,
                    "score": 136,
                    "last_activity_date": 1590505879,
                    "last_edit_date": 1590505879,
                    "creation_date": 1314101208,
                    "answer_id": 7160778,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160778#7160778",
                    "body": "<h1>django url validation regex (<a href=\"https://github.com/django/django/blob/stable/1.3.x/django/core/validators.py#L45\" rel=\"noreferrer\">source</a>):</h1>\n\n<pre><code>import re\nregex = re.compile(\n        r'^(?:http|ftp)s?://' # http:// or https://\n        r'(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+(?:[A-Z]{2,6}\\.?|[A-Z0-9-]{2,}\\.?)|' #domain...\n        r'localhost|' #localhost...\n        r'\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})' # ...or ip\n        r'(?::\\d+)?' # optional port\n        r'(?:/?|[/?]\\S+)$', re.IGNORECASE)\n\nprint(re.match(regex, \"http://www.example.com\") is not None) # True\nprint(re.match(regex, \"example.com\") is not None)            # False\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 378930,
                                "reputation": 44972,
                                "user_id": 731963,
                                "user_type": "registered",
                                "accept_rate": 99,
                                "display_name": "Yugal Jindle"
                            },
                            "edited": false,
                            "score": 70,
                            "creation_date": 1314102136,
                            "post_id": 7160819,
                            "comment_id": 8592353,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160819#comment8592353_7160819",
                            "body": "But this will only work in the django environment not otherwise."
                        },
                        {
                            "owner": {
                                "account_id": 92134,
                                "reputation": 2676,
                                "user_id": 252638,
                                "user_type": "registered",
                                "display_name": "Drekembe"
                            },
                            "reply_to_user": {
                                "account_id": 378930,
                                "reputation": 44972,
                                "user_id": 731963,
                                "user_type": "registered",
                                "accept_rate": 99,
                                "display_name": "Yugal Jindle"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1314103127,
                            "post_id": 7160819,
                            "comment_id": 8592682,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160819#comment8592682_7160819",
                            "body": "Oh sorry I don&#39;t know why I thought this question had the django tag. Yikes, sorry."
                        },
                        {
                            "owner": {
                                "user_type": "does_not_exist",
                                "display_name": "user67416"
                            },
                            "edited": false,
                            "score": 31,
                            "creation_date": 1372781837,
                            "post_id": 7160819,
                            "comment_id": 25317835,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160819#comment25317835_7160819",
                            "body": "<code>verify_exists</code> is deprecated. -1"
                        },
                        {
                            "owner": {
                                "account_id": 384764,
                                "reputation": 1383,
                                "user_id": 741496,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Dukeatcoding"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1375708923,
                            "post_id": 7160819,
                            "comment_id": 26424222,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160819#comment26424222_7160819",
                            "body": "Add: from django.conf import settings settings.configure(DEBUG=False) and remove the verify_exists to keep it working with django 1.5"
                        },
                        {
                            "owner": {
                                "account_id": 188831,
                                "reputation": 5087,
                                "user_id": 427793,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "swdev"
                            },
                            "reply_to_user": {
                                "account_id": 378930,
                                "reputation": 44972,
                                "user_id": 731963,
                                "user_type": "registered",
                                "accept_rate": 99,
                                "display_name": "Yugal Jindle"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1409354278,
                            "post_id": 7160819,
                            "comment_id": 39947634,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160819#comment39947634_7160819",
                            "body": "@YugalJindle Correct, but stripping it from Django is almost trivial :D. So, I use this method"
                        },
                        {
                            "owner": {
                                "account_id": 4177132,
                                "reputation": 6388,
                                "user_id": 3423324,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "luckydonald"
                            },
                            "edited": false,
                            "score": 10,
                            "creation_date": 1474477474,
                            "post_id": 7160819,
                            "comment_id": 66550714,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160819#comment66550714_7160819",
                            "body": "Note, with django &gt;= 1.5 there is no <code>verify_exists</code> anymore. Also instead of the <code>val</code> variable you can call it like <code>URLValidator()(&#39;http:&#47;&#47;www.google.com&#39;)</code>"
                        },
                        {
                            "owner": {
                                "account_id": 18370,
                                "reputation": 11273,
                                "user_id": 42048,
                                "user_type": "registered",
                                "accept_rate": 42,
                                "display_name": "pbreitenbach"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1568086199,
                            "post_id": 7160819,
                            "comment_id": 102152982,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160819#comment102152982_7160819",
                            "body": "Would it make sense to import Django just to do a URL validation?"
                        },
                        {
                            "owner": {
                                "account_id": 7393678,
                                "reputation": 1021,
                                "user_id": 5626341,
                                "user_type": "registered",
                                "accept_rate": 33,
                                "display_name": "kloddant"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1627577497,
                            "post_id": 7160819,
                            "comment_id": 121199705,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160819#comment121199705_7160819",
                            "body": "What does the val function return though?  That needs to be specified here.  I tested it out, and the val function returns None if the argument is a url and throws a validation error otherwise."
                        },
                        {
                            "owner": {
                                "account_id": 1486097,
                                "reputation": 11565,
                                "user_id": 1394353,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "JL Peyret"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1712858555,
                            "post_id": 7160819,
                            "comment_id": 138062377,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160819#comment138062377_7160819",
                            "body": "You know folks, besides whining about <code>verify_exists</code> not being there anymore, or upvoting the comments, just like <b>edit</b> the darn code, which was also invalid for python 3."
                        }
                    ],
                    "owner": {
                        "account_id": 92134,
                        "reputation": 2676,
                        "user_id": 252638,
                        "user_type": "registered",
                        "display_name": "Drekembe"
                    },
                    "comment_count": 9,
                    "is_accepted": false,
                    "score": 154,
                    "last_activity_date": 1712858410,
                    "last_edit_date": 1712858410,
                    "creation_date": 1314101416,
                    "answer_id": 7160819,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7160819#7160819",
                    "body": "<p>Actually, I think this is the best way.</p>\n<pre><code>from django.core.validators import URLValidator\nfrom django.core.exceptions import ValidationError\n\nval = URLValidator()\ntry:\n    val('httpx://www.google.com')\nexcept (ValidationError,) as e: \n    print(e)\n</code></pre>\n<p>edit: ah yeah, this question is a duplicate of this: <a href=\"https://stackoverflow.com/questions/3170231/django-url-validation-i-just-want-to-see-if-the-url-exists\">How can I check if a URL exists with Django\u2019s validators?</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 244931,
                                "reputation": 18302,
                                "user_id": 808804,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Adam Parkin"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1322785526,
                            "post_id": 7183127,
                            "comment_id": 10299493,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7183127#comment10299493_7183127",
                            "body": "Neat, but what about FTP, or HTTPS?"
                        },
                        {
                            "owner": {
                                "account_id": 60903,
                                "reputation": 46515,
                                "user_id": 181772,
                                "user_type": "registered",
                                "accept_rate": 96,
                                "display_name": "andrew cooke"
                            },
                            "reply_to_user": {
                                "account_id": 244931,
                                "reputation": 18302,
                                "user_id": 808804,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Adam Parkin"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1322864874,
                            "post_id": 7183127,
                            "comment_id": 10318615,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7183127#comment10318615_7183127",
                            "body": "you haven&#39;t forked the code and implemented them?  it&#39;s open source."
                        },
                        {
                            "owner": {
                                "account_id": 303484,
                                "reputation": 6089,
                                "user_id": 735204,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "Emmett Butler"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1346342413,
                            "post_id": 7183127,
                            "comment_id": 16340113,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7183127#comment16340113_7183127",
                            "body": "lepl is now discontinued by the author <a href=\"http://www.acooke.org/lepl/discontinued.html\" rel=\"nofollow noreferrer\">acooke.org/lepl/discontinued.html</a> EDIT: heh, just realized that you <i>are</i> the author"
                        },
                        {
                            "owner": {
                                "account_id": 1063838,
                                "reputation": 413,
                                "user_id": 1064870,
                                "user_type": "registered",
                                "display_name": "Sheile"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1566953747,
                            "post_id": 7183127,
                            "comment_id": 101813644,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7183127#comment101813644_7183127",
                            "body": "note: lepl.apps.rfc3696 is not working in Python 3.7.4"
                        }
                    ],
                    "owner": {
                        "account_id": 60903,
                        "reputation": 46515,
                        "user_id": 181772,
                        "user_type": "registered",
                        "accept_rate": 96,
                        "display_name": "andrew cooke"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 10,
                    "last_activity_date": 1346347760,
                    "last_edit_date": 1346347760,
                    "creation_date": 1314225310,
                    "answer_id": 7183127,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/7183127#7183127",
                    "body": "<p><strong>note</strong> - lepl is no longer supported, sorry (you're welcome to use it, and i think the code below works, but it's not going to get updates).</p>\n\n<p>rfc 3696 <a href=\"http://www.faqs.org/rfcs/rfc3696.html\" rel=\"noreferrer\">http://www.faqs.org/rfcs/rfc3696.html</a> defines how to do this (for http urls and email).  i implemented its recommendations in python using lepl (a parser library).  see <a href=\"http://acooke.org/lepl/rfc3696.html\" rel=\"noreferrer\">http://acooke.org/lepl/rfc3696.html</a></p>\n\n<p>to use:</p>\n\n<pre><code>&gt; easy_install lepl\n...\n&gt; python\n...\n&gt;&gt;&gt; from lepl.apps.rfc3696 import HttpUrl\n&gt;&gt;&gt; validator = HttpUrl()\n&gt;&gt;&gt; validator('google')\nFalse\n&gt;&gt;&gt; validator('http://google')\nFalse\n&gt;&gt;&gt; validator('http://google.com')\nTrue\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3814914,
                                "reputation": 1785,
                                "user_id": 3164492,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "Devavrata"
                            },
                            "edited": false,
                            "score": 8,
                            "creation_date": 1462456064,
                            "post_id": 32171869,
                            "comment_id": 61651877,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#comment61651877_32171869",
                            "body": "It will throw error for file urls. Like &quot;file:///users/file.txt&quot;"
                        },
                        {
                            "owner": {
                                "account_id": 24810,
                                "reputation": 44504,
                                "user_id": 63309,
                                "user_type": "registered",
                                "accept_rate": 70,
                                "display_name": "Tom"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1478790012,
                            "post_id": 32171869,
                            "comment_id": 68301229,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#comment68301229_32171869",
                            "body": "Fails for localhost urls    <code>validators.url(&quot;http:&#47;&#47;localhost:8080&quot;) ValidationFailure(func=url, args={&#39;public&#39;: False, &#39;value&#39;: &#39;http:&#47;&#47;localhost:8080&#39;})  </code>"
                        },
                        {
                            "owner": {
                                "account_id": 1944735,
                                "reputation": 1619,
                                "user_id": 1750147,
                                "user_type": "registered",
                                "display_name": "Lal"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1482322652,
                            "post_id": 32171869,
                            "comment_id": 69725710,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#comment69725710_32171869",
                            "body": "valid for <code>http:&#47;&#47;www.google</code>, <code>http:&#47;&#47;google.www</code>.. this is simply checking for <code>http:&#47;&#47;</code> and <code>a dot (.) between two words</code>"
                        },
                        {
                            "owner": {
                                "account_id": 326479,
                                "reputation": 35146,
                                "user_id": 648265,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "ivan_pozdeev"
                            },
                            "edited": false,
                            "score": 15,
                            "creation_date": 1547095647,
                            "post_id": 32171869,
                            "comment_id": 95076030,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#comment95076030_32171869",
                            "body": "The package&#39;s validating fn has many arbitrary limitations, so it&#39;s a terrible advice to suggest it as a general solution."
                        },
                        {
                            "owner": {
                                "account_id": 7535253,
                                "reputation": 840,
                                "user_id": 5721784,
                                "user_type": "registered",
                                "display_name": "Armster"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1590689987,
                            "post_id": 32171869,
                            "comment_id": 109783151,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#comment109783151_32171869",
                            "body": "In [4]: validators.url(&quot;<a href=\"http://google.fndwjbveiuw&quot;\" rel=\"nofollow noreferrer\">google.fndwjbveiuw&quot;</a>) Out[4]: True"
                        },
                        {
                            "owner": {
                                "account_id": 2261220,
                                "reputation": 2172,
                                "user_id": 1991270,
                                "user_type": "registered",
                                "display_name": "Fanglin"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1622759168,
                            "post_id": 32171869,
                            "comment_id": 119891345,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#comment119891345_32171869",
                            "body": "Update: the previous errors are fixed in the latest version."
                        },
                        {
                            "owner": {
                                "account_id": 347133,
                                "reputation": 2711,
                                "user_id": 681070,
                                "user_type": "registered",
                                "display_name": "dgrogan"
                            },
                            "reply_to_user": {
                                "account_id": 2261220,
                                "reputation": 2172,
                                "user_id": 1991270,
                                "user_type": "registered",
                                "display_name": "Fanglin"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1680630870,
                            "post_id": 32171869,
                            "comment_id": 133929798,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#comment133929798_32171869",
                            "body": "@Fanglin no, the errors are not fixed. <code>validators.url(&quot;file:&#47;&#47;&#47;some_file.txt&quot;)</code> gives a failure."
                        },
                        {
                            "owner": {
                                "account_id": 7926,
                                "reputation": 4974,
                                "user_id": 13969,
                                "user_type": "registered",
                                "accept_rate": 50,
                                "display_name": "rjurney"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1681156230,
                            "post_id": 32171869,
                            "comment_id": 134008156,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#comment134008156_32171869",
                            "body": "This does not consider perfectly valid URLs as valid. Like single word hostnames on a corporate network.&quot;"
                        },
                        {
                            "owner": {
                                "account_id": 7890906,
                                "reputation": 1351,
                                "user_id": 5961077,
                                "user_type": "registered",
                                "display_name": "Mehdi Zare"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1684809445,
                            "post_id": 32171869,
                            "comment_id": 134567525,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#comment134567525_32171869",
                            "body": "This package is not maintained actively"
                        },
                        {
                            "owner": {
                                "account_id": 4335669,
                                "reputation": 1535,
                                "user_id": 3540204,
                                "user_type": "registered",
                                "display_name": "petre"
                            },
                            "reply_to_user": {
                                "account_id": 7890906,
                                "reputation": 1351,
                                "user_id": 5961077,
                                "user_type": "registered",
                                "display_name": "Mehdi Zare"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1699465843,
                            "post_id": 32171869,
                            "comment_id": 136536241,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#comment136536241_32171869",
                            "body": "@MehdiZare, there are commits from yesterday... so I&#39;d say it is at least to some extent maintained."
                        },
                        {
                            "owner": {
                                "account_id": 2208540,
                                "reputation": 2959,
                                "user_id": 2859525,
                                "user_type": "registered",
                                "accept_rate": 90,
                                "display_name": "Todd"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1705441807,
                            "post_id": 32171869,
                            "comment_id": 137207457,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#comment137207457_32171869",
                            "body": "As of Jan 16 2024 this package no longer uses the argument <code>public</code> and the maintainer has not mentioned any commitment to bring it back, despite it being described in the documented source code. Id suggest migrating away from this package."
                        }
                    ],
                    "owner": {
                        "account_id": 82769,
                        "reputation": 20238,
                        "user_id": 232485,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Jabba"
                    },
                    "comment_count": 11,
                    "is_accepted": false,
                    "score": 236,
                    "last_activity_date": 1609648925,
                    "last_edit_date": 1609648925,
                    "creation_date": 1440366361,
                    "answer_id": 32171869,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/32171869#32171869",
                    "body": "<p>Use the <a href=\"http://validators.readthedocs.org/en/latest/\" rel=\"noreferrer\">validators</a> package:</p>\n<pre><code>&gt;&gt;&gt; import validators\n&gt;&gt;&gt; validators.url(&quot;http://google.com&quot;)\nTrue\n&gt;&gt;&gt; validators.url(&quot;http://google&quot;)\nValidationFailure(func=url, args={'value': 'http://google', 'require_tld': True})\n&gt;&gt;&gt; if not validators.url(&quot;http://google&quot;):\n...     print &quot;not valid&quot;\n... \nnot valid\n&gt;&gt;&gt;\n</code></pre>\n<p>Install it <a href=\"https://pypi.org/project/validators/\" rel=\"noreferrer\">from PyPI</a> with pip (<code>pip install validators</code>).</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 18331514,
                                "reputation": 1213,
                                "user_id": 13349935,
                                "user_type": "registered",
                                "display_name": "Syed M. Sannan"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1708995924,
                            "post_id": 36283503,
                            "comment_id": 137622310,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/36283503#comment137622310_36283503",
                            "body": "Best answer on here from the custom-coded solutions."
                        }
                    ],
                    "owner": {
                        "account_id": 2159164,
                        "reputation": 2786,
                        "user_id": 1913726,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "dmmfll"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 21,
                    "last_activity_date": 1709433273,
                    "last_edit_date": 1709433273,
                    "creation_date": 1459252369,
                    "answer_id": 36283503,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/36283503#36283503",
                    "body": "<p>I landed on this page trying to figure out a sane way to validate strings as &quot;valid&quot; urls. I share here my solution using python3. No extra libraries required.</p>\n<p>See <a href=\"https://docs.python.org/2/library/urlparse.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/urlparse.html</a> if you are using python2.</p>\n<p>See <a href=\"https://docs.python.org/3.0/library/urllib.parse.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3.0/library/urllib.parse.html</a> if you are using python3 as I am.</p>\n<pre><code>import urllib\nfrom pprint import pprint\n\ninvalid_url = 'dkakasdkjdjakdjadjfalskdjfalk'\nvalid_url = 'https://stackoverflow.com'\ntokens = [urllib.parse.urlparse(url) for url in (invalid_url, valid_url)]\n\nfor token in tokens:\n    pprint(token)\n    \nmin_attributes = ('scheme', 'netloc')  # add attrs to your liking\nfor token in tokens:\n    if all(getattr(token, attr) for attr in min_attributes) is False:\n        error = &quot;'{url}' string has no scheme or netloc.&quot;.format(url=token.geturl())\n        print(error)\n    else:\n        print(&quot;'{url}' is probably a valid url.&quot;.format(url=token.geturl()))\n</code></pre>\n<blockquote>\n<p>ParseResult(scheme='', netloc='', path='dkakasdkjdjakdjadjfalskdjfalk', params='', query='', fragment='')</p>\n</blockquote>\n<blockquote>\n<p>ParseResult(scheme='https', netloc='stackoverflow.com', path='', params='', query='', fragment='')</p>\n</blockquote>\n<blockquote>\n<p>'dkakasdkjdjakdjadjfalskdjfalk' string has no scheme or netloc.</p>\n</blockquote>\n<blockquote>\n<p>'https://stackoverflow.com' is probably a valid url.</p>\n</blockquote>\n<p>Here is a more concise function:</p>\n<pre><code>from urllib.parse import urlparse\n\nmin_attributes = ('scheme', 'netloc')\n\n\ndef is_valid(url, qualifying=min_attributes):\n    tokens = urlparse(url)\n    return all(getattr(tokens, qualifying_attr)\n               for qualifying_attr in qualifying)\n</code></pre>\n<p>Here is a useage example. I prefer to do any exception handling outside of a function.</p>\n<pre><code>my_list = [\n    &quot;http://www.cwi.nl:80/%7Eguido/Python.html&quot;,\n    &quot;/data/Python.html&quot;,\n    532,\n    type(&quot;FooObject&quot;, (), {&quot;decode&quot;: None})(),\n    &quot;dkakasdkjdjakdjadjfalskdjfalk&quot;,\n    &quot;https://stackoverflow.com&quot;,\n]\n\nfor item in my_list:\n    try:\n        print(f&quot;{item} is valid: {is_valid(item)}&quot;)\n    except (AttributeError, TypeError) as e:\n        print(e)\n</code></pre>\n<p>OUTPUT:</p>\n<blockquote>\n<p><a href=\"http://www.cwi.nl:80/%7Eguido/Python.html\" rel=\"nofollow noreferrer\">http://www.cwi.nl:80/%7Eguido/Python.html</a> is valid: True</p>\n</blockquote>\n<blockquote>\n<p>/data/Python.html is valid: False</p>\n</blockquote>\n<blockquote>\n<p>'int' object has no attribute 'decode'</p>\n</blockquote>\n<blockquote>\n<p>'NoneType' object is not callable</p>\n</blockquote>\n<blockquote>\n<p>dkakasdkjdjakdjadjfalskdjfalk is valid: False</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://stackoverflow.com\">https://stackoverflow.com</a> is valid: True</p>\n</blockquote>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 256068,
                                "reputation": 4489,
                                "user_id": 536538,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "Marc Maxmeister"
                            },
                            "edited": false,
                            "score": 12,
                            "creation_date": 1470330352,
                            "post_id": 38020041,
                            "comment_id": 64918351,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment64918351_38020041",
                            "body": "I didn&#39;t know you could test an if statement with a list of non-None elements. That&#39;s helpful. Also +1 for using a built-in module"
                        },
                        {
                            "owner": {
                                "account_id": 1838370,
                                "reputation": 8376,
                                "user_id": 1668293,
                                "user_type": "registered",
                                "accept_rate": 12,
                                "display_name": "alemol"
                            },
                            "reply_to_user": {
                                "account_id": 256068,
                                "reputation": 4489,
                                "user_id": 536538,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "Marc Maxmeister"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1470410541,
                            "post_id": 38020041,
                            "comment_id": 64955744,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment64955744_38020041",
                            "body": "Empty lists maps to False in condition contexts."
                        },
                        {
                            "owner": {
                                "account_id": 7691998,
                                "reputation": 20173,
                                "user_id": 5827958,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "zondo"
                            },
                            "edited": false,
                            "score": 19,
                            "creation_date": 1476363492,
                            "post_id": 38020041,
                            "comment_id": 67320131,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment67320131_38020041",
                            "body": "This allows everything.  It returns <code>True</code> for the string <code>fake</code> or even for a blank string.  There will never be any errors because those attributes are always there, and the list will always have a boolean value of True because it contains those attributes.  Even if all of the attributes are None, the list will still be non-empty.  You need some validation of the attributes because everything passes the way you have it now."
                        },
                        {
                            "owner": {
                                "account_id": 2159164,
                                "reputation": 2786,
                                "user_id": 1913726,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "dmmfll"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1478875848,
                            "post_id": 38020041,
                            "comment_id": 68339321,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment68339321_38020041",
                            "body": "Lists of false objects evaluate to True: <code>print(&quot;I am true&quot;) if [False, None, 0, &#39;&#39;, [], {}] else print(&quot;I am false.&quot;)</code> prints &quot;I am true.&quot; when I run it. <code>[result.scheme, result.netloc, result.path]</code> always evaluates to <code>True</code>. <code>print(&quot;I am True&quot;) if [] else print(&quot;I am False.&quot;)</code> prints &quot;I am false.&quot; so empty lists are False. The contents of the array needs evaluation with something like the <code>all</code> function."
                        },
                        {
                            "owner": {
                                "account_id": 1089435,
                                "reputation": 24361,
                                "user_id": 1084416,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Peter Wood"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1508401988,
                            "post_id": 38020041,
                            "comment_id": 80598935,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment80598935_38020041",
                            "body": "I&#39;ve edited it to <code>return result.scheme and result.netloc and result.path</code> instead of doing a comparison with a non-empty list (which is always <code>True</code> as noted by others above.)"
                        },
                        {
                            "owner": {
                                "account_id": 427045,
                                "reputation": 5420,
                                "user_id": 808603,
                                "user_type": "registered",
                                "accept_rate": 73,
                                "display_name": "Jerinaw"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1560866466,
                            "post_id": 38020041,
                            "comment_id": 99871523,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment99871523_38020041",
                            "body": "Not sure why you would require a path like that. You should remove <code>result.path</code> from the test."
                        },
                        {
                            "owner": {
                                "account_id": 2627378,
                                "reputation": 129,
                                "user_id": 2274124,
                                "user_type": "registered",
                                "display_name": "Alexander Fortin"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1581577362,
                            "post_id": 38020041,
                            "comment_id": 106483333,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment106483333_38020041",
                            "body": "This is good enough for me, thanks. I just added a simple validation for <code>scheme</code>:  <code>if not all([result.scheme in [&quot;file&quot;, &quot;http&quot;, &quot;https&quot;], result.netloc, result.path]):</code>"
                        },
                        {
                            "owner": {
                                "account_id": 5789631,
                                "reputation": 345,
                                "user_id": 5447286,
                                "user_type": "registered",
                                "accept_rate": 61,
                                "display_name": "adamczi"
                            },
                            "reply_to_user": {
                                "account_id": 2627378,
                                "reputation": 129,
                                "user_id": 2274124,
                                "user_type": "registered",
                                "display_name": "Alexander Fortin"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1588929099,
                            "post_id": 38020041,
                            "comment_id": 109094489,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment109094489_38020041",
                            "body": "@AlexanderFortin, right, the <code>scheme</code> is allowed to be a whatever string here, so this check is needed. For example blocking <code>javascript:</code> could prevent XSS attacks. The best method here is to whitelist few allowed schemes, as you have done in your comment."
                        },
                        {
                            "owner": {
                                "account_id": 127944,
                                "reputation": 12963,
                                "user_id": 325452,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "ingyhere"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1593384047,
                            "post_id": 38020041,
                            "comment_id": 110754568,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment110754568_38020041",
                            "body": "Rotten algorithm. This validates malformed URIs, like <code>https:&#47;&#47;https:&#47;&#47;https:&#47;&#47;www.foo.bar</code> as <code>ParseResult(scheme=&#39;https&#39;, netloc=&#39;https:&#39;, path=&#39;&#47;&#47;https:&#47;&#47;www.foo.bar&#39;, params=&#39;&#39;, query=&#39;&#39;, fragment=&#39;&#39;)</code>. <b>IN OTHER WORDS IT PASSES MANGLED URIs.</b>"
                        },
                        {
                            "owner": {
                                "account_id": 17250523,
                                "reputation": 111,
                                "user_id": 12490791,
                                "user_type": "registered",
                                "display_name": "Lukkar"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1597423869,
                            "post_id": 38020041,
                            "comment_id": 112137701,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment112137701_38020041",
                            "body": "@alemol Can you specify what type of error is in except? <a href=\"https://docs.python.org/3/tutorial/errors.html\" rel=\"nofollow noreferrer\">docs.python.org/3/tutorial/errors.html</a>"
                        },
                        {
                            "owner": {
                                "account_id": 1174007,
                                "reputation": 8662,
                                "user_id": 1150462,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "xuhdev"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1606800015,
                            "post_id": 38020041,
                            "comment_id": 115064496,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment115064496_38020041",
                            "body": "This returns false for a file URL: <code>file:&#47;&#47;&#47;home&#47;user</code>"
                        },
                        {
                            "owner": {
                                "account_id": 6186692,
                                "reputation": 1084,
                                "user_id": 4820605,
                                "user_type": "registered",
                                "display_name": "duburcqa"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1607508444,
                            "post_id": 38020041,
                            "comment_id": 115292121,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment115292121_38020041",
                            "body": "For those who likes on-liners: <code>is_valid = all(list(urllib.parse.urlparse(url))[:2])</code>"
                        },
                        {
                            "owner": {
                                "account_id": 426922,
                                "reputation": 522,
                                "user_id": 808419,
                                "user_type": "registered",
                                "display_name": "brezniczky"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1613836457,
                            "post_id": 38020041,
                            "comment_id": 117201772,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment117201772_38020041",
                            "body": "+1 for maybe being a bit more careful with such examples ... you should really think twice before encouraging others to use &#39;catch-all&#39; exception handlers with an SO reply. Not sure what a good reference for this is, but surely you&#39;re risking hiding errors that are misinterpreted. Perhaps investigate at least what classes to watch out for?  <a href=\"https://en.wikipedia.org/wiki/Error_hiding\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Error_hiding</a>  (See jonaprieto&#39;s answer with ValueError for a possible resolution - I myself haven&#39;t verified that.)"
                        },
                        {
                            "owner": {
                                "account_id": 215417,
                                "reputation": 7752,
                                "user_id": 470062,
                                "user_type": "registered",
                                "accept_rate": 77,
                                "display_name": "tofarr"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1619468122,
                            "post_id": 38020041,
                            "comment_id": 118910465,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment118910465_38020041",
                            "body": "This returns false for urls without a path - e.g.: <a href=\"https://stackoverflow.com\">stackoverflow.com</a>"
                        },
                        {
                            "owner": {
                                "account_id": 2045145,
                                "reputation": 5184,
                                "user_id": 1825390,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "xavdid"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1625965174,
                            "post_id": 38020041,
                            "comment_id": 120767182,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#comment120767182_38020041",
                            "body": "I&#39;ve updated the example to not require a path, as that&#39;s not required"
                        }
                    ],
                    "owner": {
                        "account_id": 1838370,
                        "reputation": 8376,
                        "user_id": 1668293,
                        "user_type": "registered",
                        "accept_rate": 12,
                        "display_name": "alemol"
                    },
                    "comment_count": 15,
                    "is_accepted": false,
                    "score": 150,
                    "last_activity_date": 1709431715,
                    "last_edit_date": 1709431715,
                    "creation_date": 1466793440,
                    "answer_id": 38020041,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/38020041#38020041",
                    "body": "<p>A True or False version, based on @DMfll answer:</p>\n<pre><code>try:\n    # python2\n    from urlparse import urlparse\nexcept ModuleNotFoundError:\n    # python3\n    from urllib.parse import urlparse\n\na = 'http://www.cwi.nl:80/%7Eguido/Python.html'\nb = '/data/Python.html'\nc = 532\nd = u'dkakasdkjdjakdjadjfalskdjfalk'\ne = 'https://stackoverflow.com'\n\ndef uri_validator(x):\n    try:\n        result = urlparse(x)\n        return all([result.scheme, result.netloc])\n    except AttributeError:\n        return False\n\nprint(uri_validator(a))\nprint(uri_validator(b))\nprint(uri_validator(c))\nprint(uri_validator(d))\nprint(uri_validator(e))\n</code></pre>\n<p>Gives:</p>\n<pre><code>True\nFalse\nFalse\nFalse\nTrue\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 6790559,
                                "reputation": 115,
                                "user_id": 7313075,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "Padam Sethia"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1500026506,
                            "post_id": 45050545,
                            "comment_id": 77171579,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/45050545#comment77171579_45050545",
                            "body": "Oh , Nice catch .. I guess I have to take my code back. What do you prefer , are there any other options except regex."
                        },
                        {
                            "owner": {
                                "account_id": 203682,
                                "reputation": 13299,
                                "user_id": 451480,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "Blaise"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1540212101,
                            "post_id": 45050545,
                            "comment_id": 92768357,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/45050545#comment92768357_45050545",
                            "body": "<code>https:&#47;&#47;www.google</code> is a valid URL. It may not actually resolve, but if you care about that you need to do a DNS check."
                        },
                        {
                            "owner": {
                                "account_id": 326479,
                                "reputation": 35146,
                                "user_id": 648265,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "ivan_pozdeev"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1547096015,
                            "post_id": 45050545,
                            "comment_id": 95076118,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/45050545#comment95076118_45050545",
                            "body": "swallows exceptions"
                        }
                    ],
                    "owner": {
                        "account_id": 6790559,
                        "reputation": 115,
                        "user_id": 7313075,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "Padam Sethia"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1547889466,
                    "last_edit_date": 1547889466,
                    "creation_date": 1499842720,
                    "answer_id": 45050545,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/45050545#45050545",
                    "body": "<p><strong>EDIT</strong></p>\n\n<blockquote>\n  <p>As pointed out by @Kwame , the below code does validate the url even if the <code>.com</code> or <code>.co</code> etc are not present.</p>\n  \n  <p>also pointed out by @Blaise, URLs like <a href=\"https://www.google\" rel=\"nofollow noreferrer\">https://www.google</a> is a valid URL \n  and you need to do a DNS check for checking if it resolves or not, separately.</p>\n</blockquote>\n\n<p>This is simple and works:</p>\n\n<p>So <code>min_attr</code> contains the basic set of strings that needs to be present to define the validity of a URL,\ni.e <code>http://</code> part and <code>google.com</code> part.</p>\n\n<p><code>urlparse.scheme</code> stores <code>http://</code> and </p>\n\n<p><code>urlparse.netloc</code> store the domain name <code>google.com</code></p>\n\n<pre><code>from urlparse import urlparse\ndef url_check(url):\n\n    min_attr = ('scheme' , 'netloc')\n    try:\n        result = urlparse(url)\n        if all([result.scheme, result.netloc]):\n            return True\n        else:\n            return False\n    except:\n        return False\n</code></pre>\n\n<p><code>all()</code> returns true if all the variables inside it return true.\nSo if <code>result.scheme</code> and <code>result.netloc</code> is present i.e. has some value then the URL is valid and hence returns <code>True</code>.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 64038,
                                "reputation": 19754,
                                "user_id": 189247,
                                "user_type": "registered",
                                "accept_rate": 79,
                                "display_name": "Gaslight Deceive Subvert"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1553539036,
                            "post_id": 52455972,
                            "comment_id": 97413594,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/52455972#comment97413594_52455972",
                            "body": "It fails in case the domain name begins with a dash, which is not valid. <a href=\"https://tools.ietf.org/html/rfc952\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc952</a>"
                        },
                        {
                            "owner": {
                                "account_id": 127944,
                                "reputation": 12963,
                                "user_id": 325452,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "ingyhere"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1593384364,
                            "post_id": 52455972,
                            "comment_id": 110754642,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/52455972#comment110754642_52455972",
                            "body": "This is only good to split up components in the special case that the URI is known to <b>NOT</b> be malformed. As I replied earlier to the other similar answer, this validates malformed URIs, like <code>https:&#47;&#47;https:&#47;&#47;https:&#47;&#47;www.foo.bar</code>."
                        },
                        {
                            "owner": {
                                "account_id": 903777,
                                "reputation": 1833,
                                "user_id": 939183,
                                "user_type": "registered",
                                "display_name": "Jesuisme"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1657230954,
                            "post_id": 52455972,
                            "comment_id": 128768591,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/52455972#comment128768591_52455972",
                            "body": "As of Python 3.7.6, I tested this logic with &quot;https://-wee.com&quot; and it worked"
                        }
                    ],
                    "owner": {
                        "account_id": 1136603,
                        "reputation": 2737,
                        "user_id": 1121552,
                        "user_type": "registered",
                        "accept_rate": 67,
                        "display_name": "Jonathan Prieto-Cubides"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 38,
                    "last_activity_date": 1538731936,
                    "last_edit_date": 1538731936,
                    "creation_date": 1537613709,
                    "answer_id": 52455972,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/52455972#52455972",
                    "body": "<p>Nowadays, I use the following, based on the Padam's answer:</p>\n\n<pre><code>$ python --version\nPython 3.6.5\n</code></pre>\n\n<p>And this is how it looks:</p>\n\n<pre><code>from urllib.parse import urlparse\n\ndef is_url(url):\n  try:\n    result = urlparse(url)\n    return all([result.scheme, result.netloc])\n  except ValueError:\n    return False\n</code></pre>\n\n<p>Just use <code>is_url(\"http://www.asdf.com\")</code>.</p>\n\n<p>Hope it helps!</p>\n"
                },
                {
                    "owner": {
                        "account_id": 4226501,
                        "reputation": 14102,
                        "user_id": 3459910,
                        "user_type": "registered",
                        "accept_rate": 73,
                        "display_name": "winklerrr"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1556110953,
                    "last_edit_date": 1556110953,
                    "creation_date": 1556100877,
                    "answer_id": 55827638,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/55827638#55827638",
                    "body": "<h1>Validate URL with <code>urllib</code> and Django-like regex</h1>\n\n<p>The Django URL validation regex was actually pretty good but I needed to tweak it a little bit for my use case. <strong>Feel free to adapt it to yours!</strong></p>\n\n<h2>Python 3.7</h2>\n\n<pre><code>import re\nimport urllib\n\n# Check https://regex101.com/r/A326u1/5 for reference\nDOMAIN_FORMAT = re.compile(\n    r\"(?:^(\\w{1,255}):(.{1,255})@|^)\" # http basic authentication [optional]\n    r\"(?:(?:(?=\\S{0,253}(?:$|:))\" # check full domain length to be less than or equal to 253 (starting after http basic auth, stopping before port)\n    r\"((?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+\" # check for at least one subdomain (maximum length per subdomain: 63 characters), dashes in between allowed\n    r\"(?:[a-z0-9]{1,63})))\" # check for top level domain, no dashes allowed\n    r\"|localhost)\" # accept also \"localhost\" only\n    r\"(:\\d{1,5})?\", # port [optional]\n    re.IGNORECASE\n)\nSCHEME_FORMAT = re.compile(\n    r\"^(http|hxxp|ftp|fxp)s?$\", # scheme: http(s) or ftp(s)\n    re.IGNORECASE\n)\n\ndef validate_url(url: str):\n    url = url.strip()\n\n    if not url:\n        raise Exception(\"No URL specified\")\n\n    if len(url) &gt; 2048:\n        raise Exception(\"URL exceeds its maximum length of 2048 characters (given length={})\".format(len(url)))\n\n    result = urllib.parse.urlparse(url)\n    scheme = result.scheme\n    domain = result.netloc\n\n    if not scheme:\n        raise Exception(\"No URL scheme specified\")\n\n    if not re.fullmatch(SCHEME_FORMAT, scheme):\n        raise Exception(\"URL scheme must either be http(s) or ftp(s) (given scheme={})\".format(scheme))\n\n    if not domain:\n        raise Exception(\"No URL domain specified\")\n\n    if not re.fullmatch(DOMAIN_FORMAT, domain):\n        raise Exception(\"URL domain malformed (domain={})\".format(domain))\n\n    return url\n</code></pre>\n\n<h2>Explanation</h2>\n\n<ul>\n<li>The code only validates the <code>scheme</code> and <code>netloc</code> part of a given URL. (To do this properly, I split the URL with <code>urllib.parse.urlparse()</code> in the two according parts which are then matched with the corresponding regex terms.)</li>\n<li><p>The <code>netloc</code> part stops before the first occurrence of a slash <code>/</code>, so <code>port</code> numbers are still part of the <code>netloc</code>, e.g.: </p>\n\n<pre><code>https://www.google.com:80/search?q=python\n^^^^^   ^^^^^^^^^^^^^^^^^\n  |             |      \n  |             +-- netloc (aka \"domain\" in my code)\n  +-- scheme\n</code></pre></li>\n<li><p>IPv4 addresses are also validated</p></li>\n</ul>\n\n<h2>IPv6 Support</h2>\n\n<p>If you want the URL validator to also work with IPv6 addresses, do the following:</p>\n\n<ul>\n<li>Add <code>is_valid_ipv6(ip)</code> from <a href=\"https://stackoverflow.com/a/319293/3459910\">Markus Jarderot's answer</a>, which has a really good IPv6 validator regex</li>\n<li>Add <code>and not is_valid_ipv6(domain)</code> to the last <code>if</code></li>\n</ul>\n\n<h2>Examples</h2>\n\n<p>Here are some examples of the regex for the <code>netloc</code> (aka <code>domain</code>) part in action: </p>\n\n<ul>\n<li><strong>IPv4 and alphanumeric:</strong> <a href=\"https://regex101.com/r/A326u1/5\" rel=\"nofollow noreferrer\">https://regex101.com/r/A326u1/5</a></li>\n<li><strong>IPv6:</strong> <a href=\"https://regex101.com/r/lKIIgq/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/lKIIgq/1</a> (with the regex from <a href=\"https://stackoverflow.com/a/319293/3459910\">Markus Jarderot's answer</a>)</li>\n</ul>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 39816,
                                "reputation": 3835,
                                "user_id": 115030,
                                "user_type": "registered",
                                "display_name": "Anders Kaseorg"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1597688719,
                            "post_id": 61716290,
                            "comment_id": 112210089,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/61716290#comment112210089_61716290",
                            "body": "<a href=\"http://www.google.com/path,www.yahoo.com/path\" rel=\"nofollow noreferrer\">google.com/path,www.yahoo.com/path</a> <i>is</i> valid. See <a href=\"https://tools.ietf.org/html/rfc3986\" rel=\"nofollow noreferrer\">RFC 3986</a>: a <code>path</code> is made of <code>segment</code>s which are built from <code>pchar</code>s which may be <code>sub-delims</code> one of which is <code>&quot;,&quot;</code>."
                        },
                        {
                            "owner": {
                                "account_id": 18545397,
                                "reputation": 19,
                                "user_id": 13512893,
                                "user_type": "registered",
                                "display_name": "\u0421\u0435\u0440\u0433\u0435\u0439 \u0414\u043e\u0440\u043e\u0444\u0438\u0439"
                            },
                            "reply_to_user": {
                                "account_id": 39816,
                                "reputation": 3835,
                                "user_id": 115030,
                                "user_type": "registered",
                                "display_name": "Anders Kaseorg"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1597811158,
                            "post_id": 61716290,
                            "comment_id": 112251781,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/61716290#comment112251781_61716290",
                            "body": "Yes, the symbol &quot;,&quot; is included in the list of acceptable sub-delims, but the line from my example, even in a terrible dream, cannot be a valid url =)"
                        },
                        {
                            "owner": {
                                "account_id": 1748411,
                                "reputation": 1598,
                                "user_id": 1598080,
                                "user_type": "registered",
                                "display_name": "Iwan Aucamp"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1653128842,
                            "post_id": 61716290,
                            "comment_id": 127779067,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/61716290#comment127779067_61716290",
                            "body": "@\u0421\u0435\u0440\u0433\u0435\u0439\u0414\u043e\u0440\u043e\u0444\u0438\u0439 why not? If it is valid according to the grammar for an URI it is valid URI by definition, not sure I follow why you say it can&#39;t be valid if it contains valid characters."
                        }
                    ],
                    "owner": {
                        "account_id": 18545397,
                        "reputation": 19,
                        "user_id": 13512893,
                        "user_type": "registered",
                        "display_name": "\u0421\u0435\u0440\u0433\u0435\u0439 \u0414\u043e\u0440\u043e\u0444\u0438\u0439"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1589133175,
                    "last_edit_date": 1589133175,
                    "creation_date": 1589132815,
                    "answer_id": 61716290,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/61716290#61716290",
                    "body": "<p>All of the above solutions recognize a string like \"<a href=\"http://www.google.com/path,www.yahoo.com/path\" rel=\"nofollow noreferrer\">http://www.google.com/path,www.yahoo.com/path</a>\" as valid. This solution always works as it should</p>\n\n<pre><code>import re\n\n# URL-link validation\nip_middle_octet = u\"(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5]))\"\nip_last_octet = u\"(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))\"\n\nURL_PATTERN = re.compile(\n                        u\"^\"\n                        # protocol identifier\n                        u\"(?:(?:https?|ftp|rtsp|rtp|mmp)://)\"\n                        # user:pass authentication\n                        u\"(?:\\S+(?::\\S*)?@)?\"\n                        u\"(?:\"\n                        u\"(?P&lt;private_ip&gt;\"\n                        # IP address exclusion\n                        # private &amp; local networks\n                        u\"(?:localhost)|\"\n                        u\"(?:(?:10|127)\" + ip_middle_octet + u\"{2}\" + ip_last_octet + u\")|\"\n                        u\"(?:(?:169\\.254|192\\.168)\" + ip_middle_octet + ip_last_octet + u\")|\"\n                        u\"(?:172\\.(?:1[6-9]|2\\d|3[0-1])\" + ip_middle_octet + ip_last_octet + u\"))\"\n                        u\"|\"\n                        # IP address dotted notation octets\n                        # excludes loopback network 0.0.0.0\n                        # excludes reserved space &gt;= 224.0.0.0\n                        # excludes network &amp; broadcast addresses\n                        # (first &amp; last IP address of each class)\n                        u\"(?P&lt;public_ip&gt;\"\n                        u\"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])\"\n                        u\"\" + ip_middle_octet + u\"{2}\"\n                        u\"\" + ip_last_octet + u\")\"\n                        u\"|\"\n                        # host name\n                        u\"(?:(?:[a-z\\u00a1-\\uffff0-9_-]-?)*[a-z\\u00a1-\\uffff0-9_-]+)\"\n                        # domain name\n                        u\"(?:\\.(?:[a-z\\u00a1-\\uffff0-9_-]-?)*[a-z\\u00a1-\\uffff0-9_-]+)*\"\n                        # TLD identifier\n                        u\"(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\"\n                        u\")\"\n                        # port number\n                        u\"(?::\\d{2,5})?\"\n                        # resource path\n                        u\"(?:/\\S*)?\"\n                        # query string\n                        u\"(?:\\?\\S*)?\"\n                        u\"$\",\n                        re.UNICODE | re.IGNORECASE\n                       )\ndef url_validate(url):   \n    \"\"\" URL string validation\n    \"\"\"                                                                                                                                                      \n    return re.compile(URL_PATTERN).match(url)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 11049291,
                                "reputation": 81,
                                "user_id": 8114293,
                                "user_type": "registered",
                                "display_name": "lennihein"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1651425555,
                            "post_id": 65695825,
                            "comment_id": 127357474,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/65695825#comment127357474_65695825",
                            "body": "I needed a stricter validator than what most answers implemented - correctly formed AND with a valid TDL. You answer gave me the neccessary second part, which I combined with a regex. Thank you."
                        }
                    ],
                    "owner": {
                        "account_id": 5448431,
                        "reputation": 2271,
                        "user_id": 4334120,
                        "user_type": "registered",
                        "display_name": "Anatoly Alekseev"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1610584023,
                    "last_edit_date": 1610584023,
                    "creation_date": 1610513241,
                    "answer_id": 65695825,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/65695825#65695825",
                    "body": "<p>Not directly relevant, but often it's required to identify whether some token CAN be a url or not, not necessarily 100% correctly formed (ie, https part omitted and so on). I've read this post and did not find the solution, so I am posting my own here for the sake of completeness.</p>\n<pre><code>def get_domain_suffixes():\n    import requests\n    res=requests.get('https://publicsuffix.org/list/public_suffix_list.dat')\n    lst=set()\n    for line in res.text.split('\\n'):\n        if not line.startswith('//'):\n            domains=line.split('.')\n            cand=domains[-1]\n            if cand:\n                lst.add('.'+cand)\n    return tuple(sorted(lst))\n\ndomain_suffixes=get_domain_suffixes()\n\ndef reminds_url(txt:str):\n    &quot;&quot;&quot;\n    &gt;&gt;&gt; reminds_url('yandex.ru.com/somepath')\n    True\n    \n    &quot;&quot;&quot;\n    ltext=txt.lower().split('/')[0]\n    return ltext.startswith(('http','www','ftp')) or ltext.endswith(domain_suffixes)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1690690,
                                "reputation": 603,
                                "user_id": 1553103,
                                "user_type": "registered",
                                "accept_rate": 71,
                                "display_name": "pmiguelpinto90"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1637933927,
                            "post_id": 67099046,
                            "comment_id": 123961899,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/67099046#comment123961899_67099046",
                            "body": "error in last line fixed: <code>print(c, x.span()[1] - x.span()[0] == len(c) if (x := regex.match(c)) else False)</code>"
                        },
                        {
                            "owner": {
                                "account_id": 7053393,
                                "reputation": 686,
                                "user_id": 5401674,
                                "user_type": "registered",
                                "accept_rate": 43,
                                "display_name": "Ba\u015far S&#246;ker"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1640784849,
                            "post_id": 67099046,
                            "comment_id": 124657820,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/67099046#comment124657820_67099046",
                            "body": "Thanks Miguel, but I would like to warn others who do not use Python 3.8+ since &quot;:=&quot; is not valid for former versions."
                        },
                        {
                            "owner": {
                                "account_id": 10390652,
                                "reputation": 249,
                                "user_id": 10230104,
                                "user_type": "registered",
                                "display_name": "nickh"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1682507032,
                            "post_id": 67099046,
                            "comment_id": 134226000,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/67099046#comment134226000_67099046",
                            "body": "It doesn&#39;t match domains with hyphens, e.g <a href=\"https://api-example.com\" rel=\"nofollow noreferrer\">api-example.com</a> Consider using (\\w+://)?(\\w+\\.)?(([\\w-]+)\\.(\\w+))(\\.\\w+)*([\\w\\-\\._\\~/]*)*(?&zwnj;&#8203;&lt;!\\.)"
                        },
                        {
                            "owner": {
                                "account_id": 5433795,
                                "reputation": 1520,
                                "user_id": 4323838,
                                "user_type": "registered",
                                "display_name": "colin0117"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1691146847,
                            "post_id": 67099046,
                            "comment_id": 135455676,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/67099046#comment135455676_67099046",
                            "body": "it also doesn&#39;t match a single word, for example <code>&quot;fred&quot;</code>. it gives the error <code>AttributeError: &#39;NoneType&#39; object has no attribute &#39;span&#39;</code>"
                        },
                        {
                            "owner": {
                                "account_id": 10806652,
                                "reputation": 134,
                                "user_id": 11943334,
                                "user_type": "registered",
                                "display_name": "T&#225;wros"
                            },
                            "reply_to_user": {
                                "account_id": 5433795,
                                "reputation": 1520,
                                "user_id": 4323838,
                                "user_type": "registered",
                                "display_name": "colin0117"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1692973379,
                            "post_id": 67099046,
                            "comment_id": 135702124,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/67099046#comment135702124_67099046",
                            "body": "@colin0117, this shouldn&#39;t match a single word. I recommend checking for that edge case in your code."
                        },
                        {
                            "owner": {
                                "account_id": 5433795,
                                "reputation": 1520,
                                "user_id": 4323838,
                                "user_type": "registered",
                                "display_name": "colin0117"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1693309391,
                            "post_id": 67099046,
                            "comment_id": 135740833,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/67099046#comment135740833_67099046",
                            "body": "@T&#225;wros that&#39;s a problem though, it&#39;s not an edge case - it&#39;s an invalid URL - so the regex solution should reject it."
                        },
                        {
                            "owner": {
                                "account_id": 10806652,
                                "reputation": 134,
                                "user_id": 11943334,
                                "user_type": "registered",
                                "display_name": "T&#225;wros"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1694181130,
                            "post_id": 67099046,
                            "comment_id": 135861621,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/67099046#comment135861621_67099046",
                            "body": "No. You should have a function like this  <code>python def is_valid_url(string: str) -&gt; bool:     return regex.match(string) is not None </code>  The <code>re.Pattern.match</code> method returning None is the indicator that the string is not a valid URL. The for loop in my answer only works with valid URLs. Stick an invalid URL in the cases and it should fail."
                        }
                    ],
                    "owner": {
                        "account_id": 10806652,
                        "reputation": 134,
                        "user_id": 11943334,
                        "user_type": "registered",
                        "display_name": "T&#225;wros"
                    },
                    "comment_count": 7,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1705144290,
                    "last_edit_date": 1705144290,
                    "creation_date": 1618433980,
                    "answer_id": 67099046,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/67099046#67099046",
                    "body": "<p>Here's a regex solution since top voted regex doesn't work for weird cases like top-level domain. Some test cases down below.</p>\n<pre><code>regex = re.compile(\n    r&quot;(\\w+://)?&quot;                # protocol                      (optional)\n    r&quot;(\\w+\\.)?&quot;                 # host                          (optional)\n    r&quot;(([\\w-]+)\\.(\\w+))&quot;        # domain\n    r&quot;(\\.\\w+)*&quot;                 # top-level domain              (optional, can have &gt; 1)\n    r&quot;([\\w\\-\\._\\~/]*)*(?&lt;!\\.)&quot;  # path, params, anchors, etc.   (optional)\n)\n</code></pre>\n<pre><code>cases = [\n    &quot;http://www.google.com&quot;,\n    &quot;https://www.google.com&quot;,\n    &quot;http://google.com&quot;,\n    &quot;https://google.com&quot;,\n    &quot;www.google.com&quot;,\n    &quot;google.com&quot;,\n    &quot;http://www.google.com/~as_db3.2123/134-1a&quot;,\n    &quot;https://www.google.com/~as_db3.2123/134-1a&quot;,\n    &quot;http://google.com/~as_db3.2123/134-1a&quot;,\n    &quot;https://google.com/~as_db3.2123/134-1a&quot;,\n    &quot;www.google.com/~as_db3.2123/134-1a&quot;,\n    &quot;google.com/~as_db3.2123/134-1a&quot;,\n    # .co.uk top level\n    &quot;http://www.google.co.uk&quot;,\n    &quot;https://www.google.co.uk&quot;,\n    &quot;http://google.co.uk&quot;,\n    &quot;https://google.co.uk&quot;,\n    &quot;www.google.co.uk&quot;,\n    &quot;google.co.uk&quot;,\n    &quot;http://www.google.co.uk/~as_db3.2123/134-1a&quot;,\n    &quot;https://www.google.co.uk/~as_db3.2123/134-1a&quot;,\n    &quot;http://google.co.uk/~as_db3.2123/134-1a&quot;,\n    &quot;https://google.co.uk/~as_db3.2123/134-1a&quot;,\n    &quot;www.google.co.uk/~as_db3.2123/134-1a&quot;,\n    &quot;google.co.uk/~as_db3.2123/134-1a&quot;,\n    &quot;https://...&quot;,\n    &quot;https://..&quot;,\n    &quot;https://.&quot;,\n    &quot;https://.google.com&quot;,\n    &quot;https://..google.com&quot;,\n    &quot;https://...google.com&quot;,\n    &quot;https://.google..com&quot;,\n    &quot;https://.google...com&quot;,\n    &quot;https://...google..com&quot;,\n    &quot;https://...google...com&quot;,\n    &quot;.google.com&quot;,\n    &quot;.google.co.&quot;,\n    &quot;https://google.co.&quot;\n]\nfor c in cases:\n    if regex.match(c):\n        print(c, regex.match(c).span()[1] - regex.match(c).span()[0] == len(c))\n    else:\n        print(c, False)\n</code></pre>\n<p><em>Edit: Added hyphen to domain as suggested by nickh.</em></p>\n"
                },
                {
                    "owner": {
                        "account_id": 1690690,
                        "reputation": 603,
                        "user_id": 1553103,
                        "user_type": "registered",
                        "accept_rate": 71,
                        "display_name": "pmiguelpinto90"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": -2,
                    "last_activity_date": 1639568297,
                    "last_edit_date": 1639568297,
                    "creation_date": 1637938521,
                    "answer_id": 70126329,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/70126329#70126329",
                    "body": "<p>Function based on Dominic Tarro answer:</p>\n<pre><code>import re\ndef is_url(x):\n    return bool(re.match(\n        r&quot;(https?|ftp)://&quot; # protocol\n        r&quot;(\\w+(\\-\\w+)*\\.)?&quot; # host (optional)\n        r&quot;((\\w+(\\-\\w+)*)\\.(\\w+))&quot; # domain\n        r&quot;(\\.\\w+)*&quot; # top-level domain (optional, can have &gt; 1)\n        r&quot;([\\w\\-\\._\\~/]*)*(?&lt;!\\.)&quot; # path, params, anchors, etc. (optional)\n    , x))\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 4488481,
                        "reputation": 43,
                        "user_id": 3920248,
                        "user_type": "registered",
                        "display_name": "dxtr_brz"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1674483784,
                    "creation_date": 1674483784,
                    "answer_id": 75210834,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/75210834#75210834",
                    "body": "<p>Pydantic could be used to do that. I'm not very used to it so I can't say about it's limitations. It is an option thou and no one suggested it.</p>\n<p>I have seen that many people questioned about ftp and files URL in previous answers so I recommend to get known to the documentation as Pydantic have many types for validation as FileUrl, AnyUrl and even database url types.</p>\n<p>A simplistic usage example:</p>\n<pre><code>from requests import get, HTTPError, ConnectionError\nfrom pydantic import BaseModel, AnyHttpUrl, ValidationError\n    \nclass MyConfModel(BaseModel):\n    URI: AnyHttpUrl\n\ntry:\n    myAddress = MyConfModel(URI = &quot;http://myurl.com/&quot;)\n    req = get(myAddress.URI, verify=False)\n    print(myAddress.URI)\n\nexcept(ValidationError):\n    print('Invalid destination')\n</code></pre>\n<p>Pydantic also raises exceptions (pydantic.ValidationError) that can be used to handle errors.</p>\n<p>I have teste it with these patterns:</p>\n<ul>\n<li>http://localhost (pass)</li>\n<li>http://localhost:8080 (pass)</li>\n<li><a href=\"http://example.com\" rel=\"nofollow noreferrer\">http://example.com</a> (pass)</li>\n<li>http://user:password@example.com (pass)</li>\n<li>http://_example.com (pass)</li>\n<li><a href=\"http://&amp;example.com\" rel=\"nofollow noreferrer\">http://&amp;example.com</a> (fails)</li>\n<li><a href=\"http://-example.com\" rel=\"nofollow noreferrer\">http://-example.com</a> (fails)</li>\n</ul>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 10491815,
                                "reputation": 26510,
                                "user_id": 7733418,
                                "user_type": "registered",
                                "display_name": "Yunnosch"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1674485702,
                            "post_id": 75211205,
                            "comment_id": 132718235,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/75211205#comment132718235_75211205",
                            "body": "While this code may solve the question, <a href=\"//meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please <a href=\"https://stackoverflow.com/posts/75211205/edit\">edit</a> your answer to add explanations and give an indication of what limitations and assumptions apply."
                        },
                        {
                            "owner": {
                                "account_id": 20658998,
                                "reputation": 587,
                                "user_id": 15167371,
                                "user_type": "registered",
                                "display_name": "shamnad sherief"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1674586997,
                            "post_id": 75211205,
                            "comment_id": 132744569,
                            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/75211205#comment132744569_75211205",
                            "body": "Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75211205/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."
                        }
                    ],
                    "owner": {
                        "account_id": 27514736,
                        "reputation": 9,
                        "user_id": 20995917,
                        "user_type": "registered",
                        "display_name": "H&#224; Nguy\u1ec5n"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1674504499,
                    "last_edit_date": 1674504499,
                    "creation_date": 1674485624,
                    "answer_id": 75211205,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/75211205#75211205",
                    "body": "<pre><code>from urllib.parse import urlparse\n\ndef is_valid_url(url):\n    try:\n        result = urlparse(url)\n        return all([result.scheme, result.netloc])\n    except ValueError:\n        return False\n\nurl = 'http://google.com'\nif is_valid_url(url):\n    print('Valid URL')\nelse:\n    print('Malformed URL')\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 6208481,
                        "reputation": 1962,
                        "user_id": 4835578,
                        "user_type": "registered",
                        "display_name": "Anthony"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1680297830,
                    "last_edit_date": 1680297830,
                    "creation_date": 1680297206,
                    "answer_id": 75902783,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/75902783#75902783",
                    "body": "<p>Use this example to conduct your own meaning of an &quot;URL&quot;, and apply it everywhere in your code:</p>\n<pre class=\"lang-py prettyprint-override\"><code>#         DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n#                 Version 2, December 2004\n#\n# Copyright (C) 2004 Sam Hocevar &lt;sam@hocevar.net&gt;\n#\n# Everyone is permitted to copy and distribute verbatim or modified\n# copies of this license document, and changing it is allowed as long\n# as the name is changed.\n#\n#         DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n# TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n#\n# 0. You just DO WHAT THE FUCK YOU WANT TO.\n#\n# Copyright \u00a9 2023 Anthony anthony@example.com\n#\n# This work is free. You can redistribute it and/or modify it under the\n# terms of the Do What The Fuck You Want To Public License, Version 2,\n# as published by Sam Hocevar. See the LICENSE file for more details.\n\nimport operator as op\n\nfrom urllib.parse import (\n    ParseResult,\n    urlparse,\n)\n\nimport attrs\nimport pytest\n\nfrom phantom import Phantom\nfrom phantom.fn import compose2\n\n\ndef is_url_address(value: str) -&gt; bool:\n    return any(urlparse(value))\n\n\nclass URL(str, Phantom, predicate=is_url_address):\n    pass\n\n\n# presume that an empty URL is a nonsense\ndef test_empty_url():\n    with pytest.raises(TypeError, match=&quot;Could not parse .* from ''&quot;):\n        URL.parse(&quot;&quot;)\n\n\n# is it enough now?\ndef test_url():\n    assert URL.parse(&quot;http://&quot;)\n\n\nscheme_and_netloc = op.attrgetter(&quot;scheme&quot;, &quot;netloc&quot;)\n\n\ndef has_scheme_and_netloc(value: ParseResult) -&gt; bool:\n    return all(scheme_and_netloc(value))\n\n\n# need a bit of FP magic \ud83e\uddd9 here\nclass ReachableURL(URL, predicate=compose2(has_scheme_and_netloc, urlparse)):\n    pass\n\n\ndef test_empty_reachable_url():\n    with pytest.raises(TypeError, match=&quot;Could not parse .* from ''&quot;):\n        ReachableURL.parse(&quot;&quot;)\n\n\n# but &quot;empty&quot; for an URL is not just &quot;empty string&quot;\ndef test_reachable_url_probably_wrong_host():\n    assert ReachableURL.parse(&quot;http://example&quot;)\n\n\ndef test_reachable_url():\n    assert ReachableURL.parse(&quot;http://example.com&quot;)\n\n\ndef test_reachable_url_without_scheme():\n    with pytest.raises(TypeError, match=&quot;Could not parse .* from 'example.com'&quot;):\n        ReachableURL.parse(&quot;example.com&quot;)\n\n\n# constructor works too\ndef test_constructor():\n    assert ReachableURL(&quot;http://example.com&quot;)\n\n\n# but it *is* `str`\ndef test_url_is_str():\n    assert isinstance(ReachableURL(&quot;http://example.com&quot;), str)\n\n\n# now we can write plain old classes utilizing our `URL` and `ReachableURL`\n\n# I'm lazy...\n\n\n@attrs.define\nclass Person:\n    homepage: ReachableURL\n\n\ndef test_person():\n    person = Person(homepage=ReachableURL(&quot;https://example.com/index.html&quot;))\n\n    assert person.homepage\n\n\ndef greet(person: Person) -&gt; None:\n    print(f&quot;Hello! I will definitely visit you at {person.homepage}.&quot;)\n\n\nif __name__ == &quot;__main__&quot;:\n    greet(Person(homepage=ReachableURL.parse(&quot;tg://resolve?username&quot;)))\n</code></pre>\n<p>It will not be surprising if an URL RFC turns out to be Turing-complete!</p>\n"
                },
                {
                    "owner": {
                        "account_id": 25847384,
                        "reputation": 9,
                        "user_id": 19581978,
                        "user_type": "registered",
                        "display_name": "Manuel Marcus"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1692862052,
                    "creation_date": 1692862052,
                    "answer_id": 76967062,
                    "question_id": 7160737,
                    "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not/76967062#76967062",
                    "body": "<p>This code uses socket, so you don't need to install it, because it is a built in library. It tries to connect to the input url.</p>\n<pre><code>import socket\n\ndef isValid(url):\n    #connect to the host -- tells us if the host is actually reachable\n    try:\n        socket.create_connection((url, 80))\n        return True\n    except socket.gaierror:\n        return False\n    except OSError:\n        return False\n\nA socket.gaierror occurs if the url is not valid, and an OSErrors occurs when you are not connected.\n</code></pre>\n<p>It returns True for both &quot;https://www.google.com&quot; and &quot;google.com&quot;.</p>\n<p>If it is a problem, you can simply use this code:</p>\n<pre><code>import socket\n\ndef isValid(url):\n    if url.startswith(&quot;https://www.&quot;) or url.startswith(&quot;http://www.&quot;):\n        try:\n            socket.create_connection((url, 80))\n            return True\n        except socket.gaierror:\n            return False\n        except OSError:\n            return False\n    else:\n        return False\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 378930,
                "reputation": 44972,
                "user_id": 731963,
                "user_type": "registered",
                "accept_rate": 99,
                "display_name": "Yugal Jindle"
            },
            "comment_count": 2,
            "is_answered": true,
            "accepted_answer_id": 7160778,
            "answer_count": 17,
            "score": 232,
            "last_activity_date": 1712858410,
            "creation_date": 1314100951,
            "last_edit_date": 1633778699,
            "question_id": 7160737,
            "link": "https://stackoverflow.com/questions/7160737/how-to-validate-a-url-in-python-malformed-or-not",
            "title": "How to validate a url in Python? (Malformed or not)",
            "body": "<p>I have <code>url</code> from the user and I have to reply with the fetched HTML.</p>\n<p>How can I check for the URL to be malformed or not?</p>\n<p>For example :</p>\n<pre><code>url = 'google' # Malformed\nurl = 'google.com' # Malformed\nurl = 'http://google.com' # Valid\nurl = 'http://google' # Malformed\n</code></pre>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 6316
}