{
    "items": [
        {
            "tags": [
                "python",
                "casting"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 35417,
                        "reputation": 1089202,
                        "user_id": 100297,
                        "user_type": "moderator",
                        "display_name": "Martijn Pieters"
                    },
                    "edited": false,
                    "score": 3,
                    "creation_date": 1343902778,
                    "post_id": 11775460,
                    "comment_id": 15638651,
                    "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type#comment15638651_11775460",
                    "body": "Perhaps you should use a different format than text to store your information? Python has many <a href=\"http://docs.python.org/library/persistence.html\" rel=\"nofollow noreferrer\">data persistence options</a> available."
                },
                {
                    "owner": {
                        "account_id": 165449,
                        "reputation": 57905,
                        "user_id": 388916,
                        "user_type": "registered",
                        "accept_rate": 83,
                        "display_name": "Hubro"
                    },
                    "edited": false,
                    "score": 1,
                    "creation_date": 1343902835,
                    "post_id": 11775460,
                    "comment_id": 15638671,
                    "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type#comment15638671_11775460",
                    "body": "Adding to the above, you could store your data by pickling it. <a href=\"http://docs.python.org/library/pickle.html\" rel=\"nofollow noreferrer\">docs.python.org/library/pickle.html</a>"
                },
                {
                    "owner": {
                        "account_id": 324766,
                        "reputation": 55391,
                        "user_id": 645551,
                        "user_type": "registered",
                        "accept_rate": 93,
                        "display_name": "freakish"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1343902839,
                    "post_id": 11775460,
                    "comment_id": 15638672,
                    "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type#comment15638672_11775460",
                    "body": "One possibility is to use predefined dictionary with strings as keys and types as values. Although I recommend to refactor the code. Dynamic script loading ( which is basically what you do ) is always a problem."
                },
                {
                    "owner": {
                        "account_id": 35417,
                        "reputation": 1089202,
                        "user_id": 100297,
                        "user_type": "moderator",
                        "display_name": "Martijn Pieters"
                    },
                    "reply_to_user": {
                        "account_id": 165449,
                        "reputation": 57905,
                        "user_id": 388916,
                        "user_type": "registered",
                        "accept_rate": 83,
                        "display_name": "Hubro"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1343903051,
                    "post_id": 11775460,
                    "comment_id": 15638767,
                    "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type#comment15638767_11775460",
                    "body": "@Codemonkey: pickle is listed on the page I link to, first option. :-)"
                },
                {
                    "owner": {
                        "account_id": 165449,
                        "reputation": 57905,
                        "user_id": 388916,
                        "user_type": "registered",
                        "accept_rate": 83,
                        "display_name": "Hubro"
                    },
                    "reply_to_user": {
                        "account_id": 35417,
                        "reputation": 1089202,
                        "user_id": 100297,
                        "user_type": "moderator",
                        "display_name": "Martijn Pieters"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1343903181,
                    "post_id": 11775460,
                    "comment_id": 15638817,
                    "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type#comment15638817_11775460",
                    "body": "@MartijnPieters: I assumed as much, but I was already typing the comment and I&#39;m lazy :-P"
                },
                {
                    "owner": {
                        "account_id": 1446461,
                        "reputation": 22254,
                        "user_id": 1364752,
                        "user_type": "registered",
                        "accept_rate": 88,
                        "display_name": "Morwenn"
                    },
                    "reply_to_user": {
                        "account_id": 35417,
                        "reputation": 1089202,
                        "user_id": 100297,
                        "user_type": "moderator",
                        "display_name": "Martijn Pieters"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1343905293,
                    "post_id": 11775460,
                    "comment_id": 15639583,
                    "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type#comment15639583_11775460",
                    "body": "@MartijnPieters I would like to do so, but I have to adapt to an already existing Xml format actually; moreover, it&#39;s a requirement that files must be readable and modifiable by humans. Otherwise, it would have done so."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1446461,
                                "reputation": 22254,
                                "user_id": 1364752,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Morwenn"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1343907603,
                            "post_id": 11776132,
                            "comment_id": 15640516,
                            "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/11776132#comment15640516_11776132",
                            "body": "It seems to work, except it returns something else than the type if you give for example the name of a built-in function, say <code>next</code>. Too bad there isn&#39;t a dedicated method to do the cast in the standard library. Thanks!"
                        },
                        {
                            "owner": {
                                "account_id": 55665,
                                "reputation": 359892,
                                "user_id": 166749,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "Fred Foo"
                            },
                            "reply_to_user": {
                                "account_id": 1446461,
                                "reputation": 22254,
                                "user_id": 1364752,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Morwenn"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1343908086,
                            "post_id": 11776132,
                            "comment_id": 15640707,
                            "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/11776132#comment15640707_11776132",
                            "body": "@Morwenn: a completely general solution would be useless, since even if you could get the type, you still need to know per type how to construct an instance using it. E.g. <code>dict(&quot;{}&quot;)</code> raises an exception."
                        },
                        {
                            "owner": {
                                "account_id": 49328,
                                "reputation": 37986,
                                "user_id": 146821,
                                "user_type": "registered",
                                "accept_rate": 45,
                                "display_name": "bukzor"
                            },
                            "reply_to_user": {
                                "account_id": 1446461,
                                "reputation": 22254,
                                "user_id": 1364752,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Morwenn"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1343925317,
                            "post_id": 11776132,
                            "comment_id": 15649518,
                            "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/11776132#comment15649518_11776132",
                            "body": "@Morwenn: Please note that <code>next</code> is not the name of a type, although it is a builtin variable. It is a function, and has a <i>type</i> of <code>builtin_function_or_method</code>."
                        }
                    ],
                    "owner": {
                        "account_id": 78285,
                        "reputation": 24829,
                        "user_id": 222914,
                        "user_type": "registered",
                        "display_name": "Janne Karila"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1343905480,
                    "creation_date": 1343905480,
                    "answer_id": 11776132,
                    "question_id": 11775460,
                    "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/11776132#11776132",
                    "body": "<p>Perhaps this is what you want, it looks into builtin types only:</p>\n\n<pre><code>def gettype(name):\n    t = getattr(__builtins__, name)\n    if isinstance(t, type):\n        return t\n    raise ValueError(name)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 873453,
                                "reputation": 11133,
                                "user_id": 923794,
                                "user_type": "registered",
                                "accept_rate": 91,
                                "display_name": "cfi"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1477380518,
                            "post_id": 11781375,
                            "comment_id": 67730071,
                            "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/11781375#comment67730071_11781375",
                            "body": "Imho that&#39;s the proper way to go for user defined types. One can put the lookup table as a static var into a class, add a method <code>from_dict(self, d)</code> and/or <code>from_name(self, typename)</code> and thus define a factory class. This can easily be extended/amended/overriden by sublasses."
                        }
                    ],
                    "owner": {
                        "account_id": 15648,
                        "reputation": 56073,
                        "user_id": 33258,
                        "user_type": "registered",
                        "accept_rate": 86,
                        "display_name": "Hugh Bothwell"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 12,
                    "last_activity_date": 1343923131,
                    "creation_date": 1343923131,
                    "answer_id": 11781375,
                    "question_id": 11775460,
                    "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/11781375#11781375",
                    "body": "<p>Why not just use a look-up table?</p>\n\n<pre><code>known_types = {\n    'int': int,\n    'float': float,\n    'str': str\n    # etc\n}\n\nvar_type = known_types['int']\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1446461,
                                "reputation": 22254,
                                "user_id": 1364752,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Morwenn"
                            },
                            "edited": false,
                            "score": 4,
                            "creation_date": 1343980104,
                            "post_id": 11781721,
                            "comment_id": 15665153,
                            "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/11781721#comment15665153_11781721",
                            "body": "I&#39;m not confused at all about what I&#39;m trying to do, I was just looking for a fast standard way to do a <code>lexical_cast</code> (name of C++ Boost function for that kind of routines) between a string and a type. I didn&#39;t know about the module <code>__builtin__</code> though since I hardly ever use the reflective features of Python."
                        },
                        {
                            "owner": {
                                "account_id": 49328,
                                "reputation": 37986,
                                "user_id": 146821,
                                "user_type": "registered",
                                "accept_rate": 45,
                                "display_name": "bukzor"
                            },
                            "reply_to_user": {
                                "account_id": 1446461,
                                "reputation": 22254,
                                "user_id": 1364752,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Morwenn"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1344224493,
                            "post_id": 11781721,
                            "comment_id": 15715968,
                            "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/11781721#comment15715968_11781721",
                            "body": "The closest thing you can get to casting string to type in python is to find the class by name. <code>__builtin__</code> is not involved in that case. If what you want is to get builtin variables by name, then <code>getattr(__builtin__)</code> is it. In any case, your question doesn&#39;t match the chosen answer."
                        }
                    ],
                    "owner": {
                        "account_id": 49328,
                        "reputation": 37986,
                        "user_id": 146821,
                        "user_type": "registered",
                        "accept_rate": 45,
                        "display_name": "bukzor"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 14,
                    "last_activity_date": 1343924968,
                    "last_edit_date": 1343924968,
                    "creation_date": 1343924343,
                    "answer_id": 11781721,
                    "question_id": 11775460,
                    "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/11781721#11781721",
                    "body": "<p>You're a bit confused on what you're trying to do. Types, also known as classes, are objects, like everything else in python. When you write <code>int</code> in your programs, you're referencing a global variable called <code>int</code> which happens to be a class. What you're trying to do is not \"cast string to type\", it's accessing builtin variables by name. </p>\n\n<p>Once you understand that, the solution is easy to see:</p>\n\n<pre><code>def get_builtin(name):\n    return getattr(__builtins__, name)\n</code></pre>\n\n<hr>\n\n<p>If you <em>really</em> wanted to turn a type name into a type object, here's how you'd do it. I use <code>deque</code> to do a breadth-first tree traversal without recursion.</p>\n\n<pre><code>def gettype(name):\n    from collections import deque\n    # q is short for \"queue\", here\n    q = deque([object])\n    while q:\n        t = q.popleft()\n        if t.__name__ == name:\n            return t\n        else:\n            print 'not', t\n\n        try:\n            # Keep looking!\n            q.extend(t.__subclasses__())\n        except TypeError:\n            # type.__subclasses__ needs an argument, for whatever reason.\n            if t is type:\n                continue\n            else:\n                raise\n    else:\n        raise ValueError('No such type: %r' % name)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1446461,
                                "reputation": 22254,
                                "user_id": 1364752,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Morwenn"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1430396077,
                            "post_id": 29831586,
                            "comment_id": 48054497,
                            "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/29831586#comment48054497_29831586",
                            "body": "Hum, that&#39;s an interesting one, even though it only works with fully-qualified names (which isn&#39;t a problem per se). It seems poorly documented though. Do you have any link providing more information about it?"
                        },
                        {
                            "owner": {
                                "account_id": 2285526,
                                "reputation": 1691,
                                "user_id": 2009581,
                                "user_type": "registered",
                                "display_name": "dannymac"
                            },
                            "reply_to_user": {
                                "account_id": 1446461,
                                "reputation": 22254,
                                "user_id": 1364752,
                                "user_type": "registered",
                                "accept_rate": 88,
                                "display_name": "Morwenn"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1432330385,
                            "post_id": 29831586,
                            "comment_id": 48900016,
                            "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/29831586#comment48900016_29831586",
                            "body": "Wow, it <i>is</i> poorly documented!  The closest link I could find was this: <a href=\"http://epydoc.sourceforge.net/stdlib/pydoc-module.html\" rel=\"nofollow noreferrer\">epydoc.sourceforge.net/stdlib/pydoc-module.html</a>.  I recommend just looking at the source instead."
                        }
                    ],
                    "owner": {
                        "account_id": 2285526,
                        "reputation": 1691,
                        "user_id": 2009581,
                        "user_type": "registered",
                        "display_name": "dannymac"
                    },
                    "comment_count": 2,
                    "is_accepted": true,
                    "score": 68,
                    "last_activity_date": 1429813769,
                    "creation_date": 1429813769,
                    "answer_id": 29831586,
                    "question_id": 11775460,
                    "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/29831586#29831586",
                    "body": "<p>I like using <code>locate</code>, which works on built-in types:</p>\n\n<pre><code>&gt;&gt;&gt; from pydoc import locate\n&gt;&gt;&gt; locate('int')\n&lt;type 'int'&gt;\n&gt;&gt;&gt; t = locate('int')\n&gt;&gt;&gt; t('1')\n1\n</code></pre>\n\n<p>...as well as anything it can find in the path:</p>\n\n<pre><code>&gt;&gt;&gt; locate('datetime.date')\n&lt;type 'datetime.date'&gt;\n&gt;&gt;&gt; d = locate('datetime.date')\n&gt;&gt;&gt; d(2015, 4, 23)\ndatetime.date(2015, 4, 23)\n</code></pre>\n\n<p>...including your custom types:</p>\n\n<pre><code>&gt;&gt;&gt; locate('mypackage.model.base.BaseModel')\n&lt;class 'mypackage.model.base.BaseModel'&gt;\n&gt;&gt;&gt; m = locate('mypackage.model.base.BaseModel')\n&gt;&gt;&gt; m()\n&lt;mypackage.model.base.BaseModel object at 0x1099f6c10&gt;\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 12488109,
                        "reputation": 3491,
                        "user_id": 9439097,
                        "user_type": "registered",
                        "display_name": "charelf"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1678897623,
                    "last_edit_date": 1678897623,
                    "creation_date": 1678897282,
                    "answer_id": 75747418,
                    "question_id": 11775460,
                    "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type/75747418#75747418",
                    "body": "<p>For custom types that you defined yourself, you can replace <code>eval</code> by using the <code>globals</code> dict as follows:</p>\n<pre class=\"lang-py prettyprint-override\"><code>class Hey():\n    pass\n\nhey_type = globals().get(&quot;Hey&quot;)\n\nhey_instance_1 = Hey()\nhey_instance_2 = hey_type()\n\nprint(type(hey_instance_1))\nprint(type(hey_instance_2))\n</code></pre>\n<p>printing</p>\n<pre class=\"lang-py prettyprint-override\"><code>&lt;class '__main__.Hey'&gt;\n&lt;class '__main__.Hey'&gt;\n</code></pre>\n<p>Maybe this also works for primitive types like <code>int</code> etc but they are not in the globals dict from what I can tell.</p>\n<hr />\n<p>I can combine my answer with the other answer above to handle primitives:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def evaluate_type(name: str):\n    t = globals().get(name)\n    if t:\n        return t\n    else:\n        try:\n            t = getattr(__builtins__, name)\n            if isinstance(t, type):\n                return t\n            else:\n                raise ValueError(name)\n        except:\n            raise ValueError(name)\n\n\nevaluate_type(&quot;int&quot;)\n\nevaluate_type(&quot;Hey&quot;)\n</code></pre>\n"
                }
            ],
            "owner": {
                "account_id": 1446461,
                "reputation": 22254,
                "user_id": 1364752,
                "user_type": "registered",
                "accept_rate": 88,
                "display_name": "Morwenn"
            },
            "comment_count": 6,
            "is_answered": true,
            "accepted_answer_id": 29831586,
            "answer_count": 5,
            "score": 46,
            "last_activity_date": 1678897623,
            "creation_date": 1343902658,
            "last_edit_date": 1344857917,
            "question_id": 11775460,
            "link": "https://stackoverflow.com/questions/11775460/lexical-cast-from-string-to-type",
            "title": "Lexical cast from string to type",
            "body": "<p>Recently, I was trying to store and read information from files in Python, and came across a slight problem: I wanted to read type information from text files. Type casting from string to int or to float is quite efficient, but type casting from string to type seems to be another problem. Naturally, I tried something like this:</p>\n\n<pre><code>var_type = type('int')\n</code></pre>\n\n<p>However, <code>type</code> isn't used as a cast but as a mechanism to find the type of the variable, which is actually <code>str</code> here.</p>\n\n<p>I found a way to do it with:</p>\n\n<pre><code>var_type = eval('int')\n</code></pre>\n\n<p>But I generally try to avoid functions/statements like <code>eval</code> or <code>exec</code> where I can. So my question is the following: Is there another pythonic (and more specific) way to cast a string to a type?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 6317
}