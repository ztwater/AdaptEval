{
    "items": [
        {
            "tags": [
                "c++",
                "algorithm",
                "graph",
                "ford-fulkerson",
                "edmonds-karp"
            ],
            "comments": [
                {
                    "owner": {
                        "account_id": 8465999,
                        "reputation": 573,
                        "user_id": 6350151,
                        "user_type": "registered",
                        "display_name": "Damien Prot"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1470727040,
                    "post_id": 38843963,
                    "comment_id": 65053648,
                    "link": "https://stackoverflow.com/questions/38843963/why-must-back-edges-be-taken-into-account-in-edmonds-karp-maximum-flow#comment65053648_38843963",
                    "body": "Just to be sure to understand well, does it mean that when you take an arc in the reverse way, you do not update the value of the flow on this arc ?"
                },
                {
                    "owner": {
                        "account_id": 3096747,
                        "reputation": 3409,
                        "user_id": 3887393,
                        "user_type": "registered",
                        "accept_rate": 72,
                        "display_name": "xyz"
                    },
                    "reply_to_user": {
                        "account_id": 8465999,
                        "reputation": 573,
                        "user_id": 6350151,
                        "user_type": "registered",
                        "display_name": "Damien Prot"
                    },
                    "edited": false,
                    "score": 0,
                    "creation_date": 1470727317,
                    "post_id": 38843963,
                    "comment_id": 65053834,
                    "link": "https://stackoverflow.com/questions/38843963/why-must-back-edges-be-taken-into-account-in-edmonds-karp-maximum-flow#comment65053834_38843963",
                    "body": "@DamienProt I had this idea that instead of iterating through the residual graph,  I go through only the original adjacency list. So I never visit any back edge, and saw no point updating any."
                }
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3096747,
                                "reputation": 3409,
                                "user_id": 3887393,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "xyz"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1470727705,
                            "post_id": 38844471,
                            "comment_id": 65054095,
                            "link": "https://stackoverflow.com/questions/38843963/why-must-back-edges-be-taken-into-account-in-edmonds-karp-maximum-flow/38844471#comment65054095_38844471",
                            "body": "BFS discovers shortest paths first (number of edges). It will grab the two 10 flow paths first,  and the 1 weight edge won&#39;t be considered. I just ran my code with your graph and the max flow is indeed 20."
                        },
                        {
                            "owner": {
                                "account_id": 8465999,
                                "reputation": 573,
                                "user_id": 6350151,
                                "user_type": "registered",
                                "display_name": "Damien Prot"
                            },
                            "reply_to_user": {
                                "account_id": 3096747,
                                "reputation": 3409,
                                "user_id": 3887393,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "xyz"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1470728257,
                            "post_id": 38844471,
                            "comment_id": 65054402,
                            "link": "https://stackoverflow.com/questions/38843963/why-must-back-edges-be-taken-into-account-in-edmonds-karp-maximum-flow/38844471#comment65054402_38844471",
                            "body": "@prakharsingh95 : I completely agree with the answer of Ami Tavory, it does not make sense to forget about back edges."
                        },
                        {
                            "owner": {
                                "account_id": 3096747,
                                "reputation": 3409,
                                "user_id": 3887393,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "xyz"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1470728669,
                            "post_id": 38844471,
                            "comment_id": 65054616,
                            "link": "https://stackoverflow.com/questions/38843963/why-must-back-edges-be-taken-into-account-in-edmonds-karp-maximum-flow/38844471#comment65054616_38844471",
                            "body": "Sorry,  I was on mobile and somehow missed it. Indeed you are correct. In fact,  @ead gave the same example. From what I understand, this means that when there is are longer paths with bigger net flow than a short path, which shares edges with them it becomes necessary to to add back edges."
                        },
                        {
                            "owner": {
                                "account_id": 3096747,
                                "reputation": 3409,
                                "user_id": 3887393,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "xyz"
                            },
                            "reply_to_user": {
                                "account_id": 8465999,
                                "reputation": 573,
                                "user_id": 6350151,
                                "user_type": "registered",
                                "display_name": "Damien Prot"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1470728753,
                            "post_id": 38844471,
                            "comment_id": 65054662,
                            "link": "https://stackoverflow.com/questions/38843963/why-must-back-edges-be-taken-into-account-in-edmonds-karp-maximum-flow/38844471#comment65054662_38844471",
                            "body": "@DamienProt Yeah, back edges are important. I just couldn&#39;t figure out why!"
                        },
                        {
                            "owner": {
                                "account_id": 2693395,
                                "reputation": 820,
                                "user_id": 2326106,
                                "user_type": "registered",
                                "accept_rate": 67,
                                "display_name": "mBrice1024"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1555516445,
                            "post_id": 38844471,
                            "comment_id": 98141920,
                            "link": "https://stackoverflow.com/questions/38843963/why-must-back-edges-be-taken-into-account-in-edmonds-karp-maximum-flow/38844471#comment98141920_38844471",
                            "body": "I might be crazy, but couldn&#39;t we collapse any series of nodes with one incoming and one outgoing into one node with the min of the set of the original edges? For ex: A - (5) -&gt; B - (4) -&gt; C - (5) -&gt; D can be reduced to A - (4) -&gt; D"
                        }
                    ],
                    "owner": {
                        "account_id": 4295573,
                        "reputation": 75645,
                        "user_id": 3510736,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "Ami Tavory"
                    },
                    "comment_count": 5,
                    "is_accepted": true,
                    "score": 7,
                    "last_activity_date": 1470727818,
                    "last_edit_date": 1470727818,
                    "creation_date": 1470727237,
                    "answer_id": 38844471,
                    "question_id": 38843963,
                    "link": "https://stackoverflow.com/questions/38843963/why-must-back-edges-be-taken-into-account-in-edmonds-karp-maximum-flow/38844471#38844471",
                    "body": "<p>Consider the following flow network\n<a href=\"https://i.stack.imgur.com/1R1dv.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1R1dv.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Suppose the first flow is <em>s &rarr; u &rarr; v &rarr; t</em>. (If you object that that the BFS of Edmonds-Karp would never choose this, then augment the graph with some more vertices between <em>s</em> and <em>v</em> and between <em>u</em> and <em>t</em>).</p>\n\n<p>Without reversing flow <em>u &rarr; v</em>, it is impossible to obtain the optimal flow of 20.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 7607199,
                        "reputation": 33774,
                        "user_id": 5769463,
                        "user_type": "registered",
                        "accept_rate": 93,
                        "display_name": "ead"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 6,
                    "last_activity_date": 1539155995,
                    "last_edit_date": 1539155995,
                    "creation_date": 1470727692,
                    "answer_id": 38844603,
                    "question_id": 38843963,
                    "link": "https://stackoverflow.com/questions/38843963/why-must-back-edges-be-taken-into-account-in-edmonds-karp-maximum-flow/38844603#38844603",
                    "body": "<p>try out the following case:</p>\n\n<pre><code>int main() {\n    Digraph&lt;int&gt; g(8);\n    g.addEdge(0,1,1);\n    g.addEdge(1,2,1);\n    g.addEdge(2,4,1);\n    g.addEdge(0,3,1);\n    g.addEdge(3,4,1);\n    g.addEdge(4,7,1);\n    g.addEdge(3,5,1);\n    g.addEdge(5,6,1);\n    g.addEdge(6,7,1);\n\n    cout&lt;&lt;g.maxFlowEdmondsKarp(0,7);\n\n    return 0;\n}\n</code></pre>\n\n<p>Visualization:\n<a href=\"https://i.stack.imgur.com/5Zktk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Zktk.png\" alt=\"enter image description here\"></a></p>\n\n<p>your program takes the shortest way <code>0-3-4-7</code> first and has then no chance to find <code>0-1-2-4-7</code> and <code>0-3-5-6-7</code>. You get 1 but 2 would be the right answer.</p>\n\n<p>Would you have inserted the back-edge, then you would find the following paths:</p>\n\n<ol>\n<li><code>0-3-4-7</code></li>\n<li><code>0-1-2-4-3(back-edge!)-5-6-7</code>, getting the max flow 2.</li>\n</ol>\n"
                }
            ],
            "owner": {
                "account_id": 3096747,
                "reputation": 3409,
                "user_id": 3887393,
                "user_type": "registered",
                "accept_rate": 72,
                "display_name": "xyz"
            },
            "comment_count": 2,
            "is_answered": true,
            "accepted_answer_id": 38844471,
            "answer_count": 2,
            "score": 8,
            "last_activity_date": 1539155995,
            "creation_date": 1470725434,
            "last_edit_date": 1470759201,
            "question_id": 38843963,
            "link": "https://stackoverflow.com/questions/38843963/why-must-back-edges-be-taken-into-account-in-edmonds-karp-maximum-flow",
            "title": "Why must back-edges be taken into account in Edmonds-Karp Maximum Flow?",
            "body": "<p>I was trying to implement <a href=\"https://en.wikipedia.org/wiki/Edmonds%E2%80%93Karp_algorithm\" rel=\"noreferrer\"><strong>Edmonds-Karp</strong></a> in C++ for maximum flow, and I wrote it slightly differently:</p>\n\n<ol>\n<li>Instead of going through all edges in residual graph, I only went through the edges that are present in the original graph, using the adjacency list.</li>\n<li>I did not update any back-edges when updating the residual graph with min flow.</li>\n</ol>\n\n<p>Interestingly, when I ran my code, it gave me correct results. So I went to <a href=\"https://en.wikipedia.org/wiki/Edmonds%E2%80%93Karp_algorithm#Example\" rel=\"noreferrer\">Wikipedia's example</a>, where it <em>specifically show how a back-edge is being used</em>. When I fed this graph to my code, <em>I got the correct answer again</em>.\nI also checked the <em>resultant flow matrix</em>, and it was identical to Wikipedia's.</p>\n\n<p>Can someone explain why we must <em>add and update back-edges</em>, and maybe give an example where they are critical?</p>\n\n<p><a href=\"https://github.com/prakharsingh95/Graph-Implementations/blob/master/src/max_flow_ford_fulkerson.cpp\" rel=\"noreferrer\">Here</a>'s the code that I wrote (updated to include back edges):</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 8879
}