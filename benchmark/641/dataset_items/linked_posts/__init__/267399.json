{
    "items": [
        {
            "tags": [
                "regex",
                "roman-numerals"
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 8291,
                                "reputation": 869801,
                                "user_id": 14860,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "paxdiablo"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1269484886,
                            "post_id": 267405,
                            "comment_id": 2509101,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment2509101_267405",
                            "body": "Possibly. I can see only inferences in the question that it needs to go up to 3999 (not a specific definite requirement) but I allow it up to 4999 anyway. If you truly want to restrict it to 3999 then by all means remove one of the Ms."
                        },
                        {
                            "owner": {
                                "account_id": 60738,
                                "reputation": 10315,
                                "user_id": 181337,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "Facundo Casco"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1320186822,
                            "post_id": 267405,
                            "comment_id": 9750605,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment9750605_267405",
                            "body": "any solution to avoid matching the empty string?"
                        },
                        {
                            "owner": {
                                "account_id": 8291,
                                "reputation": 869801,
                                "user_id": 14860,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "paxdiablo"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1320191921,
                            "post_id": 267405,
                            "comment_id": 9751569,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment9751569_267405",
                            "body": "Yes, you can use one of those lookahead things if your regex engine supports it, or you can just check that the length is greater than zero."
                        },
                        {
                            "owner": {
                                "account_id": 1423187,
                                "reputation": 9936,
                                "user_id": 1347366,
                                "user_type": "registered",
                                "accept_rate": 84,
                                "display_name": "Green goblin"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1340968757,
                            "post_id": 267405,
                            "comment_id": 14802316,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment14802316_267405",
                            "body": "BTW 4000 is not MMMM, its IV(bar). see here if you are really interested: <a href=\"http://scienceray.com/mathematics/roman-numerals-3501-to-4000/\" rel=\"nofollow noreferrer\">scienceray.com/mathematics/roman-numerals-3501-to-4000</a>"
                        },
                        {
                            "owner": {
                                "account_id": 8291,
                                "reputation": 869801,
                                "user_id": 14860,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "paxdiablo"
                            },
                            "reply_to_user": {
                                "account_id": 1423187,
                                "reputation": 9936,
                                "user_id": 1347366,
                                "user_type": "registered",
                                "accept_rate": 84,
                                "display_name": "Green goblin"
                            },
                            "edited": false,
                            "score": 12,
                            "creation_date": 1373854703,
                            "post_id": 267405,
                            "comment_id": 25696028,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment25696028_267405",
                            "body": "@Aashish: When the Romans were a force to be reckoned with, <code>MMMM</code> was the correct way. The overbar representation came long after the core empire fell to pieces."
                        },
                        {
                            "owner": {
                                "account_id": 400295,
                                "reputation": 664,
                                "user_id": 766200,
                                "user_type": "registered",
                                "accept_rate": 56,
                                "display_name": "amIT"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1407613200,
                            "post_id": 267405,
                            "comment_id": 39286150,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment39286150_267405",
                            "body": "@paxdiablo   there is  certain problem even  if  we  make m{0,3} .. in that  regex  shall  fail  for MMMCM  which  is    correct denotation for 3900  and as it is  now it  falsely validates  4000 :(. check this  website  it  gives the  accurate  conversion,  what  regex  are they  using  i  wonder. <a href=\"http://bmanolov.free.fr/arabic2roman.php\" rel=\"nofollow noreferrer\">bmanolov.free.fr/arabic2roman.php</a>"
                        },
                        {
                            "owner": {
                                "account_id": 8291,
                                "reputation": 869801,
                                "user_id": 14860,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "paxdiablo"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1407622324,
                            "post_id": 267405,
                            "comment_id": 39288330,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment39288330_267405",
                            "body": "Mmmcm won&#39;t fail, it uses the mmm from the first subsection and cm from the second. And it doesn&#39;t falsely validate 4000, it only goes up to x999 where x is dictated by the initial m-count. The question itself imposed no restrictions on the range other than an implied minimum."
                        },
                        {
                            "owner": {
                                "account_id": 400295,
                                "reputation": 664,
                                "user_id": 766200,
                                "user_type": "registered",
                                "accept_rate": 56,
                                "display_name": "amIT"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1407679676,
                            "post_id": 267405,
                            "comment_id": 39299293,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment39299293_267405",
                            "body": "@paxdiablo this is how i  found  mmmcm  fails.  String regx = &quot;^M{0,3}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$&quot;; if(input.matches(regx)) -&gt;  this  evalulates to false  for MMMCM / MMMM in java."
                        },
                        {
                            "owner": {
                                "account_id": 8291,
                                "reputation": 869801,
                                "user_id": 14860,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "paxdiablo"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1407685814,
                            "post_id": 267405,
                            "comment_id": 39301072,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment39301072_267405",
                            "body": "Mmmm won&#39;t work with that regex since you only have 0,3 in your m section. Mmmcm should work fine, I vaguely remember checking all possibilities when I originally wrote the code. I&#39;ll check it when I get access to a box running Java, I&#39;m currently in Vegas after attending DefCon and won&#39;t be back in Oz for another week."
                        },
                        {
                            "owner": {
                                "account_id": 5118919,
                                "reputation": 454,
                                "user_id": 4103172,
                                "user_type": "registered",
                                "accept_rate": 80,
                                "display_name": "Bernardo Santana"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1460385473,
                            "post_id": 267405,
                            "comment_id": 60704177,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment60704177_267405",
                            "body": "this would also match IIII ! what if I only want the traditionally accepted numerals"
                        },
                        {
                            "owner": {
                                "account_id": 8291,
                                "reputation": 869801,
                                "user_id": 14860,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "paxdiablo"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1460419039,
                            "post_id": 267405,
                            "comment_id": 60722915,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment60722915_267405",
                            "body": "Bernardo, it won&#39;t match IIII since the {0,3} clause prevents that."
                        },
                        {
                            "owner": {
                                "account_id": 3589744,
                                "reputation": 1029,
                                "user_id": 3002699,
                                "user_type": "registered",
                                "display_name": "Crissov"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1553865068,
                            "post_id": 267405,
                            "comment_id": 97555278,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment97555278_267405",
                            "body": "<code>&#47;^M{0,3}(?:C[MD]|D?C{0,3})(?:X[CL]|L?X{0,3})(?:I[XV]|V?I{0,3&zwnj;&#8203;})$&#47;i</code>"
                        },
                        {
                            "owner": {
                                "user_type": "does_not_exist",
                                "display_name": "user12097764"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1576178325,
                            "post_id": 267405,
                            "comment_id": 104824832,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment104824832_267405",
                            "body": "Given the modern world of Unicode, how can you rewrite this regex to match given the code range <code>[\\x{2160}-\\x{2188}]]</code> or <code>[\u2160\u2161\u2162\u2163\u2164\u2165\u2166\u2167\u2168\u2169\u216a\u216b\u216c\u216d\u216e\u216f\u2170\u2171\u2172\u2173\u2174\u2175\u2176\u2177\u2178\u2179\u217a\u217b\u217c\u217d\u217e\u217f\u2180\u2181\u2182\u2183\u2184\u2185\u2186\u2187\u2188]</code>"
                        },
                        {
                            "owner": {
                                "account_id": 8291,
                                "reputation": 869801,
                                "user_id": 14860,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "paxdiablo"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1581471513,
                            "post_id": 267405,
                            "comment_id": 106442312,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment106442312_267405",
                            "body": "@x15, that sounds worthy of a <i>different</i> question!"
                        },
                        {
                            "owner": {
                                "account_id": 6266229,
                                "reputation": 118,
                                "user_id": 4871886,
                                "user_type": "registered",
                                "display_name": "Raghu Kumar"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1591312044,
                            "post_id": 267405,
                            "comment_id": 110016574,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment110016574_267405",
                            "body": "This answer doesn&#39;t work for input &quot;MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMCDLXXV&zwnj;&#8203;I&quot; which is a valid representation for 53476."
                        },
                        {
                            "owner": {
                                "account_id": 8291,
                                "reputation": 869801,
                                "user_id": 14860,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "paxdiablo"
                            },
                            "reply_to_user": {
                                "account_id": 6266229,
                                "reputation": 118,
                                "user_id": 4871886,
                                "user_type": "registered",
                                "display_name": "Raghu Kumar"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1591353623,
                            "post_id": 267405,
                            "comment_id": 110029862,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment110029862_267405",
                            "body": "@RaghuKumar, you need to learn to <i>read.</i> It won&#39;t work because, as stated in the answer quite clearly, the <code>M</code> section is limited to 4000. If you want to handle ridiculously large numbers like that, simply change the <code>M{0,4}</code> into <code>M*</code>."
                        },
                        {
                            "owner": {
                                "account_id": 2562953,
                                "reputation": 4187,
                                "user_id": 2223706,
                                "user_type": "registered",
                                "accept_rate": 73,
                                "display_name": "Garrett"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1603921301,
                            "post_id": 267405,
                            "comment_id": 114192902,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment114192902_267405",
                            "body": "Can we go from 2 lookarounds to 1 by just having a positive lookahead like this:  <code>^(?=\\w)M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3}&zwnj;&#8203;)$</code>"
                        },
                        {
                            "owner": {
                                "account_id": 20016172,
                                "reputation": 2598,
                                "user_id": 14672114,
                                "user_type": "registered",
                                "display_name": "RARE Kpop Manifesto"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1695541974,
                            "post_id": 267405,
                            "comment_id": 136036310,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment136036310_267405",
                            "body": "i think this still fails the empty string"
                        },
                        {
                            "owner": {
                                "account_id": 8291,
                                "reputation": 869801,
                                "user_id": 14860,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "paxdiablo"
                            },
                            "reply_to_user": {
                                "account_id": 20016172,
                                "reputation": 2598,
                                "user_id": 14672114,
                                "user_type": "registered",
                                "display_name": "RARE Kpop Manifesto"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1695589948,
                            "post_id": 267405,
                            "comment_id": 136041096,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment136041096_267405",
                            "body": "@RAREKpopManifesto: you are indeed right, I can&#39;t believe no-one&#39;s picked that up for three and a half years. <i>Especially</i> me :-) I&#39;ve modified the regex to fix that (and tested it this time), and provided some more explanation on how it works."
                        },
                        {
                            "owner": {
                                "account_id": 8291,
                                "reputation": 869801,
                                "user_id": 14860,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "paxdiablo"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1695599892,
                            "post_id": 267405,
                            "comment_id": 136041797,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment136041797_267405",
                            "body": "Further to the comment from Raghu, while <code>MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMCDLXXVI</code> <i>may</i> be considered a valid number, it almost certainly would not have been used - numbers were primarily for trade and probably wouldn&#39;t have needed something that high. It also goes against the general principal of avoiding letter grouping of more than three. I believe later systems used a vinculum (overbars) to indicate a factor of 1000. Hence 53476  would have been <code>(LIII)CDVXXVI</code>, if you imagine the parenthesised bit having a horizontal line above it."
                        },
                        {
                            "owner": {
                                "account_id": 20016172,
                                "reputation": 2598,
                                "user_id": 14672114,
                                "user_type": "registered",
                                "display_name": "RARE Kpop Manifesto"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1695670233,
                            "post_id": 267405,
                            "comment_id": 136052873,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#comment136052873_267405",
                            "body": "@paxdiablo : i suppose roman numerals is definitely a case where pairing <code>regex</code> with a simple up-front check for non-empty input is a lot cleaner approach than a purely <code>regex</code> one."
                        }
                    ],
                    "owner": {
                        "account_id": 8291,
                        "reputation": 869801,
                        "user_id": 14860,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "paxdiablo"
                    },
                    "comment_count": 21,
                    "is_accepted": true,
                    "score": 383,
                    "last_activity_date": 1695589761,
                    "last_edit_date": 1695589761,
                    "creation_date": 1225935341,
                    "answer_id": 267405,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267405#267405",
                    "body": "<p>You can use the following regex for this:</p>\n<pre><code>^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$\n</code></pre>\n<p>Breaking it down, <code>M{0,4}</code> specifies the thousands section and basically restrains it to between <code>0</code> and <code>4000</code>. It's a relatively simple:</p>\n<pre><code>   0: &lt;empty&gt;  matched by M{0}\n1000: M        matched by M{1}\n2000: MM       matched by M{2}\n3000: MMM      matched by M{3}\n4000: MMMM     matched by M{4}\n</code></pre>\n<p>You could, of course, use something like <code>M*</code> to allow <em>any</em> number (including zero) of thousands, if you want to allow bigger numbers.</p>\n<p>Next is <code>(CM|CD|D?C{0,3})</code>, slightly more complex, this is for the hundreds section and covers all the possibilities:</p>\n<pre><code>  0: &lt;empty&gt;  matched by D?C{0} (with D not there)\n100: C        matched by D?C{1} (with D not there)\n200: CC       matched by D?C{2} (with D not there)\n300: CCC      matched by D?C{3} (with D not there)\n400: CD       matched by CD\n500: D        matched by D?C{0} (with D there)\n600: DC       matched by D?C{1} (with D there)\n700: DCC      matched by D?C{2} (with D there)\n800: DCCC     matched by D?C{3} (with D there)\n900: CM       matched by CM\n</code></pre>\n<p>Thirdly, <code>(XC|XL|L?X{0,3})</code> follows the same rules as previous section but for the tens place:</p>\n<pre><code> 0: &lt;empty&gt;  matched by L?X{0} (with L not there)\n10: X        matched by L?X{1} (with L not there)\n20: XX       matched by L?X{2} (with L not there)\n30: XXX      matched by L?X{3} (with L not there)\n40: XL       matched by XL\n50: L        matched by L?X{0} (with L there)\n60: LX       matched by L?X{1} (with L there)\n70: LXX      matched by L?X{2} (with L there)\n80: LXXX     matched by L?X{3} (with L there)\n90: XC       matched by XC\n</code></pre>\n<p>And, finally, <code>(IX|IV|V?I{0,3})</code> is the units section, handling <code>0</code> through <code>9</code> and also similar to the previous two sections (Roman numerals, despite their seeming weirdness, follow some logical rules once you figure out what they are):</p>\n<pre><code>0: &lt;empty&gt;  matched by V?I{0} (with V not there)\n1: I        matched by V?I{1} (with V not there)\n2: II       matched by V?I{2} (with V not there)\n3: III      matched by V?I{3} (with V not there)\n4: IV       matched by IV\n5: V        matched by V?I{0} (with V there)\n6: VI       matched by V?I{1} (with V there)\n7: VII      matched by V?I{2} (with V there)\n8: VIII     matched by V?I{3} (with V there)\n9: IX       matched by IX\n</code></pre>\n<hr />\n<p>Just keep in mind that that regex will also match an empty string. If you don't want this (and your regex engine is modern enough), you can use positive look-ahead:</p>\n<pre><code>^(?=.)M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$\n</code></pre>\n<p>This is a &quot;check to match but discard&quot; operation, meaning it looks ahead to check that the first character exists (<code>.</code>) after the start marker (<code>^</code>) but doesn't absorb that first character. For example, if the string was <code>M</code>, that would match the <code>.</code> but still be available for the next section of the regex, <code>M{0,4}</code>. However, the empty string would not match the look-ahead so would fail.</p>\n<p>Another alternative, if you are not restricted to <em>just</em> a regex, would be to check that the length is not zero beforehand.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1494446881,
                            "post_id": 267409,
                            "comment_id": 74837540,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267409#comment74837540_267409",
                            "body": "Starting with <code>thousands hundreds tens units</code>, it is easy to <a href=\"http://stackoverflow.com/a/43884420/4279\">create a FSM that computes and <i>validates</i> given Roman numerals</a>"
                        },
                        {
                            "owner": {
                                "account_id": 1585470,
                                "reputation": 5759,
                                "user_id": 1469954,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "NedStarkOfWinterfell"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1506695558,
                            "post_id": 267409,
                            "comment_id": 79936544,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267409#comment79936544_267409",
                            "body": "What do you mean by <b>Fortunately, the range of numbers is limited to 1..3999 or thereabouts</b>? Who limited it?"
                        },
                        {
                            "owner": {
                                "account_id": 8423,
                                "reputation": 743638,
                                "user_id": 15168,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Jonathan Leffler"
                            },
                            "reply_to_user": {
                                "account_id": 1585470,
                                "reputation": 5759,
                                "user_id": 1469954,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "NedStarkOfWinterfell"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1506697777,
                            "post_id": 267409,
                            "comment_id": 79938020,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267409#comment79938020_267409",
                            "body": "@SexyBeast: There isn\u2019t any standard Roman notation for 5,000, let alone bigger numbers, so the regularities that work up to then stop working."
                        },
                        {
                            "owner": {
                                "account_id": 87334,
                                "reputation": 12019,
                                "user_id": 242241,
                                "user_type": "registered",
                                "accept_rate": 48,
                                "display_name": "AmbroseChapel"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1546051674,
                            "post_id": 267409,
                            "comment_id": 94770545,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267409#comment94770545_267409",
                            "body": "Not sure why you believe that, but Roman numerals can represent numbers into the millions. <a href=\"https://en.wikipedia.org/wiki/Roman_numerals#Large_numbers\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Roman_numerals#Large_numbers</a>"
                        },
                        {
                            "owner": {
                                "account_id": 8423,
                                "reputation": 743638,
                                "user_id": 15168,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Jonathan Leffler"
                            },
                            "reply_to_user": {
                                "account_id": 87334,
                                "reputation": 12019,
                                "user_id": 242241,
                                "user_type": "registered",
                                "accept_rate": 48,
                                "display_name": "AmbroseChapel"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1546056680,
                            "post_id": 267409,
                            "comment_id": 94771108,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267409#comment94771108_267409",
                            "body": "@AmbroseChapel: As I stated, there isn&#39;t any (single) standard notation for 5,000, let alone bigger numbers.  You have to use one of a number of divergent systems as outlined in the Wikipedia article you link to, and you face problems with the orthography for the system with overbars, underbars, or reversed C etc.  And you will have to explain to anyone what system you&#39;re using and what it means; people will not, in general, recognize the Roman numerals beyond M.  You may choose to think otherwise; that is your prerogative, just as it is my prerogative to stand by my previous comments."
                        }
                    ],
                    "owner": {
                        "account_id": 8423,
                        "reputation": 743638,
                        "user_id": 15168,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Jonathan Leffler"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1226041434,
                    "last_edit_date": 1226041434,
                    "creation_date": 1225935378,
                    "answer_id": 267409,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267409#267409",
                    "body": "<p>Fortunately, the range of numbers is limited to 1..3999 or thereabouts.  Therefore, you can build up the regex piece-meal.</p>\n\n<pre><code>&lt;opt-thousands-part&gt;&lt;opt-hundreds-part&gt;&lt;opt-tens-part&gt;&lt;opt-units-part&gt;\n</code></pre>\n\n<p>Each of those parts will deal with the vagaries of Roman notation.  For example, using Perl notation:</p>\n\n<pre><code>&lt;opt-hundreds-part&gt; = m/(CM|DC{0,3}|CD|C{1,3})?/;\n</code></pre>\n\n<p>Repeat and assemble.</p>\n\n<p><em>Added</em>: The <code>&lt;opt-hundreds-part&gt;</code> can be compressed further:</p>\n\n<pre><code>&lt;opt-hundreds-part&gt; = m/(C[MD]|D?C{0,3})/;\n</code></pre>\n\n<p>Since the 'D?C{0,3}' clause can match nothing, there's no need for the question mark.  And, most likely, the parentheses should be the non-capturing type - in Perl:</p>\n\n<pre><code>&lt;opt-hundreds-part&gt; = m/(?:C[MD]|D?C{0,3})/;\n</code></pre>\n\n<p>Of course, it should all be case-insensitive, too.</p>\n\n<p>You can also extend this to deal with the options mentioned by James Curran (to allow XM or IM for 990 or 999, and CCCC for 400, etc).</p>\n\n<pre><code>&lt;opt-hundreds-part&gt; = m/(?:[IXC][MD]|D?C{0,4})/;\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2388,
                                "reputation": 31602,
                                "user_id": 3314,
                                "user_type": "registered",
                                "accept_rate": 74,
                                "display_name": "Daniel Magliola"
                            },
                            "edited": false,
                            "score": 10,
                            "creation_date": 1225940610,
                            "post_id": 267430,
                            "comment_id": 122817,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267430#comment122817_267430",
                            "body": "Sure, that&#39;s cool. But my &quot;strict third grade teacher&quot; syntax need makes a much more interesting regex problem, in my opinion..."
                        },
                        {
                            "owner": {
                                "account_id": 115078,
                                "reputation": 2457,
                                "user_id": 302306,
                                "user_type": "registered",
                                "display_name": "Corin"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1336090785,
                            "post_id": 267430,
                            "comment_id": 13479194,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267430#comment13479194_267430",
                            "body": "Good point James, one ought to be a strict author but a forgiving reader."
                        },
                        {
                            "owner": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "reply_to_user": {
                                "account_id": 115078,
                                "reputation": 2457,
                                "user_id": 302306,
                                "user_type": "registered",
                                "display_name": "Corin"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1494365235,
                            "post_id": 267430,
                            "comment_id": 74795269,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267430#comment74795269_267430",
                            "body": "@Corin: aka <a href=\"http://ironick.typepad.com/ironick/2005/05/my_history_of_t.html\" rel=\"nofollow noreferrer\">Postel&#39;s robustness principle</a>"
                        }
                    ],
                    "owner": {
                        "account_id": 7342,
                        "reputation": 102801,
                        "user_id": 12725,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "James Curran"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 28,
                    "last_activity_date": 1225944572,
                    "last_edit_date": 1225944572,
                    "creation_date": 1225936296,
                    "answer_id": 267430,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/267430#267430",
                    "body": "<p>Actually, your premise is flawed.  990 <strong>IS</strong> \"XM\", as well as \"CMXC\".</p>\n\n<p>The Romans were far less concerned about the \"rules\" than your third grade teacher.  As long as it added up, it was OK.  Hence \"IIII\" was just as good as \"IV\" for 4.  And \"IIM\" was completely cool for 998.</p>\n\n<p>(If you have trouble dealing with that... Remember English spellings were not formalized until the 1700s.  Until then, as long as the reader could figure it out, it was good enough).</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 115539,
                                "reputation": 431,
                                "user_id": 303348,
                                "user_type": "registered",
                                "accept_rate": 75,
                                "display_name": "DirtY iCE"
                            },
                            "edited": false,
                            "score": 6,
                            "creation_date": 1312846854,
                            "post_id": 5326535,
                            "comment_id": 8341687,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/5326535#comment8341687_5326535",
                            "body": "that one won&#39;t work (unless you&#39;re using a very weird regex implementation) -- the left part of the <code>|</code> can match an empty string and all valid roman numerals, so the right side is completely redundant. and yes, it still matches an empty string."
                        },
                        {
                            "owner": {
                                "account_id": 8291,
                                "reputation": 869801,
                                "user_id": 14860,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "paxdiablo"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1436690223,
                            "post_id": 5326535,
                            "comment_id": 50711789,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/5326535#comment50711789_5326535",
                            "body": "&quot;The problem of the solution from Jeremy and Pax is&quot; ... exactly the same as the problem this answer has. If you&#39;re going to propose a solution to a supposed problem, you probably should test it. :-)"
                        },
                        {
                            "owner": {
                                "account_id": 1705550,
                                "reputation": 18636,
                                "user_id": 1564659,
                                "user_type": "registered",
                                "accept_rate": 72,
                                "display_name": "Aminah Nuraini"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1461667866,
                            "post_id": 5326535,
                            "comment_id": 61292736,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/5326535#comment61292736_5326535",
                            "body": "I got empty string with this"
                        }
                    ],
                    "owner": {
                        "account_id": 335509,
                        "reputation": 1040,
                        "user_id": 662635,
                        "user_type": "registered",
                        "display_name": "Marvin Frommhold"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": -1,
                    "last_activity_date": 1300284761,
                    "creation_date": 1300284761,
                    "answer_id": 5326535,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/5326535#5326535",
                    "body": "<p>The problem of the solution from Jeremy and Pax is, that it does also match \"nothing\".</p>\n\n<p>The following regex expects at least one roman numeral:</p>\n\n<pre><code>^(M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})|[IDCXMLV])$\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 108496,
                                "reputation": 13558,
                                "user_id": 287948,
                                "user_type": "registered",
                                "accept_rate": 64,
                                "display_name": "Peter Krauss"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1415736043,
                            "post_id": 10441405,
                            "comment_id": 42304904,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/10441405#comment42304904_10441405",
                            "body": "I have similar problem (!): to do a &quot;left trim&quot; of remaining/residual roman number of a item list (HTML OL of type I or i). So, when there are remaining, I need to clean (like a trim function) with your regex at the beginning (left) of the item-text... But more simple: items never use <code>M</code> or <code>C</code> or <code>L</code>, so, do you have this kind of simplified regex?"
                        },
                        {
                            "owner": {
                                "account_id": 108496,
                                "reputation": 13558,
                                "user_id": 287948,
                                "user_type": "registered",
                                "accept_rate": 64,
                                "display_name": "Peter Krauss"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1415737298,
                            "post_id": 10441405,
                            "comment_id": 42305507,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/10441405#comment42305507_10441405",
                            "body": "... ok, here it seems ok (!), <code>(X{1,3}(IX|IV|V?I{0,3})|X{0,3}(IX|I?V|V?I{1,3}))</code>"
                        },
                        {
                            "owner": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1494446955,
                            "post_id": 10441405,
                            "comment_id": 74837573,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/10441405#comment74837573_10441405",
                            "body": "you don&#39;t need to repeat the pattern, to reject empty strings. You could <a href=\"http://ideone.com/c9xfNS\" rel=\"nofollow noreferrer\">use a lookahead assertion</a>"
                        },
                        {
                            "owner": {
                                "account_id": 11409530,
                                "reputation": 388,
                                "user_id": 9089759,
                                "user_type": "registered",
                                "display_name": "Alice M."
                            },
                            "reply_to_user": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1656488708,
                            "post_id": 10441405,
                            "comment_id": 128582058,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/10441405#comment128582058_10441405",
                            "body": "@jfs Some programs, like <code>sed</code>, do not support lookahead, so a \u201craw\u201d solution like that one is very welcome as an alternative."
                        }
                    ],
                    "owner": {
                        "account_id": 115078,
                        "reputation": 2457,
                        "user_id": 302306,
                        "user_type": "registered",
                        "display_name": "Corin"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 13,
                    "last_activity_date": 1336096834,
                    "last_edit_date": 1336096834,
                    "creation_date": 1336093660,
                    "answer_id": 10441405,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/10441405#10441405",
                    "body": "<p>To avoid matching the empty string you'll need to repeat the pattern four times and replace each <code>0</code> with a <code>1</code> in turn, and account for <code>V</code>, <code>L</code> and <code>D</code>:</p>\n\n<pre><code>(M{1,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})|M{0,4}(CM|C?D|D?C{1,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})|M{0,4}(CM|CD|D?C{0,3})(XC|X?L|L?X{1,3})(IX|IV|V?I{0,3})|M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|I?V|V?I{1,3}))\n</code></pre>\n\n<p>In this case (because this pattern uses <code>^</code> and <code>$</code>) you would be better off checking for empty lines first and don't bother matching them. If you are using <a href=\"http://www.regular-expressions.info/wordboundaries.html\">word boundaries</a> then you don't have a problem because there's no such thing as an empty word. (At least regex doesn't define one; don't start philosophising, I'm being pragmatic here!)</p>\n\n<hr>\n\n<p>In my own particular (real world) case I needed match numerals at word endings and I found no other way around it. I needed to scrub off the footnote numbers from my plain text document, where text such as \"the Red Sea<sup>cl</sup> and the Great Barrier Reef<sup>cli</sup>\" had been converted to <code>the Red Seacl and the Great Barrier Reefcli</code>. But I still had problems with valid words like <code>Tahiti</code> and <code>fantastic</code> are scrubbed into <code>Tahit</code> and <code>fantasti</code>.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 48869,
                        "reputation": 85713,
                        "user_id": 145346,
                        "user_type": "registered",
                        "accept_rate": 95,
                        "display_name": "Mottie"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1403465193,
                    "creation_date": 1403465193,
                    "answer_id": 24354880,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/24354880#24354880",
                    "body": "<p>Steven Levithan uses this regex in <a href=\"http://blog.stevenlevithan.com/archives/javascript-roman-numeral-converter\" rel=\"nofollow\">his post</a> which validates roman numerals prior to \"deromanizing\" the value:</p>\n\n<pre><code>/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3021,
                                "reputation": 408304,
                                "user_id": 4279,
                                "user_type": "registered",
                                "accept_rate": 94,
                                "display_name": "jfs"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1494446581,
                            "post_id": 26669245,
                            "comment_id": 74837406,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/26669245#comment74837406_26669245",
                            "body": "the regex in the answer permits empty numerals. If you don&#39;t want it; you could <a href=\"http://ideone.com/c9xfNS\" rel=\"nofollow noreferrer\">use a lookahead assertion</a>, to reject empty strings (it also ignores the case of the letters)."
                        }
                    ],
                    "owner": {
                        "account_id": 1097219,
                        "reputation": 219323,
                        "user_id": 1090562,
                        "user_type": "registered",
                        "accept_rate": 78,
                        "display_name": "Salvador Dali"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 7,
                    "last_activity_date": 1414739896,
                    "last_edit_date": 1414739896,
                    "creation_date": 1414739477,
                    "answer_id": 26669245,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/26669245#26669245",
                    "body": "<pre><code>import re\npattern = '^M{0,3}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$'\nif re.search(pattern, 'XCCMCI'):\n    print 'Valid Roman'\nelse:\n    print 'Not valid Roman'\n</code></pre>\n\n<p>For people who really want to understand the logic, please take a look at a step by step explanation on 3 pages on <a href=\"http://www.diveintopython.net/regular_expressions/roman_numerals.html\" rel=\"noreferrer\">diveintopython</a>.</p>\n\n<p>The only difference from original solution (which had <code>M{0,4}</code>) is because I found that 'MMMM' is not a valid Roman numeral (also old Romans most probably have not thought about that huge number and will disagree with me). If you are one of disagreing old Romans, please forgive me and use {0,4} version.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 4802967,
                        "reputation": 65,
                        "user_id": 3879027,
                        "user_type": "registered",
                        "display_name": "Vince Ypma"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": -2,
                    "last_activity_date": 1420113916,
                    "last_edit_date": 1420113916,
                    "creation_date": 1420113554,
                    "answer_id": 27730606,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/27730606#27730606",
                    "body": "<p>I would write functions to my work for me.\nHere are two roman numeral functions in PowerShell.</p>\n\n<pre><code>function ConvertFrom-RomanNumeral\n{\n  &lt;#\n    .SYNOPSIS\n        Converts a Roman numeral to a number.\n    .DESCRIPTION\n        Converts a Roman numeral - in the range of I..MMMCMXCIX - to a number.\n    .EXAMPLE\n        ConvertFrom-RomanNumeral -Numeral MMXIV\n    .EXAMPLE\n        \"MMXIV\" | ConvertFrom-RomanNumeral\n  #&gt;\n    [CmdletBinding()]\n    [OutputType([int])]\n    Param\n    (\n        [Parameter(Mandatory=$true,\n                   HelpMessage=\"Enter a roman numeral in the range I..MMMCMXCIX\",\n                   ValueFromPipeline=$true,\n                   Position=0)]\n        [ValidatePattern(\"^M{0,3}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$\")]\n        [string]\n        $Numeral\n    )\n\n    Begin\n    {\n        $RomanToDecimal = [ordered]@{\n            M  = 1000\n            CM =  900\n            D  =  500\n            CD =  400\n            C  =  100\n            XC =   90\n            L  =   50\n            X  =   10\n            IX =    9\n            V  =    5\n            IV =    4\n            I  =    1\n        }\n    }\n    Process\n    {\n        $roman = $Numeral + \" \"\n        $value = 0\n\n        do\n        {\n            foreach ($key in $RomanToDecimal.Keys)\n            {\n                if ($key.Length -eq 1)\n                {\n                    if ($key -match $roman.Substring(0,1))\n                    {\n                        $value += $RomanToDecimal.$key\n                        $roman  = $roman.Substring(1)\n                        break\n                    }\n                }\n                else\n                {\n                    if ($key -match $roman.Substring(0,2))\n                    {\n                        $value += $RomanToDecimal.$key\n                        $roman  = $roman.Substring(2)\n                        break\n                    }\n                }\n            }\n        }\n        until ($roman -eq \" \")\n\n        $value\n    }\n    End\n    {\n    }\n}\n\nfunction ConvertTo-RomanNumeral\n{\n  &lt;#\n    .SYNOPSIS\n        Converts a number to a Roman numeral.\n    .DESCRIPTION\n        Converts a number - in the range of 1 to 3,999 - to a Roman numeral.\n    .EXAMPLE\n        ConvertTo-RomanNumeral -Number (Get-Date).Year\n    .EXAMPLE\n        (Get-Date).Year | ConvertTo-RomanNumeral\n  #&gt;\n    [CmdletBinding()]\n    [OutputType([string])]\n    Param\n    (\n        [Parameter(Mandatory=$true,\n                   HelpMessage=\"Enter an integer in the range 1 to 3,999\",\n                   ValueFromPipeline=$true,\n                   Position=0)]\n        [ValidateRange(1,3999)]\n        [int]\n        $Number\n    )\n\n    Begin\n    {\n        $DecimalToRoman = @{\n            Ones      = \"\",\"I\",\"II\",\"III\",\"IV\",\"V\",\"VI\",\"VII\",\"VIII\",\"IX\";\n            Tens      = \"\",\"X\",\"XX\",\"XXX\",\"XL\",\"L\",\"LX\",\"LXX\",\"LXXX\",\"XC\";\n            Hundreds  = \"\",\"C\",\"CC\",\"CCC\",\"CD\",\"D\",\"DC\",\"DCC\",\"DCCC\",\"CM\";\n            Thousands = \"\",\"M\",\"MM\",\"MMM\"\n        }\n\n        $column = @{Thousands = 0; Hundreds = 1; Tens = 2; Ones = 3}\n    }\n    Process\n    {\n        [int[]]$digits = $Number.ToString().PadLeft(4,\"0\").ToCharArray() |\n                            ForEach-Object { [Char]::GetNumericValue($_) }\n\n        $RomanNumeral  = \"\"\n        $RomanNumeral += $DecimalToRoman.Thousands[$digits[$column.Thousands]]\n        $RomanNumeral += $DecimalToRoman.Hundreds[$digits[$column.Hundreds]]\n        $RomanNumeral += $DecimalToRoman.Tens[$digits[$column.Tens]]\n        $RomanNumeral += $DecimalToRoman.Ones[$digits[$column.Ones]]\n\n        $RomanNumeral\n    }\n    End\n    {\n    }\n}\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 936860,
                                "reputation": 193,
                                "user_id": 965647,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "orlando2bjr"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1491481917,
                            "post_id": 36576402,
                            "comment_id": 73579178,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/36576402#comment73579178_36576402",
                            "body": "I don&#39;t know why, but the main answer didn&#39;t work for me in autotranslate lists in MemoQ. However, this solution does - excluding string start/end symbols though."
                        },
                        {
                            "owner": {
                                "account_id": 72591,
                                "reputation": 1588,
                                "user_id": 209557,
                                "user_type": "registered",
                                "display_name": "smileart"
                            },
                            "reply_to_user": {
                                "account_id": 936860,
                                "reputation": 193,
                                "user_id": 965647,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "orlando2bjr"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1494088664,
                            "post_id": 36576402,
                            "comment_id": 74684030,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/36576402#comment74684030_36576402",
                            "body": "@orlando2bjr glad to help. Yeah, in this case I was matching a number on its own, without surroundings. If you look for it in a text, sure you&#39;d need to remove ^$. Cheers!"
                        },
                        {
                            "owner": {
                                "account_id": 8674322,
                                "reputation": 734,
                                "user_id": 6492146,
                                "user_type": "registered",
                                "accept_rate": 82,
                                "display_name": "Verty00"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1603979097,
                            "post_id": 36576402,
                            "comment_id": 114211265,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/36576402#comment114211265_36576402",
                            "body": "How would I make this match on anywhere in a block of text. This will only match if the line contains only chars for the numeral"
                        },
                        {
                            "owner": {
                                "account_id": 72591,
                                "reputation": 1588,
                                "user_id": 209557,
                                "user_type": "registered",
                                "display_name": "smileart"
                            },
                            "reply_to_user": {
                                "account_id": 8674322,
                                "reputation": 734,
                                "user_id": 6492146,
                                "user_type": "registered",
                                "accept_rate": 82,
                                "display_name": "Verty00"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1604969592,
                            "post_id": 36576402,
                            "comment_id": 114504385,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/36576402#comment114504385_36576402",
                            "body": "@Verty00 See previous comment"
                        },
                        {
                            "owner": {
                                "account_id": 1255174,
                                "reputation": 71226,
                                "user_id": 1214800,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "brandonscript"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1617302392,
                            "post_id": 36576402,
                            "comment_id": 118273770,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/36576402#comment118273770_36576402",
                            "body": "Here&#39;s the same one with non-capture groups to clean up the result a little better. You can also use word boundaries <code>\\b</code> and even another non-capture group on the outside if you want (<code>?:</code>) <code>(\\b(?=[MDCLXVI])M*(?:C[MD]|D?C{0,3})(?:X[CL]|L?X{0,3})(?:I[X&zwnj;&#8203;V]|V?I{0,3})\\b)</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 72591,
                        "reputation": 1588,
                        "user_id": 209557,
                        "user_type": "registered",
                        "display_name": "smileart"
                    },
                    "comment_count": 5,
                    "is_accepted": false,
                    "score": 21,
                    "last_activity_date": 1460471632,
                    "creation_date": 1460471632,
                    "answer_id": 36576402,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/36576402#36576402",
                    "body": "<p>Just to save it here:</p>\n\n<pre><code>(^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$)\n</code></pre>\n\n<p>Matches all the Roman numerals. Doesn't care about empty strings (requires at least one Roman numeral letter). Should work in PCRE, Perl, Python and Ruby.</p>\n\n<p>Online Ruby demo: <a href=\"http://rubular.com/r/KLPR1zq3Hj\" rel=\"noreferrer\">http://rubular.com/r/KLPR1zq3Hj</a></p>\n\n<p>Online Conversion: <a href=\"http://www.onlineconversion.com/roman_numerals_advanced.htm\" rel=\"noreferrer\">http://www.onlineconversion.com/roman_numerals_advanced.htm</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 11265035,
                                "reputation": 2092,
                                "user_id": 8262102,
                                "user_type": "registered",
                                "display_name": "Ste"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1595796774,
                            "post_id": 53895776,
                            "comment_id": 111591324,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/53895776#comment111591324_53895776",
                            "body": "Try <code>text = &quot;I&#39;m RULES OF LIFE: I. STAY CURIOUS; II. NEVER STOP LEARNING&quot; </code> with this and it&#39;ll output <code>ROMAN&#39;m RULES OF LIFE: ROMAN. STAY CURIOUS; ROMAN. NEVER STOP LEARNING</code>"
                        },
                        {
                            "owner": {
                                "account_id": 379232,
                                "reputation": 2658,
                                "user_id": 732456,
                                "user_type": "registered",
                                "accept_rate": 60,
                                "display_name": "user732456"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1618398790,
                            "post_id": 53895776,
                            "comment_id": 118588098,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/53895776#comment118588098_53895776",
                            "body": "This is what is working for me in javascript as well."
                        }
                    ],
                    "owner": {
                        "account_id": 121058,
                        "reputation": 61,
                        "user_id": 2936263,
                        "user_type": "registered",
                        "display_name": "user2936263"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1545482740,
                    "creation_date": 1545482740,
                    "answer_id": 53895776,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/53895776#53895776",
                    "body": "<p>In my case, I was trying to find and replace all occurences of roman numbers by one word inside the text, so I couldn't use the start and end of lines. So the @paxdiablo solution found many zero-length matches.\nI ended up with the following expression:</p>\n\n<pre><code>(?=\\b[MCDXLVI]{1,6}\\b)M{0,4}(?:CM|CD|D?C{0,3})(?:XC|XL|L?X{0,3})(?:IX|IV|V?I{0,3})\n</code></pre>\n\n<p>My final Python code was like this:</p>\n\n<pre><code>import re\ntext = \"RULES OF LIFE: I. STAY CURIOUS; II. NEVER STOP LEARNING\"\ntext = re.sub(r'(?=\\b[MCDXLVI]{1,6}\\b)M{0,4}(?:CM|CD|D?C{0,3})(?:XC|XL|L?X{0,3})(?:IX|IV|V?I{0,3})', 'ROMAN', text)\nprint(text)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>RULES OF LIFE: ROMAN. STAY CURIOUS; ROMAN. NEVER STOP LEARNING\n</code></pre>\n"
                },
                {
                    "owner": {
                        "user_type": "does_not_exist",
                        "display_name": "user12097764"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1576176605,
                    "creation_date": 1576176605,
                    "answer_id": 59311062,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/59311062#59311062",
                    "body": "<p>Im answering this question <a href=\"https://stackoverflow.com/questions/59310128/regular-expression-in-python-for-roman-numerals\">Regular Expression in Python for Roman Numerals</a> here<br>\nbecause it was marked as an exact duplicate of this question.  </p>\n\n<p>It might be similar in name, but this is a specific regex question / problem<br>\nas can be seen by this answer to that question.  </p>\n\n<p>The items being sought can be combined into a single alternation and then<br>\nencased inside a capture group that will be put into a list with the findall()<br>\nfunction.<br>\nIt is done like this :   </p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; target = (\n... r\"this should pass v\" + \"\\n\"\n... r\"this is a test iii\" + \"\\n\"\n... )\n&gt;&gt;&gt;\n&gt;&gt;&gt; re.findall( r\"(?m)\\s(i{1,3}v*|v)$\", target )\n['v', 'iii']\n</code></pre>\n\n<p>The regex modifications to factor and capture just the numerals are this :  </p>\n\n<pre><code> (?m)\n \\s \n (                     # (1 start)\n      i{1,3} \n      v* \n   |  v\n )                     # (1 end)\n $\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 9514544,
                        "reputation": 1,
                        "user_id": 7071412,
                        "user_type": "registered",
                        "display_name": "ketenks"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1583016063,
                    "last_edit_date": 1583016063,
                    "creation_date": 1582947384,
                    "answer_id": 60461765,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/60461765#60461765",
                    "body": "<p>This works in Java and PCRE regex engines and should now work in the latest JavaScript but may not work in all contexts.</p>\n\n<p><code>(?&lt;![A-Z])(M*(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3}))(?![A-Z])</code></p>\n\n<p>The first part is the atrocious negative lookbehind. But, for logical purposes it is the easiest to understand. Basically, the first <code>(?&lt;!)</code> is saying don't match the middle <code>([MATCH])</code> if there are letters coming before the middle <code>([MATCH])</code> and the last <code>(?!)</code> is saying don't match the middle <code>([MATCH])</code> if there are letters coming after it.</p>\n\n<p>The middle <code>([MATCH])</code> is just the most commonly used regex for matching the sequence of Roman Numerals. But now, you don't want to match that if there are any letters around it.</p>\n\n<p>See for yourself.\n<a href=\"https://regexr.com/4vce5\" rel=\"nofollow noreferrer\">https://regexr.com/4vce5</a></p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 1255174,
                                "reputation": 71226,
                                "user_id": 1214800,
                                "user_type": "registered",
                                "accept_rate": 81,
                                "display_name": "brandonscript"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1617301586,
                            "post_id": 60469651,
                            "comment_id": 118273480,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/60469651#comment118273480_60469651",
                            "body": "I like this a lot. It&#39;s longer, but seems more performant as well. To reduce the complexity of the result, you can use non-capture groups: <code>(?:I[VX]|VI{0,3}|I{1,3})|(?:(X[LC]|LX{0,3}|X{1,3})(?:I[VX]|V&zwnj;&#8203;?I{0,3}))|(?:(?:C[DM&zwnj;&#8203;]|DC{0,3}|C{1,3})(?:&zwnj;&#8203;X[LC]|L?X{0,3})(?:I[&zwnj;&#8203;VX]|V?I{0,3}))|(?:M+&zwnj;&#8203;(?:C[DM]|D?C{0,3})(?&zwnj;&#8203;:X[LC]|L?X{0,3})(?:I&zwnj;&#8203;[VX]|V?I{0,3}))</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 9999378,
                        "reputation": 4194,
                        "user_id": 7395911,
                        "user_type": "registered",
                        "display_name": "Bernardo Duarte"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1583010772,
                    "creation_date": 1583010772,
                    "answer_id": 60469651,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/60469651#60469651",
                    "body": "<p>I've seen multiple answers that doesn't cover empty strings or uses lookaheads to solve this. And I want to add a new answer that does cover empty strings and doesn't use lookahead. The regex is the following one:</p>\n\n<p><code>^(I[VX]|VI{0,3}|I{1,3})|((X[LC]|LX{0,3}|X{1,3})(I[VX]|V?I{0,3}))|((C[DM]|DC{0,3}|C{1,3})(X[LC]|L?X{0,3})(I[VX]|V?I{0,3}))|(M+(C[DM]|D?C{0,3})(X[LC]|L?X{0,3})(I[VX]|V?I{0,3}))$</code></p>\n\n<p>I'm allowing for infinite <code>M</code>, with <code>M+</code> but of course someone could change to <code>M{1,4}</code> to allow only 1 or 4 if desired.</p>\n\n<p>Below is a visualization that helps to understand what it is doing, preceded by two online demos:</p>\n\n<p><a href=\"https://www.debuggex.com/r/zuVcMMzMYq-RsXMA\" rel=\"nofollow noreferrer\">Debuggex Demo</a></p>\n\n<p><a href=\"https://regex101.com/r/7mw0Pe/1/\" rel=\"nofollow noreferrer\">Regex 101 Demo</a></p>\n\n<p><img src=\"https://www.debuggex.com/i/zuVcMMzMYq-RsXMA.png\" alt=\"Regular expression visualization\"></p>\n"
                },
                {
                    "owner": {
                        "account_id": 7066403,
                        "reputation": 1138,
                        "user_id": 5409601,
                        "user_type": "registered",
                        "accept_rate": 33,
                        "display_name": "Rafayet Ullah"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1599470909,
                    "creation_date": 1599470909,
                    "answer_id": 63774849,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/63774849#63774849",
                    "body": "<p>The following expression worked for me  to validate the roman number.</p>\n<pre><code>^M{0,4}(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$\n</code></pre>\n<p>Here,</p>\n<ul>\n<li><code>M{0,4}</code> will match thousands</li>\n<li><code>C[MD]|D?C{0,3}</code> will match Hundreds</li>\n<li><code>X[CL]|L?X{0,3}</code> will match Tens</li>\n<li><code>I[XV]|V?I{0,3}</code> will match Units</li>\n</ul>\n<p>Below is a visualization that helps to understand what it is doing, preceded by two online demos:</p>\n<p><a href=\"https://www.debuggex.com/r/Sf3WDxwcjtYHUZ1L\" rel=\"nofollow noreferrer\">Debuggex Demo</a></p>\n<p><a href=\"https://regex101.com/r/5atuBs/1\" rel=\"nofollow noreferrer\">Regex 101 Demo</a></p>\n<p>Python Code:</p>\n<pre><code>import re\nregex = re.compile(&quot;^M{0,4}(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$&quot;)\nmatchArray = regex.match(&quot;MMMCMXCIX&quot;)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 12959671,
                        "reputation": 63,
                        "user_id": 10001863,
                        "user_type": "registered",
                        "display_name": "Pigeo"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1600888165,
                    "creation_date": 1600888165,
                    "answer_id": 64034764,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/64034764#64034764",
                    "body": "<p>The <strong>positive</strong> look-behind and look-ahead suggested by @paxdiablo in order to avoid matching empty strings seems not working to me.</p>\n<p>I have fixed it by using <strong>negative</strong> look-ahead instead :</p>\n<pre><code>(?!$)M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})\n</code></pre>\n<p>NB: if you append something (eg. &quot;foobar&quot; at the end of the regex, then obviously you'll have to replace <code>(?!$)</code> by <code>(?!f)</code> (where <code>f</code> is the first character of &quot;foobar&quot;).</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 189626,
                                "reputation": 5027,
                                "user_id": 429071,
                                "user_type": "registered",
                                "display_name": "dearsina"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1639653114,
                            "post_id": 68450933,
                            "comment_id": 124406276,
                            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/68450933#comment124406276_68450933",
                            "body": "I added a word boundary to the very beginning so it doesn&#39;t catch words that happen to end with a latin number (if string matching is case insensitive)."
                        }
                    ],
                    "owner": {
                        "account_id": 147439,
                        "reputation": 28854,
                        "user_id": 358556,
                        "user_type": "registered",
                        "accept_rate": 75,
                        "display_name": "mekwall"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": 3,
                    "last_activity_date": 1626776471,
                    "last_edit_date": 1626776471,
                    "creation_date": 1626765342,
                    "answer_id": 68450933,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/68450933#68450933",
                    "body": "<p>Some really amazing answers here but none fit the bill for me since I needed to be able to match only valid Roman numerals within a string without matching empty strings and only match numerals that are on their own (i.e. not within a word).</p>\n<p>Let me present you to <a href=\"https://www.oreilly.com/library/view/regular-expressions-cookbook/9780596802837/ch06s09.html\" rel=\"nofollow noreferrer\">Reilly's Modern roman numerals strict expression</a>:</p>\n<pre><code>^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$\n</code></pre>\n<p>Out of the box it was pretty close to what I needed but it will only match standalone Roman numerals and when changed to match in string it will match empty strings at certain points (where a word begins with an uppercase V, M etc.) and will also give partial matches of invalid Roman numerals such as MMLLVVDD, XXLLVVDD, MMMMDLVX, XVXDLMM and MMMCCMLXXV.</p>\n<p>So, after a bit of modification I and ended up with this:</p>\n<pre><code>(?&lt;![MDCLXVI])(?=[MDCLXVI])M{0,3}(?:C[MD]|D?C{0,3})(?:X[CL]|L?X{0,3})(?:I[XV]|V?I{0,3})[^ ]\\b\n</code></pre>\n<p>The added <a href=\"https://www.regular-expressions.info/lookaround.html#lookbehind\" rel=\"nofollow noreferrer\">negative lookbehind</a> will ensure that it doesn't do partial matches of invalid Roman numerals and locking down the first M to 3 since that is the highest it goes in the <a href=\"https://en.wikipedia.org/wiki/Roman_numerals#Standard_form\" rel=\"nofollow noreferrer\">Roman numeral standard form</a>.</p>\n<p>As of right now, this is the only regular expression that passes my <a href=\"https://github.com/mekwall/romanizr/blob/main/src/__tests__/matchRomans.spec.ts\" rel=\"nofollow noreferrer\">extensive test suit</a> of over 4000 tests that includes all possible Roman numerals from 1-3999, Roman numerals within strings and invalid Roman numerals like the ones I mentioned above.</p>\n<p>Here's a screenshot of it in action from <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a>:\n<a href=\"https://i.stack.imgur.com/TokEY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TokEY.png\" alt=\"4\" /></a></p>\n"
                },
                {
                    "owner": {
                        "account_id": 20016172,
                        "reputation": 2598,
                        "user_id": 14672114,
                        "user_type": "registered",
                        "display_name": "RARE Kpop Manifesto"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1695541392,
                    "creation_date": 1695541392,
                    "answer_id": 77166134,
                    "question_id": 267399,
                    "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression/77166134#77166134",
                    "body": "<p>hope this one is correct - it requires the <em><strong>most basic flavor of ERE only</strong></em> ...</p>\n<p>...as long as you don't mind it also matching the empty string, i.e. <code>str == &quot;&quot;</code></p>\n<hr />\n<pre><code> /^M*(D?C(CC?)?|C?[DM])?(L?X(XX?)?|X?[LC])?(V?I(II?)?|I?[VX])?$/\n</code></pre>\n<hr />\n"
                }
            ],
            "owner": {
                "account_id": 2388,
                "reputation": 31602,
                "user_id": 3314,
                "user_type": "registered",
                "accept_rate": 74,
                "display_name": "Daniel Magliola"
            },
            "comment_count": 0,
            "is_answered": true,
            "accepted_answer_id": 267405,
            "answer_count": 17,
            "score": 194,
            "last_activity_date": 1695589761,
            "creation_date": 1225934965,
            "last_edit_date": 1495542881,
            "question_id": 267399,
            "link": "https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression",
            "title": "How do you match only valid roman numerals with a regular expression?",
            "body": "<p>Thinking about <a href=\"https://stackoverflow.com/questions/267351/how-can-i-convert-from-integers-to-roman-numerals-using-a-syntax-directed-trans\">my other problem</a>, i decided I can't even create a regular expression that will match roman numerals (let alone a context-free grammar that will generate them)</p>\n\n<p>The problem is matching only valid roman numerals. \nEg, 990 is NOT \"XM\", it's \"CMXC\"</p>\n\n<p>My problem in making the regex for this is that in order to allow or not allow certain characters, I need to look back.\nLet's take thousands and hundreds, for example.</p>\n\n<p>I can allow M{0,2}C?M (to allow for 900, 1000, 1900, 2000, 2900 and 3000). However, If the match is on CM, I can't allow following characters to be C or D (because I'm already at 900).</p>\n\n<p>How can I express this in a regex?<br>\nIf it's simply not expressible in a regex, is it expressible in a context-free grammar?</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 8882
}