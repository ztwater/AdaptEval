{
    "items": [
        {
            "tags": [
                "python",
                "download",
                "google-drive-api",
                "urllib2",
                "pydrive"
            ],
            "answers": [
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 3963959,
                                "reputation": 22022,
                                "user_id": 3329664,
                                "user_type": "registered",
                                "display_name": "Billal Begueradj"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1494854216,
                            "post_id": 38516081,
                            "comment_id": 74990079,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/38516081#comment74990079_38516081",
                            "body": "Your answer is more interesting"
                        },
                        {
                            "owner": {
                                "account_id": 56841,
                                "reputation": 4413,
                                "user_id": 170243,
                                "user_type": "registered",
                                "accept_rate": 64,
                                "display_name": "Joe"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1501764478,
                            "post_id": 38516081,
                            "comment_id": 77929768,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/38516081#comment77929768_38516081",
                            "body": "first link broken :("
                        },
                        {
                            "owner": {
                                "account_id": 4858045,
                                "reputation": 2280,
                                "user_id": 3918512,
                                "user_type": "registered",
                                "display_name": "Robin Nabel"
                            },
                            "reply_to_user": {
                                "account_id": 56841,
                                "reputation": 4413,
                                "user_id": 170243,
                                "user_type": "registered",
                                "accept_rate": 64,
                                "display_name": "Joe"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1501852948,
                            "post_id": 38516081,
                            "comment_id": 77976639,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/38516081#comment77976639_38516081",
                            "body": "@Joe fixed the link!"
                        },
                        {
                            "owner": {
                                "account_id": 1833026,
                                "reputation": 1666,
                                "user_id": 1663987,
                                "user_type": "registered",
                                "accept_rate": 78,
                                "display_name": "simpleuser"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1534783586,
                            "post_id": 38516081,
                            "comment_id": 90820468,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/38516081#comment90820468_38516081",
                            "body": "@RobinNabel every link in the answer is now dead"
                        }
                    ],
                    "owner": {
                        "account_id": 4858045,
                        "reputation": 2280,
                        "user_id": 3918512,
                        "user_type": "registered",
                        "display_name": "Robin Nabel"
                    },
                    "comment_count": 4,
                    "is_accepted": false,
                    "score": 10,
                    "last_activity_date": 1542603073,
                    "last_edit_date": 1542603073,
                    "creation_date": 1469144843,
                    "answer_id": 38516081,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/38516081#38516081",
                    "body": "<p><code>PyDrive</code> allows you to download a file with the function <code>GetContentFile()</code>. You can find the function's documentation <a href=\"https://pythonhosted.org/PyDrive/filemanagement.html#download-file-content\" rel=\"noreferrer\">here</a>.</p>\n\n<p>See example below:</p>\n\n<pre><code># Initialize GoogleDriveFile instance with file id.\nfile_obj = drive.CreateFile({'id': '&lt;your file ID here&gt;'})\nfile_obj.GetContentFile('cats.png') # Download file as 'cats.png'.\n</code></pre>\n\n<p>This code assumes that you have an authenticated <code>drive</code> object, the docs on this can be found <a href=\"https://pythonhosted.org/PyDrive/oauth.html#authentication-in-two-lines\" rel=\"noreferrer\">here</a> and <a href=\"https://pythonhosted.org/PyDrive/filemanagement.html\" rel=\"noreferrer\">here</a>.</p>\n\n<p>In the general case this is done like so:</p>\n\n<pre><code>from pydrive.auth import GoogleAuth\n\ngauth = GoogleAuth()\n# Create local webserver which automatically handles authentication.\ngauth.LocalWebserverAuth()\n\n# Create GoogleDrive instance with authenticated GoogleAuth instance.\ndrive = GoogleDrive(gauth)\n</code></pre>\n\n<p>Info on silent authentication on a server can be found <a href=\"https://pythonhosted.org/PyDrive/oauth.html#automatic-and-custom-authentication-with-settings-yaml\" rel=\"noreferrer\">here</a> and involves writing a <code>settings.yaml</code> (example: <a href=\"https://pythonhosted.org/PyDrive/oauth.html#building-your-own-authentication-flow\" rel=\"noreferrer\">here</a>) in which you save the authentication details.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 4587968,
                                "reputation": 74,
                                "user_id": 3722096,
                                "user_type": "registered",
                                "display_name": "user3722096"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1522345203,
                            "post_id": 39225272,
                            "comment_id": 86132281,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/39225272#comment86132281_39225272",
                            "body": "This gives me a 404-not found, using the ID of a public shared file. Any suggestions what could be wrong?"
                        },
                        {
                            "owner": {
                                "account_id": 6523439,
                                "reputation": 17220,
                                "user_id": 5046896,
                                "user_type": "registered",
                                "accept_rate": 86,
                                "display_name": "GoingMyWay"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1561435257,
                            "post_id": 39225272,
                            "comment_id": 100051516,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/39225272#comment100051516_39225272",
                            "body": "How can I download files from Google Drive given links, for example <a href=\"https://drive.google.com/file/d/1I05c4-d9OsNwGZnLx85fR8dnX-yVoTWe/view\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1I05c4-d9OsNwGZnLx85fR8dnX-yVoTWe/vi&zwnj;&#8203;ew</a>"
                        },
                        {
                            "owner": {
                                "account_id": 3698571,
                                "reputation": 319,
                                "user_id": 3079092,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "modbender"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1566738991,
                            "post_id": 39225272,
                            "comment_id": 101743638,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/39225272#comment101743638_39225272",
                            "body": "@turdus-merula Anyway to get the downloading file name as it is stored in drive?"
                        },
                        {
                            "owner": {
                                "account_id": 3698571,
                                "reputation": 319,
                                "user_id": 3079092,
                                "user_type": "registered",
                                "accept_rate": 62,
                                "display_name": "modbender"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1566739548,
                            "post_id": 39225272,
                            "comment_id": 101743758,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/39225272#comment101743758_39225272",
                            "body": "NVM, I got it by doing this: re.search(r&#39;filename\\=\\&quot;(.*)\\&quot;&#39;, response.headers[&#39;Content-Disposition&#39;]).group(1)"
                        },
                        {
                            "owner": {
                                "account_id": 1211489,
                                "reputation": 20913,
                                "user_id": 1179925,
                                "user_type": "registered",
                                "accept_rate": 47,
                                "display_name": "mrgloom"
                            },
                            "edited": false,
                            "score": 7,
                            "creation_date": 1582303651,
                            "post_id": 39225272,
                            "comment_id": 106743738,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/39225272#comment106743738_39225272",
                            "body": "Don&#39;t work and just silently downloads 4,0K file without warning or error  Example link: <a href=\"https://drive.google.com/open?id=0B4qLcYyJmiz0TXdaTExNcW03ejA\" rel=\"nofollow noreferrer\">drive.google.com/open?id=0B4qLcYyJmiz0TXdaTExNcW03ejA</a>"
                        },
                        {
                            "owner": {
                                "account_id": 14982376,
                                "reputation": 935,
                                "user_id": 10816027,
                                "user_type": "registered",
                                "display_name": "Om Rastogi"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1645175107,
                            "post_id": 39225272,
                            "comment_id": 125806213,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/39225272#comment125806213_39225272",
                            "body": "How can we get the name of the document from the link"
                        },
                        {
                            "owner": {
                                "account_id": 5289064,
                                "reputation": 2856,
                                "user_id": 4375377,
                                "user_type": "registered",
                                "accept_rate": 87,
                                "display_name": "Mr Tsjolder from codidact"
                            },
                            "edited": false,
                            "score": 5,
                            "creation_date": 1649427071,
                            "post_id": 39225272,
                            "comment_id": 126879887,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/39225272#comment126879887_39225272",
                            "body": "seems like something has changed behind the scenes and the token stuff does not quite work anymore. However, simply always including <code>confirm=1</code> as parameter seems to be a workaround."
                        },
                        {
                            "owner": {
                                "account_id": 10346755,
                                "reputation": 22444,
                                "user_id": 7631480,
                                "user_type": "registered",
                                "display_name": "CryptoFool"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1657917131,
                            "post_id": 39225272,
                            "comment_id": 128932192,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/39225272#comment128932192_39225272",
                            "body": "This isn&#39;t working for me either.  I can&#39;t see where to include &quot;confirm=1&quot;.  There doesn&#39;t seem to be an argument named &#39;confirm&#39; to &#39;download_file_from_google_drive&#39;.  No matter what I try, I always get a big bunch of HTML rather than the small file I&#39;m hoping to download."
                        },
                        {
                            "owner": {
                                "account_id": 6508067,
                                "reputation": 908,
                                "user_id": 5040208,
                                "user_type": "registered",
                                "display_name": "aysljc"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1665323400,
                            "post_id": 39225272,
                            "comment_id": 130668462,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/39225272#comment130668462_39225272",
                            "body": "This works for me by including &quot;confirm=1&quot;. I&#39;m not sure why it doesn&#39;t work for other people. Note that I&#39;m only downloading .csv files."
                        },
                        {
                            "owner": {
                                "account_id": 4804731,
                                "reputation": 85,
                                "user_id": 3880224,
                                "user_type": "registered",
                                "display_name": "butterflyeffect"
                            },
                            "reply_to_user": {
                                "account_id": 10346755,
                                "reputation": 22444,
                                "user_id": 7631480,
                                "user_type": "registered",
                                "display_name": "CryptoFool"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1676657197,
                            "post_id": 39225272,
                            "comment_id": 133188297,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/39225272#comment133188297_39225272",
                            "body": "Hi @CryptoFool, I had your same question and figured it out. Remove the code getting token and replace the variable <code>token</code> with <code>1</code> in this line: <code>params = { &#39;id&#39; : id, &#39;confirm&#39; : 1 }</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 1592257,
                        "reputation": 8736,
                        "user_id": 1475331,
                        "user_type": "registered",
                        "accept_rate": 82,
                        "display_name": "turdus-merula"
                    },
                    "comment_count": 10,
                    "is_accepted": true,
                    "score": 136,
                    "last_activity_date": 1705877215,
                    "last_edit_date": 1705877215,
                    "creation_date": 1472553541,
                    "answer_id": 39225272,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/39225272#39225272",
                    "body": "<p>If by &quot;drive's url&quot; you mean the <strong>shareable link</strong> of a file on Google Drive, then the following might help:</p>\n<pre><code>import sys\nimport requests\n\n\ndef download_file_from_google_drive(file_id, destination):\n    URL = &quot;https://docs.google.com/uc?export=download&amp;confirm=1&quot;\n\n    session = requests.Session()\n\n    response = session.get(URL, params={&quot;id&quot;: file_id}, stream=True)\n    token = get_confirm_token(response)\n\n    if token:\n        params = {&quot;id&quot;: file_id, &quot;confirm&quot;: token}\n        response = session.get(URL, params=params, stream=True)\n\n    save_response_content(response, destination)\n\n\ndef get_confirm_token(response):\n    for key, value in response.cookies.items():\n        if key.startswith(&quot;download_warning&quot;):\n            return value\n\n    return None\n\n\ndef save_response_content(response, destination):\n    CHUNK_SIZE = 32768\n\n    with open(destination, &quot;wb&quot;) as f:\n        for chunk in response.iter_content(CHUNK_SIZE):\n            if chunk:  # filter out keep-alive new chunks\n                f.write(chunk)\n\n\ndef main():\n    if len(sys.argv) &gt;= 3:\n        file_id = sys.argv[1]\n        destination = sys.argv[2]\n    else:\n        file_id = &quot;TAKE_ID_FROM_SHAREABLE_LINK&quot;\n        destination = &quot;DESTINATION_FILE_ON_YOUR_DISK&quot;\n    print(f&quot;dowload {file_id} to {destination}&quot;)\n    download_file_from_google_drive(file_id, destination)\n\n\nif __name__ == &quot;__main__&quot;:\n    main()\n</code></pre>\n<p>The snipped does not use <em>pydrive</em>, nor the Google Drive SDK, though. It uses the <a href=\"http://docs.python-requests.org\" rel=\"nofollow noreferrer\">requests</a> module (which is, somehow, an alternative to <em>urllib2</em>).</p>\n<p>When downloading large files from Google Drive, a single GET request is not sufficient. A second one is needed - see <a href=\"https://stackoverflow.com/a/39225039/6770522\">wget/curl large file from google drive</a>.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 9030302,
                        "reputation": 41,
                        "user_id": 6728174,
                        "user_type": "registered",
                        "display_name": "Aidan L"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 4,
                    "last_activity_date": 1504462182,
                    "creation_date": 1504462182,
                    "answer_id": 46026421,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/46026421#46026421",
                    "body": "<p>This has also been described above,</p>\n\n<pre><code>   from pydrive.auth import GoogleAuth\n   gauth = GoogleAuth()\n   gauth.LocalWebserverAuth()\n   drive = GoogleDrive(gauth)\n</code></pre>\n\n<p>This creates its own server too do the dirty work of authenticating</p>\n\n<pre><code>   file_obj = drive.CreateFile({'id': '&lt;Put the file ID here&gt;'})\n   file_obj.GetContentFile('Demo.txt') \n</code></pre>\n\n<p>This downloads the file</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 5567814,
                                "reputation": 1641,
                                "user_id": 4414359,
                                "user_type": "registered",
                                "accept_rate": 91,
                                "display_name": "Raksha"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1555694701,
                            "post_id": 47761459,
                            "comment_id": 98205508,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/47761459#comment98205508_47761459",
                            "body": "can&#39;t retrieve file ... <code>&#39;open(&#47;content&#47;data.json&#39;).read()</code> returns <code>&#39;&lt;HTML&gt;\\n&lt;HEAD&gt;\\n&lt;TITLE&gt;Not Found&lt;&#47;TITLE&gt;\\n&lt;&#47;HEAD&gt;\\n&lt;BODY BGCOLOR=&quot;#FFFFFF&quot; TEXT=&quot;#000000&quot;&gt;\\n&lt;H1&gt;Not Found&lt;&#47;H1&gt;\\n&lt;H2&gt;Error 404&lt;&#47;H2&gt;\\n&lt;&#47;BODY&gt;\\n&lt;&#47;HTML&gt;\\n&#39;</code>"
                        },
                        {
                            "owner": {
                                "account_id": 6862711,
                                "reputation": 1614,
                                "user_id": 5276158,
                                "user_type": "registered",
                                "display_name": "ndrplz"
                            },
                            "reply_to_user": {
                                "account_id": 5567814,
                                "reputation": 1641,
                                "user_id": 4414359,
                                "user_type": "registered",
                                "accept_rate": 91,
                                "display_name": "Raksha"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1556008454,
                            "post_id": 47761459,
                            "comment_id": 98282055,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/47761459#comment98282055_47761459",
                            "body": "@Raksha It&#39;s difficult to understand the issue from your comment. If you still encounter this problem, please open a proper issue on <a href=\"https://github.com/ndrplz/google-drive-downloader/issues\" rel=\"nofollow noreferrer\">GitHub</a>"
                        },
                        {
                            "owner": {
                                "account_id": 1211489,
                                "reputation": 20913,
                                "user_id": 1179925,
                                "user_type": "registered",
                                "accept_rate": 47,
                                "display_name": "mrgloom"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1582304020,
                            "post_id": 47761459,
                            "comment_id": 106743912,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/47761459#comment106743912_47761459",
                            "body": "What modification should be done to download this zip file: <a href=\"https://drive.google.com/open?id=0B4qLcYyJmiz0TXdaTExNcW03ejA\" rel=\"nofollow noreferrer\">drive.google.com/open?id=0B4qLcYyJmiz0TXdaTExNcW03ejA</a>  Just using 0B4qLcYyJmiz0TXdaTExNcW03ejA not work."
                        },
                        {
                            "owner": {
                                "account_id": 158078,
                                "reputation": 5163,
                                "user_id": 376454,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Wok"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1608021942,
                            "post_id": 47761459,
                            "comment_id": 115447768,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/47761459#comment115447768_47761459",
                            "body": "You need to add <code>requests</code> to the requirements."
                        },
                        {
                            "owner": {
                                "account_id": 7524187,
                                "reputation": 151,
                                "user_id": 5715047,
                                "user_type": "registered",
                                "display_name": "Dhiraj Gandhi"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1610395718,
                            "post_id": 47761459,
                            "comment_id": 116114780,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/47761459#comment116114780_47761459",
                            "body": "What if I want to access a restricted file using a Gmail id and password?"
                        },
                        {
                            "owner": {
                                "account_id": 12703982,
                                "reputation": 1229,
                                "user_id": 9229923,
                                "user_type": "registered",
                                "display_name": "Jingnan Jia"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1627335076,
                            "post_id": 47761459,
                            "comment_id": 121124333,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/47761459#comment121124333_47761459",
                            "body": "My files are in a folder and the shared link of the folder is <code>https:&#47;&#47;drive.google.com&#47;drive&#47;folders&#47;14gKg6QW3TnwnaHoYTxxT&zwnj;&#8203;r6NzgQWqJufa?usp=sha&zwnj;&#8203;ring</code>, but I can not download this folder using this method."
                        },
                        {
                            "owner": {
                                "account_id": 3835820,
                                "reputation": 745,
                                "user_id": 3180151,
                                "user_type": "registered",
                                "display_name": "Sebastian"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680633338,
                            "post_id": 47761459,
                            "comment_id": 133930396,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/47761459#comment133930396_47761459",
                            "body": "I had <code>GoogleDriveDownloader</code> working just fine for me, but now it appears to have stopped. I&#39;m not sure if something changed on Google&#39;s end: the response contains 200 OK but does not contain any cookies, so the attempt to extract the token breaks and it can&#39;t proceed past that."
                        },
                        {
                            "owner": {
                                "account_id": 3835820,
                                "reputation": 745,
                                "user_id": 3180151,
                                "user_type": "registered",
                                "display_name": "Sebastian"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1680634714,
                            "post_id": 47761459,
                            "comment_id": 133930701,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/47761459#comment133930701_47761459",
                            "body": "I removed the first call in the download method about retrieving the token, and now everything seems to be working fine for me."
                        }
                    ],
                    "owner": {
                        "account_id": 6862711,
                        "reputation": 1614,
                        "user_id": 5276158,
                        "user_type": "registered",
                        "display_name": "ndrplz"
                    },
                    "comment_count": 8,
                    "is_accepted": false,
                    "score": 60,
                    "last_activity_date": 1513026565,
                    "creation_date": 1513026565,
                    "answer_id": 47761459,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/47761459#47761459",
                    "body": "<p>Having had similar needs many times, I made an extra simple class <code>GoogleDriveDownloader</code> starting on the snippet from @user115202 above. You can find the source code <a href=\"https://github.com/ndrplz/google-drive-downloader\" rel=\"noreferrer\">here</a>.</p>\n\n<p>You can also install it through pip:</p>\n\n<pre><code>pip install googledrivedownloader\n</code></pre>\n\n<p>Then usage is as simple as:</p>\n\n<pre><code>from google_drive_downloader import GoogleDriveDownloader as gdd\n\ngdd.download_file_from_google_drive(file_id='1iytA1n2z4go3uVCwE__vIKouTKyIDjEq',\n                                    dest_path='./data/mnist.zip',\n                                    unzip=True)\n</code></pre>\n\n<p>This snippet will download an archive shared in Google Drive. In this case <code>1iytA1n2z4go3uVCwE__vIKouTKyIDjEq</code> is the id of the sharable link got from Google Drive.</p>\n"
                },
                {
                    "owner": {
                        "account_id": 984837,
                        "reputation": 1560,
                        "user_id": 1003629,
                        "user_type": "registered",
                        "accept_rate": 71,
                        "display_name": "Shivendra"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 2,
                    "last_activity_date": 1542994269,
                    "last_edit_date": 1542994269,
                    "creation_date": 1513045965,
                    "answer_id": 47764502,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/47764502#47764502",
                    "body": "<pre><code># Importing [PyDrive][1] OAuth\nfrom pydrive.auth import GoogleAuth\n\ndef download_tracking_file_by_id(file_id, download_dir):\n    gauth = GoogleAuth(settings_file='../settings.yaml')\n    # Try to load saved client credentials\n    gauth.LoadCredentialsFile(\"../credentials.json\")\n    if gauth.credentials is None:\n        # Authenticate if they're not there\n        gauth.LocalWebserverAuth()\n    elif gauth.access_token_expired:\n        # Refresh them if expired\n        gauth.Refresh()\n    else:\n        # Initialize the saved creds\n        gauth.Authorize()\n    # Save the current credentials to a file\n    gauth.SaveCredentialsFile(\"../credentials.json\")\n\n    drive = GoogleDrive(gauth)\n\n    logger.debug(\"Trying to download file_id \" + str(file_id))\n    file6 = drive.CreateFile({'id': file_id})\n    file6.GetContentFile(download_dir+'mapmob.zip')\n    zipfile.ZipFile(download_dir + 'test.zip').extractall(UNZIP_DIR)\n    tracking_data_location = download_dir + 'test.json'\n    return tracking_data_location\n</code></pre>\n\n<p>The above function downloads the file given the file_id to a specified downloads folder. Now the question remains, how to get the file_id? Simply split the url by id= to get the file_id.</p>\n\n<pre><code>file_id = url.split(\"id=\")[1]\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 11334832,
                                "reputation": 7157,
                                "user_id": 8321664,
                                "user_type": "registered",
                                "accept_rate": 100,
                                "display_name": "Nouman"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1586537839,
                            "post_id": 59212187,
                            "comment_id": 108171346,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/59212187#comment108171346_59212187",
                            "body": "<code>bs4.FeatureNotFound: Couldn&#39;t find a tree builder with the features you requested: html5lib. Do you need to install a parser library?</code>"
                        }
                    ],
                    "owner": {
                        "account_id": 4454752,
                        "reputation": 2417,
                        "user_id": 12704700,
                        "user_type": "registered",
                        "display_name": "Spark"
                    },
                    "comment_count": 1,
                    "is_accepted": false,
                    "score": -3,
                    "last_activity_date": 1575631901,
                    "last_edit_date": 1575631901,
                    "creation_date": 1575631394,
                    "answer_id": 59212187,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/59212187#59212187",
                    "body": "<p>You can install  <a href=\"https://pypi.org/project/googleDriveFileDownloader/\" rel=\"nofollow noreferrer\">https://pypi.org/project/googleDriveFileDownloader/</a></p>\n\n<p><code>pip install googleDriveFileDownloader</code></p>\n\n<p>And download the file, here is the sample code to download</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from googleDriveFileDownloader import googleDriveFileDownloader\na = googleDriveFileDownloader()\na.downloadFile(\"https://drive.google.com/uc?id=1O4x8rwGJAh8gRo8sjm0kuKFf6vCEm93G&amp;export=download\")\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 10544243,
                                "reputation": 6794,
                                "user_id": 7769076,
                                "user_type": "registered",
                                "display_name": "Agile Bean"
                            },
                            "edited": false,
                            "score": 11,
                            "creation_date": 1589636610,
                            "post_id": 59476845,
                            "comment_id": 109374658,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/59476845#comment109374658_59476845",
                            "body": "Importantly, if you create the link by  &quot;Share&quot; or &quot;Get shareable link&quot;, the URL doesn&#39;t work - you must replace in the URL &quot;open&quot; to &quot;uc&quot;. In other words, <code>drive.google.com&#47;open?id= ...</code> to <code>drive.google.com&#47;uc?id= ...</code>"
                        },
                        {
                            "owner": {
                                "account_id": 3592593,
                                "reputation": 144,
                                "user_id": 2998262,
                                "user_type": "registered",
                                "display_name": "A.Sherif"
                            },
                            "reply_to_user": {
                                "account_id": 10544243,
                                "reputation": 6794,
                                "user_id": 7769076,
                                "user_type": "registered",
                                "display_name": "Agile Bean"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1623175753,
                            "post_id": 59476845,
                            "comment_id": 120002250,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/59476845#comment120002250_59476845",
                            "body": "I tried to do as @AgileBean stated, but my link looks like this <code>https:&#47;&#47;drive.google.com&#47;file&#47;d&#47;3Xxk5lJSr...UV5eX9M&#47;view?usp&zwnj;&#8203;=sharing</code> so it did not work. So instead, I used the ID parameter <code>gdown --id 3Xxk5lJSr...UV5eX9M</code> where <code>3Xxk5lJSr...UV5eX9M</code> is the file id that you can easily extract from the file&#39;s link."
                        },
                        {
                            "owner": {
                                "account_id": 8935030,
                                "reputation": 353,
                                "user_id": 6666144,
                                "user_type": "registered",
                                "display_name": "Subangkar KrS"
                            },
                            "edited": false,
                            "score": 3,
                            "creation_date": 1628173588,
                            "post_id": 59476845,
                            "comment_id": 121354945,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/59476845#comment121354945_59476845",
                            "body": "The best one. Thanks a lot!!"
                        },
                        {
                            "owner": {
                                "account_id": 106168,
                                "reputation": 5192,
                                "user_id": 282918,
                                "user_type": "registered",
                                "accept_rate": 97,
                                "display_name": "JasonGenX"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1646346235,
                            "post_id": 59476845,
                            "comment_id": 126107258,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/59476845#comment126107258_59476845",
                            "body": "it doesn&#39;t work.... even for public files. I find it ridiculous that the output from this, running on python is &quot;you may be able to use the browser&quot;. Now I only need to download the library that converts Python to a human who knows how to operate a browser and has hands for keyboard and mouse...."
                        },
                        {
                            "owner": {
                                "account_id": 9583053,
                                "reputation": 186,
                                "user_id": 11983522,
                                "user_type": "registered",
                                "display_name": "zetyquickly"
                            },
                            "edited": false,
                            "score": 2,
                            "creation_date": 1654205693,
                            "post_id": 59476845,
                            "comment_id": 128042554,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/59476845#comment128042554_59476845",
                            "body": "Worked for me using when pasted the link that appears after pressing the &quot;Download&quot; button on google drive web page"
                        },
                        {
                            "owner": {
                                "account_id": 25224703,
                                "reputation": 658,
                                "user_id": 19060733,
                                "user_type": "registered",
                                "display_name": "rr_goyal"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1708933219,
                            "post_id": 59476845,
                            "comment_id": 137613008,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/59476845#comment137613008_59476845",
                            "body": "Worked perfectly, I had a zipfile that contained a CSV dataset. Thanks!"
                        }
                    ],
                    "owner": {
                        "account_id": 6936603,
                        "reputation": 4419,
                        "user_id": 5324310,
                        "user_type": "registered",
                        "accept_rate": 100,
                        "display_name": "Vadim"
                    },
                    "comment_count": 6,
                    "is_accepted": false,
                    "score": 89,
                    "last_activity_date": 1695976953,
                    "last_edit_date": 1695976953,
                    "creation_date": 1577265156,
                    "answer_id": 59476845,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/59476845#59476845",
                    "body": "<p>I recommend the <a href=\"https://github.com/wkentaro/gdown\" rel=\"noreferrer\">gdown</a> package.</p>\n<pre><code>pip install gdown\n</code></pre>\n<p>Take your share link</p>\n<p><a href=\"https://drive.google.com/file/d/0B9P1L--7Wd2vNm9zMTJWOGxobkU/view?usp=sharing\" rel=\"noreferrer\">https://drive.google.com/file/d/0B9P1L--7Wd2vNm9zMTJWOGxobkU/view?usp=sharing</a></p>\n<p>and grab the id - eg. 1TLNdIufzwesDbyr_nVTR7Zrx9oRHLM_N by pressing the download button (look for at the link), and swap it in after the id below.</p>\n<pre><code>import gdown\n\nurl = 'https://drive.google.com/uc?id=0B9P1L--7Wd2vNm9zMTJWOGxobkU'\noutput = '20150428_collected_images.tgz'\ngdown.download(url, output, quiet=False)\n</code></pre>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 2352581,
                                "reputation": 3592,
                                "user_id": 2061081,
                                "user_type": "registered",
                                "accept_rate": 36,
                                "display_name": "4xy"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1675112642,
                            "post_id": 62410240,
                            "comment_id": 132855069,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/62410240#comment132855069_62410240",
                            "body": "This official google example has potential <code>AttributeError: &#39;NoneType&#39; object has no attribute &#39;getvalue&#39;</code> in case of HttpError."
                        },
                        {
                            "owner": {
                                "account_id": 7465632,
                                "reputation": 14946,
                                "user_id": 5675325,
                                "user_type": "registered",
                                "accept_rate": 85,
                                "display_name": "Tiago Martins Peres"
                            },
                            "reply_to_user": {
                                "account_id": 2352581,
                                "reputation": 3592,
                                "user_id": 2061081,
                                "user_type": "registered",
                                "accept_rate": 36,
                                "display_name": "4xy"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1675194998,
                            "post_id": 62410240,
                            "comment_id": 132875365,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/62410240#comment132875365_62410240",
                            "body": "@4xy there are ways to solve it, like checking if file is <code>None</code> before <code>return file.getvalue()</code>"
                        },
                        {
                            "owner": {
                                "account_id": 2352581,
                                "reputation": 3592,
                                "user_id": 2061081,
                                "user_type": "registered",
                                "accept_rate": 36,
                                "display_name": "4xy"
                            },
                            "edited": false,
                            "score": 0,
                            "creation_date": 1675202338,
                            "post_id": 62410240,
                            "comment_id": 132877266,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/62410240#comment132877266_62410240",
                            "body": "There is always a solution... Like e.g. removing try except"
                        }
                    ],
                    "owner": {
                        "account_id": 7465632,
                        "reputation": 14946,
                        "user_id": 5675325,
                        "user_type": "registered",
                        "accept_rate": 85,
                        "display_name": "Tiago Martins Peres"
                    },
                    "comment_count": 3,
                    "is_accepted": false,
                    "score": 8,
                    "last_activity_date": 1667914427,
                    "last_edit_date": 1667914427,
                    "creation_date": 1592315792,
                    "answer_id": 62410240,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/62410240#62410240",
                    "body": "<p><a href=\"https://developers.google.com/drive/api/guides/manage-downloads#python\" rel=\"noreferrer\">There's in the docs</a> a function that downloads a file when we provide an ID of the file to download,</p>\n<pre><code>from __future__ import print_function\n\nimport io\n\nimport google.auth\nfrom googleapiclient.discovery import build\nfrom googleapiclient.errors import HttpError\nfrom googleapiclient.http import MediaIoBaseDownload\n\n\ndef download_file(real_file_id):\n    &quot;&quot;&quot;Downloads a file\n    Args:\n        real_file_id: ID of the file to download\n    Returns : IO object with location.\n\n    Load pre-authorized user credentials from the environment.\n    TODO(developer) - See https://developers.google.com/identity\n    for guides on implementing OAuth2 for the application.\n    &quot;&quot;&quot;\n    creds, _ = google.auth.default()\n\n    try:\n        # create drive api client\n        service = build('drive', 'v3', credentials=creds)\n\n        file_id = real_file_id\n\n        # pylint: disable=maybe-no-member\n        request = service.files().get_media(fileId=file_id)\n        file = io.BytesIO()\n        downloader = MediaIoBaseDownload(file, request)\n        done = False\n        while done is False:\n            status, done = downloader.next_chunk()\n            print(F'Download {int(status.progress() * 100)}.')\n\n    except HttpError as error:\n        print(F'An error occurred: {error}')\n        file = None\n\n    return file.getvalue()\n\n\nif __name__ == '__main__':\n    download_file(real_file_id='1KuPmvGq8yoYgbfW74OENMCB5H0n_2Jm9')\n</code></pre>\n<hr />\n<p>This bears the question:</p>\n<blockquote>\n<p><strong>How do we get the file ID to download the file?</strong></p>\n</blockquote>\n<p>Generally speaking, a URL from a shared file from Google Drive looks like this</p>\n<pre><code>https://drive.google.com/file/d/1HV6vf8pB-EYnjcJcH65eGZVMa2v2tcMh/view?usp=sharing\n</code></pre>\n<p>where <code>1HV6vf8pB-EYnjcJcH65eGZVMa2v2tcMh</code> corresponds to fileID.</p>\n<p>You can simply copy it from the URL or, if you prefer, it's also possible to create a function to get the fileID from the URL.</p>\n<p>For instance, given the following <code>url = https://drive.google.com/file/d/1HV6vf8pB-EYnjcJcH65eGZVMa2v2tcMh/view?usp=sharing</code>,</p>\n<pre><code>def url_to_id(url):\n    x = url.split(&quot;/&quot;)\n    return x[5]\n</code></pre>\n<p>Printing x will give</p>\n<pre><code>['https:', '', 'drive.google.com', 'file', 'd', '1HV6vf8pB-EYnjcJcH65eGZVMa2v2tcMh', 'view?usp=sharing']\n</code></pre>\n<p>And so, as we want to return the 6th array value, we use <code>x[5]</code>.</p>\n"
                },
                {
                    "comments": [
                        {
                            "owner": {
                                "account_id": 19472778,
                                "reputation": 1007,
                                "user_id": 14244758,
                                "user_type": "registered",
                                "display_name": "grantr"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1660575273,
                            "post_id": 63568558,
                            "comment_id": 129558689,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/63568558#comment129558689_63568558",
                            "body": "good example of using json credentials w/google api client"
                        },
                        {
                            "owner": {
                                "account_id": 8120484,
                                "reputation": 351,
                                "user_id": 6117419,
                                "user_type": "registered",
                                "display_name": "English Rain"
                            },
                            "edited": false,
                            "score": 1,
                            "creation_date": 1697100095,
                            "post_id": 63568558,
                            "comment_id": 136237854,
                            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/63568558#comment136237854_63568558",
                            "body": "Thank you, this is best working answer as on date for downloading from Google Drive API using Python."
                        }
                    ],
                    "owner": {
                        "account_id": 308674,
                        "reputation": 2256,
                        "user_id": 620699,
                        "user_type": "registered",
                        "accept_rate": 42,
                        "display_name": "RayB"
                    },
                    "comment_count": 2,
                    "is_accepted": false,
                    "score": 15,
                    "last_activity_date": 1598302178,
                    "creation_date": 1598302178,
                    "answer_id": 63568558,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/63568558#63568558",
                    "body": "<p>Here's an easy way to do it with no third-party libraries and a service account.</p>\n<p>pip install <code>google-api-core</code> and <code>google-api-python-client</code></p>\n<pre class=\"lang-py prettyprint-override\"><code>from googleapiclient.discovery import build\nfrom googleapiclient.http import MediaIoBaseDownload\nfrom google.oauth2 import service_account\nimport io\n\ncredz = {} #put json credentials her from service account or the like\n# More info: https://cloud.google.com/docs/authentication\n\ncredentials = service_account.Credentials.from_service_account_info(credz)\ndrive_service = build('drive', 'v3', credentials=credentials)\n\nfile_id = '0BwwA4oUTeiV1UVNwOHItT0xfa2M'\nrequest = drive_service.files().get_media(fileId=file_id)\n#fh = io.BytesIO() # this can be used to keep in memory\nfh = io.FileIO('file.tar.gz', 'wb') # this can be used to write to disk\ndownloader = MediaIoBaseDownload(fh, request)\ndone = False\nwhile done is False:\n    status, done = downloader.next_chunk()\n    print(&quot;Download %d%%.&quot; % int(status.progress() * 100))\n\n\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 2131922,
                        "reputation": 1621,
                        "user_id": 1892584,
                        "user_type": "registered",
                        "display_name": "Att Righ"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1646006005,
                    "creation_date": 1646006005,
                    "answer_id": 71289384,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/71289384#71289384",
                    "body": "<p>This example is based on an similar to RayB, but keeps the file in memory\nand is a little simpler, and you can paste it into colab and it works.</p>\n<pre><code>import googleapiclient.discovery\nimport oauth2client.client\nfrom google.colab import auth\nauth.authenticate_user()\n\ndef download_gdrive(id):\n  creds = oauth2client.client.GoogleCredentials.get_application_default()\n  service = googleapiclient.discovery.build('drive', 'v3', credentials=creds)\n  return service.files().get_media(fileId=id).execute()\n\na = download_gdrive(&quot;1F-yaQB8fdsfsdafm2l8WFjhEiYSHZrCcr&quot;)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 20613645,
                        "reputation": 308,
                        "user_id": 15132261,
                        "user_type": "registered",
                        "display_name": "Pavn"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 1,
                    "last_activity_date": 1651701353,
                    "creation_date": 1651701353,
                    "answer_id": 72119870,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/72119870#72119870",
                    "body": "<p>I tried using google Colaboratory: <a href=\"https://colab.research.google.com/\" rel=\"nofollow noreferrer\">https://colab.research.google.com/</a></p>\n<p>Suppose your sharable link is <a href=\"https://docs.google.com/spreadsheets/d/12hiI0NK7M0KEfscMfyBaLT9gxcZMleeu/edit?usp=sharing&amp;ouid=102608702203033509854&amp;rtpof=true&amp;sd=true\" rel=\"nofollow noreferrer\">https://docs.google.com/spreadsheets/d/12hiI0NK7M0KEfscMfyBaLT9gxcZMleeu/edit?usp=sharing&amp;ouid=102608702203033509854&amp;rtpof=true&amp;sd=true</a></p>\n<p>all you need is id that is 12hiI0NK7M0KEfscMfyBaLT9gxcZMleeu</p>\n<p>command in cell</p>\n<pre><code>!gdown 12hiI0NK7M0KEfscMfyBaLT9gxcZMleeu\n</code></pre>\n<p>run the cell and you will see that file is downloaded in /content/Amazon_Reviews.xlsx</p>\n<p>Note: one should know how to use Google colab</p>\n"
                },
                {
                    "owner": {
                        "account_id": 19193949,
                        "reputation": 135,
                        "user_id": 14023117,
                        "user_type": "registered",
                        "display_name": "Lin Chi Yu"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 5,
                    "last_activity_date": 1664851224,
                    "creation_date": 1664851224,
                    "answer_id": 73942654,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/73942654#73942654",
                    "body": "<pre><code>import requests\n\ndef download_file_from_google_drive(id, destination):\n    URL = &quot;https://docs.google.com/uc?export=download&quot;\n\n    session = requests.Session()\n\n    response = session.get(URL, params = { 'id' : id , 'confirm': 1 }, stream = True)\n    token = get_confirm_token(response)\n\n    if token:\n        params = { 'id' : id, 'confirm' : token }\n        response = session.get(URL, params = params, stream = True)\n\n    save_response_content(response, destination)    \n\ndef get_confirm_token(response):\n    for key, value in response.cookies.items():\n        if key.startswith('download_warning'):\n            return value\n\n    return None\n\ndef save_response_content(response, destination):\n    CHUNK_SIZE = 32768\n\n    with open(destination, &quot;wb&quot;) as f:\n        for chunk in response.iter_content(CHUNK_SIZE):\n            if chunk: # filter out keep-alive new chunks\n                f.write(chunk)\n\nif __name__ == &quot;__main__&quot;:\n    file_id = 'TAKE ID FROM SHAREABLE LINK'\n    destination = 'DESTINATION FILE ON YOUR DISK'\n    download_file_from_google_drive(file_id, destination)\n</code></pre>\n<p>Just repeating the accepted answer but adding <code>confirm=1</code> parameter so it always downloads even if the file is too big</p>\n"
                },
                {
                    "owner": {
                        "account_id": 6100729,
                        "reputation": 81,
                        "user_id": 4759864,
                        "user_type": "registered",
                        "display_name": "rickh"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1682625378,
                    "creation_date": 1682625378,
                    "answer_id": 76124168,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/76124168#76124168",
                    "body": "<p>I used the accepted solution for a long period, but now google has changed the download warning response so it does not work anymore.</p>\n<p>I am now using the API as it is a safer way to ensure it won't suddenly stop, but I could also make it work parsing the response HTML looking for the download url as following:</p>\n<pre><code>import requests\nfrom html.parser import HTMLParser\n\nclass MyHTMLParser(HTMLParser):\n    def __init__(self):\n        super().__init__()\n        self.action = None\n\n    def handle_starttag(self, tag, attrs):\n        if tag == &quot;form&quot;:\n            for name, value in attrs:\n                if name == &quot;id&quot; and value == &quot;download-form&quot;:\n                    for name, value in attrs:\n                        if name == &quot;action&quot;:\n                            self.action = value\n\nDOWNLOAD_URL = 'https://docs.google.com/uc?export=download'\nsession = requests.Session()\nresponse = session.get(file_url, params={'id': id}, stream=True)\n\ncontent_type = response.headers['content-type']\nif content_type == 'text/html; charset=utf-8':\n    parser = MyHTMLParser()\n    parser.feed(response.text)\n    download_url = parser.action\n    response = session.post(download_url, stream=True)\n    \nfile = response.content\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 11757339,
                        "reputation": 511,
                        "user_id": 9016861,
                        "user_type": "registered",
                        "display_name": "Jedi Knight"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1684686887,
                    "creation_date": 1684686887,
                    "answer_id": 76300904,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/76300904#76300904",
                    "body": "<p>Fixed version for 2023 + generator for tracking progress</p>\n<pre><code>import requests\n\n\ndef download_file_from_google_drive(file_id, destination, chunk_size=32768):\n    url = &quot;https://docs.google.com/uc?export=download&quot;\n\n    session = requests.Session()\n    params = {'id': file_id, 'confirm': 1}\n    response = session.get(url, params=params, stream=True)\n\n    for i, chunk_size_ in save_response_content(response, destination, chunk_size):\n        yield i, chunk_size_\n\n\ndef get_confirm_token(response):\n    for key, value in response.cookies.items():\n        if key.startswith('download_warning'):\n            return value\n\n    return None\n\n\ndef save_response_content(response, destination, chunk_size):\n    with open(destination, &quot;wb&quot;) as f:\n        for i, chunk in enumerate(response.iter_content(chunk_size)):\n            if chunk:  # filter out keep-alive new chunks\n                f.write(chunk)\n                yield i, chunk_size\n\n\nif __name__ == '__main__':\n    file_id = '...'\n    destination = '...'\n    for i, chunk_size in download_file_from_google_drive(file_id, destination):\n        print(i, chunk_size)\n</code></pre>\n"
                },
                {
                    "owner": {
                        "account_id": 13130886,
                        "reputation": 677,
                        "user_id": 9485417,
                        "user_type": "registered",
                        "display_name": "Francisco Rode&#241;o Sanchez"
                    },
                    "comment_count": 0,
                    "is_accepted": false,
                    "score": 0,
                    "last_activity_date": 1689524174,
                    "creation_date": 1689524174,
                    "answer_id": 76699268,
                    "question_id": 38511444,
                    "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url/76699268#76699268",
                    "body": "<p>For those who are interested in the <strong>link</strong> to download via HTTP, the <a href=\"https://developers.google.com/drive/api/reference/rest/v2/files\" rel=\"nofollow noreferrer\">Google API</a> and most clients provide a <code>webContentLink</code> field containing it (note the file permissions to use it)</p>\n"
                }
            ],
            "owner": {
                "account_id": 3887020,
                "reputation": 2724,
                "user_id": 3218127,
                "user_type": "registered",
                "accept_rate": 59,
                "display_name": "rkatkam"
            },
            "comment_count": 0,
            "is_answered": true,
            "accepted_answer_id": 39225272,
            "answer_count": 15,
            "score": 117,
            "last_activity_date": 1705877215,
            "creation_date": 1469124576,
            "last_edit_date": 1593515304,
            "question_id": 38511444,
            "link": "https://stackoverflow.com/questions/38511444/python-download-files-from-google-drive-using-url",
            "title": "Python: download files from google drive using url",
            "body": "<p>I am trying to download files from google drive and all I have is the drive's URL.</p>\n<p>I have read about google API that talks about some <code>drive_service</code> and <code>MedioIO</code>, which also requires some credentials( mainly JSON <code>file/OAuth</code>). But I am unable to get any idea about how it is working.</p>\n<p>Also, tried <code>urllib2.urlretrieve</code>, but my case is to get files from the drive. Tried <code>wget</code> too but no use.</p>\n<p>Tried <code>PyDrive</code> library. It has good upload functions to drive but no download options.</p>\n<p>Any help will be appreciated.\nThanks.</p>\n"
        }
    ],
    "has_more": false,
    "quota_max": 10000,
    "quota_remaining": 8147
}